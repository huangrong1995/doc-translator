var Sx=s=>{throw TypeError(s)};var Bm=(s,t,e)=>t.has(s)||Sx("Cannot "+e);var De=(s,t,e)=>(Bm(s,t,"read from private field"),e?e.call(s):t.get(s)),ni=(s,t,e)=>t.has(s)?Sx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),es=(s,t,e,n)=>(Bm(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),si=(s,t,e)=>(Bm(s,t,"access private method"),e);var Ax=(s,t,e,n)=>({set _(i){es(s,t,i,e)},get _(){return De(s,t,n)}});function rO(s,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in s)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(s,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();var Rr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qy(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Im={exports:{}},Wl={};var Ex;function aO(){if(Ex)return Wl;Ex=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,i,a){var l=null;if(a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:s,type:n,key:l,ref:i!==void 0?i:null,props:a}}return Wl.Fragment=t,Wl.jsx=e,Wl.jsxs=e,Wl}var Cx;function oO(){return Cx||(Cx=1,Im.exports=aO()),Im.exports}var $=oO(),Fm={exports:{}},qt={};var Tx;function lO(){if(Tx)return qt;Tx=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),g=Symbol.iterator;function y(P){return P===null||typeof P!="object"?null:(P=g&&P[g]||P["@@iterator"],typeof P=="function"?P:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,S={};function x(P,U,K){this.props=P,this.context=U,this.refs=S,this.updater=K||w}x.prototype.isReactComponent={},x.prototype.setState=function(P,U){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,U,"setState")},x.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function A(){}A.prototype=x.prototype;function E(P,U,K){this.props=P,this.context=U,this.refs=S,this.updater=K||w}var R=E.prototype=new A;R.constructor=E,v(R,x.prototype),R.isPureReactComponent=!0;var T=Array.isArray;function O(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function I(P,U,K){var tt=K.ref;return{$$typeof:s,type:P,key:U,ref:tt!==void 0?tt:null,props:K}}function G(P,U){return I(P.type,U,P.props)}function W(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function F(P){var U={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(K){return U[K]})}var Y=/\/+/g;function k(P,U){return typeof P=="object"&&P!==null&&P.key!=null?F(""+P.key):U.toString(36)}function J(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(O,O):(P.status="pending",P.then(function(U){P.status==="pending"&&(P.status="fulfilled",P.value=U)},function(U){P.status==="pending"&&(P.status="rejected",P.reason=U)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function z(P,U,K,tt,it){var xt=typeof P;(xt==="undefined"||xt==="boolean")&&(P=null);var ut=!1;if(P===null)ut=!0;else switch(xt){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(P.$$typeof){case s:case t:ut=!0;break;case p:return ut=P._init,z(ut(P._payload),U,K,tt,it)}}if(ut)return it=it(P),ut=tt===""?"."+k(P,0):tt,T(it)?(K="",ut!=null&&(K=ut.replace(Y,"$&/")+"/"),z(it,U,K,"",function(Lt){return Lt})):it!=null&&(W(it)&&(it=G(it,K+(it.key==null||P&&P.key===it.key?"":(""+it.key).replace(Y,"$&/")+"/")+ut)),U.push(it)),1;ut=0;var vt=tt===""?".":tt+":";if(T(P))for(var Et=0;Et<P.length;Et++)tt=P[Et],xt=vt+k(tt,Et),ut+=z(tt,U,K,xt,it);else if(Et=y(P),typeof Et=="function")for(P=Et.call(P),Et=0;!(tt=P.next()).done;)tt=tt.value,xt=vt+k(tt,Et++),ut+=z(tt,U,K,xt,it);else if(xt==="object"){if(typeof P.then=="function")return z(J(P),U,K,tt,it);throw U=String(P),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return ut}function j(P,U,K){if(P==null)return P;var tt=[],it=0;return z(P,tt,"","",function(xt){return U.call(K,xt,it++)}),tt}function q(P){if(P._status===-1){var U=P._result;U=U(),U.then(function(K){(P._status===0||P._status===-1)&&(P._status=1,P._result=K)},function(K){(P._status===0||P._status===-1)&&(P._status=2,P._result=K)}),P._status===-1&&(P._status=0,P._result=U)}if(P._status===1)return P._result.default;throw P._result}var nt=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},pt={map:j,forEach:function(P,U,K){j(P,function(){U.apply(this,arguments)},K)},count:function(P){var U=0;return j(P,function(){U++}),U},toArray:function(P){return j(P,function(U){return U})||[]},only:function(P){if(!W(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return qt.Activity=f,qt.Children=pt,qt.Component=x,qt.Fragment=e,qt.Profiler=i,qt.PureComponent=E,qt.StrictMode=n,qt.Suspense=h,qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,qt.__COMPILER_RUNTIME={__proto__:null,c:function(P){return D.H.useMemoCache(P)}},qt.cache=function(P){return function(){return P.apply(null,arguments)}},qt.cacheSignal=function(){return null},qt.cloneElement=function(P,U,K){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var tt=v({},P.props),it=P.key;if(U!=null)for(xt in U.key!==void 0&&(it=""+U.key),U)!N.call(U,xt)||xt==="key"||xt==="__self"||xt==="__source"||xt==="ref"&&U.ref===void 0||(tt[xt]=U[xt]);var xt=arguments.length-2;if(xt===1)tt.children=K;else if(1<xt){for(var ut=Array(xt),vt=0;vt<xt;vt++)ut[vt]=arguments[vt+2];tt.children=ut}return I(P.type,it,tt)},qt.createContext=function(P){return P={$$typeof:l,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:a,_context:P},P},qt.createElement=function(P,U,K){var tt,it={},xt=null;if(U!=null)for(tt in U.key!==void 0&&(xt=""+U.key),U)N.call(U,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(it[tt]=U[tt]);var ut=arguments.length-2;if(ut===1)it.children=K;else if(1<ut){for(var vt=Array(ut),Et=0;Et<ut;Et++)vt[Et]=arguments[Et+2];it.children=vt}if(P&&P.defaultProps)for(tt in ut=P.defaultProps,ut)it[tt]===void 0&&(it[tt]=ut[tt]);return I(P,xt,it)},qt.createRef=function(){return{current:null}},qt.forwardRef=function(P){return{$$typeof:c,render:P}},qt.isValidElement=W,qt.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:q}},qt.memo=function(P,U){return{$$typeof:d,type:P,compare:U===void 0?null:U}},qt.startTransition=function(P){var U=D.T,K={};D.T=K;try{var tt=P(),it=D.S;it!==null&&it(K,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(O,nt)}catch(xt){nt(xt)}finally{U!==null&&K.types!==null&&(U.types=K.types),D.T=U}},qt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},qt.use=function(P){return D.H.use(P)},qt.useActionState=function(P,U,K){return D.H.useActionState(P,U,K)},qt.useCallback=function(P,U){return D.H.useCallback(P,U)},qt.useContext=function(P){return D.H.useContext(P)},qt.useDebugValue=function(){},qt.useDeferredValue=function(P,U){return D.H.useDeferredValue(P,U)},qt.useEffect=function(P,U){return D.H.useEffect(P,U)},qt.useEffectEvent=function(P){return D.H.useEffectEvent(P)},qt.useId=function(){return D.H.useId()},qt.useImperativeHandle=function(P,U,K){return D.H.useImperativeHandle(P,U,K)},qt.useInsertionEffect=function(P,U){return D.H.useInsertionEffect(P,U)},qt.useLayoutEffect=function(P,U){return D.H.useLayoutEffect(P,U)},qt.useMemo=function(P,U){return D.H.useMemo(P,U)},qt.useOptimistic=function(P,U){return D.H.useOptimistic(P,U)},qt.useReducer=function(P,U,K){return D.H.useReducer(P,U,K)},qt.useRef=function(P){return D.H.useRef(P)},qt.useState=function(P){return D.H.useState(P)},qt.useSyncExternalStore=function(P,U,K){return D.H.useSyncExternalStore(P,U,K)},qt.useTransition=function(){return D.H.useTransition()},qt.version="19.2.3",qt}var Rx;function Vd(){return Rx||(Rx=1,Fm.exports=lO()),Fm.exports}var L=Vd();const St=qy(L),$d=rO({__proto__:null,default:St},[L]);var zm={exports:{}},Kl={},jm={exports:{}},Um={};var kx;function cO(){return kx||(kx=1,(function(s){function t(z,j){var q=z.length;z.push(j);t:for(;0<q;){var nt=q-1>>>1,pt=z[nt];if(0<i(pt,j))z[nt]=j,z[q]=pt,q=nt;else break t}}function e(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var j=z[0],q=z.pop();if(q!==j){z[0]=q;t:for(var nt=0,pt=z.length,P=pt>>>1;nt<P;){var U=2*(nt+1)-1,K=z[U],tt=U+1,it=z[tt];if(0>i(K,q))tt<pt&&0>i(it,K)?(z[nt]=it,z[tt]=q,nt=tt):(z[nt]=K,z[U]=q,nt=U);else if(tt<pt&&0>i(it,q))z[nt]=it,z[tt]=q,nt=tt;else break t}}return j}function i(z,j){var q=z.sortIndex-j.sortIndex;return q!==0?q:z.id-j.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;s.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();s.unstable_now=function(){return l.now()-c}}var h=[],d=[],p=1,f=null,g=3,y=!1,w=!1,v=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function R(z){for(var j=e(d);j!==null;){if(j.callback===null)n(d);else if(j.startTime<=z)n(d),j.sortIndex=j.expirationTime,t(h,j);else break;j=e(d)}}function T(z){if(v=!1,R(z),!w)if(e(h)!==null)w=!0,O||(O=!0,F());else{var j=e(d);j!==null&&J(T,j.startTime-z)}}var O=!1,D=-1,N=5,I=-1;function G(){return S?!0:!(s.unstable_now()-I<N)}function W(){if(S=!1,O){var z=s.unstable_now();I=z;var j=!0;try{t:{w=!1,v&&(v=!1,A(D),D=-1),y=!0;var q=g;try{e:{for(R(z),f=e(h);f!==null&&!(f.expirationTime>z&&G());){var nt=f.callback;if(typeof nt=="function"){f.callback=null,g=f.priorityLevel;var pt=nt(f.expirationTime<=z);if(z=s.unstable_now(),typeof pt=="function"){f.callback=pt,R(z),j=!0;break e}f===e(h)&&n(h),R(z)}else n(h);f=e(h)}if(f!==null)j=!0;else{var P=e(d);P!==null&&J(T,P.startTime-z),j=!1}}break t}finally{f=null,g=q,y=!1}j=void 0}}finally{j?F():O=!1}}}var F;if(typeof E=="function")F=function(){E(W)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,k=Y.port2;Y.port1.onmessage=W,F=function(){k.postMessage(null)}}else F=function(){x(W,0)};function J(z,j){D=x(function(){z(s.unstable_now())},j)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(z){z.callback=null},s.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<z?Math.floor(1e3/z):5},s.unstable_getCurrentPriorityLevel=function(){return g},s.unstable_next=function(z){switch(g){case 1:case 2:case 3:var j=3;break;default:j=g}var q=g;g=j;try{return z()}finally{g=q}},s.unstable_requestPaint=function(){S=!0},s.unstable_runWithPriority=function(z,j){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var q=g;g=z;try{return j()}finally{g=q}},s.unstable_scheduleCallback=function(z,j,q){var nt=s.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?nt+q:nt):q=nt,z){case 1:var pt=-1;break;case 2:pt=250;break;case 5:pt=1073741823;break;case 4:pt=1e4;break;default:pt=5e3}return pt=q+pt,z={id:p++,callback:j,priorityLevel:z,startTime:q,expirationTime:pt,sortIndex:-1},q>nt?(z.sortIndex=q,t(d,z),e(h)===null&&z===e(d)&&(v?(A(D),D=-1):v=!0,J(T,q-nt))):(z.sortIndex=pt,t(h,z),w||y||(w=!0,O||(O=!0,F()))),z},s.unstable_shouldYield=G,s.unstable_wrapCallback=function(z){var j=g;return function(){var q=g;g=j;try{return z.apply(this,arguments)}finally{g=q}}}})(Um)),Um}var Mx;function uO(){return Mx||(Mx=1,jm.exports=cO()),jm.exports}var Hm={exports:{}},kn={};var Dx;function hO(){if(Dx)return kn;Dx=1;var s=Vd();function t(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(h,d,p){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:f==null?null:""+f,children:h,containerInfo:d,implementation:p}}var l=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,kn.createPortal=function(h,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return a(h,d,null,p)},kn.flushSync=function(h){var d=l.T,p=n.p;try{if(l.T=null,n.p=2,h)return h()}finally{l.T=d,n.p=p,n.d.f()}},kn.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(h,d))},kn.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},kn.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var p=d.as,f=c(p,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?n.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:f,integrity:g,fetchPriority:y}):p==="script"&&n.d.X(h,{crossOrigin:f,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},kn.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);n.d.M(h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(h)},kn.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,f=c(p,d.crossOrigin);n.d.L(h,p,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},kn.preloadModule=function(h,d){if(typeof h=="string")if(d){var p=c(d.as,d.crossOrigin);n.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(h)},kn.requestFormReset=function(h){n.d.r(h)},kn.unstable_batchedUpdates=function(h,d){return h(d)},kn.useFormState=function(h,d,p){return l.H.useFormState(h,d,p)},kn.useFormStatus=function(){return l.H.useHostTransitionStatus()},kn.version="19.2.3",kn}var Ox;function QA(){if(Ox)return Hm.exports;Ox=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Hm.exports=hO(),Hm.exports}var Nx;function dO(){if(Nx)return Kl;Nx=1;var s=uO(),t=Vd(),e=QA();function n(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function h(r){if(a(r)!==r)throw Error(n(188))}function d(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(n(188));return o!==r?null:r}for(var u=r,m=o;;){var b=u.return;if(b===null)break;var _=b.alternate;if(_===null){if(m=b.return,m!==null){u=m;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===u)return h(b),r;if(_===m)return h(b),o;_=_.sibling}throw Error(n(188))}if(u.return!==m.return)u=b,m=_;else{for(var C=!1,B=b.child;B;){if(B===u){C=!0,u=b,m=_;break}if(B===m){C=!0,m=b,u=_;break}B=B.sibling}if(!C){for(B=_.child;B;){if(B===u){C=!0,u=_,m=b;break}if(B===m){C=!0,m=_,u=b;break}B=B.sibling}if(!C)throw Error(n(189))}}if(u.alternate!==m)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?r:o}function p(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=p(r),o!==null)return o;r=r.sibling}return null}var f=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),E=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function F(r){return r===null||typeof r!="object"?null:(r=W&&r[W]||r["@@iterator"],typeof r=="function"?r:null)}var Y=Symbol.for("react.client.reference");function k(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===Y?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case v:return"Fragment";case x:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case O:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case w:return"Portal";case E:return r.displayName||"Context";case A:return(r._context.displayName||"Context")+".Consumer";case R:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case D:return o=r.displayName||null,o!==null?o:k(r.type)||"Memo";case N:o=r._payload,r=r._init;try{return k(r(o))}catch{}}return null}var J=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},nt=[],pt=-1;function P(r){return{current:r}}function U(r){0>pt||(r.current=nt[pt],nt[pt]=null,pt--)}function K(r,o){pt++,nt[pt]=r.current,r.current=o}var tt=P(null),it=P(null),xt=P(null),ut=P(null);function vt(r,o){switch(K(xt,o),K(it,r),K(tt,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?q_(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=q_(o),r=X_(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}U(tt),K(tt,r)}function Et(){U(tt),U(it),U(xt)}function Lt(r){r.memoizedState!==null&&K(ut,r);var o=tt.current,u=X_(o,r.type);o!==u&&(K(it,r),K(tt,u))}function Ot(r){it.current===r&&(U(tt),U(it)),ut.current===r&&(U(ut),Gl._currentValue=q)}var Ht,le;function M(r){if(Ht===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Ht=o&&o[1]||"",le=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ht+r+le}var ft=!1;function ct(r,o){if(!r||ft)return"";ft=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var gt=function(){throw Error()};if(Object.defineProperty(gt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(gt,[])}catch(ht){var lt=ht}Reflect.construct(r,[],gt)}else{try{gt.call()}catch(ht){lt=ht}r.call(gt.prototype)}}else{try{throw Error()}catch(ht){lt=ht}(gt=r())&&typeof gt.catch=="function"&&gt.catch(function(){})}}catch(ht){if(ht&&lt&&typeof ht.stack=="string")return[ht.stack,lt.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=m.DetermineComponentFrameRoot(),C=_[0],B=_[1];if(C&&B){var X=C.split(`
`),at=B.split(`
`);for(b=m=0;m<X.length&&!X[m].includes("DetermineComponentFrameRoot");)m++;for(;b<at.length&&!at[b].includes("DetermineComponentFrameRoot");)b++;if(m===X.length||b===at.length)for(m=X.length-1,b=at.length-1;1<=m&&0<=b&&X[m]!==at[b];)b--;for(;1<=m&&0<=b;m--,b--)if(X[m]!==at[b]){if(m!==1||b!==1)do if(m--,b--,0>b||X[m]!==at[b]){var dt=`
`+X[m].replace(" at new "," at ");return r.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",r.displayName)),dt}while(1<=m&&0<=b);break}}}finally{ft=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?M(u):""}function V(r,o){switch(r.tag){case 26:case 27:case 5:return M(r.type);case 16:return M("Lazy");case 13:return r.child!==o&&o!==null?M("Suspense Fallback"):M("Suspense");case 19:return M("SuspenseList");case 0:case 15:return ct(r.type,!1);case 11:return ct(r.type.render,!1);case 1:return ct(r.type,!0);case 31:return M("Activity");default:return""}}function H(r){try{var o="",u=null;do o+=V(r,u),u=r,r=r.return;while(r);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Q=Object.prototype.hasOwnProperty,yt=s.unstable_scheduleCallback,bt=s.unstable_cancelCallback,st=s.unstable_shouldYield,_t=s.unstable_requestPaint,Ct=s.unstable_now,At=s.unstable_getCurrentPriorityLevel,It=s.unstable_ImmediatePriority,he=s.unstable_UserBlockingPriority,Kt=s.unstable_NormalPriority,un=s.unstable_LowPriority,Nn=s.unstable_IdlePriority,Pn=s.log,$n=s.unstable_setDisableYieldValue,me=null,Ge=null;function Ln(r){if(typeof Pn=="function"&&$n(r),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(me,r)}catch{}}var Ae=Math.clz32?Math.clz32:xs,Ra=Math.log,zr=Math.LN2;function xs(r){return r>>>=0,r===0?32:31-(Ra(r)/zr|0)|0}var Wi=256,wi=262144,as=4194304;function Bn(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Gt(r,o,u){var m=r.pendingLanes;if(m===0)return 0;var b=0,_=r.suspendedLanes,C=r.pingedLanes;r=r.warmLanes;var B=m&134217727;return B!==0?(m=B&~_,m!==0?b=Bn(m):(C&=B,C!==0?b=Bn(C):u||(u=B&~r,u!==0&&(b=Bn(u))))):(B=m&~_,B!==0?b=Bn(B):C!==0?b=Bn(C):u||(u=m&~r,u!==0&&(b=Bn(u)))),b===0?0:o!==0&&o!==b&&(o&_)===0&&(_=b&-b,u=o&-o,_>=u||_===32&&(u&4194048)!==0)?o:b}function ke(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function hn(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rn(){var r=as;return as<<=1,(as&62914560)===0&&(as=4194304),r}function Ki(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function Ne(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Gn(r,o,u,m,b,_){var C=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var B=r.entanglements,X=r.expirationTimes,at=r.hiddenUpdates;for(u=C&~u;0<u;){var dt=31-Ae(u),gt=1<<dt;B[dt]=0,X[dt]=-1;var lt=at[dt];if(lt!==null)for(at[dt]=null,dt=0;dt<lt.length;dt++){var ht=lt[dt];ht!==null&&(ht.lane&=-536870913)}u&=~gt}m!==0&&jr(r,m,0),_!==0&&b===0&&r.tag!==0&&(r.suspendedLanes|=_&~(C&~o))}function jr(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var m=31-Ae(o);r.entangledLanes|=o,r.entanglements[m]=r.entanglements[m]|1073741824|u&261930}function qn(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var m=31-Ae(u),b=1<<m;b&o|r[m]&o&&(r[m]|=o),u&=~b}}function Xn(r,o){var u=o&-o;return u=(u&42)!==0?1:ka(u),(u&(r.suspendedLanes|o))!==0?0:u}function ka(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Us(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Cf(){var r=j.p;return r!==0?r:(r=window.event,r===void 0?32:gx(r.type))}function Ob(r,o){var u=j.p;try{return j.p=r,o()}finally{j.p=u}}var Zi=Math.random().toString(36).slice(2),yn="__reactFiber$"+Zi,Yn="__reactProps$"+Zi,Ma="__reactContainer$"+Zi,Tf="__reactEvents$"+Zi,Yk="__reactListeners$"+Zi,Wk="__reactHandles$"+Zi,Nb="__reactResources$"+Zi,al="__reactMarker$"+Zi;function Rf(r){delete r[yn],delete r[Yn],delete r[Tf],delete r[Yk],delete r[Wk]}function Da(r){var o=r[yn];if(o)return o;for(var u=r.parentNode;u;){if(o=u[Ma]||u[yn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=tx(r);r!==null;){if(u=r[yn])return u;r=tx(r)}return o}r=u,u=r.parentNode}return null}function Oa(r){if(r=r[yn]||r[Ma]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function ol(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(n(33))}function Na(r){var o=r[Nb];return o||(o=r[Nb]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function dn(r){r[al]=!0}var Pb=new Set,Lb={};function Ur(r,o){Pa(r,o),Pa(r+"Capture",o)}function Pa(r,o){for(Lb[r]=o,r=0;r<o.length;r++)Pb.add(o[r])}var Kk=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bb={},Ib={};function Zk(r){return Q.call(Ib,r)?!0:Q.call(Bb,r)?!1:Kk.test(r)?Ib[r]=!0:(Bb[r]=!0,!1)}function ru(r,o,u){if(Zk(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function au(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function _i(r,o,u,m){if(m===null)r.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+m)}}function Ss(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Fb(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Qk(r,o,u){var m=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,_=m.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return b.call(this)},set:function(C){u=""+C,_.call(this,C)}}),Object.defineProperty(r,o,{enumerable:m.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function kf(r){if(!r._valueTracker){var o=Fb(r)?"checked":"value";r._valueTracker=Qk(r,o,""+r[o])}}function zb(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),m="";return r&&(m=Fb(r)?r.checked?"true":"false":r.value),r=m,r!==u?(o.setValue(r),!0):!1}function ou(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Jk=/[\n"\\]/g;function As(r){return r.replace(Jk,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Mf(r,o,u,m,b,_,C,B){r.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.type=C:r.removeAttribute("type"),o!=null?C==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Ss(o)):r.value!==""+Ss(o)&&(r.value=""+Ss(o)):C!=="submit"&&C!=="reset"||r.removeAttribute("value"),o!=null?Df(r,C,Ss(o)):u!=null?Df(r,C,Ss(u)):m!=null&&r.removeAttribute("value"),b==null&&_!=null&&(r.defaultChecked=!!_),b!=null&&(r.checked=b&&typeof b!="function"&&typeof b!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?r.name=""+Ss(B):r.removeAttribute("name")}function jb(r,o,u,m,b,_,C,B){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),o!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){kf(r);return}u=u!=null?""+Ss(u):"",o=o!=null?""+Ss(o):u,B||o===r.value||(r.value=o),r.defaultValue=o}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,r.checked=B?r.checked:!!m,r.defaultChecked=!!m,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(r.name=C),kf(r)}function Df(r,o,u){o==="number"&&ou(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function La(r,o,u,m){if(r=r.options,o){o={};for(var b=0;b<u.length;b++)o["$"+u[b]]=!0;for(u=0;u<r.length;u++)b=o.hasOwnProperty("$"+r[u].value),r[u].selected!==b&&(r[u].selected=b),b&&m&&(r[u].defaultSelected=!0)}else{for(u=""+Ss(u),o=null,b=0;b<r.length;b++){if(r[b].value===u){r[b].selected=!0,m&&(r[b].defaultSelected=!0);return}o!==null||r[b].disabled||(o=r[b])}o!==null&&(o.selected=!0)}}function Ub(r,o,u){if(o!=null&&(o=""+Ss(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+Ss(u):""}function Hb(r,o,u,m){if(o==null){if(m!=null){if(u!=null)throw Error(n(92));if(J(m)){if(1<m.length)throw Error(n(93));m=m[0]}u=m}u==null&&(u=""),o=u}u=Ss(o),r.defaultValue=u,m=r.textContent,m===u&&m!==""&&m!==null&&(r.value=m),kf(r)}function Ba(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var tM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vb(r,o,u){var m=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":m?r.setProperty(o,u):typeof u!="number"||u===0||tM.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function $b(r,o,u){if(o!=null&&typeof o!="object")throw Error(n(62));if(r=r.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?r.setProperty(m,""):m==="float"?r.cssFloat="":r[m]="");for(var b in o)m=o[b],o.hasOwnProperty(b)&&u[b]!==m&&Vb(r,b,m)}else for(var _ in o)o.hasOwnProperty(_)&&Vb(r,_,o[_])}function Of(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function lu(r){return nM.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function xi(){}var Nf=null;function Pf(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ia=null,Fa=null;function Gb(r){var o=Oa(r);if(o&&(r=o.stateNode)){var u=r[Yn]||null;t:switch(r=o.stateNode,o.type){case"input":if(Mf(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+As(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var m=u[o];if(m!==r&&m.form===r.form){var b=m[Yn]||null;if(!b)throw Error(n(90));Mf(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<u.length;o++)m=u[o],m.form===r.form&&zb(m)}break t;case"textarea":Ub(r,u.value,u.defaultValue);break t;case"select":o=u.value,o!=null&&La(r,!!u.multiple,o,!1)}}}var Lf=!1;function qb(r,o,u){if(Lf)return r(o,u);Lf=!0;try{var m=r(o);return m}finally{if(Lf=!1,(Ia!==null||Fa!==null)&&(Wu(),Ia&&(o=Ia,r=Fa,Fa=Ia=null,Gb(o),r)))for(o=0;o<r.length;o++)Gb(r[o])}}function ll(r,o){var u=r.stateNode;if(u===null)return null;var m=u[Yn]||null;if(m===null)return null;u=m[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break t;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bf=!1;if(Si)try{var cl={};Object.defineProperty(cl,"passive",{get:function(){Bf=!0}}),window.addEventListener("test",cl,cl),window.removeEventListener("test",cl,cl)}catch{Bf=!1}var Qi=null,If=null,cu=null;function Xb(){if(cu)return cu;var r,o=If,u=o.length,m,b="value"in Qi?Qi.value:Qi.textContent,_=b.length;for(r=0;r<u&&o[r]===b[r];r++);var C=u-r;for(m=1;m<=C&&o[u-m]===b[_-m];m++);return cu=b.slice(r,1<m?1-m:void 0)}function uu(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function hu(){return!0}function Yb(){return!1}function Wn(r){function o(u,m,b,_,C){this._reactName=u,this._targetInst=b,this.type=m,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var B in r)r.hasOwnProperty(B)&&(u=r[B],this[B]=u?u(_):_[B]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?hu:Yb,this.isPropagationStopped=Yb,this}return f(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=hu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=hu)},persist:function(){},isPersistent:hu}),o}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},du=Wn(Hr),ul=f({},Hr,{view:0,detail:0}),sM=Wn(ul),Ff,zf,hl,fu=f({},ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uf,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==hl&&(hl&&r.type==="mousemove"?(Ff=r.screenX-hl.screenX,zf=r.screenY-hl.screenY):zf=Ff=0,hl=r),Ff)},movementY:function(r){return"movementY"in r?r.movementY:zf}}),Wb=Wn(fu),iM=f({},fu,{dataTransfer:0}),rM=Wn(iM),aM=f({},ul,{relatedTarget:0}),jf=Wn(aM),oM=f({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),lM=Wn(oM),cM=f({},Hr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),uM=Wn(cM),hM=f({},Hr,{data:0}),Kb=Wn(hM),dM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mM(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=pM[r])?!!o[r]:!1}function Uf(){return mM}var gM=f({},ul,{key:function(r){if(r.key){var o=dM[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=uu(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?fM[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uf,charCode:function(r){return r.type==="keypress"?uu(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?uu(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),yM=Wn(gM),vM=f({},fu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zb=Wn(vM),bM=f({},ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uf}),wM=Wn(bM),_M=f({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),xM=Wn(_M),SM=f({},fu,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),AM=Wn(SM),EM=f({},Hr,{newState:0,oldState:0}),CM=Wn(EM),TM=[9,13,27,32],Hf=Si&&"CompositionEvent"in window,dl=null;Si&&"documentMode"in document&&(dl=document.documentMode);var RM=Si&&"TextEvent"in window&&!dl,Qb=Si&&(!Hf||dl&&8<dl&&11>=dl),Jb=" ",t0=!1;function e0(r,o){switch(r){case"keyup":return TM.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function n0(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var za=!1;function kM(r,o){switch(r){case"compositionend":return n0(o);case"keypress":return o.which!==32?null:(t0=!0,Jb);case"textInput":return r=o.data,r===Jb&&t0?null:r;default:return null}}function MM(r,o){if(za)return r==="compositionend"||!Hf&&e0(r,o)?(r=Xb(),cu=If=Qi=null,za=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Qb&&o.locale!=="ko"?null:o.data;default:return null}}var DM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s0(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!DM[r.type]:o==="textarea"}function i0(r,o,u,m){Ia?Fa?Fa.push(m):Fa=[m]:Ia=m,o=nh(o,"onChange"),0<o.length&&(u=new du("onChange","change",null,u,m),r.push({event:u,listeners:o}))}var fl=null,pl=null;function OM(r){j_(r,0)}function pu(r){var o=ol(r);if(zb(o))return r}function r0(r,o){if(r==="change")return o}var a0=!1;if(Si){var Vf;if(Si){var $f="oninput"in document;if(!$f){var o0=document.createElement("div");o0.setAttribute("oninput","return;"),$f=typeof o0.oninput=="function"}Vf=$f}else Vf=!1;a0=Vf&&(!document.documentMode||9<document.documentMode)}function l0(){fl&&(fl.detachEvent("onpropertychange",c0),pl=fl=null)}function c0(r){if(r.propertyName==="value"&&pu(pl)){var o=[];i0(o,pl,r,Pf(r)),qb(OM,o)}}function NM(r,o,u){r==="focusin"?(l0(),fl=o,pl=u,fl.attachEvent("onpropertychange",c0)):r==="focusout"&&l0()}function PM(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return pu(pl)}function LM(r,o){if(r==="click")return pu(o)}function BM(r,o){if(r==="input"||r==="change")return pu(o)}function IM(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var os=typeof Object.is=="function"?Object.is:IM;function ml(r,o){if(os(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),m=Object.keys(o);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var b=u[m];if(!Q.call(o,b)||!os(r[b],o[b]))return!1}return!0}function u0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function h0(r,o){var u=u0(r);r=0;for(var m;u;){if(u.nodeType===3){if(m=r+u.textContent.length,r<=o&&m>=o)return{node:u,offset:o-r};r=m}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=u0(u)}}function d0(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?d0(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function f0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=ou(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=ou(r.document)}return o}function Gf(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var FM=Si&&"documentMode"in document&&11>=document.documentMode,ja=null,qf=null,gl=null,Xf=!1;function p0(r,o,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Xf||ja==null||ja!==ou(m)||(m=ja,"selectionStart"in m&&Gf(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),gl&&ml(gl,m)||(gl=m,m=nh(qf,"onSelect"),0<m.length&&(o=new du("onSelect","select",null,o,u),r.push({event:o,listeners:m}),o.target=ja)))}function Vr(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var Ua={animationend:Vr("Animation","AnimationEnd"),animationiteration:Vr("Animation","AnimationIteration"),animationstart:Vr("Animation","AnimationStart"),transitionrun:Vr("Transition","TransitionRun"),transitionstart:Vr("Transition","TransitionStart"),transitioncancel:Vr("Transition","TransitionCancel"),transitionend:Vr("Transition","TransitionEnd")},Yf={},m0={};Si&&(m0=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function $r(r){if(Yf[r])return Yf[r];if(!Ua[r])return r;var o=Ua[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in m0)return Yf[r]=o[u];return r}var g0=$r("animationend"),y0=$r("animationiteration"),v0=$r("animationstart"),zM=$r("transitionrun"),jM=$r("transitionstart"),UM=$r("transitioncancel"),b0=$r("transitionend"),w0=new Map,Wf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wf.push("scrollEnd");function Hs(r,o){w0.set(r,o),Ur(o,[r])}var mu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Es=[],Ha=0,Kf=0;function gu(){for(var r=Ha,o=Kf=Ha=0;o<r;){var u=Es[o];Es[o++]=null;var m=Es[o];Es[o++]=null;var b=Es[o];Es[o++]=null;var _=Es[o];if(Es[o++]=null,m!==null&&b!==null){var C=m.pending;C===null?b.next=b:(b.next=C.next,C.next=b),m.pending=b}_!==0&&_0(u,b,_)}}function yu(r,o,u,m){Es[Ha++]=r,Es[Ha++]=o,Es[Ha++]=u,Es[Ha++]=m,Kf|=m,r.lanes|=m,r=r.alternate,r!==null&&(r.lanes|=m)}function Zf(r,o,u,m){return yu(r,o,u,m),vu(r)}function Gr(r,o){return yu(r,null,null,o),vu(r)}function _0(r,o,u){r.lanes|=u;var m=r.alternate;m!==null&&(m.lanes|=u);for(var b=!1,_=r.return;_!==null;)_.childLanes|=u,m=_.alternate,m!==null&&(m.childLanes|=u),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(b=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,b&&o!==null&&(b=31-Ae(u),r=_.hiddenUpdates,m=r[b],m===null?r[b]=[o]:m.push(o),o.lane=u|536870912),_):null}function vu(r){if(50<Fl)throw Fl=0,am=null,Error(n(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Va={};function HM(r,o,u,m){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(r,o,u,m){return new HM(r,o,u,m)}function Qf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ai(r,o){var u=r.alternate;return u===null?(u=ls(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function x0(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function bu(r,o,u,m,b,_){var C=0;if(m=r,typeof r=="function")Qf(r)&&(C=1);else if(typeof r=="string")C=XD(r,u,tt.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case I:return r=ls(31,u,o,b),r.elementType=I,r.lanes=_,r;case v:return qr(u.children,b,_,o);case S:C=8,b|=24;break;case x:return r=ls(12,u,o,b|2),r.elementType=x,r.lanes=_,r;case T:return r=ls(13,u,o,b),r.elementType=T,r.lanes=_,r;case O:return r=ls(19,u,o,b),r.elementType=O,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case E:C=10;break t;case A:C=9;break t;case R:C=11;break t;case D:C=14;break t;case N:C=16,m=null;break t}C=29,u=Error(n(130,r===null?"null":typeof r,"")),m=null}return o=ls(C,u,o,b),o.elementType=r,o.type=m,o.lanes=_,o}function qr(r,o,u,m){return r=ls(7,r,m,o),r.lanes=u,r}function Jf(r,o,u){return r=ls(6,r,null,o),r.lanes=u,r}function S0(r){var o=ls(18,null,null,0);return o.stateNode=r,o}function tp(r,o,u){return o=ls(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var A0=new WeakMap;function Cs(r,o){if(typeof r=="object"&&r!==null){var u=A0.get(r);return u!==void 0?u:(o={value:r,source:o,stack:H(o)},A0.set(r,o),o)}return{value:r,source:o,stack:H(o)}}var $a=[],Ga=0,wu=null,yl=0,Ts=[],Rs=0,Ji=null,Qs=1,Js="";function Ei(r,o){$a[Ga++]=yl,$a[Ga++]=wu,wu=r,yl=o}function E0(r,o,u){Ts[Rs++]=Qs,Ts[Rs++]=Js,Ts[Rs++]=Ji,Ji=r;var m=Qs;r=Js;var b=32-Ae(m)-1;m&=~(1<<b),u+=1;var _=32-Ae(o)+b;if(30<_){var C=b-b%5;_=(m&(1<<C)-1).toString(32),m>>=C,b-=C,Qs=1<<32-Ae(o)+b|u<<b|m,Js=_+r}else Qs=1<<_|u<<b|m,Js=r}function ep(r){r.return!==null&&(Ei(r,1),E0(r,1,0))}function np(r){for(;r===wu;)wu=$a[--Ga],$a[Ga]=null,yl=$a[--Ga],$a[Ga]=null;for(;r===Ji;)Ji=Ts[--Rs],Ts[Rs]=null,Js=Ts[--Rs],Ts[Rs]=null,Qs=Ts[--Rs],Ts[Rs]=null}function C0(r,o){Ts[Rs++]=Qs,Ts[Rs++]=Js,Ts[Rs++]=Ji,Qs=o.id,Js=o.overflow,Ji=r}var vn=null,Ce=null,re=!1,tr=null,ks=!1,sp=Error(n(519));function er(r){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vl(Cs(o,r)),sp}function T0(r){var o=r.stateNode,u=r.type,m=r.memoizedProps;switch(o[yn]=r,o[Yn]=m,u){case"dialog":ne("cancel",o),ne("close",o);break;case"iframe":case"object":case"embed":ne("load",o);break;case"video":case"audio":for(u=0;u<jl.length;u++)ne(jl[u],o);break;case"source":ne("error",o);break;case"img":case"image":case"link":ne("error",o),ne("load",o);break;case"details":ne("toggle",o);break;case"input":ne("invalid",o),jb(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":ne("invalid",o);break;case"textarea":ne("invalid",o),Hb(o,m.value,m.defaultValue,m.children)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||m.suppressHydrationWarning===!0||$_(o.textContent,u)?(m.popover!=null&&(ne("beforetoggle",o),ne("toggle",o)),m.onScroll!=null&&ne("scroll",o),m.onScrollEnd!=null&&ne("scrollend",o),m.onClick!=null&&(o.onclick=xi),o=!0):o=!1,o||er(r,!0)}function R0(r){for(vn=r.return;vn;)switch(vn.tag){case 5:case 31:case 13:ks=!1;return;case 27:case 3:ks=!0;return;default:vn=vn.return}}function qa(r){if(r!==vn)return!1;if(!re)return R0(r),re=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||_m(r.type,r.memoizedProps)),u=!u),u&&Ce&&er(r),R0(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));Ce=J_(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));Ce=J_(r)}else o===27?(o=Ce,mr(r.type)?(r=Cm,Cm=null,Ce=r):Ce=o):Ce=vn?Ds(r.stateNode.nextSibling):null;return!0}function Xr(){Ce=vn=null,re=!1}function ip(){var r=tr;return r!==null&&(Jn===null?Jn=r:Jn.push.apply(Jn,r),tr=null),r}function vl(r){tr===null?tr=[r]:tr.push(r)}var rp=P(null),Yr=null,Ci=null;function nr(r,o,u){K(rp,o._currentValue),o._currentValue=u}function Ti(r){r._currentValue=rp.current,U(rp)}function ap(r,o,u){for(;r!==null;){var m=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),r===u)break;r=r.return}}function op(r,o,u,m){var b=r.child;for(b!==null&&(b.return=r);b!==null;){var _=b.dependencies;if(_!==null){var C=b.child;_=_.firstContext;t:for(;_!==null;){var B=_;_=b;for(var X=0;X<o.length;X++)if(B.context===o[X]){_.lanes|=u,B=_.alternate,B!==null&&(B.lanes|=u),ap(_.return,u,r),m||(C=null);break t}_=B.next}}else if(b.tag===18){if(C=b.return,C===null)throw Error(n(341));C.lanes|=u,_=C.alternate,_!==null&&(_.lanes|=u),ap(C,u,r),C=null}else C=b.child;if(C!==null)C.return=b;else for(C=b;C!==null;){if(C===r){C=null;break}if(b=C.sibling,b!==null){b.return=C.return,C=b;break}C=C.return}b=C}}function Xa(r,o,u,m){r=null;for(var b=o,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var C=b.alternate;if(C===null)throw Error(n(387));if(C=C.memoizedProps,C!==null){var B=b.type;os(b.pendingProps.value,C.value)||(r!==null?r.push(B):r=[B])}}else if(b===ut.current){if(C=b.alternate,C===null)throw Error(n(387));C.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(r!==null?r.push(Gl):r=[Gl])}b=b.return}r!==null&&op(o,r,u,m),o.flags|=262144}function _u(r){for(r=r.firstContext;r!==null;){if(!os(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Wr(r){Yr=r,Ci=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function bn(r){return k0(Yr,r)}function xu(r,o){return Yr===null&&Wr(r),k0(r,o)}function k0(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Ci===null){if(r===null)throw Error(n(308));Ci=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Ci=Ci.next=o;return u}var VM=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,m){r.push(m)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},$M=s.unstable_scheduleCallback,GM=s.unstable_NormalPriority,qe={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lp(){return{controller:new VM,data:new Map,refCount:0}}function bl(r){r.refCount--,r.refCount===0&&$M(GM,function(){r.controller.abort()})}var wl=null,cp=0,Ya=0,Wa=null;function qM(r,o){if(wl===null){var u=wl=[];cp=0,Ya=dm(),Wa={status:"pending",value:void 0,then:function(m){u.push(m)}}}return cp++,o.then(M0,M0),o}function M0(){if(--cp===0&&wl!==null){Wa!==null&&(Wa.status="fulfilled");var r=wl;wl=null,Ya=0,Wa=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function XM(r,o){var u=[],m={status:"pending",value:null,reason:null,then:function(b){u.push(b)}};return r.then(function(){m.status="fulfilled",m.value=o;for(var b=0;b<u.length;b++)(0,u[b])(o)},function(b){for(m.status="rejected",m.reason=b,b=0;b<u.length;b++)(0,u[b])(void 0)}),m}var D0=z.S;z.S=function(r,o){p_=Ct(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&qM(r,o),D0!==null&&D0(r,o)};var Kr=P(null);function up(){var r=Kr.current;return r!==null?r:xe.pooledCache}function Su(r,o){o===null?K(Kr,Kr.current):K(Kr,o.pool)}function O0(){var r=up();return r===null?null:{parent:qe._currentValue,pool:r}}var Ka=Error(n(460)),hp=Error(n(474)),Au=Error(n(542)),Eu={then:function(){}};function N0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function P0(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(xi,xi),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,B0(r),r;default:if(typeof o.status=="string")o.then(xi,xi);else{if(r=xe,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=o,r.status="pending",r.then(function(m){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=m}},function(m){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,B0(r),r}throw Qr=o,Ka}}function Zr(r){try{var o=r._init;return o(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Qr=u,Ka):u}}var Qr=null;function L0(){if(Qr===null)throw Error(n(459));var r=Qr;return Qr=null,r}function B0(r){if(r===Ka||r===Au)throw Error(n(483))}var Za=null,_l=0;function Cu(r){var o=_l;return _l+=1,Za===null&&(Za=[]),P0(Za,r,o)}function xl(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Tu(r,o){throw o.$$typeof===g?Error(n(525)):(r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function I0(r){function o(et,Z){if(r){var rt=et.deletions;rt===null?(et.deletions=[Z],et.flags|=16):rt.push(Z)}}function u(et,Z){if(!r)return null;for(;Z!==null;)o(et,Z),Z=Z.sibling;return null}function m(et){for(var Z=new Map;et!==null;)et.key!==null?Z.set(et.key,et):Z.set(et.index,et),et=et.sibling;return Z}function b(et,Z){return et=Ai(et,Z),et.index=0,et.sibling=null,et}function _(et,Z,rt){return et.index=rt,r?(rt=et.alternate,rt!==null?(rt=rt.index,rt<Z?(et.flags|=67108866,Z):rt):(et.flags|=67108866,Z)):(et.flags|=1048576,Z)}function C(et){return r&&et.alternate===null&&(et.flags|=67108866),et}function B(et,Z,rt,mt){return Z===null||Z.tag!==6?(Z=Jf(rt,et.mode,mt),Z.return=et,Z):(Z=b(Z,rt),Z.return=et,Z)}function X(et,Z,rt,mt){var zt=rt.type;return zt===v?dt(et,Z,rt.props.children,mt,rt.key):Z!==null&&(Z.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===N&&Zr(zt)===Z.type)?(Z=b(Z,rt.props),xl(Z,rt),Z.return=et,Z):(Z=bu(rt.type,rt.key,rt.props,null,et.mode,mt),xl(Z,rt),Z.return=et,Z)}function at(et,Z,rt,mt){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==rt.containerInfo||Z.stateNode.implementation!==rt.implementation?(Z=tp(rt,et.mode,mt),Z.return=et,Z):(Z=b(Z,rt.children||[]),Z.return=et,Z)}function dt(et,Z,rt,mt,zt){return Z===null||Z.tag!==7?(Z=qr(rt,et.mode,mt,zt),Z.return=et,Z):(Z=b(Z,rt),Z.return=et,Z)}function gt(et,Z,rt){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Jf(""+Z,et.mode,rt),Z.return=et,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return rt=bu(Z.type,Z.key,Z.props,null,et.mode,rt),xl(rt,Z),rt.return=et,rt;case w:return Z=tp(Z,et.mode,rt),Z.return=et,Z;case N:return Z=Zr(Z),gt(et,Z,rt)}if(J(Z)||F(Z))return Z=qr(Z,et.mode,rt,null),Z.return=et,Z;if(typeof Z.then=="function")return gt(et,Cu(Z),rt);if(Z.$$typeof===E)return gt(et,xu(et,Z),rt);Tu(et,Z)}return null}function lt(et,Z,rt,mt){var zt=Z!==null?Z.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return zt!==null?null:B(et,Z,""+rt,mt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case y:return rt.key===zt?X(et,Z,rt,mt):null;case w:return rt.key===zt?at(et,Z,rt,mt):null;case N:return rt=Zr(rt),lt(et,Z,rt,mt)}if(J(rt)||F(rt))return zt!==null?null:dt(et,Z,rt,mt,null);if(typeof rt.then=="function")return lt(et,Z,Cu(rt),mt);if(rt.$$typeof===E)return lt(et,Z,xu(et,rt),mt);Tu(et,rt)}return null}function ht(et,Z,rt,mt,zt){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return et=et.get(rt)||null,B(Z,et,""+mt,zt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case y:return et=et.get(mt.key===null?rt:mt.key)||null,X(Z,et,mt,zt);case w:return et=et.get(mt.key===null?rt:mt.key)||null,at(Z,et,mt,zt);case N:return mt=Zr(mt),ht(et,Z,rt,mt,zt)}if(J(mt)||F(mt))return et=et.get(rt)||null,dt(Z,et,mt,zt,null);if(typeof mt.then=="function")return ht(et,Z,rt,Cu(mt),zt);if(mt.$$typeof===E)return ht(et,Z,rt,xu(Z,mt),zt);Tu(Z,mt)}return null}function Mt(et,Z,rt,mt){for(var zt=null,ce=null,Bt=Z,Qt=Z=0,ie=null;Bt!==null&&Qt<rt.length;Qt++){Bt.index>Qt?(ie=Bt,Bt=null):ie=Bt.sibling;var ue=lt(et,Bt,rt[Qt],mt);if(ue===null){Bt===null&&(Bt=ie);break}r&&Bt&&ue.alternate===null&&o(et,Bt),Z=_(ue,Z,Qt),ce===null?zt=ue:ce.sibling=ue,ce=ue,Bt=ie}if(Qt===rt.length)return u(et,Bt),re&&Ei(et,Qt),zt;if(Bt===null){for(;Qt<rt.length;Qt++)Bt=gt(et,rt[Qt],mt),Bt!==null&&(Z=_(Bt,Z,Qt),ce===null?zt=Bt:ce.sibling=Bt,ce=Bt);return re&&Ei(et,Qt),zt}for(Bt=m(Bt);Qt<rt.length;Qt++)ie=ht(Bt,et,Qt,rt[Qt],mt),ie!==null&&(r&&ie.alternate!==null&&Bt.delete(ie.key===null?Qt:ie.key),Z=_(ie,Z,Qt),ce===null?zt=ie:ce.sibling=ie,ce=ie);return r&&Bt.forEach(function(wr){return o(et,wr)}),re&&Ei(et,Qt),zt}function Vt(et,Z,rt,mt){if(rt==null)throw Error(n(151));for(var zt=null,ce=null,Bt=Z,Qt=Z=0,ie=null,ue=rt.next();Bt!==null&&!ue.done;Qt++,ue=rt.next()){Bt.index>Qt?(ie=Bt,Bt=null):ie=Bt.sibling;var wr=lt(et,Bt,ue.value,mt);if(wr===null){Bt===null&&(Bt=ie);break}r&&Bt&&wr.alternate===null&&o(et,Bt),Z=_(wr,Z,Qt),ce===null?zt=wr:ce.sibling=wr,ce=wr,Bt=ie}if(ue.done)return u(et,Bt),re&&Ei(et,Qt),zt;if(Bt===null){for(;!ue.done;Qt++,ue=rt.next())ue=gt(et,ue.value,mt),ue!==null&&(Z=_(ue,Z,Qt),ce===null?zt=ue:ce.sibling=ue,ce=ue);return re&&Ei(et,Qt),zt}for(Bt=m(Bt);!ue.done;Qt++,ue=rt.next())ue=ht(Bt,et,Qt,ue.value,mt),ue!==null&&(r&&ue.alternate!==null&&Bt.delete(ue.key===null?Qt:ue.key),Z=_(ue,Z,Qt),ce===null?zt=ue:ce.sibling=ue,ce=ue);return r&&Bt.forEach(function(iO){return o(et,iO)}),re&&Ei(et,Qt),zt}function we(et,Z,rt,mt){if(typeof rt=="object"&&rt!==null&&rt.type===v&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case y:t:{for(var zt=rt.key;Z!==null;){if(Z.key===zt){if(zt=rt.type,zt===v){if(Z.tag===7){u(et,Z.sibling),mt=b(Z,rt.props.children),mt.return=et,et=mt;break t}}else if(Z.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===N&&Zr(zt)===Z.type){u(et,Z.sibling),mt=b(Z,rt.props),xl(mt,rt),mt.return=et,et=mt;break t}u(et,Z);break}else o(et,Z);Z=Z.sibling}rt.type===v?(mt=qr(rt.props.children,et.mode,mt,rt.key),mt.return=et,et=mt):(mt=bu(rt.type,rt.key,rt.props,null,et.mode,mt),xl(mt,rt),mt.return=et,et=mt)}return C(et);case w:t:{for(zt=rt.key;Z!==null;){if(Z.key===zt)if(Z.tag===4&&Z.stateNode.containerInfo===rt.containerInfo&&Z.stateNode.implementation===rt.implementation){u(et,Z.sibling),mt=b(Z,rt.children||[]),mt.return=et,et=mt;break t}else{u(et,Z);break}else o(et,Z);Z=Z.sibling}mt=tp(rt,et.mode,mt),mt.return=et,et=mt}return C(et);case N:return rt=Zr(rt),we(et,Z,rt,mt)}if(J(rt))return Mt(et,Z,rt,mt);if(F(rt)){if(zt=F(rt),typeof zt!="function")throw Error(n(150));return rt=zt.call(rt),Vt(et,Z,rt,mt)}if(typeof rt.then=="function")return we(et,Z,Cu(rt),mt);if(rt.$$typeof===E)return we(et,Z,xu(et,rt),mt);Tu(et,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint"?(rt=""+rt,Z!==null&&Z.tag===6?(u(et,Z.sibling),mt=b(Z,rt),mt.return=et,et=mt):(u(et,Z),mt=Jf(rt,et.mode,mt),mt.return=et,et=mt),C(et)):u(et,Z)}return function(et,Z,rt,mt){try{_l=0;var zt=we(et,Z,rt,mt);return Za=null,zt}catch(Bt){if(Bt===Ka||Bt===Au)throw Bt;var ce=ls(29,Bt,null,et.mode);return ce.lanes=mt,ce.return=et,ce}}}var Jr=I0(!0),F0=I0(!1),sr=!1;function dp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fp(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function ir(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function rr(r,o,u){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(de&2)!==0){var b=m.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),m.pending=o,o=vu(r),_0(r,null,u),o}return yu(r,m,o,u),vu(r)}function Sl(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var m=o.lanes;m&=r.pendingLanes,u|=m,o.lanes=u,qn(r,u)}}function pp(r,o){var u=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var b=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?b=_=C:_=_.next=C,u=u.next}while(u!==null);_===null?b=_=o:_=_.next=o}else b=_=o;u={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:m.shared,callbacks:m.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var mp=!1;function Al(){if(mp){var r=Wa;if(r!==null)throw r}}function El(r,o,u,m){mp=!1;var b=r.updateQueue;sr=!1;var _=b.firstBaseUpdate,C=b.lastBaseUpdate,B=b.shared.pending;if(B!==null){b.shared.pending=null;var X=B,at=X.next;X.next=null,C===null?_=at:C.next=at,C=X;var dt=r.alternate;dt!==null&&(dt=dt.updateQueue,B=dt.lastBaseUpdate,B!==C&&(B===null?dt.firstBaseUpdate=at:B.next=at,dt.lastBaseUpdate=X))}if(_!==null){var gt=b.baseState;C=0,dt=at=X=null,B=_;do{var lt=B.lane&-536870913,ht=lt!==B.lane;if(ht?(se&lt)===lt:(m&lt)===lt){lt!==0&&lt===Ya&&(mp=!0),dt!==null&&(dt=dt.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});t:{var Mt=r,Vt=B;lt=o;var we=u;switch(Vt.tag){case 1:if(Mt=Vt.payload,typeof Mt=="function"){gt=Mt.call(we,gt,lt);break t}gt=Mt;break t;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Vt.payload,lt=typeof Mt=="function"?Mt.call(we,gt,lt):Mt,lt==null)break t;gt=f({},gt,lt);break t;case 2:sr=!0}}lt=B.callback,lt!==null&&(r.flags|=64,ht&&(r.flags|=8192),ht=b.callbacks,ht===null?b.callbacks=[lt]:ht.push(lt))}else ht={lane:lt,tag:B.tag,payload:B.payload,callback:B.callback,next:null},dt===null?(at=dt=ht,X=gt):dt=dt.next=ht,C|=lt;if(B=B.next,B===null){if(B=b.shared.pending,B===null)break;ht=B,B=ht.next,ht.next=null,b.lastBaseUpdate=ht,b.shared.pending=null}}while(!0);dt===null&&(X=gt),b.baseState=X,b.firstBaseUpdate=at,b.lastBaseUpdate=dt,_===null&&(b.shared.lanes=0),ur|=C,r.lanes=C,r.memoizedState=gt}}function z0(r,o){if(typeof r!="function")throw Error(n(191,r));r.call(o)}function j0(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)z0(u[r],o)}var Qa=P(null),Ru=P(0);function U0(r,o){r=Bi,K(Ru,r),K(Qa,o),Bi=r|o.baseLanes}function gp(){K(Ru,Bi),K(Qa,Qa.current)}function yp(){Bi=Ru.current,U(Qa),U(Ru)}var cs=P(null),Ms=null;function ar(r){var o=r.alternate;K(He,He.current&1),K(cs,r),Ms===null&&(o===null||Qa.current!==null||o.memoizedState!==null)&&(Ms=r)}function vp(r){K(He,He.current),K(cs,r),Ms===null&&(Ms=r)}function H0(r){r.tag===22?(K(He,He.current),K(cs,r),Ms===null&&(Ms=r)):or()}function or(){K(He,He.current),K(cs,cs.current)}function us(r){U(cs),Ms===r&&(Ms=null),U(He)}var He=P(0);function ku(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Am(u)||Em(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ri=0,Zt=null,ve=null,Xe=null,Mu=!1,Ja=!1,ta=!1,Du=0,Cl=0,to=null,YM=0;function Ie(){throw Error(n(321))}function bp(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!os(r[u],o[u]))return!1;return!0}function wp(r,o,u,m,b,_){return Ri=_,Zt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,z.H=r===null||r.memoizedState===null?Ew:Lp,ta=!1,_=u(m,b),ta=!1,Ja&&(_=$0(o,u,m,b)),V0(r),_}function V0(r){z.H=kl;var o=ve!==null&&ve.next!==null;if(Ri=0,Xe=ve=Zt=null,Mu=!1,Cl=0,to=null,o)throw Error(n(300));r===null||Ye||(r=r.dependencies,r!==null&&_u(r)&&(Ye=!0))}function $0(r,o,u,m){Zt=r;var b=0;do{if(Ja&&(to=null),Cl=0,Ja=!1,25<=b)throw Error(n(301));if(b+=1,Xe=ve=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}z.H=Cw,_=o(u,m)}while(Ja);return _}function WM(){var r=z.H,o=r.useState()[0];return o=typeof o.then=="function"?Tl(o):o,r=r.useState()[0],(ve!==null?ve.memoizedState:null)!==r&&(Zt.flags|=1024),o}function _p(){var r=Du!==0;return Du=0,r}function xp(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function Sp(r){if(Mu){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Mu=!1}Ri=0,Xe=ve=Zt=null,Ja=!1,Cl=Du=0,to=null}function In(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Zt.memoizedState=Xe=r:Xe=Xe.next=r,Xe}function Ve(){if(ve===null){var r=Zt.alternate;r=r!==null?r.memoizedState:null}else r=ve.next;var o=Xe===null?Zt.memoizedState:Xe.next;if(o!==null)Xe=o,ve=r;else{if(r===null)throw Zt.alternate===null?Error(n(467)):Error(n(310));ve=r,r={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},Xe===null?Zt.memoizedState=Xe=r:Xe=Xe.next=r}return Xe}function Ou(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(r){var o=Cl;return Cl+=1,to===null&&(to=[]),r=P0(to,r,o),o=Zt,(Xe===null?o.memoizedState:Xe.next)===null&&(o=o.alternate,z.H=o===null||o.memoizedState===null?Ew:Lp),r}function Nu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Tl(r);if(r.$$typeof===E)return bn(r)}throw Error(n(438,String(r)))}function Ap(r){var o=null,u=Zt.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var m=Zt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Ou(),Zt.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),m=0;m<r;m++)u[m]=G;return o.index++,u}function ki(r,o){return typeof o=="function"?o(r):o}function Pu(r){var o=Ve();return Ep(o,ve,r)}function Ep(r,o,u){var m=r.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=u;var b=r.baseQueue,_=m.pending;if(_!==null){if(b!==null){var C=b.next;b.next=_.next,_.next=C}o.baseQueue=b=_,m.pending=null}if(_=r.baseState,b===null)r.memoizedState=_;else{o=b.next;var B=C=null,X=null,at=o,dt=!1;do{var gt=at.lane&-536870913;if(gt!==at.lane?(se&gt)===gt:(Ri&gt)===gt){var lt=at.revertLane;if(lt===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),gt===Ya&&(dt=!0);else if((Ri&lt)===lt){at=at.next,lt===Ya&&(dt=!0);continue}else gt={lane:0,revertLane:at.revertLane,gesture:null,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},X===null?(B=X=gt,C=_):X=X.next=gt,Zt.lanes|=lt,ur|=lt;gt=at.action,ta&&u(_,gt),_=at.hasEagerState?at.eagerState:u(_,gt)}else lt={lane:gt,revertLane:at.revertLane,gesture:at.gesture,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},X===null?(B=X=lt,C=_):X=X.next=lt,Zt.lanes|=gt,ur|=gt;at=at.next}while(at!==null&&at!==o);if(X===null?C=_:X.next=B,!os(_,r.memoizedState)&&(Ye=!0,dt&&(u=Wa,u!==null)))throw u;r.memoizedState=_,r.baseState=C,r.baseQueue=X,m.lastRenderedState=_}return b===null&&(m.lanes=0),[r.memoizedState,m.dispatch]}function Cp(r){var o=Ve(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=r;var m=u.dispatch,b=u.pending,_=o.memoizedState;if(b!==null){u.pending=null;var C=b=b.next;do _=r(_,C.action),C=C.next;while(C!==b);os(_,o.memoizedState)||(Ye=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,m]}function G0(r,o,u){var m=Zt,b=Ve(),_=re;if(_){if(u===void 0)throw Error(n(407));u=u()}else u=o();var C=!os((ve||b).memoizedState,u);if(C&&(b.memoizedState=u,Ye=!0),b=b.queue,kp(Y0.bind(null,m,b,r),[r]),b.getSnapshot!==o||C||Xe!==null&&Xe.memoizedState.tag&1){if(m.flags|=2048,eo(9,{destroy:void 0},X0.bind(null,m,b,u,o),null),xe===null)throw Error(n(349));_||(Ri&127)!==0||q0(m,o,u)}return u}function q0(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=Zt.updateQueue,o===null?(o=Ou(),Zt.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function X0(r,o,u,m){o.value=u,o.getSnapshot=m,W0(o)&&K0(r)}function Y0(r,o,u){return u(function(){W0(o)&&K0(r)})}function W0(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!os(r,u)}catch{return!0}}function K0(r){var o=Gr(r,2);o!==null&&ts(o,r,2)}function Tp(r){var o=In();if(typeof r=="function"){var u=r;if(r=u(),ta){Ln(!0);try{u()}finally{Ln(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:r},o}function Z0(r,o,u,m){return r.baseState=u,Ep(r,ve,typeof m=="function"?m:ki)}function KM(r,o,u,m,b){if(Iu(r))throw Error(n(485));if(r=o.action,r!==null){var _={payload:b,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};z.T!==null?u(!0):_.isTransition=!1,m(_),u=o.pending,u===null?(_.next=o.pending=_,Q0(o,_)):(_.next=u.next,o.pending=u.next=_)}}function Q0(r,o){var u=o.action,m=o.payload,b=r.state;if(o.isTransition){var _=z.T,C={};z.T=C;try{var B=u(b,m),X=z.S;X!==null&&X(C,B),J0(r,o,B)}catch(at){Rp(r,o,at)}finally{_!==null&&C.types!==null&&(_.types=C.types),z.T=_}}else try{_=u(b,m),J0(r,o,_)}catch(at){Rp(r,o,at)}}function J0(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){tw(r,o,m)},function(m){return Rp(r,o,m)}):tw(r,o,u)}function tw(r,o,u){o.status="fulfilled",o.value=u,ew(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,Q0(r,u)))}function Rp(r,o,u){var m=r.pending;if(r.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=u,ew(o),o=o.next;while(o!==m)}r.action=null}function ew(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function nw(r,o){return o}function sw(r,o){if(re){var u=xe.formState;if(u!==null){t:{var m=Zt;if(re){if(Ce){e:{for(var b=Ce,_=ks;b.nodeType!==8;){if(!_){b=null;break e}if(b=Ds(b.nextSibling),b===null){b=null;break e}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){Ce=Ds(b.nextSibling),m=b.data==="F!";break t}}er(m)}m=!1}m&&(o=u[0])}}return u=In(),u.memoizedState=u.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nw,lastRenderedState:o},u.queue=m,u=xw.bind(null,Zt,m),m.dispatch=u,m=Tp(!1),_=Pp.bind(null,Zt,!1,m.queue),m=In(),b={state:o,dispatch:null,action:r,pending:null},m.queue=b,u=KM.bind(null,Zt,b,_,u),b.dispatch=u,m.memoizedState=r,[o,u,!1]}function iw(r){var o=Ve();return rw(o,ve,r)}function rw(r,o,u){if(o=Ep(r,o,nw)[0],r=Pu(ki)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=Tl(o)}catch(C){throw C===Ka?Au:C}else m=o;o=Ve();var b=o.queue,_=b.dispatch;return u!==o.memoizedState&&(Zt.flags|=2048,eo(9,{destroy:void 0},ZM.bind(null,b,u),null)),[m,_,r]}function ZM(r,o){r.action=o}function aw(r){var o=Ve(),u=ve;if(u!==null)return rw(o,u,r);Ve(),o=o.memoizedState,u=Ve();var m=u.queue.dispatch;return u.memoizedState=r,[o,m,!1]}function eo(r,o,u,m){return r={tag:r,create:u,deps:m,inst:o,next:null},o=Zt.updateQueue,o===null&&(o=Ou(),Zt.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(m=u.next,u.next=r,r.next=m,o.lastEffect=r),r}function ow(){return Ve().memoizedState}function Lu(r,o,u,m){var b=In();Zt.flags|=r,b.memoizedState=eo(1|o,{destroy:void 0},u,m===void 0?null:m)}function Bu(r,o,u,m){var b=Ve();m=m===void 0?null:m;var _=b.memoizedState.inst;ve!==null&&m!==null&&bp(m,ve.memoizedState.deps)?b.memoizedState=eo(o,_,u,m):(Zt.flags|=r,b.memoizedState=eo(1|o,_,u,m))}function lw(r,o){Lu(8390656,8,r,o)}function kp(r,o){Bu(2048,8,r,o)}function QM(r){Zt.flags|=4;var o=Zt.updateQueue;if(o===null)o=Ou(),Zt.updateQueue=o,o.events=[r];else{var u=o.events;u===null?o.events=[r]:u.push(r)}}function cw(r){var o=Ve().memoizedState;return QM({ref:o,nextImpl:r}),function(){if((de&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function uw(r,o){return Bu(4,2,r,o)}function hw(r,o){return Bu(4,4,r,o)}function dw(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function fw(r,o,u){u=u!=null?u.concat([r]):null,Bu(4,4,dw.bind(null,o,r),u)}function Mp(){}function pw(r,o){var u=Ve();o=o===void 0?null:o;var m=u.memoizedState;return o!==null&&bp(o,m[1])?m[0]:(u.memoizedState=[r,o],r)}function mw(r,o){var u=Ve();o=o===void 0?null:o;var m=u.memoizedState;if(o!==null&&bp(o,m[1]))return m[0];if(m=r(),ta){Ln(!0);try{r()}finally{Ln(!1)}}return u.memoizedState=[m,o],m}function Dp(r,o,u){return u===void 0||(Ri&1073741824)!==0&&(se&261930)===0?r.memoizedState=o:(r.memoizedState=u,r=g_(),Zt.lanes|=r,ur|=r,u)}function gw(r,o,u,m){return os(u,o)?u:Qa.current!==null?(r=Dp(r,u,m),os(r,o)||(Ye=!0),r):(Ri&42)===0||(Ri&1073741824)!==0&&(se&261930)===0?(Ye=!0,r.memoizedState=u):(r=g_(),Zt.lanes|=r,ur|=r,o)}function yw(r,o,u,m,b){var _=j.p;j.p=_!==0&&8>_?_:8;var C=z.T,B={};z.T=B,Pp(r,!1,o,u);try{var X=b(),at=z.S;if(at!==null&&at(B,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var dt=XM(X,m);Rl(r,o,dt,fs(r))}else Rl(r,o,m,fs(r))}catch(gt){Rl(r,o,{then:function(){},status:"rejected",reason:gt},fs())}finally{j.p=_,C!==null&&B.types!==null&&(C.types=B.types),z.T=C}}function JM(){}function Op(r,o,u,m){if(r.tag!==5)throw Error(n(476));var b=vw(r).queue;yw(r,b,o,q,u===null?JM:function(){return bw(r),u(m)})}function vw(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:q},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function bw(r){var o=vw(r);o.next===null&&(o=r.alternate.memoizedState),Rl(r,o.next.queue,{},fs())}function Np(){return bn(Gl)}function ww(){return Ve().memoizedState}function _w(){return Ve().memoizedState}function tD(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=fs();r=ir(u);var m=rr(o,r,u);m!==null&&(ts(m,o,u),Sl(m,o,u)),o={cache:lp()},r.payload=o;return}o=o.return}}function eD(r,o,u){var m=fs();u={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Iu(r)?Sw(o,u):(u=Zf(r,o,u,m),u!==null&&(ts(u,r,m),Aw(u,o,m)))}function xw(r,o,u){var m=fs();Rl(r,o,u,m)}function Rl(r,o,u,m){var b={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Iu(r))Sw(o,b);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var C=o.lastRenderedState,B=_(C,u);if(b.hasEagerState=!0,b.eagerState=B,os(B,C))return yu(r,o,b,0),xe===null&&gu(),!1}catch{}if(u=Zf(r,o,b,m),u!==null)return ts(u,r,m),Aw(u,o,m),!0}return!1}function Pp(r,o,u,m){if(m={lane:2,revertLane:dm(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Iu(r)){if(o)throw Error(n(479))}else o=Zf(r,u,m,2),o!==null&&ts(o,r,2)}function Iu(r){var o=r.alternate;return r===Zt||o!==null&&o===Zt}function Sw(r,o){Ja=Mu=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function Aw(r,o,u){if((u&4194048)!==0){var m=o.lanes;m&=r.pendingLanes,u|=m,o.lanes=u,qn(r,u)}}var kl={readContext:bn,use:Nu,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useLayoutEffect:Ie,useInsertionEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useSyncExternalStore:Ie,useId:Ie,useHostTransitionStatus:Ie,useFormState:Ie,useActionState:Ie,useOptimistic:Ie,useMemoCache:Ie,useCacheRefresh:Ie};kl.useEffectEvent=Ie;var Ew={readContext:bn,use:Nu,useCallback:function(r,o){return In().memoizedState=[r,o===void 0?null:o],r},useContext:bn,useEffect:lw,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,Lu(4194308,4,dw.bind(null,o,r),u)},useLayoutEffect:function(r,o){return Lu(4194308,4,r,o)},useInsertionEffect:function(r,o){Lu(4,2,r,o)},useMemo:function(r,o){var u=In();o=o===void 0?null:o;var m=r();if(ta){Ln(!0);try{r()}finally{Ln(!1)}}return u.memoizedState=[m,o],m},useReducer:function(r,o,u){var m=In();if(u!==void 0){var b=u(o);if(ta){Ln(!0);try{u(o)}finally{Ln(!1)}}}else b=o;return m.memoizedState=m.baseState=b,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:b},m.queue=r,r=r.dispatch=eD.bind(null,Zt,r),[m.memoizedState,r]},useRef:function(r){var o=In();return r={current:r},o.memoizedState=r},useState:function(r){r=Tp(r);var o=r.queue,u=xw.bind(null,Zt,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:Mp,useDeferredValue:function(r,o){var u=In();return Dp(u,r,o)},useTransition:function(){var r=Tp(!1);return r=yw.bind(null,Zt,r.queue,!0,!1),In().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var m=Zt,b=In();if(re){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),xe===null)throw Error(n(349));(se&127)!==0||q0(m,o,u)}b.memoizedState=u;var _={value:u,getSnapshot:o};return b.queue=_,lw(Y0.bind(null,m,_,r),[r]),m.flags|=2048,eo(9,{destroy:void 0},X0.bind(null,m,_,u,o),null),u},useId:function(){var r=In(),o=xe.identifierPrefix;if(re){var u=Js,m=Qs;u=(m&~(1<<32-Ae(m)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Du++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=YM++,o="_"+o+"r_"+u.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Np,useFormState:sw,useActionState:sw,useOptimistic:function(r){var o=In();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Pp.bind(null,Zt,!0,u),u.dispatch=o,[r,o]},useMemoCache:Ap,useCacheRefresh:function(){return In().memoizedState=tD.bind(null,Zt)},useEffectEvent:function(r){var o=In(),u={impl:r};return o.memoizedState=u,function(){if((de&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}},Lp={readContext:bn,use:Nu,useCallback:pw,useContext:bn,useEffect:kp,useImperativeHandle:fw,useInsertionEffect:uw,useLayoutEffect:hw,useMemo:mw,useReducer:Pu,useRef:ow,useState:function(){return Pu(ki)},useDebugValue:Mp,useDeferredValue:function(r,o){var u=Ve();return gw(u,ve.memoizedState,r,o)},useTransition:function(){var r=Pu(ki)[0],o=Ve().memoizedState;return[typeof r=="boolean"?r:Tl(r),o]},useSyncExternalStore:G0,useId:ww,useHostTransitionStatus:Np,useFormState:iw,useActionState:iw,useOptimistic:function(r,o){var u=Ve();return Z0(u,ve,r,o)},useMemoCache:Ap,useCacheRefresh:_w};Lp.useEffectEvent=cw;var Cw={readContext:bn,use:Nu,useCallback:pw,useContext:bn,useEffect:kp,useImperativeHandle:fw,useInsertionEffect:uw,useLayoutEffect:hw,useMemo:mw,useReducer:Cp,useRef:ow,useState:function(){return Cp(ki)},useDebugValue:Mp,useDeferredValue:function(r,o){var u=Ve();return ve===null?Dp(u,r,o):gw(u,ve.memoizedState,r,o)},useTransition:function(){var r=Cp(ki)[0],o=Ve().memoizedState;return[typeof r=="boolean"?r:Tl(r),o]},useSyncExternalStore:G0,useId:ww,useHostTransitionStatus:Np,useFormState:aw,useActionState:aw,useOptimistic:function(r,o){var u=Ve();return ve!==null?Z0(u,ve,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Ap,useCacheRefresh:_w};Cw.useEffectEvent=cw;function Bp(r,o,u,m){o=r.memoizedState,u=u(m,o),u=u==null?o:f({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Ip={enqueueSetState:function(r,o,u){r=r._reactInternals;var m=fs(),b=ir(m);b.payload=o,u!=null&&(b.callback=u),o=rr(r,b,m),o!==null&&(ts(o,r,m),Sl(o,r,m))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var m=fs(),b=ir(m);b.tag=1,b.payload=o,u!=null&&(b.callback=u),o=rr(r,b,m),o!==null&&(ts(o,r,m),Sl(o,r,m))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=fs(),m=ir(u);m.tag=2,o!=null&&(m.callback=o),o=rr(r,m,u),o!==null&&(ts(o,r,u),Sl(o,r,u))}};function Tw(r,o,u,m,b,_,C){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,_,C):o.prototype&&o.prototype.isPureReactComponent?!ml(u,m)||!ml(b,_):!0}function Rw(r,o,u,m){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,m),o.state!==r&&Ip.enqueueReplaceState(o,o.state,null)}function ea(r,o){var u=o;if("ref"in o){u={};for(var m in o)m!=="ref"&&(u[m]=o[m])}if(r=r.defaultProps){u===o&&(u=f({},u));for(var b in r)u[b]===void 0&&(u[b]=r[b])}return u}function kw(r){mu(r)}function Mw(r){console.error(r)}function Dw(r){mu(r)}function Fu(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function Ow(r,o,u){try{var m=r.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Fp(r,o,u){return u=ir(u),u.tag=3,u.payload={element:null},u.callback=function(){Fu(r,o)},u}function Nw(r){return r=ir(r),r.tag=3,r}function Pw(r,o,u,m){var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var _=m.value;r.payload=function(){return b(_)},r.callback=function(){Ow(o,u,m)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(r.callback=function(){Ow(o,u,m),typeof b!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var B=m.stack;this.componentDidCatch(m.value,{componentStack:B!==null?B:""})})}function nD(r,o,u,m,b){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=u.alternate,o!==null&&Xa(o,u,b,!0),u=cs.current,u!==null){switch(u.tag){case 31:case 13:return Ms===null?Ku():u.alternate===null&&Fe===0&&(Fe=3),u.flags&=-257,u.flags|=65536,u.lanes=b,m===Eu?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([m]):o.add(m),cm(r,m,b)),!1;case 22:return u.flags|=65536,m===Eu?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([m]):u.add(m)),cm(r,m,b)),!1}throw Error(n(435,u.tag))}return cm(r,m,b),Ku(),!1}if(re)return o=cs.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=b,m!==sp&&(r=Error(n(422),{cause:m}),vl(Cs(r,u)))):(m!==sp&&(o=Error(n(423),{cause:m}),vl(Cs(o,u))),r=r.current.alternate,r.flags|=65536,b&=-b,r.lanes|=b,m=Cs(m,u),b=Fp(r.stateNode,m,b),pp(r,b),Fe!==4&&(Fe=2)),!1;var _=Error(n(520),{cause:m});if(_=Cs(_,u),Il===null?Il=[_]:Il.push(_),Fe!==4&&(Fe=2),o===null)return!0;m=Cs(m,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=b&-b,u.lanes|=r,r=Fp(u.stateNode,m,r),pp(u,r),!1;case 1:if(o=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(hr===null||!hr.has(_))))return u.flags|=65536,b&=-b,u.lanes|=b,b=Nw(b),Pw(b,r,u,m),pp(u,b),!1}u=u.return}while(u!==null);return!1}var zp=Error(n(461)),Ye=!1;function wn(r,o,u,m){o.child=r===null?F0(o,null,u,m):Jr(o,r.child,u,m)}function Lw(r,o,u,m,b){u=u.render;var _=o.ref;if("ref"in m){var C={};for(var B in m)B!=="ref"&&(C[B]=m[B])}else C=m;return Wr(o),m=wp(r,o,u,C,_,b),B=_p(),r!==null&&!Ye?(xp(r,o,b),Mi(r,o,b)):(re&&B&&ep(o),o.flags|=1,wn(r,o,m,b),o.child)}function Bw(r,o,u,m,b){if(r===null){var _=u.type;return typeof _=="function"&&!Qf(_)&&_.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=_,Iw(r,o,_,m,b)):(r=bu(u.type,null,m,o,o.mode,b),r.ref=o.ref,r.return=o,o.child=r)}if(_=r.child,!Xp(r,b)){var C=_.memoizedProps;if(u=u.compare,u=u!==null?u:ml,u(C,m)&&r.ref===o.ref)return Mi(r,o,b)}return o.flags|=1,r=Ai(_,m),r.ref=o.ref,r.return=o,o.child=r}function Iw(r,o,u,m,b){if(r!==null){var _=r.memoizedProps;if(ml(_,m)&&r.ref===o.ref)if(Ye=!1,o.pendingProps=m=_,Xp(r,b))(r.flags&131072)!==0&&(Ye=!0);else return o.lanes=r.lanes,Mi(r,o,b)}return jp(r,o,u,m,b)}function Fw(r,o,u,m){var b=m.children,_=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,r!==null){for(m=o.child=r.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~_}else m=0,o.child=null;return zw(r,o,_,u,m)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Su(o,_!==null?_.cachePool:null),_!==null?U0(o,_):gp(),H0(o);else return m=o.lanes=536870912,zw(r,o,_!==null?_.baseLanes|u:u,u,m)}else _!==null?(Su(o,_.cachePool),U0(o,_),or(),o.memoizedState=null):(r!==null&&Su(o,null),gp(),or());return wn(r,o,b,u),o.child}function Ml(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function zw(r,o,u,m,b){var _=up();return _=_===null?null:{parent:qe._currentValue,pool:_},o.memoizedState={baseLanes:u,cachePool:_},r!==null&&Su(o,null),gp(),H0(o),r!==null&&Xa(r,o,m,!0),o.childLanes=b,null}function zu(r,o){return o=Uu({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function jw(r,o,u){return Jr(o,r.child,null,u),r=zu(o,o.pendingProps),r.flags|=2,us(o),o.memoizedState=null,r}function sD(r,o,u){var m=o.pendingProps,b=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(re){if(m.mode==="hidden")return r=zu(o,m),o.lanes=536870912,Ml(null,r);if(vp(o),(r=Ce)?(r=Q_(r,ks),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Ji!==null?{id:Qs,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},u=S0(r),u.return=o,o.child=u,vn=o,Ce=null)):r=null,r===null)throw er(o);return o.lanes=536870912,null}return zu(o,m)}var _=r.memoizedState;if(_!==null){var C=_.dehydrated;if(vp(o),b)if(o.flags&256)o.flags&=-257,o=jw(r,o,u);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(n(558));else if(Ye||Xa(r,o,u,!1),b=(u&r.childLanes)!==0,Ye||b){if(m=xe,m!==null&&(C=Xn(m,u),C!==0&&C!==_.retryLane))throw _.retryLane=C,Gr(r,C),ts(m,r,C),zp;Ku(),o=jw(r,o,u)}else r=_.treeContext,Ce=Ds(C.nextSibling),vn=o,re=!0,tr=null,ks=!1,r!==null&&C0(o,r),o=zu(o,m),o.flags|=4096;return o}return r=Ai(r.child,{mode:m.mode,children:m.children}),r.ref=o.ref,o.child=r,r.return=o,r}function ju(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function jp(r,o,u,m,b){return Wr(o),u=wp(r,o,u,m,void 0,b),m=_p(),r!==null&&!Ye?(xp(r,o,b),Mi(r,o,b)):(re&&m&&ep(o),o.flags|=1,wn(r,o,u,b),o.child)}function Uw(r,o,u,m,b,_){return Wr(o),o.updateQueue=null,u=$0(o,m,u,b),V0(r),m=_p(),r!==null&&!Ye?(xp(r,o,_),Mi(r,o,_)):(re&&m&&ep(o),o.flags|=1,wn(r,o,u,_),o.child)}function Hw(r,o,u,m,b){if(Wr(o),o.stateNode===null){var _=Va,C=u.contextType;typeof C=="object"&&C!==null&&(_=bn(C)),_=new u(m,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ip,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=m,_.state=o.memoizedState,_.refs={},dp(o),C=u.contextType,_.context=typeof C=="object"&&C!==null?bn(C):Va,_.state=o.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(Bp(o,u,C,m),_.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&Ip.enqueueReplaceState(_,_.state,null),El(o,m,_,b),Al(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(r===null){_=o.stateNode;var B=o.memoizedProps,X=ea(u,B);_.props=X;var at=_.context,dt=u.contextType;C=Va,typeof dt=="object"&&dt!==null&&(C=bn(dt));var gt=u.getDerivedStateFromProps;dt=typeof gt=="function"||typeof _.getSnapshotBeforeUpdate=="function",B=o.pendingProps!==B,dt||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(B||at!==C)&&Rw(o,_,m,C),sr=!1;var lt=o.memoizedState;_.state=lt,El(o,m,_,b),Al(),at=o.memoizedState,B||lt!==at||sr?(typeof gt=="function"&&(Bp(o,u,gt,m),at=o.memoizedState),(X=sr||Tw(o,u,X,m,lt,at,C))?(dt||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=at),_.props=m,_.state=at,_.context=C,m=X):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{_=o.stateNode,fp(r,o),C=o.memoizedProps,dt=ea(u,C),_.props=dt,gt=o.pendingProps,lt=_.context,at=u.contextType,X=Va,typeof at=="object"&&at!==null&&(X=bn(at)),B=u.getDerivedStateFromProps,(at=typeof B=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==gt||lt!==X)&&Rw(o,_,m,X),sr=!1,lt=o.memoizedState,_.state=lt,El(o,m,_,b),Al();var ht=o.memoizedState;C!==gt||lt!==ht||sr||r!==null&&r.dependencies!==null&&_u(r.dependencies)?(typeof B=="function"&&(Bp(o,u,B,m),ht=o.memoizedState),(dt=sr||Tw(o,u,dt,m,lt,ht,X)||r!==null&&r.dependencies!==null&&_u(r.dependencies))?(at||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(m,ht,X),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(m,ht,X)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===r.memoizedProps&&lt===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&lt===r.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=ht),_.props=m,_.state=ht,_.context=X,m=dt):(typeof _.componentDidUpdate!="function"||C===r.memoizedProps&&lt===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&lt===r.memoizedState||(o.flags|=1024),m=!1)}return _=m,ju(r,o),m=(o.flags&128)!==0,_||m?(_=o.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,r!==null&&m?(o.child=Jr(o,r.child,null,b),o.child=Jr(o,null,u,b)):wn(r,o,u,b),o.memoizedState=_.state,r=o.child):r=Mi(r,o,b),r}function Vw(r,o,u,m){return Xr(),o.flags|=256,wn(r,o,u,m),o.child}var Up={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hp(r){return{baseLanes:r,cachePool:O0()}}function Vp(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=ds),r}function $w(r,o,u){var m=o.pendingProps,b=!1,_=(o.flags&128)!==0,C;if((C=_)||(C=r!==null&&r.memoizedState===null?!1:(He.current&2)!==0),C&&(b=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,r===null){if(re){if(b?ar(o):or(),(r=Ce)?(r=Q_(r,ks),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Ji!==null?{id:Qs,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},u=S0(r),u.return=o,o.child=u,vn=o,Ce=null)):r=null,r===null)throw er(o);return Em(r)?o.lanes=32:o.lanes=536870912,null}var B=m.children;return m=m.fallback,b?(or(),b=o.mode,B=Uu({mode:"hidden",children:B},b),m=qr(m,b,u,null),B.return=o,m.return=o,B.sibling=m,o.child=B,m=o.child,m.memoizedState=Hp(u),m.childLanes=Vp(r,C,u),o.memoizedState=Up,Ml(null,m)):(ar(o),$p(o,B))}var X=r.memoizedState;if(X!==null&&(B=X.dehydrated,B!==null)){if(_)o.flags&256?(ar(o),o.flags&=-257,o=Gp(r,o,u)):o.memoizedState!==null?(or(),o.child=r.child,o.flags|=128,o=null):(or(),B=m.fallback,b=o.mode,m=Uu({mode:"visible",children:m.children},b),B=qr(B,b,u,null),B.flags|=2,m.return=o,B.return=o,m.sibling=B,o.child=m,Jr(o,r.child,null,u),m=o.child,m.memoizedState=Hp(u),m.childLanes=Vp(r,C,u),o.memoizedState=Up,o=Ml(null,m));else if(ar(o),Em(B)){if(C=B.nextSibling&&B.nextSibling.dataset,C)var at=C.dgst;C=at,m=Error(n(419)),m.stack="",m.digest=C,vl({value:m,source:null,stack:null}),o=Gp(r,o,u)}else if(Ye||Xa(r,o,u,!1),C=(u&r.childLanes)!==0,Ye||C){if(C=xe,C!==null&&(m=Xn(C,u),m!==0&&m!==X.retryLane))throw X.retryLane=m,Gr(r,m),ts(C,r,m),zp;Am(B)||Ku(),o=Gp(r,o,u)}else Am(B)?(o.flags|=192,o.child=r.child,o=null):(r=X.treeContext,Ce=Ds(B.nextSibling),vn=o,re=!0,tr=null,ks=!1,r!==null&&C0(o,r),o=$p(o,m.children),o.flags|=4096);return o}return b?(or(),B=m.fallback,b=o.mode,X=r.child,at=X.sibling,m=Ai(X,{mode:"hidden",children:m.children}),m.subtreeFlags=X.subtreeFlags&65011712,at!==null?B=Ai(at,B):(B=qr(B,b,u,null),B.flags|=2),B.return=o,m.return=o,m.sibling=B,o.child=m,Ml(null,m),m=o.child,B=r.child.memoizedState,B===null?B=Hp(u):(b=B.cachePool,b!==null?(X=qe._currentValue,b=b.parent!==X?{parent:X,pool:X}:b):b=O0(),B={baseLanes:B.baseLanes|u,cachePool:b}),m.memoizedState=B,m.childLanes=Vp(r,C,u),o.memoizedState=Up,Ml(r.child,m)):(ar(o),u=r.child,r=u.sibling,u=Ai(u,{mode:"visible",children:m.children}),u.return=o,u.sibling=null,r!==null&&(C=o.deletions,C===null?(o.deletions=[r],o.flags|=16):C.push(r)),o.child=u,o.memoizedState=null,u)}function $p(r,o){return o=Uu({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Uu(r,o){return r=ls(22,r,null,o),r.lanes=0,r}function Gp(r,o,u){return Jr(o,r.child,null,u),r=$p(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function Gw(r,o,u){r.lanes|=o;var m=r.alternate;m!==null&&(m.lanes|=o),ap(r.return,o,u)}function qp(r,o,u,m,b,_){var C=r.memoizedState;C===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:b,treeForkCount:_}:(C.isBackwards=o,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=u,C.tailMode=b,C.treeForkCount=_)}function qw(r,o,u){var m=o.pendingProps,b=m.revealOrder,_=m.tail;m=m.children;var C=He.current,B=(C&2)!==0;if(B?(C=C&1|2,o.flags|=128):C&=1,K(He,C),wn(r,o,m,u),m=re?yl:0,!B&&r!==null&&(r.flags&128)!==0)t:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Gw(r,u,o);else if(r.tag===19)Gw(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break t;for(;r.sibling===null;){if(r.return===null||r.return===o)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(b){case"forwards":for(u=o.child,b=null;u!==null;)r=u.alternate,r!==null&&ku(r)===null&&(b=u),u=u.sibling;u=b,u===null?(b=o.child,o.child=null):(b=u.sibling,u.sibling=null),qp(o,!1,b,u,_,m);break;case"backwards":case"unstable_legacy-backwards":for(u=null,b=o.child,o.child=null;b!==null;){if(r=b.alternate,r!==null&&ku(r)===null){o.child=b;break}r=b.sibling,b.sibling=u,u=b,b=r}qp(o,!0,u,null,_,m);break;case"together":qp(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function Mi(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),ur|=o.lanes,(u&o.childLanes)===0)if(r!==null){if(Xa(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,u=Ai(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=Ai(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function Xp(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&_u(r)))}function iD(r,o,u){switch(o.tag){case 3:vt(o,o.stateNode.containerInfo),nr(o,qe,r.memoizedState.cache),Xr();break;case 27:case 5:Lt(o);break;case 4:vt(o,o.stateNode.containerInfo);break;case 10:nr(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,vp(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(ar(o),o.flags|=128,null):(u&o.child.childLanes)!==0?$w(r,o,u):(ar(o),r=Mi(r,o,u),r!==null?r.sibling:null);ar(o);break;case 19:var b=(r.flags&128)!==0;if(m=(u&o.childLanes)!==0,m||(Xa(r,o,u,!1),m=(u&o.childLanes)!==0),b){if(m)return qw(r,o,u);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),K(He,He.current),m)break;return null;case 22:return o.lanes=0,Fw(r,o,u,o.pendingProps);case 24:nr(o,qe,r.memoizedState.cache)}return Mi(r,o,u)}function Xw(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)Ye=!0;else{if(!Xp(r,u)&&(o.flags&128)===0)return Ye=!1,iD(r,o,u);Ye=(r.flags&131072)!==0}else Ye=!1,re&&(o.flags&1048576)!==0&&E0(o,yl,o.index);switch(o.lanes=0,o.tag){case 16:t:{var m=o.pendingProps;if(r=Zr(o.elementType),o.type=r,typeof r=="function")Qf(r)?(m=ea(r,m),o.tag=1,o=Hw(null,o,r,m,u)):(o.tag=0,o=jp(null,o,r,m,u));else{if(r!=null){var b=r.$$typeof;if(b===R){o.tag=11,o=Lw(null,o,r,m,u);break t}else if(b===D){o.tag=14,o=Bw(null,o,r,m,u);break t}}throw o=k(r)||r,Error(n(306,o,""))}}return o;case 0:return jp(r,o,o.type,o.pendingProps,u);case 1:return m=o.type,b=ea(m,o.pendingProps),Hw(r,o,m,b,u);case 3:t:{if(vt(o,o.stateNode.containerInfo),r===null)throw Error(n(387));m=o.pendingProps;var _=o.memoizedState;b=_.element,fp(r,o),El(o,m,null,u);var C=o.memoizedState;if(m=C.cache,nr(o,qe,m),m!==_.cache&&op(o,[qe],u,!0),Al(),m=C.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=Vw(r,o,m,u);break t}else if(m!==b){b=Cs(Error(n(424)),o),vl(b),o=Vw(r,o,m,u);break t}else for(r=o.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,Ce=Ds(r.firstChild),vn=o,re=!0,tr=null,ks=!0,u=F0(o,null,m,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Xr(),m===b){o=Mi(r,o,u);break t}wn(r,o,m,u)}o=o.child}return o;case 26:return ju(r,o),r===null?(u=ix(o.type,null,o.pendingProps,null))?o.memoizedState=u:re||(u=o.type,r=o.pendingProps,m=sh(xt.current).createElement(u),m[yn]=o,m[Yn]=r,_n(m,u,r),dn(m),o.stateNode=m):o.memoizedState=ix(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Lt(o),r===null&&re&&(m=o.stateNode=ex(o.type,o.pendingProps,xt.current),vn=o,ks=!0,b=Ce,mr(o.type)?(Cm=b,Ce=Ds(m.firstChild)):Ce=b),wn(r,o,o.pendingProps.children,u),ju(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&re&&((b=m=Ce)&&(m=PD(m,o.type,o.pendingProps,ks),m!==null?(o.stateNode=m,vn=o,Ce=Ds(m.firstChild),ks=!1,b=!0):b=!1),b||er(o)),Lt(o),b=o.type,_=o.pendingProps,C=r!==null?r.memoizedProps:null,m=_.children,_m(b,_)?m=null:C!==null&&_m(b,C)&&(o.flags|=32),o.memoizedState!==null&&(b=wp(r,o,WM,null,null,u),Gl._currentValue=b),ju(r,o),wn(r,o,m,u),o.child;case 6:return r===null&&re&&((r=u=Ce)&&(u=LD(u,o.pendingProps,ks),u!==null?(o.stateNode=u,vn=o,Ce=null,r=!0):r=!1),r||er(o)),null;case 13:return $w(r,o,u);case 4:return vt(o,o.stateNode.containerInfo),m=o.pendingProps,r===null?o.child=Jr(o,null,m,u):wn(r,o,m,u),o.child;case 11:return Lw(r,o,o.type,o.pendingProps,u);case 7:return wn(r,o,o.pendingProps,u),o.child;case 8:return wn(r,o,o.pendingProps.children,u),o.child;case 12:return wn(r,o,o.pendingProps.children,u),o.child;case 10:return m=o.pendingProps,nr(o,o.type,m.value),wn(r,o,m.children,u),o.child;case 9:return b=o.type._context,m=o.pendingProps.children,Wr(o),b=bn(b),m=m(b),o.flags|=1,wn(r,o,m,u),o.child;case 14:return Bw(r,o,o.type,o.pendingProps,u);case 15:return Iw(r,o,o.type,o.pendingProps,u);case 19:return qw(r,o,u);case 31:return sD(r,o,u);case 22:return Fw(r,o,u,o.pendingProps);case 24:return Wr(o),m=bn(qe),r===null?(b=up(),b===null&&(b=xe,_=lp(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=u),b=_),o.memoizedState={parent:m,cache:b},dp(o),nr(o,qe,b)):((r.lanes&u)!==0&&(fp(r,o),El(o,null,null,u),Al()),b=r.memoizedState,_=o.memoizedState,b.parent!==m?(b={parent:m,cache:m},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),nr(o,qe,m)):(m=_.cache,nr(o,qe,m),m!==b.cache&&op(o,[qe],u,!0))),wn(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Di(r){r.flags|=4}function Yp(r,o,u,m,b){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(b&335544128)===b)if(r.stateNode.complete)r.flags|=8192;else if(w_())r.flags|=8192;else throw Qr=Eu,hp}else r.flags&=-16777217}function Yw(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!cx(o))if(w_())r.flags|=8192;else throw Qr=Eu,hp}function Hu(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Rn():536870912,r.lanes|=o,ro|=o)}function Dl(r,o){if(!re)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function Te(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,m=0;if(o)for(var b=r.child;b!==null;)u|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=r,b=b.sibling;else for(b=r.child;b!==null;)u|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=r,b=b.sibling;return r.subtreeFlags|=m,r.childLanes=u,o}function rD(r,o,u){var m=o.pendingProps;switch(np(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(o),null;case 1:return Te(o),null;case 3:return u=o.stateNode,m=null,r!==null&&(m=r.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),Ti(qe),Et(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(qa(o)?Di(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ip())),Te(o),null;case 26:var b=o.type,_=o.memoizedState;return r===null?(Di(o),_!==null?(Te(o),Yw(o,_)):(Te(o),Yp(o,b,null,m,u))):_?_!==r.memoizedState?(Di(o),Te(o),Yw(o,_)):(Te(o),o.flags&=-16777217):(r=r.memoizedProps,r!==m&&Di(o),Te(o),Yp(o,b,r,m,u)),null;case 27:if(Ot(o),u=xt.current,b=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==m&&Di(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return Te(o),null}r=tt.current,qa(o)?T0(o):(r=ex(b,m,u),o.stateNode=r,Di(o))}return Te(o),null;case 5:if(Ot(o),b=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==m&&Di(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return Te(o),null}if(_=tt.current,qa(o))T0(o);else{var C=sh(xt.current);switch(_){case 1:_=C.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:_=C.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":_=C.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":_=C.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":_=C.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof m.is=="string"?C.createElement("select",{is:m.is}):C.createElement("select"),m.multiple?_.multiple=!0:m.size&&(_.size=m.size);break;default:_=typeof m.is=="string"?C.createElement(b,{is:m.is}):C.createElement(b)}}_[yn]=o,_[Yn]=m;t:for(C=o.child;C!==null;){if(C.tag===5||C.tag===6)_.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===o)break t;for(;C.sibling===null;){if(C.return===null||C.return===o)break t;C=C.return}C.sibling.return=C.return,C=C.sibling}o.stateNode=_;t:switch(_n(_,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break t;case"img":m=!0;break t;default:m=!1}m&&Di(o)}}return Te(o),Yp(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,u),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==m&&Di(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(n(166));if(r=xt.current,qa(o)){if(r=o.stateNode,u=o.memoizedProps,m=null,b=vn,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}r[yn]=o,r=!!(r.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||$_(r.nodeValue,u)),r||er(o,!0)}else r=sh(r).createTextNode(m),r[yn]=o,o.stateNode=r}return Te(o),null;case 31:if(u=o.memoizedState,r===null||r.memoizedState!==null){if(m=qa(o),u!==null){if(r===null){if(!m)throw Error(n(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(557));r[yn]=o}else Xr(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Te(o),r=!1}else u=ip(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return o.flags&256?(us(o),o):(us(o),null);if((o.flags&128)!==0)throw Error(n(558))}return Te(o),null;case 13:if(m=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(b=qa(o),m!==null&&m.dehydrated!==null){if(r===null){if(!b)throw Error(n(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[yn]=o}else Xr(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Te(o),b=!1}else b=ip(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(us(o),o):(us(o),null)}return us(o),(o.flags&128)!==0?(o.lanes=u,o):(u=m!==null,r=r!==null&&r.memoizedState!==null,u&&(m=o.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),_=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(_=m.memoizedState.cachePool.pool),_!==b&&(m.flags|=2048)),u!==r&&u&&(o.child.flags|=8192),Hu(o,o.updateQueue),Te(o),null);case 4:return Et(),r===null&&gm(o.stateNode.containerInfo),Te(o),null;case 10:return Ti(o.type),Te(o),null;case 19:if(U(He),m=o.memoizedState,m===null)return Te(o),null;if(b=(o.flags&128)!==0,_=m.rendering,_===null)if(b)Dl(m,!1);else{if(Fe!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(_=ku(r),_!==null){for(o.flags|=128,Dl(m,!1),r=_.updateQueue,o.updateQueue=r,Hu(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)x0(u,r),u=u.sibling;return K(He,He.current&1|2),re&&Ei(o,m.treeForkCount),o.child}r=r.sibling}m.tail!==null&&Ct()>Xu&&(o.flags|=128,b=!0,Dl(m,!1),o.lanes=4194304)}else{if(!b)if(r=ku(_),r!==null){if(o.flags|=128,b=!0,r=r.updateQueue,o.updateQueue=r,Hu(o,r),Dl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!re)return Te(o),null}else 2*Ct()-m.renderingStartTime>Xu&&u!==536870912&&(o.flags|=128,b=!0,Dl(m,!1),o.lanes=4194304);m.isBackwards?(_.sibling=o.child,o.child=_):(r=m.last,r!==null?r.sibling=_:o.child=_,m.last=_)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=Ct(),r.sibling=null,u=He.current,K(He,b?u&1|2:u&1),re&&Ei(o,m.treeForkCount),r):(Te(o),null);case 22:case 23:return us(o),yp(),m=o.memoizedState!==null,r!==null?r.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(u&536870912)!==0&&(o.flags&128)===0&&(Te(o),o.subtreeFlags&6&&(o.flags|=8192)):Te(o),u=o.updateQueue,u!==null&&Hu(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==u&&(o.flags|=2048),r!==null&&U(Kr),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Ti(qe),Te(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function aD(r,o){switch(np(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Ti(qe),Et(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Ot(o),null;case 31:if(o.memoizedState!==null){if(us(o),o.alternate===null)throw Error(n(340));Xr()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(us(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Xr()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return U(He),null;case 4:return Et(),null;case 10:return Ti(o.type),null;case 22:case 23:return us(o),yp(),r!==null&&U(Kr),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Ti(qe),null;case 25:return null;default:return null}}function Ww(r,o){switch(np(o),o.tag){case 3:Ti(qe),Et();break;case 26:case 27:case 5:Ot(o);break;case 4:Et();break;case 31:o.memoizedState!==null&&us(o);break;case 13:us(o);break;case 19:U(He);break;case 10:Ti(o.type);break;case 22:case 23:us(o),yp(),r!==null&&U(Kr);break;case 24:Ti(qe)}}function Ol(r,o){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var b=m.next;u=b;do{if((u.tag&r)===r){m=void 0;var _=u.create,C=u.inst;m=_(),C.destroy=m}u=u.next}while(u!==b)}}catch(B){ye(o,o.return,B)}}function lr(r,o,u){try{var m=o.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var _=b.next;m=_;do{if((m.tag&r)===r){var C=m.inst,B=C.destroy;if(B!==void 0){C.destroy=void 0,b=o;var X=u,at=B;try{at()}catch(dt){ye(b,X,dt)}}}m=m.next}while(m!==_)}}catch(dt){ye(o,o.return,dt)}}function Kw(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{j0(o,u)}catch(m){ye(r,r.return,m)}}}function Zw(r,o,u){u.props=ea(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(m){ye(r,o,m)}}function Nl(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var m=r.stateNode;break;case 30:m=r.stateNode;break;default:m=r.stateNode}typeof u=="function"?r.refCleanup=u(m):u.current=m}}catch(b){ye(r,o,b)}}function ti(r,o){var u=r.ref,m=r.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(b){ye(r,o,b)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(b){ye(r,o,b)}else u.current=null}function Qw(r){var o=r.type,u=r.memoizedProps,m=r.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break t;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(b){ye(r,r.return,b)}}function Wp(r,o,u){try{var m=r.stateNode;RD(m,r.type,u,o),m[Yn]=o}catch(b){ye(r,r.return,b)}}function Jw(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&mr(r.type)||r.tag===4}function Kp(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||Jw(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&mr(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Zp(r,o,u){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=xi));else if(m!==4&&(m===27&&mr(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for(Zp(r,o,u),r=r.sibling;r!==null;)Zp(r,o,u),r=r.sibling}function Vu(r,o,u){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(m!==4&&(m===27&&mr(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Vu(r,o,u),r=r.sibling;r!==null;)Vu(r,o,u),r=r.sibling}function t_(r){var o=r.stateNode,u=r.memoizedProps;try{for(var m=r.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);_n(o,m,u),o[yn]=r,o[Yn]=u}catch(_){ye(r,r.return,_)}}var Oi=!1,We=!1,Qp=!1,e_=typeof WeakSet=="function"?WeakSet:Set,fn=null;function oD(r,o){if(r=r.containerInfo,bm=uh,r=f0(r),Gf(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else t:{u=(u=r.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var b=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break t}var C=0,B=-1,X=-1,at=0,dt=0,gt=r,lt=null;e:for(;;){for(var ht;gt!==u||b!==0&&gt.nodeType!==3||(B=C+b),gt!==_||m!==0&&gt.nodeType!==3||(X=C+m),gt.nodeType===3&&(C+=gt.nodeValue.length),(ht=gt.firstChild)!==null;)lt=gt,gt=ht;for(;;){if(gt===r)break e;if(lt===u&&++at===b&&(B=C),lt===_&&++dt===m&&(X=C),(ht=gt.nextSibling)!==null)break;gt=lt,lt=gt.parentNode}gt=ht}u=B===-1||X===-1?null:{start:B,end:X}}else u=null}u=u||{start:0,end:0}}else u=null;for(wm={focusedElem:r,selectionRange:u},uh=!1,fn=o;fn!==null;)if(o=fn,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,fn=r;else for(;fn!==null;){switch(o=fn,_=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)b=r[u],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,u=o,b=_.memoizedProps,_=_.memoizedState,m=u.stateNode;try{var Mt=ea(u.type,b);r=m.getSnapshotBeforeUpdate(Mt,_),m.__reactInternalSnapshotBeforeUpdate=r}catch(Vt){ye(u,u.return,Vt)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)Sm(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Sm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=o.sibling,r!==null){r.return=o.return,fn=r;break}fn=o.return}}function n_(r,o,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:Pi(r,u),m&4&&Ol(5,u);break;case 1:if(Pi(r,u),m&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(C){ye(u,u.return,C)}else{var b=ea(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(b,o,r.__reactInternalSnapshotBeforeUpdate)}catch(C){ye(u,u.return,C)}}m&64&&Kw(u),m&512&&Nl(u,u.return);break;case 3:if(Pi(r,u),m&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{j0(r,o)}catch(C){ye(u,u.return,C)}}break;case 27:o===null&&m&4&&t_(u);case 26:case 5:Pi(r,u),o===null&&m&4&&Qw(u),m&512&&Nl(u,u.return);break;case 12:Pi(r,u);break;case 31:Pi(r,u),m&4&&r_(r,u);break;case 13:Pi(r,u),m&4&&a_(r,u),m&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=gD.bind(null,u),BD(r,u))));break;case 22:if(m=u.memoizedState!==null||Oi,!m){o=o!==null&&o.memoizedState!==null||We,b=Oi;var _=We;Oi=m,(We=o)&&!_?Li(r,u,(u.subtreeFlags&8772)!==0):Pi(r,u),Oi=b,We=_}break;case 30:break;default:Pi(r,u)}}function s_(r){var o=r.alternate;o!==null&&(r.alternate=null,s_(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Rf(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Me=null,Kn=!1;function Ni(r,o,u){for(u=u.child;u!==null;)i_(r,o,u),u=u.sibling}function i_(r,o,u){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(me,u)}catch{}switch(u.tag){case 26:We||ti(u,o),Ni(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:We||ti(u,o);var m=Me,b=Kn;mr(u.type)&&(Me=u.stateNode,Kn=!1),Ni(r,o,u),Hl(u.stateNode),Me=m,Kn=b;break;case 5:We||ti(u,o);case 6:if(m=Me,b=Kn,Me=null,Ni(r,o,u),Me=m,Kn=b,Me!==null)if(Kn)try{(Me.nodeType===9?Me.body:Me.nodeName==="HTML"?Me.ownerDocument.body:Me).removeChild(u.stateNode)}catch(_){ye(u,o,_)}else try{Me.removeChild(u.stateNode)}catch(_){ye(u,o,_)}break;case 18:Me!==null&&(Kn?(r=Me,K_(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),po(r)):K_(Me,u.stateNode));break;case 4:m=Me,b=Kn,Me=u.stateNode.containerInfo,Kn=!0,Ni(r,o,u),Me=m,Kn=b;break;case 0:case 11:case 14:case 15:lr(2,u,o),We||lr(4,u,o),Ni(r,o,u);break;case 1:We||(ti(u,o),m=u.stateNode,typeof m.componentWillUnmount=="function"&&Zw(u,o,m)),Ni(r,o,u);break;case 21:Ni(r,o,u);break;case 22:We=(m=We)||u.memoizedState!==null,Ni(r,o,u),We=m;break;default:Ni(r,o,u)}}function r_(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{po(r)}catch(u){ye(o,o.return,u)}}}function a_(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{po(r)}catch(u){ye(o,o.return,u)}}function lD(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new e_),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new e_),o;default:throw Error(n(435,r.tag))}}function $u(r,o){var u=lD(r);o.forEach(function(m){if(!u.has(m)){u.add(m);var b=yD.bind(null,r,m);m.then(b,b)}})}function Zn(r,o){var u=o.deletions;if(u!==null)for(var m=0;m<u.length;m++){var b=u[m],_=r,C=o,B=C;t:for(;B!==null;){switch(B.tag){case 27:if(mr(B.type)){Me=B.stateNode,Kn=!1;break t}break;case 5:Me=B.stateNode,Kn=!1;break t;case 3:case 4:Me=B.stateNode.containerInfo,Kn=!0;break t}B=B.return}if(Me===null)throw Error(n(160));i_(_,C,b),Me=null,Kn=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)o_(o,r),o=o.sibling}var Vs=null;function o_(r,o){var u=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Zn(o,r),Qn(r),m&4&&(lr(3,r,r.return),Ol(3,r),lr(5,r,r.return));break;case 1:Zn(o,r),Qn(r),m&512&&(We||u===null||ti(u,u.return)),m&64&&Oi&&(r=r.updateQueue,r!==null&&(m=r.callbacks,m!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var b=Vs;if(Zn(o,r),Qn(r),m&512&&(We||u===null||ti(u,u.return)),m&4){var _=u!==null?u.memoizedState:null;if(m=r.memoizedState,u===null)if(m===null)if(r.stateNode===null){t:{m=r.type,u=r.memoizedProps,b=b.ownerDocument||b;e:switch(m){case"title":_=b.getElementsByTagName("title")[0],(!_||_[al]||_[yn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(m),b.head.insertBefore(_,b.querySelector("head > title"))),_n(_,m,u),_[yn]=r,dn(_),m=_;break t;case"link":var C=ox("link","href",b).get(m+(u.href||""));if(C){for(var B=0;B<C.length;B++)if(_=C[B],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(B,1);break e}}_=b.createElement(m),_n(_,m,u),b.head.appendChild(_);break;case"meta":if(C=ox("meta","content",b).get(m+(u.content||""))){for(B=0;B<C.length;B++)if(_=C[B],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(B,1);break e}}_=b.createElement(m),_n(_,m,u),b.head.appendChild(_);break;default:throw Error(n(468,m))}_[yn]=r,dn(_),m=_}r.stateNode=m}else lx(b,r.type,r.stateNode);else r.stateNode=ax(b,m,r.memoizedProps);else _!==m?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,m===null?lx(b,r.type,r.stateNode):ax(b,m,r.memoizedProps)):m===null&&r.stateNode!==null&&Wp(r,r.memoizedProps,u.memoizedProps)}break;case 27:Zn(o,r),Qn(r),m&512&&(We||u===null||ti(u,u.return)),u!==null&&m&4&&Wp(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Zn(o,r),Qn(r),m&512&&(We||u===null||ti(u,u.return)),r.flags&32){b=r.stateNode;try{Ba(b,"")}catch(Mt){ye(r,r.return,Mt)}}m&4&&r.stateNode!=null&&(b=r.memoizedProps,Wp(r,b,u!==null?u.memoizedProps:b)),m&1024&&(Qp=!0);break;case 6:if(Zn(o,r),Qn(r),m&4){if(r.stateNode===null)throw Error(n(162));m=r.memoizedProps,u=r.stateNode;try{u.nodeValue=m}catch(Mt){ye(r,r.return,Mt)}}break;case 3:if(ah=null,b=Vs,Vs=ih(o.containerInfo),Zn(o,r),Vs=b,Qn(r),m&4&&u!==null&&u.memoizedState.isDehydrated)try{po(o.containerInfo)}catch(Mt){ye(r,r.return,Mt)}Qp&&(Qp=!1,l_(r));break;case 4:m=Vs,Vs=ih(r.stateNode.containerInfo),Zn(o,r),Qn(r),Vs=m;break;case 12:Zn(o,r),Qn(r);break;case 31:Zn(o,r),Qn(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,$u(r,m)));break;case 13:Zn(o,r),Qn(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(qu=Ct()),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,$u(r,m)));break;case 22:b=r.memoizedState!==null;var X=u!==null&&u.memoizedState!==null,at=Oi,dt=We;if(Oi=at||b,We=dt||X,Zn(o,r),We=dt,Oi=at,Qn(r),m&8192)t:for(o=r.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(u===null||X||Oi||We||na(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){X=u=o;try{if(_=X.stateNode,b)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{B=X.stateNode;var gt=X.memoizedProps.style,lt=gt!=null&&gt.hasOwnProperty("display")?gt.display:null;B.style.display=lt==null||typeof lt=="boolean"?"":(""+lt).trim()}}catch(Mt){ye(X,X.return,Mt)}}}else if(o.tag===6){if(u===null){X=o;try{X.stateNode.nodeValue=b?"":X.memoizedProps}catch(Mt){ye(X,X.return,Mt)}}}else if(o.tag===18){if(u===null){X=o;try{var ht=X.stateNode;b?Z_(ht,!0):Z_(X.stateNode,!1)}catch(Mt){ye(X,X.return,Mt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break t;for(;o.sibling===null;){if(o.return===null||o.return===r)break t;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=r.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,$u(r,u))));break;case 19:Zn(o,r),Qn(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,$u(r,m)));break;case 30:break;case 21:break;default:Zn(o,r),Qn(r)}}function Qn(r){var o=r.flags;if(o&2){try{for(var u,m=r.return;m!==null;){if(Jw(m)){u=m;break}m=m.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var b=u.stateNode,_=Kp(r);Vu(r,_,b);break;case 5:var C=u.stateNode;u.flags&32&&(Ba(C,""),u.flags&=-33);var B=Kp(r);Vu(r,B,C);break;case 3:case 4:var X=u.stateNode.containerInfo,at=Kp(r);Zp(r,at,X);break;default:throw Error(n(161))}}catch(dt){ye(r,r.return,dt)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function l_(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;l_(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Pi(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)n_(r,o.alternate,o),o=o.sibling}function na(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:lr(4,o,o.return),na(o);break;case 1:ti(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&Zw(o,o.return,u),na(o);break;case 27:Hl(o.stateNode);case 26:case 5:ti(o,o.return),na(o);break;case 22:o.memoizedState===null&&na(o);break;case 30:na(o);break;default:na(o)}r=r.sibling}}function Li(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,b=r,_=o,C=_.flags;switch(_.tag){case 0:case 11:case 15:Li(b,_,u),Ol(4,_);break;case 1:if(Li(b,_,u),m=_,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(at){ye(m,m.return,at)}if(m=_,b=m.updateQueue,b!==null){var B=m.stateNode;try{var X=b.shared.hiddenCallbacks;if(X!==null)for(b.shared.hiddenCallbacks=null,b=0;b<X.length;b++)z0(X[b],B)}catch(at){ye(m,m.return,at)}}u&&C&64&&Kw(_),Nl(_,_.return);break;case 27:t_(_);case 26:case 5:Li(b,_,u),u&&m===null&&C&4&&Qw(_),Nl(_,_.return);break;case 12:Li(b,_,u);break;case 31:Li(b,_,u),u&&C&4&&r_(b,_);break;case 13:Li(b,_,u),u&&C&4&&a_(b,_);break;case 22:_.memoizedState===null&&Li(b,_,u),Nl(_,_.return);break;case 30:break;default:Li(b,_,u)}o=o.sibling}}function Jp(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&bl(u))}function tm(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&bl(r))}function $s(r,o,u,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)c_(r,o,u,m),o=o.sibling}function c_(r,o,u,m){var b=o.flags;switch(o.tag){case 0:case 11:case 15:$s(r,o,u,m),b&2048&&Ol(9,o);break;case 1:$s(r,o,u,m);break;case 3:$s(r,o,u,m),b&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&bl(r)));break;case 12:if(b&2048){$s(r,o,u,m),r=o.stateNode;try{var _=o.memoizedProps,C=_.id,B=_.onPostCommit;typeof B=="function"&&B(C,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(X){ye(o,o.return,X)}}else $s(r,o,u,m);break;case 31:$s(r,o,u,m);break;case 13:$s(r,o,u,m);break;case 23:break;case 22:_=o.stateNode,C=o.alternate,o.memoizedState!==null?_._visibility&2?$s(r,o,u,m):Pl(r,o):_._visibility&2?$s(r,o,u,m):(_._visibility|=2,no(r,o,u,m,(o.subtreeFlags&10256)!==0||!1)),b&2048&&Jp(C,o);break;case 24:$s(r,o,u,m),b&2048&&tm(o.alternate,o);break;default:$s(r,o,u,m)}}function no(r,o,u,m,b){for(b=b&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=r,C=o,B=u,X=m,at=C.flags;switch(C.tag){case 0:case 11:case 15:no(_,C,B,X,b),Ol(8,C);break;case 23:break;case 22:var dt=C.stateNode;C.memoizedState!==null?dt._visibility&2?no(_,C,B,X,b):Pl(_,C):(dt._visibility|=2,no(_,C,B,X,b)),b&&at&2048&&Jp(C.alternate,C);break;case 24:no(_,C,B,X,b),b&&at&2048&&tm(C.alternate,C);break;default:no(_,C,B,X,b)}o=o.sibling}}function Pl(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,m=o,b=m.flags;switch(m.tag){case 22:Pl(u,m),b&2048&&Jp(m.alternate,m);break;case 24:Pl(u,m),b&2048&&tm(m.alternate,m);break;default:Pl(u,m)}o=o.sibling}}var Ll=8192;function so(r,o,u){if(r.subtreeFlags&Ll)for(r=r.child;r!==null;)u_(r,o,u),r=r.sibling}function u_(r,o,u){switch(r.tag){case 26:so(r,o,u),r.flags&Ll&&r.memoizedState!==null&&YD(u,Vs,r.memoizedState,r.memoizedProps);break;case 5:so(r,o,u);break;case 3:case 4:var m=Vs;Vs=ih(r.stateNode.containerInfo),so(r,o,u),Vs=m;break;case 22:r.memoizedState===null&&(m=r.alternate,m!==null&&m.memoizedState!==null?(m=Ll,Ll=16777216,so(r,o,u),Ll=m):so(r,o,u));break;default:so(r,o,u)}}function h_(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Bl(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];fn=m,f_(m,r)}h_(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)d_(r),r=r.sibling}function d_(r){switch(r.tag){case 0:case 11:case 15:Bl(r),r.flags&2048&&lr(9,r,r.return);break;case 3:Bl(r);break;case 12:Bl(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Gu(r)):Bl(r);break;default:Bl(r)}}function Gu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];fn=m,f_(m,r)}h_(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:lr(8,o,o.return),Gu(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Gu(o));break;default:Gu(o)}r=r.sibling}}function f_(r,o){for(;fn!==null;){var u=fn;switch(u.tag){case 0:case 11:case 15:lr(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:bl(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,fn=m;else t:for(u=r;fn!==null;){m=fn;var b=m.sibling,_=m.return;if(s_(m),m===u){fn=null;break t}if(b!==null){b.return=_,fn=b;break t}fn=_}}}var cD={getCacheForType:function(r){var o=bn(qe),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u},cacheSignal:function(){return bn(qe).controller.signal}},uD=typeof WeakMap=="function"?WeakMap:Map,de=0,xe=null,ee=null,se=0,ge=0,hs=null,cr=!1,io=!1,em=!1,Bi=0,Fe=0,ur=0,sa=0,nm=0,ds=0,ro=0,Il=null,Jn=null,sm=!1,qu=0,p_=0,Xu=1/0,Yu=null,hr=null,en=0,dr=null,ao=null,Ii=0,im=0,rm=null,m_=null,Fl=0,am=null;function fs(){return(de&2)!==0&&se!==0?se&-se:z.T!==null?dm():Cf()}function g_(){if(ds===0)if((se&536870912)===0||re){var r=wi;wi<<=1,(wi&3932160)===0&&(wi=262144),ds=r}else ds=536870912;return r=cs.current,r!==null&&(r.flags|=32),ds}function ts(r,o,u){(r===xe&&(ge===2||ge===9)||r.cancelPendingCommit!==null)&&(oo(r,0),fr(r,se,ds,!1)),Ne(r,u),((de&2)===0||r!==xe)&&(r===xe&&((de&2)===0&&(sa|=u),Fe===4&&fr(r,se,ds,!1)),ei(r))}function y_(r,o,u){if((de&6)!==0)throw Error(n(327));var m=!u&&(o&127)===0&&(o&r.expiredLanes)===0||ke(r,o),b=m?fD(r,o):lm(r,o,!0),_=m;do{if(b===0){io&&!m&&fr(r,o,0,!1);break}else{if(u=r.current.alternate,_&&!hD(u)){b=lm(r,o,!1),_=!1;continue}if(b===2){if(_=o,r.errorRecoveryDisabledLanes&_)var C=0;else C=r.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;t:{var B=r;b=Il;var X=B.current.memoizedState.isDehydrated;if(X&&(oo(B,C).flags|=256),C=lm(B,C,!1),C!==2){if(em&&!X){B.errorRecoveryDisabledLanes|=_,sa|=_,b=4;break t}_=Jn,Jn=b,_!==null&&(Jn===null?Jn=_:Jn.push.apply(Jn,_))}b=C}if(_=!1,b!==2)continue}}if(b===1){oo(r,0),fr(r,o,0,!0);break}t:{switch(m=r,_=b,_){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:fr(m,o,ds,!cr);break t;case 2:Jn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(b=qu+300-Ct(),10<b)){if(fr(m,o,ds,!cr),Gt(m,0,!0)!==0)break t;Ii=o,m.timeoutHandle=Y_(v_.bind(null,m,u,Jn,Yu,sm,o,ds,sa,ro,cr,_,"Throttled",-0,0),b);break t}v_(m,u,Jn,Yu,sm,o,ds,sa,ro,cr,_,null,-0,0)}}break}while(!0);ei(r)}function v_(r,o,u,m,b,_,C,B,X,at,dt,gt,lt,ht){if(r.timeoutHandle=-1,gt=o.subtreeFlags,gt&8192||(gt&16785408)===16785408){gt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xi},u_(o,_,gt);var Mt=(_&62914560)===_?qu-Ct():(_&4194048)===_?p_-Ct():0;if(Mt=WD(gt,Mt),Mt!==null){Ii=_,r.cancelPendingCommit=Mt(C_.bind(null,r,o,_,u,m,b,C,B,X,dt,gt,null,lt,ht)),fr(r,_,C,!at);return}}C_(r,o,_,u,m,b,C,B,X)}function hD(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var b=u[m],_=b.getSnapshot;b=b.value;try{if(!os(_(),b))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function fr(r,o,u,m){o&=~nm,o&=~sa,r.suspendedLanes|=o,r.pingedLanes&=~o,m&&(r.warmLanes|=o),m=r.expirationTimes;for(var b=o;0<b;){var _=31-Ae(b),C=1<<_;m[_]=-1,b&=~C}u!==0&&jr(r,u,o)}function Wu(){return(de&6)===0?(zl(0),!1):!0}function om(){if(ee!==null){if(ge===0)var r=ee.return;else r=ee,Ci=Yr=null,Sp(r),Za=null,_l=0,r=ee;for(;r!==null;)Ww(r.alternate,r),r=r.return;ee=null}}function oo(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,DD(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),Ii=0,om(),xe=r,ee=u=Ai(r.current,null),se=o,ge=0,hs=null,cr=!1,io=ke(r,o),em=!1,ro=ds=nm=sa=ur=Fe=0,Jn=Il=null,sm=!1,(o&8)!==0&&(o|=o&32);var m=r.entangledLanes;if(m!==0)for(r=r.entanglements,m&=o;0<m;){var b=31-Ae(m),_=1<<b;o|=r[b],m&=~_}return Bi=o,gu(),u}function b_(r,o){Zt=null,z.H=kl,o===Ka||o===Au?(o=L0(),ge=3):o===hp?(o=L0(),ge=4):ge=o===zp?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,hs=o,ee===null&&(Fe=1,Fu(r,Cs(o,r.current)))}function w_(){var r=cs.current;return r===null?!0:(se&4194048)===se?Ms===null:(se&62914560)===se||(se&536870912)!==0?r===Ms:!1}function __(){var r=z.H;return z.H=kl,r===null?kl:r}function x_(){var r=z.A;return z.A=cD,r}function Ku(){Fe=4,cr||(se&4194048)!==se&&cs.current!==null||(io=!0),(ur&134217727)===0&&(sa&134217727)===0||xe===null||fr(xe,se,ds,!1)}function lm(r,o,u){var m=de;de|=2;var b=__(),_=x_();(xe!==r||se!==o)&&(Yu=null,oo(r,o)),o=!1;var C=Fe;t:do try{if(ge!==0&&ee!==null){var B=ee,X=hs;switch(ge){case 8:om(),C=6;break t;case 3:case 2:case 9:case 6:cs.current===null&&(o=!0);var at=ge;if(ge=0,hs=null,lo(r,B,X,at),u&&io){C=0;break t}break;default:at=ge,ge=0,hs=null,lo(r,B,X,at)}}dD(),C=Fe;break}catch(dt){b_(r,dt)}while(!0);return o&&r.shellSuspendCounter++,Ci=Yr=null,de=m,z.H=b,z.A=_,ee===null&&(xe=null,se=0,gu()),C}function dD(){for(;ee!==null;)S_(ee)}function fD(r,o){var u=de;de|=2;var m=__(),b=x_();xe!==r||se!==o?(Yu=null,Xu=Ct()+500,oo(r,o)):io=ke(r,o);t:do try{if(ge!==0&&ee!==null){o=ee;var _=hs;e:switch(ge){case 1:ge=0,hs=null,lo(r,o,_,1);break;case 2:case 9:if(N0(_)){ge=0,hs=null,A_(o);break}o=function(){ge!==2&&ge!==9||xe!==r||(ge=7),ei(r)},_.then(o,o);break t;case 3:ge=7;break t;case 4:ge=5;break t;case 7:N0(_)?(ge=0,hs=null,A_(o)):(ge=0,hs=null,lo(r,o,_,7));break;case 5:var C=null;switch(ee.tag){case 26:C=ee.memoizedState;case 5:case 27:var B=ee;if(C?cx(C):B.stateNode.complete){ge=0,hs=null;var X=B.sibling;if(X!==null)ee=X;else{var at=B.return;at!==null?(ee=at,Zu(at)):ee=null}break e}}ge=0,hs=null,lo(r,o,_,5);break;case 6:ge=0,hs=null,lo(r,o,_,6);break;case 8:om(),Fe=6;break t;default:throw Error(n(462))}}pD();break}catch(dt){b_(r,dt)}while(!0);return Ci=Yr=null,z.H=m,z.A=b,de=u,ee!==null?0:(xe=null,se=0,gu(),Fe)}function pD(){for(;ee!==null&&!st();)S_(ee)}function S_(r){var o=Xw(r.alternate,r,Bi);r.memoizedProps=r.pendingProps,o===null?Zu(r):ee=o}function A_(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=Uw(u,o,o.pendingProps,o.type,void 0,se);break;case 11:o=Uw(u,o,o.pendingProps,o.type.render,o.ref,se);break;case 5:Sp(o);default:Ww(u,o),o=ee=x0(o,Bi),o=Xw(u,o,Bi)}r.memoizedProps=r.pendingProps,o===null?Zu(r):ee=o}function lo(r,o,u,m){Ci=Yr=null,Sp(o),Za=null,_l=0;var b=o.return;try{if(nD(r,b,o,u,se)){Fe=1,Fu(r,Cs(u,r.current)),ee=null;return}}catch(_){if(b!==null)throw ee=b,_;Fe=1,Fu(r,Cs(u,r.current)),ee=null;return}o.flags&32768?(re||m===1?r=!0:io||(se&536870912)!==0?r=!1:(cr=r=!0,(m===2||m===9||m===3||m===6)&&(m=cs.current,m!==null&&m.tag===13&&(m.flags|=16384))),E_(o,r)):Zu(o)}function Zu(r){var o=r;do{if((o.flags&32768)!==0){E_(o,cr);return}r=o.return;var u=rD(o.alternate,o,Bi);if(u!==null){ee=u;return}if(o=o.sibling,o!==null){ee=o;return}ee=o=r}while(o!==null);Fe===0&&(Fe=5)}function E_(r,o){do{var u=aD(r.alternate,r);if(u!==null){u.flags&=32767,ee=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){ee=r;return}ee=r=u}while(r!==null);Fe=6,ee=null}function C_(r,o,u,m,b,_,C,B,X){r.cancelPendingCommit=null;do Qu();while(en!==0);if((de&6)!==0)throw Error(n(327));if(o!==null){if(o===r.current)throw Error(n(177));if(_=o.lanes|o.childLanes,_|=Kf,Gn(r,u,_,C,B,X),r===xe&&(ee=xe=null,se=0),ao=o,dr=r,Ii=u,im=_,rm=b,m_=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,vD(Kt,function(){return D_(),null})):(r.callbackNode=null,r.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=z.T,z.T=null,b=j.p,j.p=2,C=de,de|=4;try{oD(r,o,u)}finally{de=C,j.p=b,z.T=m}}en=1,T_(),R_(),k_()}}function T_(){if(en===1){en=0;var r=dr,o=ao,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=z.T,z.T=null;var m=j.p;j.p=2;var b=de;de|=4;try{o_(o,r);var _=wm,C=f0(r.containerInfo),B=_.focusedElem,X=_.selectionRange;if(C!==B&&B&&B.ownerDocument&&d0(B.ownerDocument.documentElement,B)){if(X!==null&&Gf(B)){var at=X.start,dt=X.end;if(dt===void 0&&(dt=at),"selectionStart"in B)B.selectionStart=at,B.selectionEnd=Math.min(dt,B.value.length);else{var gt=B.ownerDocument||document,lt=gt&&gt.defaultView||window;if(lt.getSelection){var ht=lt.getSelection(),Mt=B.textContent.length,Vt=Math.min(X.start,Mt),we=X.end===void 0?Vt:Math.min(X.end,Mt);!ht.extend&&Vt>we&&(C=we,we=Vt,Vt=C);var et=h0(B,Vt),Z=h0(B,we);if(et&&Z&&(ht.rangeCount!==1||ht.anchorNode!==et.node||ht.anchorOffset!==et.offset||ht.focusNode!==Z.node||ht.focusOffset!==Z.offset)){var rt=gt.createRange();rt.setStart(et.node,et.offset),ht.removeAllRanges(),Vt>we?(ht.addRange(rt),ht.extend(Z.node,Z.offset)):(rt.setEnd(Z.node,Z.offset),ht.addRange(rt))}}}}for(gt=[],ht=B;ht=ht.parentNode;)ht.nodeType===1&&gt.push({element:ht,left:ht.scrollLeft,top:ht.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<gt.length;B++){var mt=gt[B];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}uh=!!bm,wm=bm=null}finally{de=b,j.p=m,z.T=u}}r.current=o,en=2}}function R_(){if(en===2){en=0;var r=dr,o=ao,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=z.T,z.T=null;var m=j.p;j.p=2;var b=de;de|=4;try{n_(r,o.alternate,o)}finally{de=b,j.p=m,z.T=u}}en=3}}function k_(){if(en===4||en===3){en=0,_t();var r=dr,o=ao,u=Ii,m=m_;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?en=5:(en=0,ao=dr=null,M_(r,r.pendingLanes));var b=r.pendingLanes;if(b===0&&(hr=null),Us(u),o=o.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(me,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=z.T,b=j.p,j.p=2,z.T=null;try{for(var _=r.onRecoverableError,C=0;C<m.length;C++){var B=m[C];_(B.value,{componentStack:B.stack})}}finally{z.T=o,j.p=b}}(Ii&3)!==0&&Qu(),ei(r),b=r.pendingLanes,(u&261930)!==0&&(b&42)!==0?r===am?Fl++:(Fl=0,am=r):Fl=0,zl(0)}}function M_(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,bl(o)))}function Qu(){return T_(),R_(),k_(),D_()}function D_(){if(en!==5)return!1;var r=dr,o=im;im=0;var u=Us(Ii),m=z.T,b=j.p;try{j.p=32>u?32:u,z.T=null,u=rm,rm=null;var _=dr,C=Ii;if(en=0,ao=dr=null,Ii=0,(de&6)!==0)throw Error(n(331));var B=de;if(de|=4,d_(_.current),c_(_,_.current,C,u),de=B,zl(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(me,_)}catch{}return!0}finally{j.p=b,z.T=m,M_(r,o)}}function O_(r,o,u){o=Cs(u,o),o=Fp(r.stateNode,o,2),r=rr(r,o,2),r!==null&&(Ne(r,2),ei(r))}function ye(r,o,u){if(r.tag===3)O_(r,r,u);else for(;o!==null;){if(o.tag===3){O_(o,r,u);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(hr===null||!hr.has(m))){r=Cs(u,r),u=Nw(2),m=rr(o,u,2),m!==null&&(Pw(u,m,o,r),Ne(m,2),ei(m));break}}o=o.return}}function cm(r,o,u){var m=r.pingCache;if(m===null){m=r.pingCache=new uD;var b=new Set;m.set(o,b)}else b=m.get(o),b===void 0&&(b=new Set,m.set(o,b));b.has(u)||(em=!0,b.add(u),r=mD.bind(null,r,o,u),o.then(r,r))}function mD(r,o,u){var m=r.pingCache;m!==null&&m.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,xe===r&&(se&u)===u&&(Fe===4||Fe===3&&(se&62914560)===se&&300>Ct()-qu?(de&2)===0&&oo(r,0):nm|=u,ro===se&&(ro=0)),ei(r)}function N_(r,o){o===0&&(o=Rn()),r=Gr(r,o),r!==null&&(Ne(r,o),ei(r))}function gD(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),N_(r,u)}function yD(r,o){var u=0;switch(r.tag){case 31:case 13:var m=r.stateNode,b=r.memoizedState;b!==null&&(u=b.retryLane);break;case 19:m=r.stateNode;break;case 22:m=r.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(o),N_(r,u)}function vD(r,o){return yt(r,o)}var Ju=null,co=null,um=!1,th=!1,hm=!1,pr=0;function ei(r){r!==co&&r.next===null&&(co===null?Ju=co=r:co=co.next=r),th=!0,um||(um=!0,wD())}function zl(r,o){if(!hm&&th){hm=!0;do for(var u=!1,m=Ju;m!==null;){if(r!==0){var b=m.pendingLanes;if(b===0)var _=0;else{var C=m.suspendedLanes,B=m.pingedLanes;_=(1<<31-Ae(42|r)+1)-1,_&=b&~(C&~B),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,I_(m,_))}else _=se,_=Gt(m,m===xe?_:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(_&3)===0||ke(m,_)||(u=!0,I_(m,_));m=m.next}while(u);hm=!1}}function bD(){P_()}function P_(){th=um=!1;var r=0;pr!==0&&MD()&&(r=pr);for(var o=Ct(),u=null,m=Ju;m!==null;){var b=m.next,_=L_(m,o);_===0?(m.next=null,u===null?Ju=b:u.next=b,b===null&&(co=u)):(u=m,(r!==0||(_&3)!==0)&&(th=!0)),m=b}en!==0&&en!==5||zl(r),pr!==0&&(pr=0)}function L_(r,o){for(var u=r.suspendedLanes,m=r.pingedLanes,b=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var C=31-Ae(_),B=1<<C,X=b[C];X===-1?((B&u)===0||(B&m)!==0)&&(b[C]=hn(B,o)):X<=o&&(r.expiredLanes|=B),_&=~B}if(o=xe,u=se,u=Gt(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m=r.callbackNode,u===0||r===o&&(ge===2||ge===9)||r.cancelPendingCommit!==null)return m!==null&&m!==null&&bt(m),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||ke(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(m!==null&&bt(m),Us(u)){case 2:case 8:u=he;break;case 32:u=Kt;break;case 268435456:u=Nn;break;default:u=Kt}return m=B_.bind(null,r),u=yt(u,m),r.callbackPriority=o,r.callbackNode=u,o}return m!==null&&m!==null&&bt(m),r.callbackPriority=2,r.callbackNode=null,2}function B_(r,o){if(en!==0&&en!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(Qu()&&r.callbackNode!==u)return null;var m=se;return m=Gt(r,r===xe?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m===0?null:(y_(r,m,o),L_(r,Ct()),r.callbackNode!=null&&r.callbackNode===u?B_.bind(null,r):null)}function I_(r,o){if(Qu())return null;y_(r,o,!0)}function wD(){OD(function(){(de&6)!==0?yt(It,bD):P_()})}function dm(){if(pr===0){var r=Ya;r===0&&(r=Wi,Wi<<=1,(Wi&261888)===0&&(Wi=256)),pr=r}return pr}function F_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:lu(""+r)}function z_(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function _D(r,o,u,m,b){if(o==="submit"&&u&&u.stateNode===b){var _=F_((b[Yn]||null).action),C=m.submitter;C&&(o=(o=C[Yn]||null)?F_(o.formAction):C.getAttribute("formAction"),o!==null&&(_=o,C=null));var B=new du("action","action",null,m,b);r.push({event:B,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(pr!==0){var X=C?z_(b,C):new FormData(b);Op(u,{pending:!0,data:X,method:b.method,action:_},null,X)}}else typeof _=="function"&&(B.preventDefault(),X=C?z_(b,C):new FormData(b),Op(u,{pending:!0,data:X,method:b.method,action:_},_,X))},currentTarget:b}]})}}for(var fm=0;fm<Wf.length;fm++){var pm=Wf[fm],xD=pm.toLowerCase(),SD=pm[0].toUpperCase()+pm.slice(1);Hs(xD,"on"+SD)}Hs(g0,"onAnimationEnd"),Hs(y0,"onAnimationIteration"),Hs(v0,"onAnimationStart"),Hs("dblclick","onDoubleClick"),Hs("focusin","onFocus"),Hs("focusout","onBlur"),Hs(zM,"onTransitionRun"),Hs(jM,"onTransitionStart"),Hs(UM,"onTransitionCancel"),Hs(b0,"onTransitionEnd"),Pa("onMouseEnter",["mouseout","mouseover"]),Pa("onMouseLeave",["mouseout","mouseover"]),Pa("onPointerEnter",["pointerout","pointerover"]),Pa("onPointerLeave",["pointerout","pointerover"]),Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jl));function j_(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var m=r[u],b=m.event;m=m.listeners;t:{var _=void 0;if(o)for(var C=m.length-1;0<=C;C--){var B=m[C],X=B.instance,at=B.currentTarget;if(B=B.listener,X!==_&&b.isPropagationStopped())break t;_=B,b.currentTarget=at;try{_(b)}catch(dt){mu(dt)}b.currentTarget=null,_=X}else for(C=0;C<m.length;C++){if(B=m[C],X=B.instance,at=B.currentTarget,B=B.listener,X!==_&&b.isPropagationStopped())break t;_=B,b.currentTarget=at;try{_(b)}catch(dt){mu(dt)}b.currentTarget=null,_=X}}}}function ne(r,o){var u=o[Tf];u===void 0&&(u=o[Tf]=new Set);var m=r+"__bubble";u.has(m)||(U_(o,r,2,!1),u.add(m))}function mm(r,o,u){var m=0;o&&(m|=4),U_(u,r,m,o)}var eh="_reactListening"+Math.random().toString(36).slice(2);function gm(r){if(!r[eh]){r[eh]=!0,Pb.forEach(function(u){u!=="selectionchange"&&(AD.has(u)||mm(u,!1,r),mm(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[eh]||(o[eh]=!0,mm("selectionchange",!1,o))}}function U_(r,o,u,m){switch(gx(o)){case 2:var b=QD;break;case 8:b=JD;break;default:b=Dm}u=b.bind(null,o,u,r),b=void 0,!Bf||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),m?b!==void 0?r.addEventListener(o,u,{capture:!0,passive:b}):r.addEventListener(o,u,!0):b!==void 0?r.addEventListener(o,u,{passive:b}):r.addEventListener(o,u,!1)}function ym(r,o,u,m,b){var _=m;if((o&1)===0&&(o&2)===0&&m!==null)t:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var B=m.stateNode.containerInfo;if(B===b)break;if(C===4)for(C=m.return;C!==null;){var X=C.tag;if((X===3||X===4)&&C.stateNode.containerInfo===b)return;C=C.return}for(;B!==null;){if(C=Da(B),C===null)return;if(X=C.tag,X===5||X===6||X===26||X===27){m=_=C;continue t}B=B.parentNode}}m=m.return}qb(function(){var at=_,dt=Pf(u),gt=[];t:{var lt=w0.get(r);if(lt!==void 0){var ht=du,Mt=r;switch(r){case"keypress":if(uu(u)===0)break t;case"keydown":case"keyup":ht=yM;break;case"focusin":Mt="focus",ht=jf;break;case"focusout":Mt="blur",ht=jf;break;case"beforeblur":case"afterblur":ht=jf;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=Wb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=rM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=wM;break;case g0:case y0:case v0:ht=lM;break;case b0:ht=xM;break;case"scroll":case"scrollend":ht=sM;break;case"wheel":ht=AM;break;case"copy":case"cut":case"paste":ht=uM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=Zb;break;case"toggle":case"beforetoggle":ht=CM}var Vt=(o&4)!==0,we=!Vt&&(r==="scroll"||r==="scrollend"),et=Vt?lt!==null?lt+"Capture":null:lt;Vt=[];for(var Z=at,rt;Z!==null;){var mt=Z;if(rt=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||rt===null||et===null||(mt=ll(Z,et),mt!=null&&Vt.push(Ul(Z,mt,rt))),we)break;Z=Z.return}0<Vt.length&&(lt=new ht(lt,Mt,null,u,dt),gt.push({event:lt,listeners:Vt}))}}if((o&7)===0){t:{if(lt=r==="mouseover"||r==="pointerover",ht=r==="mouseout"||r==="pointerout",lt&&u!==Nf&&(Mt=u.relatedTarget||u.fromElement)&&(Da(Mt)||Mt[Ma]))break t;if((ht||lt)&&(lt=dt.window===dt?dt:(lt=dt.ownerDocument)?lt.defaultView||lt.parentWindow:window,ht?(Mt=u.relatedTarget||u.toElement,ht=at,Mt=Mt?Da(Mt):null,Mt!==null&&(we=a(Mt),Vt=Mt.tag,Mt!==we||Vt!==5&&Vt!==27&&Vt!==6)&&(Mt=null)):(ht=null,Mt=at),ht!==Mt)){if(Vt=Wb,mt="onMouseLeave",et="onMouseEnter",Z="mouse",(r==="pointerout"||r==="pointerover")&&(Vt=Zb,mt="onPointerLeave",et="onPointerEnter",Z="pointer"),we=ht==null?lt:ol(ht),rt=Mt==null?lt:ol(Mt),lt=new Vt(mt,Z+"leave",ht,u,dt),lt.target=we,lt.relatedTarget=rt,mt=null,Da(dt)===at&&(Vt=new Vt(et,Z+"enter",Mt,u,dt),Vt.target=rt,Vt.relatedTarget=we,mt=Vt),we=mt,ht&&Mt)e:{for(Vt=ED,et=ht,Z=Mt,rt=0,mt=et;mt;mt=Vt(mt))rt++;mt=0;for(var zt=Z;zt;zt=Vt(zt))mt++;for(;0<rt-mt;)et=Vt(et),rt--;for(;0<mt-rt;)Z=Vt(Z),mt--;for(;rt--;){if(et===Z||Z!==null&&et===Z.alternate){Vt=et;break e}et=Vt(et),Z=Vt(Z)}Vt=null}else Vt=null;ht!==null&&H_(gt,lt,ht,Vt,!1),Mt!==null&&we!==null&&H_(gt,we,Mt,Vt,!0)}}t:{if(lt=at?ol(at):window,ht=lt.nodeName&&lt.nodeName.toLowerCase(),ht==="select"||ht==="input"&&lt.type==="file")var ce=r0;else if(s0(lt))if(a0)ce=BM;else{ce=PM;var Bt=NM}else ht=lt.nodeName,!ht||ht.toLowerCase()!=="input"||lt.type!=="checkbox"&&lt.type!=="radio"?at&&Of(at.elementType)&&(ce=r0):ce=LM;if(ce&&(ce=ce(r,at))){i0(gt,ce,u,dt);break t}Bt&&Bt(r,lt,at),r==="focusout"&&at&&lt.type==="number"&&at.memoizedProps.value!=null&&Df(lt,"number",lt.value)}switch(Bt=at?ol(at):window,r){case"focusin":(s0(Bt)||Bt.contentEditable==="true")&&(ja=Bt,qf=at,gl=null);break;case"focusout":gl=qf=ja=null;break;case"mousedown":Xf=!0;break;case"contextmenu":case"mouseup":case"dragend":Xf=!1,p0(gt,u,dt);break;case"selectionchange":if(FM)break;case"keydown":case"keyup":p0(gt,u,dt)}var Qt;if(Hf)t:{switch(r){case"compositionstart":var ie="onCompositionStart";break t;case"compositionend":ie="onCompositionEnd";break t;case"compositionupdate":ie="onCompositionUpdate";break t}ie=void 0}else za?e0(r,u)&&(ie="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(ie="onCompositionStart");ie&&(Qb&&u.locale!=="ko"&&(za||ie!=="onCompositionStart"?ie==="onCompositionEnd"&&za&&(Qt=Xb()):(Qi=dt,If="value"in Qi?Qi.value:Qi.textContent,za=!0)),Bt=nh(at,ie),0<Bt.length&&(ie=new Kb(ie,r,null,u,dt),gt.push({event:ie,listeners:Bt}),Qt?ie.data=Qt:(Qt=n0(u),Qt!==null&&(ie.data=Qt)))),(Qt=RM?kM(r,u):MM(r,u))&&(ie=nh(at,"onBeforeInput"),0<ie.length&&(Bt=new Kb("onBeforeInput","beforeinput",null,u,dt),gt.push({event:Bt,listeners:ie}),Bt.data=Qt)),_D(gt,r,at,u,dt)}j_(gt,o)})}function Ul(r,o,u){return{instance:r,listener:o,currentTarget:u}}function nh(r,o){for(var u=o+"Capture",m=[];r!==null;){var b=r,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=ll(r,u),b!=null&&m.unshift(Ul(r,b,_)),b=ll(r,o),b!=null&&m.push(Ul(r,b,_))),r.tag===3)return m;r=r.return}return[]}function ED(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function H_(r,o,u,m,b){for(var _=o._reactName,C=[];u!==null&&u!==m;){var B=u,X=B.alternate,at=B.stateNode;if(B=B.tag,X!==null&&X===m)break;B!==5&&B!==26&&B!==27||at===null||(X=at,b?(at=ll(u,_),at!=null&&C.unshift(Ul(u,at,X))):b||(at=ll(u,_),at!=null&&C.push(Ul(u,at,X)))),u=u.return}C.length!==0&&r.push({event:o,listeners:C})}var CD=/\r\n?/g,TD=/\u0000|\uFFFD/g;function V_(r){return(typeof r=="string"?r:""+r).replace(CD,`
`).replace(TD,"")}function $_(r,o){return o=V_(o),V_(r)===o}function be(r,o,u,m,b,_){switch(u){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Ba(r,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Ba(r,""+m);break;case"className":au(r,"class",m);break;case"tabIndex":au(r,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":au(r,u,m);break;case"style":$b(r,m,_);break;case"data":if(o!=="object"){au(r,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(u);break}m=lu(""+m),r.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(o!=="input"&&be(r,o,"name",b.name,b,null),be(r,o,"formEncType",b.formEncType,b,null),be(r,o,"formMethod",b.formMethod,b,null),be(r,o,"formTarget",b.formTarget,b,null)):(be(r,o,"encType",b.encType,b,null),be(r,o,"method",b.method,b,null),be(r,o,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(u);break}m=lu(""+m),r.setAttribute(u,m);break;case"onClick":m!=null&&(r.onclick=xi);break;case"onScroll":m!=null&&ne("scroll",r);break;case"onScrollEnd":m!=null&&ne("scrollend",r);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(u=m.__html,u!=null){if(b.children!=null)throw Error(n(60));r.innerHTML=u}}break;case"multiple":r.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":r.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){r.removeAttribute("xlink:href");break}u=lu(""+m),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(u,""+m):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":m===!0?r.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(u,m):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?r.setAttribute(u,m):r.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?r.removeAttribute(u):r.setAttribute(u,m);break;case"popover":ne("beforetoggle",r),ne("toggle",r),ru(r,"popover",m);break;case"xlinkActuate":_i(r,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":_i(r,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":_i(r,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":_i(r,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":_i(r,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":_i(r,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":_i(r,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":_i(r,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":_i(r,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":ru(r,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=eM.get(u)||u,ru(r,u,m))}}function vm(r,o,u,m,b,_){switch(u){case"style":$b(r,m,_);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(u=m.__html,u!=null){if(b.children!=null)throw Error(n(60));r.innerHTML=u}}break;case"children":typeof m=="string"?Ba(r,m):(typeof m=="number"||typeof m=="bigint")&&Ba(r,""+m);break;case"onScroll":m!=null&&ne("scroll",r);break;case"onScrollEnd":m!=null&&ne("scrollend",r);break;case"onClick":m!=null&&(r.onclick=xi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lb.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(b=u.endsWith("Capture"),o=u.slice(2,b?u.length-7:void 0),_=r[Yn]||null,_=_!=null?_[u]:null,typeof _=="function"&&r.removeEventListener(o,_,b),typeof m=="function")){typeof _!="function"&&_!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,m,b);break t}u in r?r[u]=m:m===!0?r.setAttribute(u,""):ru(r,u,m)}}}function _n(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ne("error",r),ne("load",r);var m=!1,b=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var C=u[_];if(C!=null)switch(_){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:be(r,o,_,C,u,null)}}b&&be(r,o,"srcSet",u.srcSet,u,null),m&&be(r,o,"src",u.src,u,null);return;case"input":ne("invalid",r);var B=_=C=b=null,X=null,at=null;for(m in u)if(u.hasOwnProperty(m)){var dt=u[m];if(dt!=null)switch(m){case"name":b=dt;break;case"type":C=dt;break;case"checked":X=dt;break;case"defaultChecked":at=dt;break;case"value":_=dt;break;case"defaultValue":B=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(n(137,o));break;default:be(r,o,m,dt,u,null)}}jb(r,_,B,X,at,C,b,!1);return;case"select":ne("invalid",r),m=C=_=null;for(b in u)if(u.hasOwnProperty(b)&&(B=u[b],B!=null))switch(b){case"value":_=B;break;case"defaultValue":C=B;break;case"multiple":m=B;default:be(r,o,b,B,u,null)}o=_,u=C,r.multiple=!!m,o!=null?La(r,!!m,o,!1):u!=null&&La(r,!!m,u,!0);return;case"textarea":ne("invalid",r),_=b=m=null;for(C in u)if(u.hasOwnProperty(C)&&(B=u[C],B!=null))switch(C){case"value":m=B;break;case"defaultValue":b=B;break;case"children":_=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(n(91));break;default:be(r,o,C,B,u,null)}Hb(r,m,b,_);return;case"option":for(X in u)u.hasOwnProperty(X)&&(m=u[X],m!=null)&&(X==="selected"?r.selected=m&&typeof m!="function"&&typeof m!="symbol":be(r,o,X,m,u,null));return;case"dialog":ne("beforetoggle",r),ne("toggle",r),ne("cancel",r),ne("close",r);break;case"iframe":case"object":ne("load",r);break;case"video":case"audio":for(m=0;m<jl.length;m++)ne(jl[m],r);break;case"image":ne("error",r),ne("load",r);break;case"details":ne("toggle",r);break;case"embed":case"source":case"link":ne("error",r),ne("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(at in u)if(u.hasOwnProperty(at)&&(m=u[at],m!=null))switch(at){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:be(r,o,at,m,u,null)}return;default:if(Of(o)){for(dt in u)u.hasOwnProperty(dt)&&(m=u[dt],m!==void 0&&vm(r,o,dt,m,u,void 0));return}}for(B in u)u.hasOwnProperty(B)&&(m=u[B],m!=null&&be(r,o,B,m,u,null))}function RD(r,o,u,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,C=null,B=null,X=null,at=null,dt=null;for(ht in u){var gt=u[ht];if(u.hasOwnProperty(ht)&&gt!=null)switch(ht){case"checked":break;case"value":break;case"defaultValue":X=gt;default:m.hasOwnProperty(ht)||be(r,o,ht,null,m,gt)}}for(var lt in m){var ht=m[lt];if(gt=u[lt],m.hasOwnProperty(lt)&&(ht!=null||gt!=null))switch(lt){case"type":_=ht;break;case"name":b=ht;break;case"checked":at=ht;break;case"defaultChecked":dt=ht;break;case"value":C=ht;break;case"defaultValue":B=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(n(137,o));break;default:ht!==gt&&be(r,o,lt,ht,m,gt)}}Mf(r,C,B,X,at,dt,_,b);return;case"select":ht=C=B=lt=null;for(_ in u)if(X=u[_],u.hasOwnProperty(_)&&X!=null)switch(_){case"value":break;case"multiple":ht=X;default:m.hasOwnProperty(_)||be(r,o,_,null,m,X)}for(b in m)if(_=m[b],X=u[b],m.hasOwnProperty(b)&&(_!=null||X!=null))switch(b){case"value":lt=_;break;case"defaultValue":B=_;break;case"multiple":C=_;default:_!==X&&be(r,o,b,_,m,X)}o=B,u=C,m=ht,lt!=null?La(r,!!u,lt,!1):!!m!=!!u&&(o!=null?La(r,!!u,o,!0):La(r,!!u,u?[]:"",!1));return;case"textarea":ht=lt=null;for(B in u)if(b=u[B],u.hasOwnProperty(B)&&b!=null&&!m.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:be(r,o,B,null,m,b)}for(C in m)if(b=m[C],_=u[C],m.hasOwnProperty(C)&&(b!=null||_!=null))switch(C){case"value":lt=b;break;case"defaultValue":ht=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==_&&be(r,o,C,b,m,_)}Ub(r,lt,ht);return;case"option":for(var Mt in u)lt=u[Mt],u.hasOwnProperty(Mt)&&lt!=null&&!m.hasOwnProperty(Mt)&&(Mt==="selected"?r.selected=!1:be(r,o,Mt,null,m,lt));for(X in m)lt=m[X],ht=u[X],m.hasOwnProperty(X)&&lt!==ht&&(lt!=null||ht!=null)&&(X==="selected"?r.selected=lt&&typeof lt!="function"&&typeof lt!="symbol":be(r,o,X,lt,m,ht));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vt in u)lt=u[Vt],u.hasOwnProperty(Vt)&&lt!=null&&!m.hasOwnProperty(Vt)&&be(r,o,Vt,null,m,lt);for(at in m)if(lt=m[at],ht=u[at],m.hasOwnProperty(at)&&lt!==ht&&(lt!=null||ht!=null))switch(at){case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(n(137,o));break;default:be(r,o,at,lt,m,ht)}return;default:if(Of(o)){for(var we in u)lt=u[we],u.hasOwnProperty(we)&&lt!==void 0&&!m.hasOwnProperty(we)&&vm(r,o,we,void 0,m,lt);for(dt in m)lt=m[dt],ht=u[dt],!m.hasOwnProperty(dt)||lt===ht||lt===void 0&&ht===void 0||vm(r,o,dt,lt,m,ht);return}}for(var et in u)lt=u[et],u.hasOwnProperty(et)&&lt!=null&&!m.hasOwnProperty(et)&&be(r,o,et,null,m,lt);for(gt in m)lt=m[gt],ht=u[gt],!m.hasOwnProperty(gt)||lt===ht||lt==null&&ht==null||be(r,o,gt,lt,m,ht)}function G_(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kD(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,u=performance.getEntriesByType("resource"),m=0;m<u.length;m++){var b=u[m],_=b.transferSize,C=b.initiatorType,B=b.duration;if(_&&B&&G_(C)){for(C=0,B=b.responseEnd,m+=1;m<u.length;m++){var X=u[m],at=X.startTime;if(at>B)break;var dt=X.transferSize,gt=X.initiatorType;dt&&G_(gt)&&(X=X.responseEnd,C+=dt*(X<B?1:(B-at)/(X-at)))}if(--m,o+=8*(_+C)/(b.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var bm=null,wm=null;function sh(r){return r.nodeType===9?r:r.ownerDocument}function q_(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function X_(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function _m(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var xm=null;function MD(){var r=window.event;return r&&r.type==="popstate"?r===xm?!1:(xm=r,!0):(xm=null,!1)}var Y_=typeof setTimeout=="function"?setTimeout:void 0,DD=typeof clearTimeout=="function"?clearTimeout:void 0,W_=typeof Promise=="function"?Promise:void 0,OD=typeof queueMicrotask=="function"?queueMicrotask:typeof W_<"u"?function(r){return W_.resolve(null).then(r).catch(ND)}:Y_;function ND(r){setTimeout(function(){throw r})}function mr(r){return r==="head"}function K_(r,o){var u=o,m=0;do{var b=u.nextSibling;if(r.removeChild(u),b&&b.nodeType===8)if(u=b.data,u==="/$"||u==="/&"){if(m===0){r.removeChild(b),po(o);return}m--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")m++;else if(u==="html")Hl(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,Hl(u);for(var _=u.firstChild;_;){var C=_.nextSibling,B=_.nodeName;_[al]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=C}}else u==="body"&&Hl(r.ownerDocument.body);u=b}while(u);po(o)}function Z_(r,o){var u=r;r=0;do{var m=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=m}while(u)}function Sm(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Sm(u),Rf(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function PD(r,o,u,m){for(;r.nodeType===1;){var b=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(m){if(!r[al])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==b.rel||r.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||r.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||r.getAttribute("title")!==(b.title==null?null:b.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(b.src==null?null:b.src)||r.getAttribute("type")!==(b.type==null?null:b.type)||r.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=Ds(r.nextSibling),r===null)break}return null}function LD(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=Ds(r.nextSibling),r===null))return null;return r}function Q_(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Ds(r.nextSibling),r===null))return null;return r}function Am(r){return r.data==="$?"||r.data==="$~"}function Em(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function BD(r,o){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||u.readyState!=="loading")o();else{var m=function(){o(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),r._reactRetry=m}}function Ds(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var Cm=null;function J_(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(o===0)return Ds(r.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}r=r.nextSibling}return null}function tx(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return r;o--}else u!=="/$"&&u!=="/&"||o++}r=r.previousSibling}return null}function ex(r,o,u){switch(o=sh(u),r){case"html":if(r=o.documentElement,!r)throw Error(n(452));return r;case"head":if(r=o.head,!r)throw Error(n(453));return r;case"body":if(r=o.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function Hl(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Rf(r)}var Os=new Map,nx=new Set;function ih(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Fi=j.d;j.d={f:ID,r:FD,D:zD,C:jD,L:UD,m:HD,X:$D,S:VD,M:GD};function ID(){var r=Fi.f(),o=Wu();return r||o}function FD(r){var o=Oa(r);o!==null&&o.tag===5&&o.type==="form"?bw(o):Fi.r(r)}var uo=typeof document>"u"?null:document;function sx(r,o,u){var m=uo;if(m&&typeof o=="string"&&o){var b=As(o);b='link[rel="'+r+'"][href="'+b+'"]',typeof u=="string"&&(b+='[crossorigin="'+u+'"]'),nx.has(b)||(nx.add(b),r={rel:r,crossOrigin:u,href:o},m.querySelector(b)===null&&(o=m.createElement("link"),_n(o,"link",r),dn(o),m.head.appendChild(o)))}}function zD(r){Fi.D(r),sx("dns-prefetch",r,null)}function jD(r,o){Fi.C(r,o),sx("preconnect",r,o)}function UD(r,o,u){Fi.L(r,o,u);var m=uo;if(m&&r&&o){var b='link[rel="preload"][as="'+As(o)+'"]';o==="image"&&u&&u.imageSrcSet?(b+='[imagesrcset="'+As(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(b+='[imagesizes="'+As(u.imageSizes)+'"]')):b+='[href="'+As(r)+'"]';var _=b;switch(o){case"style":_=ho(r);break;case"script":_=fo(r)}Os.has(_)||(r=f({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),Os.set(_,r),m.querySelector(b)!==null||o==="style"&&m.querySelector(Vl(_))||o==="script"&&m.querySelector($l(_))||(o=m.createElement("link"),_n(o,"link",r),dn(o),m.head.appendChild(o)))}}function HD(r,o){Fi.m(r,o);var u=uo;if(u&&r){var m=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+As(m)+'"][href="'+As(r)+'"]',_=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=fo(r)}if(!Os.has(_)&&(r=f({rel:"modulepreload",href:r},o),Os.set(_,r),u.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector($l(_)))return}m=u.createElement("link"),_n(m,"link",r),dn(m),u.head.appendChild(m)}}}function VD(r,o,u){Fi.S(r,o,u);var m=uo;if(m&&r){var b=Na(m).hoistableStyles,_=ho(r);o=o||"default";var C=b.get(_);if(!C){var B={loading:0,preload:null};if(C=m.querySelector(Vl(_)))B.loading=5;else{r=f({rel:"stylesheet",href:r,"data-precedence":o},u),(u=Os.get(_))&&Tm(r,u);var X=C=m.createElement("link");dn(X),_n(X,"link",r),X._p=new Promise(function(at,dt){X.onload=at,X.onerror=dt}),X.addEventListener("load",function(){B.loading|=1}),X.addEventListener("error",function(){B.loading|=2}),B.loading|=4,rh(C,o,m)}C={type:"stylesheet",instance:C,count:1,state:B},b.set(_,C)}}}function $D(r,o){Fi.X(r,o);var u=uo;if(u&&r){var m=Na(u).hoistableScripts,b=fo(r),_=m.get(b);_||(_=u.querySelector($l(b)),_||(r=f({src:r,async:!0},o),(o=Os.get(b))&&Rm(r,o),_=u.createElement("script"),dn(_),_n(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(b,_))}}function GD(r,o){Fi.M(r,o);var u=uo;if(u&&r){var m=Na(u).hoistableScripts,b=fo(r),_=m.get(b);_||(_=u.querySelector($l(b)),_||(r=f({src:r,async:!0,type:"module"},o),(o=Os.get(b))&&Rm(r,o),_=u.createElement("script"),dn(_),_n(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(b,_))}}function ix(r,o,u,m){var b=(b=xt.current)?ih(b):null;if(!b)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=ho(u.href),u=Na(b).hoistableStyles,m=u.get(o),m||(m={type:"style",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=ho(u.href);var _=Na(b).hoistableStyles,C=_.get(r);if(C||(b=b.ownerDocument||b,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,C),(_=b.querySelector(Vl(r)))&&!_._p&&(C.instance=_,C.state.loading=5),Os.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Os.set(r,u),_||qD(b,r,u,C.state))),o&&m===null)throw Error(n(528,""));return C}if(o&&m!==null)throw Error(n(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=fo(u),u=Na(b).hoistableScripts,m=u.get(o),m||(m={type:"script",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function ho(r){return'href="'+As(r)+'"'}function Vl(r){return'link[rel="stylesheet"]['+r+"]"}function rx(r){return f({},r,{"data-precedence":r.precedence,precedence:null})}function qD(r,o,u,m){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=r.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),_n(o,"link",u),dn(o),r.head.appendChild(o))}function fo(r){return'[src="'+As(r)+'"]'}function $l(r){return"script[async]"+r}function ax(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var m=r.querySelector('style[data-href~="'+As(u.href)+'"]');if(m)return o.instance=m,dn(m),m;var b=f({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(r.ownerDocument||r).createElement("style"),dn(m),_n(m,"style",b),rh(m,u.precedence,r),o.instance=m;case"stylesheet":b=ho(u.href);var _=r.querySelector(Vl(b));if(_)return o.state.loading|=4,o.instance=_,dn(_),_;m=rx(u),(b=Os.get(b))&&Tm(m,b),_=(r.ownerDocument||r).createElement("link"),dn(_);var C=_;return C._p=new Promise(function(B,X){C.onload=B,C.onerror=X}),_n(_,"link",m),o.state.loading|=4,rh(_,u.precedence,r),o.instance=_;case"script":return _=fo(u.src),(b=r.querySelector($l(_)))?(o.instance=b,dn(b),b):(m=u,(b=Os.get(_))&&(m=f({},u),Rm(m,b)),r=r.ownerDocument||r,b=r.createElement("script"),dn(b),_n(b,"link",m),r.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,rh(m,u.precedence,r));return o.instance}function rh(r,o,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,_=b,C=0;C<m.length;C++){var B=m[C];if(B.dataset.precedence===o)_=B;else if(_!==b)break}_?_.parentNode.insertBefore(r,_.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function Tm(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function Rm(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var ah=null;function ox(r,o,u){if(ah===null){var m=new Map,b=ah=new Map;b.set(u,m)}else b=ah,m=b.get(u),m||(m=new Map,b.set(u,m));if(m.has(r))return m;for(m.set(r,null),u=u.getElementsByTagName(r),b=0;b<u.length;b++){var _=u[b];if(!(_[al]||_[yn]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(o)||"";C=r+C;var B=m.get(C);B?B.push(_):m.set(C,[_])}}return m}function lx(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function XD(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(r=o.disabled,typeof o.precedence=="string"&&r==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function cx(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function YD(r,o,u,m){if(u.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var b=ho(m.href),_=o.querySelector(Vl(b));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=oh.bind(r),o.then(r,r)),u.state.loading|=4,u.instance=_,dn(_);return}_=o.ownerDocument||o,m=rx(m),(b=Os.get(b))&&Tm(m,b),_=_.createElement("link"),dn(_);var C=_;C._p=new Promise(function(B,X){C.onload=B,C.onerror=X}),_n(_,"link",m),u.instance=_}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=oh.bind(r),o.addEventListener("load",u),o.addEventListener("error",u))}}var km=0;function WD(r,o){return r.stylesheets&&r.count===0&&ch(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var m=setTimeout(function(){if(r.stylesheets&&ch(r,r.stylesheets),r.unsuspend){var _=r.unsuspend;r.unsuspend=null,_()}},6e4+o);0<r.imgBytes&&km===0&&(km=62500*kD());var b=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&ch(r,r.stylesheets),r.unsuspend)){var _=r.unsuspend;r.unsuspend=null,_()}},(r.imgBytes>km?50:800)+o);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function oh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ch(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var lh=null;function ch(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,lh=new Map,o.forEach(KD,r),lh=null,oh.call(r))}function KD(r,o){if(!(o.state.loading&4)){var u=lh.get(r);if(u)var m=u.get(null);else{u=new Map,lh.set(r,u);for(var b=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var C=b[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),m=C)}m&&u.set(null,m)}b=o.instance,C=b.getAttribute("data-precedence"),_=u.get(C)||m,_===m&&u.set(null,b),u.set(C,b),this.count++,m=oh.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),_?_.parentNode.insertBefore(b,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(b,r.firstChild)),o.state.loading|=4}}var Gl={$$typeof:E,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function ZD(r,o,u,m,b,_,C,B,X){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ki(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ki(0),this.hiddenUpdates=Ki(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function ux(r,o,u,m,b,_,C,B,X,at,dt,gt){return r=new ZD(r,o,u,C,X,at,dt,gt,B),o=1,_===!0&&(o|=24),_=ls(3,null,null,o),r.current=_,_.stateNode=r,o=lp(),o.refCount++,r.pooledCache=o,o.refCount++,_.memoizedState={element:m,isDehydrated:u,cache:o},dp(_),r}function hx(r){return r?(r=Va,r):Va}function dx(r,o,u,m,b,_){b=hx(b),m.context===null?m.context=b:m.pendingContext=b,m=ir(o),m.payload={element:u},_=_===void 0?null:_,_!==null&&(m.callback=_),u=rr(r,m,o),u!==null&&(ts(u,r,o),Sl(u,r,o))}function fx(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function Mm(r,o){fx(r,o),(r=r.alternate)&&fx(r,o)}function px(r){if(r.tag===13||r.tag===31){var o=Gr(r,67108864);o!==null&&ts(o,r,67108864),Mm(r,67108864)}}function mx(r){if(r.tag===13||r.tag===31){var o=fs();o=ka(o);var u=Gr(r,o);u!==null&&ts(u,r,o),Mm(r,o)}}var uh=!0;function QD(r,o,u,m){var b=z.T;z.T=null;var _=j.p;try{j.p=2,Dm(r,o,u,m)}finally{j.p=_,z.T=b}}function JD(r,o,u,m){var b=z.T;z.T=null;var _=j.p;try{j.p=8,Dm(r,o,u,m)}finally{j.p=_,z.T=b}}function Dm(r,o,u,m){if(uh){var b=Om(m);if(b===null)ym(r,o,m,hh,u),yx(r,m);else if(eO(b,r,o,u,m))m.stopPropagation();else if(yx(r,m),o&4&&-1<tO.indexOf(r)){for(;b!==null;){var _=Oa(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=Bn(_.pendingLanes);if(C!==0){var B=_;for(B.pendingLanes|=2,B.entangledLanes|=2;C;){var X=1<<31-Ae(C);B.entanglements[1]|=X,C&=~X}ei(_),(de&6)===0&&(Xu=Ct()+500,zl(0))}}break;case 31:case 13:B=Gr(_,2),B!==null&&ts(B,_,2),Wu(),Mm(_,2)}if(_=Om(m),_===null&&ym(r,o,m,hh,u),_===b)break;b=_}b!==null&&m.stopPropagation()}else ym(r,o,m,null,u)}}function Om(r){return r=Pf(r),Nm(r)}var hh=null;function Nm(r){if(hh=null,r=Da(r),r!==null){var o=a(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=l(o),r!==null)return r;r=null}else if(u===31){if(r=c(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return hh=r,null}function gx(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(At()){case It:return 2;case he:return 8;case Kt:case un:return 32;case Nn:return 268435456;default:return 32}default:return 32}}var Pm=!1,gr=null,yr=null,vr=null,ql=new Map,Xl=new Map,br=[],tO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yx(r,o){switch(r){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":ql.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(o.pointerId)}}function Yl(r,o,u,m,b,_){return r===null||r.nativeEvent!==_?(r={blockedOn:o,domEventName:u,eventSystemFlags:m,nativeEvent:_,targetContainers:[b]},o!==null&&(o=Oa(o),o!==null&&px(o)),r):(r.eventSystemFlags|=m,o=r.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),r)}function eO(r,o,u,m,b){switch(o){case"focusin":return gr=Yl(gr,r,o,u,m,b),!0;case"dragenter":return yr=Yl(yr,r,o,u,m,b),!0;case"mouseover":return vr=Yl(vr,r,o,u,m,b),!0;case"pointerover":var _=b.pointerId;return ql.set(_,Yl(ql.get(_)||null,r,o,u,m,b)),!0;case"gotpointercapture":return _=b.pointerId,Xl.set(_,Yl(Xl.get(_)||null,r,o,u,m,b)),!0}return!1}function vx(r){var o=Da(r.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){r.blockedOn=o,Ob(r.priority,function(){mx(u)});return}}else if(o===31){if(o=c(u),o!==null){r.blockedOn=o,Ob(r.priority,function(){mx(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function dh(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=Om(r.nativeEvent);if(u===null){u=r.nativeEvent;var m=new u.constructor(u.type,u);Nf=m,u.target.dispatchEvent(m),Nf=null}else return o=Oa(u),o!==null&&px(o),r.blockedOn=u,!1;o.shift()}return!0}function bx(r,o,u){dh(r)&&u.delete(o)}function nO(){Pm=!1,gr!==null&&dh(gr)&&(gr=null),yr!==null&&dh(yr)&&(yr=null),vr!==null&&dh(vr)&&(vr=null),ql.forEach(bx),Xl.forEach(bx)}function fh(r,o){r.blockedOn===o&&(r.blockedOn=null,Pm||(Pm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,nO)))}var ph=null;function wx(r){ph!==r&&(ph=r,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){ph===r&&(ph=null);for(var o=0;o<r.length;o+=3){var u=r[o],m=r[o+1],b=r[o+2];if(typeof m!="function"){if(Nm(m||u)===null)continue;break}var _=Oa(u);_!==null&&(r.splice(o,3),o-=3,Op(_,{pending:!0,data:b,method:u.method,action:m},m,b))}}))}function po(r){function o(X){return fh(X,r)}gr!==null&&fh(gr,r),yr!==null&&fh(yr,r),vr!==null&&fh(vr,r),ql.forEach(o),Xl.forEach(o);for(var u=0;u<br.length;u++){var m=br[u];m.blockedOn===r&&(m.blockedOn=null)}for(;0<br.length&&(u=br[0],u.blockedOn===null);)vx(u),u.blockedOn===null&&br.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var b=u[m],_=u[m+1],C=b[Yn]||null;if(typeof _=="function")C||wx(u);else if(C){var B=null;if(_&&_.hasAttribute("formAction")){if(b=_,C=_[Yn]||null)B=C.formAction;else if(Nm(b)!==null)continue}else B=C.action;typeof B=="function"?u[m+1]=B:(u.splice(m,3),m-=3),wx(u)}}}function _x(){function r(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(C){return b=C})},focusReset:"manual",scroll:"manual"})}function o(){b!==null&&(b(),b=null),m||setTimeout(u,20)}function u(){if(!m&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){m=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),b!==null&&(b(),b=null)}}}function Lm(r){this._internalRoot=r}mh.prototype.render=Lm.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));var u=o.current,m=fs();dx(u,m,r,o,null,null)},mh.prototype.unmount=Lm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;dx(r.current,2,null,r,null,null),Wu(),o[Ma]=null}};function mh(r){this._internalRoot=r}mh.prototype.unstable_scheduleHydration=function(r){if(r){var o=Cf();r={blockedOn:null,target:r,priority:o};for(var u=0;u<br.length&&o!==0&&o<br[u].priority;u++);br.splice(u,0,r),u===0&&vx(r)}};var xx=t.version;if(xx!=="19.2.3")throw Error(n(527,xx,"19.2.3"));j.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=d(o),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var sO={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gh.isDisabled&&gh.supportsFiber)try{me=gh.inject(sO),Ge=gh}catch{}}return Kl.createRoot=function(r,o){if(!i(r))throw Error(n(299));var u=!1,m="",b=kw,_=Mw,C=Dw;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError)),o=ux(r,1,!1,null,null,u,m,null,b,_,C,_x),r[Ma]=o.current,gm(r),new Lm(o)},Kl.hydrateRoot=function(r,o,u){if(!i(r))throw Error(n(299));var m=!1,b="",_=kw,C=Mw,B=Dw,X=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(B=u.onRecoverableError),u.formState!==void 0&&(X=u.formState)),o=ux(r,1,!0,o,u??null,m,b,X,_,C,B,_x),o.context=hx(null),u=o.current,m=fs(),m=ka(m),b=ir(m),b.callback=null,rr(u,b,m),u=m,o.current.lanes=u,Ne(o,u),ei(o),r[Ma]=o.current,gm(r),new mh(o)},Kl.version="19.2.3",Kl}var Px;function fO(){if(Px)return zm.exports;Px=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),zm.exports=dO(),zm.exports}var pO=fO();const mO=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gO=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),Lx=s=>{const t=gO(s);return t.charAt(0).toUpperCase()+t.slice(1)},JA=(...s)=>s.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),yO=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var vO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const bO=L.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:l,...c},h)=>L.createElement("svg",{ref:h,...vO,width:t,height:t,stroke:s,strokeWidth:n?Number(e)*24/Number(t):e,className:JA("lucide",i),...!a&&!yO(c)&&{"aria-hidden":"true"},...c},[...l.map(([d,p])=>L.createElement(d,p)),...Array.isArray(a)?a:[a]]));const cn=(s,t)=>{const e=L.forwardRef(({className:n,...i},a)=>L.createElement(bO,{ref:a,iconNode:t,className:JA(`lucide-${mO(Lx(s))}`,`lucide-${s}`,n),...i}));return e.displayName=Lx(s),e};const wO=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],_O=cn("bot",wO);const xO=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],SO=cn("check",xO);const AO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],tE=cn("chevron-down",AO);const EO=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],CO=cn("chevron-up",EO);const TO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],RO=cn("circle-alert",TO);const kO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Xy=cn("circle-check",kO);const MO=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],DO=cn("download",MO);const OO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M11 18h2",key:"12mj7e"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M9 13v-.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v.5",key:"qbrxap"}]],NO=cn("file-type",OO);const PO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],LO=cn("info",PO);const BO=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],IO=cn("key",BO);const FO=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],zO=cn("languages",FO);const jO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],UO=cn("loader-circle",jO);const HO=[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],VO=cn("octagon-x",HO);const $O=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],GO=cn("server",$O);const qO=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],XO=cn("settings",qO);const YO=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],WO=cn("sparkles",YO);const KO=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ZO=cn("triangle-alert",KO);const QO=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],JO=cn("upload",QO);const tN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],eN=cn("x",tN);var Vc=QA();const eE=qy(Vc);function nN(s){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t.appendChild(e),e.styleSheet?e.styleSheet.cssText=s:e.appendChild(document.createTextNode(s))}const sN=s=>{switch(s){case"success":return aN;case"info":return lN;case"warning":return oN;case"error":return cN;default:return null}},iN=Array(12).fill(0),rN=({visible:s,className:t})=>St.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":s},St.createElement("div",{className:"sonner-spinner"},iN.map((e,n)=>St.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),aN=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),oN=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),lN=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),cN=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},St.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),uN=St.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},St.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),St.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),hN=()=>{const[s,t]=St.useState(document.hidden);return St.useEffect(()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),s};let Ig=1;class dN{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;const{message:n,...i}=t,a=typeof t?.id=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Ig++,l=this.toasts.find(h=>h.id===a),c=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),l?this.toasts=this.toasts.map(h=>h.id===a?(this.publish({...h,...t,id:a,title:n}),{...h,...t,id:a,dismissible:c,title:n}):h):this.addToast({title:n,...i,dismissible:c,id:a}),a},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(e=>e({id:t,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));const i=Promise.resolve(t instanceof Function?t():t);let a=n!==void 0,l;const c=i.then(async d=>{if(l=["resolve",d],St.isValidElement(d))a=!1,this.create({id:n,type:"default",message:d});else if(pN(d)&&!d.ok){a=!1;const f=typeof e.error=="function"?await e.error(`HTTP error! status: ${d.status}`):e.error,g=typeof e.description=="function"?await e.description(`HTTP error! status: ${d.status}`):e.description,w=typeof f=="object"&&!St.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:g,...w})}else if(d instanceof Error){a=!1;const f=typeof e.error=="function"?await e.error(d):e.error,g=typeof e.description=="function"?await e.description(d):e.description,w=typeof f=="object"&&!St.isValidElement(f)?f:{message:f};this.create({id:n,type:"error",description:g,...w})}else if(e.success!==void 0){a=!1;const f=typeof e.success=="function"?await e.success(d):e.success,g=typeof e.description=="function"?await e.description(d):e.description,w=typeof f=="object"&&!St.isValidElement(f)?f:{message:f};this.create({id:n,type:"success",description:g,...w})}}).catch(async d=>{if(l=["reject",d],e.error!==void 0){a=!1;const p=typeof e.error=="function"?await e.error(d):e.error,f=typeof e.description=="function"?await e.description(d):e.description,y=typeof p=="object"&&!St.isValidElement(p)?p:{message:p};this.create({id:n,type:"error",description:f,...y})}}).finally(()=>{a&&(this.dismiss(n),n=void 0),e.finally==null||e.finally.call(e)}),h=()=>new Promise((d,p)=>c.then(()=>l[0]==="reject"?p(l[1]):d(l[1])).catch(p));return typeof n!="string"&&typeof n!="number"?{unwrap:h}:Object.assign(n,{unwrap:h})},this.custom=(t,e)=>{const n=e?.id||Ig++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ss=new dN,fN=(s,t)=>{const e=t?.id||Ig++;return ss.addToast({title:s,...t,id:e}),e},pN=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",mN=fN,gN=()=>ss.toasts,yN=()=>ss.getActiveToasts(),ca=Object.assign(mN,{success:ss.success,info:ss.info,warning:ss.warning,error:ss.error,custom:ss.custom,message:ss.message,promise:ss.promise,dismiss:ss.dismiss,loading:ss.loading},{getHistory:gN,getToasts:yN});nN("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function yh(s){return s.label!==void 0}const vN=3,bN="24px",wN="16px",Bx=4e3,_N=356,xN=14,SN=45,AN=200;function ii(...s){return s.filter(Boolean).join(" ")}function EN(s){const[t,e]=s.split("-"),n=[];return t&&n.push(t),e&&n.push(e),n}const CN=s=>{var t,e,n,i,a,l,c,h,d;const{invert:p,toast:f,unstyled:g,interacting:y,setHeights:w,visibleToasts:v,heights:S,index:x,toasts:A,expanded:E,removeToast:R,defaultRichColors:T,closeButton:O,style:D,cancelButtonStyle:N,actionButtonStyle:I,className:G="",descriptionClassName:W="",duration:F,position:Y,gap:k,expandByDefault:J,classNames:z,icons:j,closeButtonAriaLabel:q="Close toast"}=s,[nt,pt]=St.useState(null),[P,U]=St.useState(null),[K,tt]=St.useState(!1),[it,xt]=St.useState(!1),[ut,vt]=St.useState(!1),[Et,Lt]=St.useState(!1),[Ot,Ht]=St.useState(!1),[le,M]=St.useState(0),[ft,ct]=St.useState(0),V=St.useRef(f.duration||F||Bx),H=St.useRef(null),Q=St.useRef(null),yt=x===0,bt=x+1<=v,st=f.type,_t=f.dismissible!==!1,Ct=f.className||"",At=f.descriptionClassName||"",It=St.useMemo(()=>S.findIndex(Gt=>Gt.toastId===f.id)||0,[S,f.id]),he=St.useMemo(()=>{var Gt;return(Gt=f.closeButton)!=null?Gt:O},[f.closeButton,O]),Kt=St.useMemo(()=>f.duration||F||Bx,[f.duration,F]),un=St.useRef(0),Nn=St.useRef(0),Pn=St.useRef(0),$n=St.useRef(null),[me,Ge]=Y.split("-"),Ln=St.useMemo(()=>S.reduce((Gt,ke,hn)=>hn>=It?Gt:Gt+ke.height,0),[S,It]),Ae=hN(),Ra=f.invert||p,zr=st==="loading";Nn.current=St.useMemo(()=>It*k+Ln,[It,Ln]),St.useEffect(()=>{V.current=Kt},[Kt]),St.useEffect(()=>{tt(!0)},[]),St.useEffect(()=>{const Gt=Q.current;if(Gt){const ke=Gt.getBoundingClientRect().height;return ct(ke),w(hn=>[{toastId:f.id,height:ke,position:f.position},...hn]),()=>w(hn=>hn.filter(Rn=>Rn.toastId!==f.id))}},[w,f.id]),St.useLayoutEffect(()=>{if(!K)return;const Gt=Q.current,ke=Gt.style.height;Gt.style.height="auto";const hn=Gt.getBoundingClientRect().height;Gt.style.height=ke,ct(hn),w(Rn=>Rn.find(Ne=>Ne.toastId===f.id)?Rn.map(Ne=>Ne.toastId===f.id?{...Ne,height:hn}:Ne):[{toastId:f.id,height:hn,position:f.position},...Rn])},[K,f.title,f.description,w,f.id,f.jsx,f.action,f.cancel]);const xs=St.useCallback(()=>{xt(!0),M(Nn.current),w(Gt=>Gt.filter(ke=>ke.toastId!==f.id)),setTimeout(()=>{R(f)},AN)},[f,R,w,Nn]);St.useEffect(()=>{if(f.promise&&st==="loading"||f.duration===1/0||f.type==="loading")return;let Gt;return E||y||Ae?(()=>{if(Pn.current<un.current){const Rn=new Date().getTime()-un.current;V.current=V.current-Rn}Pn.current=new Date().getTime()})():V.current!==1/0&&(un.current=new Date().getTime(),Gt=setTimeout(()=>{f.onAutoClose==null||f.onAutoClose.call(f,f),xs()},V.current)),()=>clearTimeout(Gt)},[E,y,f,st,Ae,xs]),St.useEffect(()=>{f.delete&&(xs(),f.onDismiss==null||f.onDismiss.call(f,f))},[xs,f.delete]);function Wi(){var Gt;if(j?.loading){var ke;return St.createElement("div",{className:ii(z?.loader,f==null||(ke=f.classNames)==null?void 0:ke.loader,"sonner-loader"),"data-visible":st==="loading"},j.loading)}return St.createElement(rN,{className:ii(z?.loader,f==null||(Gt=f.classNames)==null?void 0:Gt.loader),visible:st==="loading"})}const wi=f.icon||j?.[st]||sN(st);var as,Bn;return St.createElement("li",{tabIndex:0,ref:Q,className:ii(G,Ct,z?.toast,f==null||(t=f.classNames)==null?void 0:t.toast,z?.default,z?.[st],f==null||(e=f.classNames)==null?void 0:e[st]),"data-sonner-toast":"","data-rich-colors":(as=f.richColors)!=null?as:T,"data-styled":!(f.jsx||f.unstyled||g),"data-mounted":K,"data-promise":!!f.promise,"data-swiped":Ot,"data-removed":it,"data-visible":bt,"data-y-position":me,"data-x-position":Ge,"data-index":x,"data-front":yt,"data-swiping":ut,"data-dismissible":_t,"data-type":st,"data-invert":Ra,"data-swipe-out":Et,"data-swipe-direction":P,"data-expanded":!!(E||J&&K),"data-testid":f.testId,style:{"--index":x,"--toasts-before":x,"--z-index":A.length-x,"--offset":`${it?le:Nn.current}px`,"--initial-height":J?"auto":`${ft}px`,...D,...f.style},onDragEnd:()=>{vt(!1),pt(null),$n.current=null},onPointerDown:Gt=>{Gt.button!==2&&(zr||!_t||(H.current=new Date,M(Nn.current),Gt.target.setPointerCapture(Gt.pointerId),Gt.target.tagName!=="BUTTON"&&(vt(!0),$n.current={x:Gt.clientX,y:Gt.clientY})))},onPointerUp:()=>{var Gt,ke,hn;if(Et||!_t)return;$n.current=null;const Rn=Number(((Gt=Q.current)==null?void 0:Gt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ki=Number(((ke=Q.current)==null?void 0:ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ne=new Date().getTime()-((hn=H.current)==null?void 0:hn.getTime()),Gn=nt==="x"?Rn:Ki,jr=Math.abs(Gn)/Ne;if(Math.abs(Gn)>=SN||jr>.11){M(Nn.current),f.onDismiss==null||f.onDismiss.call(f,f),U(nt==="x"?Rn>0?"right":"left":Ki>0?"down":"up"),xs(),Lt(!0);return}else{var qn,Xn;(qn=Q.current)==null||qn.style.setProperty("--swipe-amount-x","0px"),(Xn=Q.current)==null||Xn.style.setProperty("--swipe-amount-y","0px")}Ht(!1),vt(!1),pt(null)},onPointerMove:Gt=>{var ke,hn,Rn;if(!$n.current||!_t||((ke=window.getSelection())==null?void 0:ke.toString().length)>0)return;const Ne=Gt.clientY-$n.current.y,Gn=Gt.clientX-$n.current.x;var jr;const qn=(jr=s.swipeDirections)!=null?jr:EN(Y);!nt&&(Math.abs(Gn)>1||Math.abs(Ne)>1)&&pt(Math.abs(Gn)>Math.abs(Ne)?"x":"y");let Xn={x:0,y:0};const ka=Us=>1/(1.5+Math.abs(Us)/20);if(nt==="y"){if(qn.includes("top")||qn.includes("bottom"))if(qn.includes("top")&&Ne<0||qn.includes("bottom")&&Ne>0)Xn.y=Ne;else{const Us=Ne*ka(Ne);Xn.y=Math.abs(Us)<Math.abs(Ne)?Us:Ne}}else if(nt==="x"&&(qn.includes("left")||qn.includes("right")))if(qn.includes("left")&&Gn<0||qn.includes("right")&&Gn>0)Xn.x=Gn;else{const Us=Gn*ka(Gn);Xn.x=Math.abs(Us)<Math.abs(Gn)?Us:Gn}(Math.abs(Xn.x)>0||Math.abs(Xn.y)>0)&&Ht(!0),(hn=Q.current)==null||hn.style.setProperty("--swipe-amount-x",`${Xn.x}px`),(Rn=Q.current)==null||Rn.style.setProperty("--swipe-amount-y",`${Xn.y}px`)}},he&&!f.jsx&&st!=="loading"?St.createElement("button",{"aria-label":q,"data-disabled":zr,"data-close-button":!0,onClick:zr||!_t?()=>{}:()=>{xs(),f.onDismiss==null||f.onDismiss.call(f,f)},className:ii(z?.closeButton,f==null||(n=f.classNames)==null?void 0:n.closeButton)},(Bn=j?.close)!=null?Bn:uN):null,(st||f.icon||f.promise)&&f.icon!==null&&(j?.[st]!==null||f.icon)?St.createElement("div",{"data-icon":"",className:ii(z?.icon,f==null||(i=f.classNames)==null?void 0:i.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Wi():null,f.type!=="loading"?wi:null):null,St.createElement("div",{"data-content":"",className:ii(z?.content,f==null||(a=f.classNames)==null?void 0:a.content)},St.createElement("div",{"data-title":"",className:ii(z?.title,f==null||(l=f.classNames)==null?void 0:l.title)},f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title),f.description?St.createElement("div",{"data-description":"",className:ii(W,At,z?.description,f==null||(c=f.classNames)==null?void 0:c.description)},typeof f.description=="function"?f.description():f.description):null),St.isValidElement(f.cancel)?f.cancel:f.cancel&&yh(f.cancel)?St.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||N,onClick:Gt=>{yh(f.cancel)&&_t&&(f.cancel.onClick==null||f.cancel.onClick.call(f.cancel,Gt),xs())},className:ii(z?.cancelButton,f==null||(h=f.classNames)==null?void 0:h.cancelButton)},f.cancel.label):null,St.isValidElement(f.action)?f.action:f.action&&yh(f.action)?St.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||I,onClick:Gt=>{yh(f.action)&&(f.action.onClick==null||f.action.onClick.call(f.action,Gt),!Gt.defaultPrevented&&xs())},className:ii(z?.actionButton,f==null||(d=f.classNames)==null?void 0:d.actionButton)},f.action.label):null)};function Ix(){if(typeof window>"u"||typeof document>"u")return"ltr";const s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function TN(s,t){const e={};return[s,t].forEach((n,i)=>{const a=i===1,l=a?"--mobile-offset":"--offset",c=a?wN:bN;function h(d){["top","right","bottom","left"].forEach(p=>{e[`${l}-${p}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?h(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?e[`${l}-${d}`]=c:e[`${l}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):h(c)}),e}const RN=St.forwardRef(function(t,e){const{id:n,invert:i,position:a="bottom-right",hotkey:l=["altKey","KeyT"],expand:c,closeButton:h,className:d,offset:p,mobileOffset:f,theme:g="light",richColors:y,duration:w,style:v,visibleToasts:S=vN,toastOptions:x,dir:A=Ix(),gap:E=xN,icons:R,containerAriaLabel:T="Notifications"}=t,[O,D]=St.useState([]),N=St.useMemo(()=>n?O.filter(K=>K.toasterId===n):O.filter(K=>!K.toasterId),[O,n]),I=St.useMemo(()=>Array.from(new Set([a].concat(N.filter(K=>K.position).map(K=>K.position)))),[N,a]),[G,W]=St.useState([]),[F,Y]=St.useState(!1),[k,J]=St.useState(!1),[z,j]=St.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),q=St.useRef(null),nt=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),pt=St.useRef(null),P=St.useRef(!1),U=St.useCallback(K=>{D(tt=>{var it;return(it=tt.find(xt=>xt.id===K.id))!=null&&it.delete||ss.dismiss(K.id),tt.filter(({id:xt})=>xt!==K.id)})},[]);return St.useEffect(()=>ss.subscribe(K=>{if(K.dismiss){requestAnimationFrame(()=>{D(tt=>tt.map(it=>it.id===K.id?{...it,delete:!0}:it))});return}setTimeout(()=>{eE.flushSync(()=>{D(tt=>{const it=tt.findIndex(xt=>xt.id===K.id);return it!==-1?[...tt.slice(0,it),{...tt[it],...K},...tt.slice(it+1)]:[K,...tt]})})})}),[O]),St.useEffect(()=>{if(g!=="system"){j(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?j("dark"):j("light")),typeof window>"u")return;const K=window.matchMedia("(prefers-color-scheme: dark)");try{K.addEventListener("change",({matches:tt})=>{j(tt?"dark":"light")})}catch{K.addListener(({matches:it})=>{try{j(it?"dark":"light")}catch(xt){console.error(xt)}})}},[g]),St.useEffect(()=>{O.length<=1&&Y(!1)},[O]),St.useEffect(()=>{const K=tt=>{var it;if(l.every(vt=>tt[vt]||tt.code===vt)){var ut;Y(!0),(ut=q.current)==null||ut.focus()}tt.code==="Escape"&&(document.activeElement===q.current||(it=q.current)!=null&&it.contains(document.activeElement))&&Y(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[l]),St.useEffect(()=>{if(q.current)return()=>{pt.current&&(pt.current.focus({preventScroll:!0}),pt.current=null,P.current=!1)}},[q.current]),St.createElement("section",{ref:e,"aria-label":`${T} ${nt}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((K,tt)=>{var it;const[xt,ut]=K.split("-");return N.length?St.createElement("ol",{key:K,dir:A==="auto"?Ix():A,tabIndex:-1,ref:q,className:d,"data-sonner-toaster":!0,"data-sonner-theme":z,"data-y-position":xt,"data-x-position":ut,style:{"--front-toast-height":`${((it=G[0])==null?void 0:it.height)||0}px`,"--width":`${_N}px`,"--gap":`${E}px`,...v,...TN(p,f)},onBlur:vt=>{P.current&&!vt.currentTarget.contains(vt.relatedTarget)&&(P.current=!1,pt.current&&(pt.current.focus({preventScroll:!0}),pt.current=null))},onFocus:vt=>{vt.target instanceof HTMLElement&&vt.target.dataset.dismissible==="false"||P.current||(P.current=!0,pt.current=vt.relatedTarget)},onMouseEnter:()=>Y(!0),onMouseMove:()=>Y(!0),onMouseLeave:()=>{k||Y(!1)},onDragEnd:()=>Y(!1),onPointerDown:vt=>{vt.target instanceof HTMLElement&&vt.target.dataset.dismissible==="false"||J(!0)},onPointerUp:()=>J(!1)},N.filter(vt=>!vt.position&&tt===0||vt.position===K).map((vt,Et)=>{var Lt,Ot;return St.createElement(CN,{key:vt.id,icons:R,index:Et,toast:vt,defaultRichColors:y,duration:(Lt=x?.duration)!=null?Lt:w,className:x?.className,descriptionClassName:x?.descriptionClassName,invert:i,visibleToasts:S,closeButton:(Ot=x?.closeButton)!=null?Ot:h,interacting:k,position:K,style:x?.style,unstyled:x?.unstyled,classNames:x?.classNames,cancelButtonStyle:x?.cancelButtonStyle,actionButtonStyle:x?.actionButtonStyle,closeButtonAriaLabel:x?.closeButtonAriaLabel,removeToast:U,toasts:N.filter(Ht=>Ht.position==vt.position),heights:G.filter(Ht=>Ht.position==vt.position),setHeights:W,expandByDefault:c,gap:E,expanded:F,swipeDirections:t.swipeDirections})})):null}))}),kN=({...s})=>{const[t,e]=L.useState("light");return L.useEffect(()=>{const n=new MutationObserver(()=>{e(document.documentElement.classList.contains("dark")?"dark":"light")});return n.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),e(document.documentElement.classList.contains("dark")?"dark":"light"),()=>n.disconnect()},[]),$.jsx(RN,{theme:t,className:"toaster group",icons:{success:$.jsx(Xy,{className:"size-4"}),info:$.jsx(LO,{className:"size-4"}),warning:$.jsx(ZO,{className:"size-4"}),error:$.jsx(VO,{className:"size-4"}),loading:$.jsx(UO,{className:"size-4 animate-spin"})},style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)","--border-radius":"var(--radius)"},...s})};function Ee(s,t,{checkForDefaultPrevented:e=!0}={}){return function(i){if(s?.(i),e===!1||!i.defaultPrevented)return t?.(i)}}function Fx(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function Yy(...s){return t=>{let e=!1;const n=s.map(i=>{const a=Fx(i,t);return!e&&typeof a=="function"&&(e=!0),a});if(e)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():Fx(s[i],null)}}}}function Je(...s){return L.useCallback(Yy(...s),s)}function Gd(s,t=[]){let e=[];function n(a,l){const c=L.createContext(l),h=e.length;e=[...e,l];const d=f=>{const{scope:g,children:y,...w}=f,v=g?.[s]?.[h]||c,S=L.useMemo(()=>w,Object.values(w));return $.jsx(v.Provider,{value:S,children:y})};d.displayName=a+"Provider";function p(f,g){const y=g?.[s]?.[h]||c,w=L.useContext(y);if(w)return w;if(l!==void 0)return l;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[d,p]}const i=()=>{const a=e.map(l=>L.createContext(l));return function(c){const h=c?.[s]||a;return L.useMemo(()=>({[`__scope${s}`]:{...c,[s]:h}}),[c,h])}};return i.scopeName=s,[n,MN(i,...t)]}function MN(...s){const t=s[0];if(s.length===1)return t;const e=()=>{const n=s.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const l=n.reduce((c,{useScope:h,scopeName:d})=>{const f=h(a)[`__scope${d}`];return{...c,...f}},{});return L.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return e.scopeName=t.scopeName,e}function md(s){const t=DN(s),e=L.forwardRef((n,i)=>{const{children:a,...l}=n,c=L.Children.toArray(a),h=c.find(NN);if(h){const d=h.props.children,p=c.map(f=>f===h?L.Children.count(d)>1?L.Children.only(null):L.isValidElement(d)?d.props.children:null:f);return $.jsx(t,{...l,ref:i,children:L.isValidElement(d)?L.cloneElement(d,void 0,p):null})}return $.jsx(t,{...l,ref:i,children:a})});return e.displayName=`${s}.Slot`,e}function DN(s){const t=L.forwardRef((e,n)=>{const{children:i,...a}=e;if(L.isValidElement(i)){const l=LN(i),c=PN(a,i.props);return i.type!==L.Fragment&&(c.ref=n?Yy(n,l):l),L.cloneElement(i,c)}return L.Children.count(i)>1?L.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var nE=Symbol("radix.slottable");function ON(s){const t=({children:e})=>$.jsx($.Fragment,{children:e});return t.displayName=`${s}.Slottable`,t.__radixId=nE,t}function NN(s){return L.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===nE}function PN(s,t){const e={...t};for(const n in t){const i=s[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?e[n]=(...c)=>{const h=a(...c);return i(...c),h}:i&&(e[n]=i):n==="style"?e[n]={...i,...a}:n==="className"&&(e[n]=[i,a].filter(Boolean).join(" "))}return{...s,...e}}function LN(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}var BN=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ue=BN.reduce((s,t)=>{const e=md(`Primitive.${t}`),n=L.forwardRef((i,a)=>{const{asChild:l,...c}=i,h=l?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),$.jsx(h,{...c,ref:a})});return n.displayName=`Primitive.${t}`,{...s,[t]:n}},{});function IN(s,t){s&&Vc.flushSync(()=>s.dispatchEvent(t))}function ba(s){const t=L.useRef(s);return L.useEffect(()=>{t.current=s}),L.useMemo(()=>(...e)=>t.current?.(...e),[])}function FN(s,t=globalThis?.document){const e=ba(s);L.useEffect(()=>{const n=i=>{i.key==="Escape"&&e(i)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[e,t])}var zN="DismissableLayer",Fg="dismissableLayer.update",jN="dismissableLayer.pointerDownOutside",UN="dismissableLayer.focusOutside",zx,sE=L.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wy=L.forwardRef((s,t)=>{const{disableOutsidePointerEvents:e=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:l,onDismiss:c,...h}=s,d=L.useContext(sE),[p,f]=L.useState(null),g=p?.ownerDocument??globalThis?.document,[,y]=L.useState({}),w=Je(t,D=>f(D)),v=Array.from(d.layers),[S]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(S),A=p?v.indexOf(p):-1,E=d.layersWithOutsidePointerEventsDisabled.size>0,R=A>=x,T=$N(D=>{const N=D.target,I=[...d.branches].some(G=>G.contains(N));!R||I||(i?.(D),l?.(D),D.defaultPrevented||c?.())},g),O=GN(D=>{const N=D.target;[...d.branches].some(G=>G.contains(N))||(a?.(D),l?.(D),D.defaultPrevented||c?.())},g);return FN(D=>{A===d.layers.size-1&&(n?.(D),!D.defaultPrevented&&c&&(D.preventDefault(),c()))},g),L.useEffect(()=>{if(p)return e&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(zx=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(p)),d.layers.add(p),jx(),()=>{e&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=zx)}},[p,g,e,d]),L.useEffect(()=>()=>{p&&(d.layers.delete(p),d.layersWithOutsidePointerEventsDisabled.delete(p),jx())},[p,d]),L.useEffect(()=>{const D=()=>y({});return document.addEventListener(Fg,D),()=>document.removeEventListener(Fg,D)},[]),$.jsx(Ue.div,{...h,ref:w,style:{pointerEvents:E?R?"auto":"none":void 0,...s.style},onFocusCapture:Ee(s.onFocusCapture,O.onFocusCapture),onBlurCapture:Ee(s.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Ee(s.onPointerDownCapture,T.onPointerDownCapture)})});Wy.displayName=zN;var HN="DismissableLayerBranch",VN=L.forwardRef((s,t)=>{const e=L.useContext(sE),n=L.useRef(null),i=Je(t,n);return L.useEffect(()=>{const a=n.current;if(a)return e.branches.add(a),()=>{e.branches.delete(a)}},[e.branches]),$.jsx(Ue.div,{...s,ref:i})});VN.displayName=HN;function $N(s,t=globalThis?.document){const e=ba(s),n=L.useRef(!1),i=L.useRef(()=>{});return L.useEffect(()=>{const a=c=>{if(c.target&&!n.current){let h=function(){iE(jN,e,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=h,t.addEventListener("click",i.current,{once:!0})):h()}else t.removeEventListener("click",i.current);n.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,e]),{onPointerDownCapture:()=>n.current=!0}}function GN(s,t=globalThis?.document){const e=ba(s),n=L.useRef(!1);return L.useEffect(()=>{const i=a=>{a.target&&!n.current&&iE(UN,e,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,e]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function jx(){const s=new CustomEvent(Fg);document.dispatchEvent(s)}function iE(s,t,e,{discrete:n}){const i=e.originalEvent.target,a=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:e});t&&i.addEventListener(s,t,{once:!0}),n?IN(i,a):i.dispatchEvent(a)}var On=globalThis?.document?L.useLayoutEffect:()=>{},qN=$d[" useId ".trim().toString()]||(()=>{}),XN=0;function Ky(s){const[t,e]=L.useState(qN());return On(()=>{e(n=>n??String(XN++))},[s]),s||(t?`radix-${t}`:"")}const YN=["top","right","bottom","left"],Mr=Math.min,ws=Math.max,gd=Math.round,vh=Math.floor,pi=s=>({x:s,y:s}),WN={left:"right",right:"left",bottom:"top",top:"bottom"},KN={start:"end",end:"start"};function zg(s,t,e){return ws(s,Mr(t,e))}function qi(s,t){return typeof s=="function"?s(t):s}function Xi(s){return s.split("-")[0]}function Ko(s){return s.split("-")[1]}function Zy(s){return s==="x"?"y":"x"}function Qy(s){return s==="y"?"height":"width"}const ZN=new Set(["top","bottom"]);function di(s){return ZN.has(Xi(s))?"y":"x"}function Jy(s){return Zy(di(s))}function QN(s,t,e){e===void 0&&(e=!1);const n=Ko(s),i=Jy(s),a=Qy(i);let l=i==="x"?n===(e?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(l=yd(l)),[l,yd(l)]}function JN(s){const t=yd(s);return[jg(s),t,jg(t)]}function jg(s){return s.replace(/start|end/g,t=>KN[t])}const Ux=["left","right"],Hx=["right","left"],tP=["top","bottom"],eP=["bottom","top"];function nP(s,t,e){switch(s){case"top":case"bottom":return e?t?Hx:Ux:t?Ux:Hx;case"left":case"right":return t?tP:eP;default:return[]}}function sP(s,t,e,n){const i=Ko(s);let a=nP(Xi(s),e==="start",n);return i&&(a=a.map(l=>l+"-"+i),t&&(a=a.concat(a.map(jg)))),a}function yd(s){return s.replace(/left|right|bottom|top/g,t=>WN[t])}function iP(s){return{top:0,right:0,bottom:0,left:0,...s}}function rE(s){return typeof s!="number"?iP(s):{top:s,right:s,bottom:s,left:s}}function vd(s){const{x:t,y:e,width:n,height:i}=s;return{width:n,height:i,top:e,left:t,right:t+n,bottom:e+i,x:t,y:e}}function Vx(s,t,e){let{reference:n,floating:i}=s;const a=di(t),l=Jy(t),c=Qy(l),h=Xi(t),d=a==="y",p=n.x+n.width/2-i.width/2,f=n.y+n.height/2-i.height/2,g=n[c]/2-i[c]/2;let y;switch(h){case"top":y={x:p,y:n.y-i.height};break;case"bottom":y={x:p,y:n.y+n.height};break;case"right":y={x:n.x+n.width,y:f};break;case"left":y={x:n.x-i.width,y:f};break;default:y={x:n.x,y:n.y}}switch(Ko(t)){case"start":y[l]-=g*(e&&d?-1:1);break;case"end":y[l]+=g*(e&&d?-1:1);break}return y}const rP=async(s,t,e)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:l}=e,c=a.filter(Boolean),h=await(l.isRTL==null?void 0:l.isRTL(t));let d=await l.getElementRects({reference:s,floating:t,strategy:i}),{x:p,y:f}=Vx(d,n,h),g=n,y={},w=0;for(let v=0;v<c.length;v++){const{name:S,fn:x}=c[v],{x:A,y:E,data:R,reset:T}=await x({x:p,y:f,initialPlacement:n,placement:g,strategy:i,middlewareData:y,rects:d,platform:l,elements:{reference:s,floating:t}});p=A??p,f=E??f,y={...y,[S]:{...y[S],...R}},T&&w<=50&&(w++,typeof T=="object"&&(T.placement&&(g=T.placement),T.rects&&(d=T.rects===!0?await l.getElementRects({reference:s,floating:t,strategy:i}):T.rects),{x:p,y:f}=Vx(d,g,h)),v=-1)}return{x:p,y:f,placement:g,strategy:i,middlewareData:y}};async function kc(s,t){var e;t===void 0&&(t={});const{x:n,y:i,platform:a,rects:l,elements:c,strategy:h}=s,{boundary:d="clippingAncestors",rootBoundary:p="viewport",elementContext:f="floating",altBoundary:g=!1,padding:y=0}=qi(t,s),w=rE(y),S=c[g?f==="floating"?"reference":"floating":f],x=vd(await a.getClippingRect({element:(e=await(a.isElement==null?void 0:a.isElement(S)))==null||e?S:S.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:d,rootBoundary:p,strategy:h})),A=f==="floating"?{x:n,y:i,width:l.floating.width,height:l.floating.height}:l.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),R=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},T=vd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:A,offsetParent:E,strategy:h}):A);return{top:(x.top-T.top+w.top)/R.y,bottom:(T.bottom-x.bottom+w.bottom)/R.y,left:(x.left-T.left+w.left)/R.x,right:(T.right-x.right+w.right)/R.x}}const aP=s=>({name:"arrow",options:s,async fn(t){const{x:e,y:n,placement:i,rects:a,platform:l,elements:c,middlewareData:h}=t,{element:d,padding:p=0}=qi(s,t)||{};if(d==null)return{};const f=rE(p),g={x:e,y:n},y=Jy(i),w=Qy(y),v=await l.getDimensions(d),S=y==="y",x=S?"top":"left",A=S?"bottom":"right",E=S?"clientHeight":"clientWidth",R=a.reference[w]+a.reference[y]-g[y]-a.floating[w],T=g[y]-a.reference[y],O=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let D=O?O[E]:0;(!D||!await(l.isElement==null?void 0:l.isElement(O)))&&(D=c.floating[E]||a.floating[w]);const N=R/2-T/2,I=D/2-v[w]/2-1,G=Mr(f[x],I),W=Mr(f[A],I),F=G,Y=D-v[w]-W,k=D/2-v[w]/2+N,J=zg(F,k,Y),z=!h.arrow&&Ko(i)!=null&&k!==J&&a.reference[w]/2-(k<F?G:W)-v[w]/2<0,j=z?k<F?k-F:k-Y:0;return{[y]:g[y]+j,data:{[y]:J,centerOffset:k-J-j,...z&&{alignmentOffset:j}},reset:z}}}),oP=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(t){var e,n;const{placement:i,middlewareData:a,rects:l,initialPlacement:c,platform:h,elements:d}=t,{mainAxis:p=!0,crossAxis:f=!0,fallbackPlacements:g,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,...S}=qi(s,t);if((e=a.arrow)!=null&&e.alignmentOffset)return{};const x=Xi(i),A=di(c),E=Xi(c)===c,R=await(h.isRTL==null?void 0:h.isRTL(d.floating)),T=g||(E||!v?[yd(c)]:JN(c)),O=w!=="none";!g&&O&&T.push(...sP(c,v,w,R));const D=[c,...T],N=await kc(t,S),I=[];let G=((n=a.flip)==null?void 0:n.overflows)||[];if(p&&I.push(N[x]),f){const k=QN(i,l,R);I.push(N[k[0]],N[k[1]])}if(G=[...G,{placement:i,overflows:I}],!I.every(k=>k<=0)){var W,F;const k=(((W=a.flip)==null?void 0:W.index)||0)+1,J=D[k];if(J&&(!(f==="alignment"?A!==di(J):!1)||G.every(q=>di(q.placement)===A?q.overflows[0]>0:!0)))return{data:{index:k,overflows:G},reset:{placement:J}};let z=(F=G.filter(j=>j.overflows[0]<=0).sort((j,q)=>j.overflows[1]-q.overflows[1])[0])==null?void 0:F.placement;if(!z)switch(y){case"bestFit":{var Y;const j=(Y=G.filter(q=>{if(O){const nt=di(q.placement);return nt===A||nt==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(nt=>nt>0).reduce((nt,pt)=>nt+pt,0)]).sort((q,nt)=>q[1]-nt[1])[0])==null?void 0:Y[0];j&&(z=j);break}case"initialPlacement":z=c;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function $x(s,t){return{top:s.top-t.height,right:s.right-t.width,bottom:s.bottom-t.height,left:s.left-t.width}}function Gx(s){return YN.some(t=>s[t]>=0)}const lP=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(t){const{rects:e}=t,{strategy:n="referenceHidden",...i}=qi(s,t);switch(n){case"referenceHidden":{const a=await kc(t,{...i,elementContext:"reference"}),l=$x(a,e.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Gx(l)}}}case"escaped":{const a=await kc(t,{...i,altBoundary:!0}),l=$x(a,e.floating);return{data:{escapedOffsets:l,escaped:Gx(l)}}}default:return{}}}}},aE=new Set(["left","top"]);async function cP(s,t){const{placement:e,platform:n,elements:i}=s,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),l=Xi(e),c=Ko(e),h=di(e)==="y",d=aE.has(l)?-1:1,p=a&&h?-1:1,f=qi(t,s);let{mainAxis:g,crossAxis:y,alignmentAxis:w}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return c&&typeof w=="number"&&(y=c==="end"?w*-1:w),h?{x:y*p,y:g*d}:{x:g*d,y:y*p}}const uP=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(t){var e,n;const{x:i,y:a,placement:l,middlewareData:c}=t,h=await cP(t,s);return l===((e=c.offset)==null?void 0:e.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:i+h.x,y:a+h.y,data:{...h,placement:l}}}}},hP=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(t){const{x:e,y:n,placement:i}=t,{mainAxis:a=!0,crossAxis:l=!1,limiter:c={fn:S=>{let{x,y:A}=S;return{x,y:A}}},...h}=qi(s,t),d={x:e,y:n},p=await kc(t,h),f=di(Xi(i)),g=Zy(f);let y=d[g],w=d[f];if(a){const S=g==="y"?"top":"left",x=g==="y"?"bottom":"right",A=y+p[S],E=y-p[x];y=zg(A,y,E)}if(l){const S=f==="y"?"top":"left",x=f==="y"?"bottom":"right",A=w+p[S],E=w-p[x];w=zg(A,w,E)}const v=c.fn({...t,[g]:y,[f]:w});return{...v,data:{x:v.x-e,y:v.y-n,enabled:{[g]:a,[f]:l}}}}}},dP=function(s){return s===void 0&&(s={}),{options:s,fn(t){const{x:e,y:n,placement:i,rects:a,middlewareData:l}=t,{offset:c=0,mainAxis:h=!0,crossAxis:d=!0}=qi(s,t),p={x:e,y:n},f=di(i),g=Zy(f);let y=p[g],w=p[f];const v=qi(c,t),S=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(h){const E=g==="y"?"height":"width",R=a.reference[g]-a.floating[E]+S.mainAxis,T=a.reference[g]+a.reference[E]-S.mainAxis;y<R?y=R:y>T&&(y=T)}if(d){var x,A;const E=g==="y"?"width":"height",R=aE.has(Xi(i)),T=a.reference[f]-a.floating[E]+(R&&((x=l.offset)==null?void 0:x[f])||0)+(R?0:S.crossAxis),O=a.reference[f]+a.reference[E]+(R?0:((A=l.offset)==null?void 0:A[f])||0)-(R?S.crossAxis:0);w<T?w=T:w>O&&(w=O)}return{[g]:y,[f]:w}}}},fP=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(t){var e,n;const{placement:i,rects:a,platform:l,elements:c}=t,{apply:h=()=>{},...d}=qi(s,t),p=await kc(t,d),f=Xi(i),g=Ko(i),y=di(i)==="y",{width:w,height:v}=a.floating;let S,x;f==="top"||f==="bottom"?(S=f,x=g===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(x=f,S=g==="end"?"top":"bottom");const A=v-p.top-p.bottom,E=w-p.left-p.right,R=Mr(v-p[S],A),T=Mr(w-p[x],E),O=!t.middlewareData.shift;let D=R,N=T;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(N=E),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(D=A),O&&!g){const G=ws(p.left,0),W=ws(p.right,0),F=ws(p.top,0),Y=ws(p.bottom,0);y?N=w-2*(G!==0||W!==0?G+W:ws(p.left,p.right)):D=v-2*(F!==0||Y!==0?F+Y:ws(p.top,p.bottom))}await h({...t,availableWidth:N,availableHeight:D});const I=await l.getDimensions(c.floating);return w!==I.width||v!==I.height?{reset:{rects:!0}}:{}}}};function qd(){return typeof window<"u"}function Zo(s){return oE(s)?(s.nodeName||"").toLowerCase():"#document"}function _s(s){var t;return(s==null||(t=s.ownerDocument)==null?void 0:t.defaultView)||window}function bi(s){var t;return(t=(oE(s)?s.ownerDocument:s.document)||window.document)==null?void 0:t.documentElement}function oE(s){return qd()?s instanceof Node||s instanceof _s(s).Node:!1}function Ks(s){return qd()?s instanceof Element||s instanceof _s(s).Element:!1}function gi(s){return qd()?s instanceof HTMLElement||s instanceof _s(s).HTMLElement:!1}function qx(s){return!qd()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof _s(s).ShadowRoot}const pP=new Set(["inline","contents"]);function $c(s){const{overflow:t,overflowX:e,overflowY:n,display:i}=Zs(s);return/auto|scroll|overlay|hidden|clip/.test(t+n+e)&&!pP.has(i)}const mP=new Set(["table","td","th"]);function gP(s){return mP.has(Zo(s))}const yP=[":popover-open",":modal"];function Xd(s){return yP.some(t=>{try{return s.matches(t)}catch{return!1}})}const vP=["transform","translate","scale","rotate","perspective"],bP=["transform","translate","scale","rotate","perspective","filter"],wP=["paint","layout","strict","content"];function tv(s){const t=ev(),e=Ks(s)?Zs(s):s;return vP.some(n=>e[n]?e[n]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||bP.some(n=>(e.willChange||"").includes(n))||wP.some(n=>(e.contain||"").includes(n))}function _P(s){let t=Dr(s);for(;gi(t)&&!Go(t);){if(tv(t))return t;if(Xd(t))return null;t=Dr(t)}return null}function ev(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xP=new Set(["html","body","#document"]);function Go(s){return xP.has(Zo(s))}function Zs(s){return _s(s).getComputedStyle(s)}function Yd(s){return Ks(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function Dr(s){if(Zo(s)==="html")return s;const t=s.assignedSlot||s.parentNode||qx(s)&&s.host||bi(s);return qx(t)?t.host:t}function lE(s){const t=Dr(s);return Go(t)?s.ownerDocument?s.ownerDocument.body:s.body:gi(t)&&$c(t)?t:lE(t)}function Mc(s,t,e){var n;t===void 0&&(t=[]),e===void 0&&(e=!0);const i=lE(s),a=i===((n=s.ownerDocument)==null?void 0:n.body),l=_s(i);if(a){const c=Ug(l);return t.concat(l,l.visualViewport||[],$c(i)?i:[],c&&e?Mc(c):[])}return t.concat(i,Mc(i,[],e))}function Ug(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function cE(s){const t=Zs(s);let e=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=gi(s),a=i?s.offsetWidth:e,l=i?s.offsetHeight:n,c=gd(e)!==a||gd(n)!==l;return c&&(e=a,n=l),{width:e,height:n,$:c}}function nv(s){return Ks(s)?s:s.contextElement}function Io(s){const t=nv(s);if(!gi(t))return pi(1);const e=t.getBoundingClientRect(),{width:n,height:i,$:a}=cE(t);let l=(a?gd(e.width):e.width)/n,c=(a?gd(e.height):e.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const SP=pi(0);function uE(s){const t=_s(s);return!ev()||!t.visualViewport?SP:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function AP(s,t,e){return t===void 0&&(t=!1),!e||t&&e!==_s(s)?!1:t}function wa(s,t,e,n){t===void 0&&(t=!1),e===void 0&&(e=!1);const i=s.getBoundingClientRect(),a=nv(s);let l=pi(1);t&&(n?Ks(n)&&(l=Io(n)):l=Io(s));const c=AP(a,e,n)?uE(a):pi(0);let h=(i.left+c.x)/l.x,d=(i.top+c.y)/l.y,p=i.width/l.x,f=i.height/l.y;if(a){const g=_s(a),y=n&&Ks(n)?_s(n):n;let w=g,v=Ug(w);for(;v&&n&&y!==w;){const S=Io(v),x=v.getBoundingClientRect(),A=Zs(v),E=x.left+(v.clientLeft+parseFloat(A.paddingLeft))*S.x,R=x.top+(v.clientTop+parseFloat(A.paddingTop))*S.y;h*=S.x,d*=S.y,p*=S.x,f*=S.y,h+=E,d+=R,w=_s(v),v=Ug(w)}}return vd({width:p,height:f,x:h,y:d})}function Wd(s,t){const e=Yd(s).scrollLeft;return t?t.left+e:wa(bi(s)).left+e}function hE(s,t){const e=s.getBoundingClientRect(),n=e.left+t.scrollLeft-Wd(s,e),i=e.top+t.scrollTop;return{x:n,y:i}}function EP(s){let{elements:t,rect:e,offsetParent:n,strategy:i}=s;const a=i==="fixed",l=bi(n),c=t?Xd(t.floating):!1;if(n===l||c&&a)return e;let h={scrollLeft:0,scrollTop:0},d=pi(1);const p=pi(0),f=gi(n);if((f||!f&&!a)&&((Zo(n)!=="body"||$c(l))&&(h=Yd(n)),gi(n))){const y=wa(n);d=Io(n),p.x=y.x+n.clientLeft,p.y=y.y+n.clientTop}const g=l&&!f&&!a?hE(l,h):pi(0);return{width:e.width*d.x,height:e.height*d.y,x:e.x*d.x-h.scrollLeft*d.x+p.x+g.x,y:e.y*d.y-h.scrollTop*d.y+p.y+g.y}}function CP(s){return Array.from(s.getClientRects())}function TP(s){const t=bi(s),e=Yd(s),n=s.ownerDocument.body,i=ws(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=ws(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let l=-e.scrollLeft+Wd(s);const c=-e.scrollTop;return Zs(n).direction==="rtl"&&(l+=ws(t.clientWidth,n.clientWidth)-i),{width:i,height:a,x:l,y:c}}const Xx=25;function RP(s,t){const e=_s(s),n=bi(s),i=e.visualViewport;let a=n.clientWidth,l=n.clientHeight,c=0,h=0;if(i){a=i.width,l=i.height;const p=ev();(!p||p&&t==="fixed")&&(c=i.offsetLeft,h=i.offsetTop)}const d=Wd(n);if(d<=0){const p=n.ownerDocument,f=p.body,g=getComputedStyle(f),y=p.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,w=Math.abs(n.clientWidth-f.clientWidth-y);w<=Xx&&(a-=w)}else d<=Xx&&(a+=d);return{width:a,height:l,x:c,y:h}}const kP=new Set(["absolute","fixed"]);function MP(s,t){const e=wa(s,!0,t==="fixed"),n=e.top+s.clientTop,i=e.left+s.clientLeft,a=gi(s)?Io(s):pi(1),l=s.clientWidth*a.x,c=s.clientHeight*a.y,h=i*a.x,d=n*a.y;return{width:l,height:c,x:h,y:d}}function Yx(s,t,e){let n;if(t==="viewport")n=RP(s,e);else if(t==="document")n=TP(bi(s));else if(Ks(t))n=MP(t,e);else{const i=uE(s);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return vd(n)}function dE(s,t){const e=Dr(s);return e===t||!Ks(e)||Go(e)?!1:Zs(e).position==="fixed"||dE(e,t)}function DP(s,t){const e=t.get(s);if(e)return e;let n=Mc(s,[],!1).filter(c=>Ks(c)&&Zo(c)!=="body"),i=null;const a=Zs(s).position==="fixed";let l=a?Dr(s):s;for(;Ks(l)&&!Go(l);){const c=Zs(l),h=tv(l);!h&&c.position==="fixed"&&(i=null),(a?!h&&!i:!h&&c.position==="static"&&!!i&&kP.has(i.position)||$c(l)&&!h&&dE(s,l))?n=n.filter(p=>p!==l):i=c,l=Dr(l)}return t.set(s,n),n}function OP(s){let{element:t,boundary:e,rootBoundary:n,strategy:i}=s;const l=[...e==="clippingAncestors"?Xd(t)?[]:DP(t,this._c):[].concat(e),n],c=l[0],h=l.reduce((d,p)=>{const f=Yx(t,p,i);return d.top=ws(f.top,d.top),d.right=Mr(f.right,d.right),d.bottom=Mr(f.bottom,d.bottom),d.left=ws(f.left,d.left),d},Yx(t,c,i));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function NP(s){const{width:t,height:e}=cE(s);return{width:t,height:e}}function PP(s,t,e){const n=gi(t),i=bi(t),a=e==="fixed",l=wa(s,!0,a,t);let c={scrollLeft:0,scrollTop:0};const h=pi(0);function d(){h.x=Wd(i)}if(n||!n&&!a)if((Zo(t)!=="body"||$c(i))&&(c=Yd(t)),n){const y=wa(t,!0,a,t);h.x=y.x+t.clientLeft,h.y=y.y+t.clientTop}else i&&d();a&&!n&&i&&d();const p=i&&!n&&!a?hE(i,c):pi(0),f=l.left+c.scrollLeft-h.x-p.x,g=l.top+c.scrollTop-h.y-p.y;return{x:f,y:g,width:l.width,height:l.height}}function Vm(s){return Zs(s).position==="static"}function Wx(s,t){if(!gi(s)||Zs(s).position==="fixed")return null;if(t)return t(s);let e=s.offsetParent;return bi(s)===e&&(e=e.ownerDocument.body),e}function fE(s,t){const e=_s(s);if(Xd(s))return e;if(!gi(s)){let i=Dr(s);for(;i&&!Go(i);){if(Ks(i)&&!Vm(i))return i;i=Dr(i)}return e}let n=Wx(s,t);for(;n&&gP(n)&&Vm(n);)n=Wx(n,t);return n&&Go(n)&&Vm(n)&&!tv(n)?e:n||_P(s)||e}const LP=async function(s){const t=this.getOffsetParent||fE,e=this.getDimensions,n=await e(s.floating);return{reference:PP(s.reference,await t(s.floating),s.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function BP(s){return Zs(s).direction==="rtl"}const IP={convertOffsetParentRelativeRectToViewportRelativeRect:EP,getDocumentElement:bi,getClippingRect:OP,getOffsetParent:fE,getElementRects:LP,getClientRects:CP,getDimensions:NP,getScale:Io,isElement:Ks,isRTL:BP};function pE(s,t){return s.x===t.x&&s.y===t.y&&s.width===t.width&&s.height===t.height}function FP(s,t){let e=null,n;const i=bi(s);function a(){var c;clearTimeout(n),(c=e)==null||c.disconnect(),e=null}function l(c,h){c===void 0&&(c=!1),h===void 0&&(h=1),a();const d=s.getBoundingClientRect(),{left:p,top:f,width:g,height:y}=d;if(c||t(),!g||!y)return;const w=vh(f),v=vh(i.clientWidth-(p+g)),S=vh(i.clientHeight-(f+y)),x=vh(p),E={rootMargin:-w+"px "+-v+"px "+-S+"px "+-x+"px",threshold:ws(0,Mr(1,h))||1};let R=!0;function T(O){const D=O[0].intersectionRatio;if(D!==h){if(!R)return l();D?l(!1,D):n=setTimeout(()=>{l(!1,1e-7)},1e3)}D===1&&!pE(d,s.getBoundingClientRect())&&l(),R=!1}try{e=new IntersectionObserver(T,{...E,root:i.ownerDocument})}catch{e=new IntersectionObserver(T,E)}e.observe(s)}return l(!0),a}function zP(s,t,e,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:h=!1}=n,d=nv(s),p=i||a?[...d?Mc(d):[],...Mc(t)]:[];p.forEach(x=>{i&&x.addEventListener("scroll",e,{passive:!0}),a&&x.addEventListener("resize",e)});const f=d&&c?FP(d,e):null;let g=-1,y=null;l&&(y=new ResizeObserver(x=>{let[A]=x;A&&A.target===d&&y&&(y.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var E;(E=y)==null||E.observe(t)})),e()}),d&&!h&&y.observe(d),y.observe(t));let w,v=h?wa(s):null;h&&S();function S(){const x=wa(s);v&&!pE(v,x)&&e(),v=x,w=requestAnimationFrame(S)}return e(),()=>{var x;p.forEach(A=>{i&&A.removeEventListener("scroll",e),a&&A.removeEventListener("resize",e)}),f?.(),(x=y)==null||x.disconnect(),y=null,h&&cancelAnimationFrame(w)}}const jP=uP,UP=hP,HP=oP,VP=fP,$P=lP,Kx=aP,GP=dP,qP=(s,t,e)=>{const n=new Map,i={platform:IP,...e},a={...i.platform,_c:n};return rP(s,t,{...i,platform:a})};var XP=typeof document<"u",YP=function(){},Wh=XP?L.useLayoutEffect:YP;function bd(s,t){if(s===t)return!0;if(typeof s!=typeof t)return!1;if(typeof s=="function"&&s.toString()===t.toString())return!0;let e,n,i;if(s&&t&&typeof s=="object"){if(Array.isArray(s)){if(e=s.length,e!==t.length)return!1;for(n=e;n--!==0;)if(!bd(s[n],t[n]))return!1;return!0}if(i=Object.keys(s),e=i.length,e!==Object.keys(t).length)return!1;for(n=e;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=e;n--!==0;){const a=i[n];if(!(a==="_owner"&&s.$$typeof)&&!bd(s[a],t[a]))return!1}return!0}return s!==s&&t!==t}function mE(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function Zx(s,t){const e=mE(s);return Math.round(t*e)/e}function $m(s){const t=L.useRef(s);return Wh(()=>{t.current=s}),t}function WP(s){s===void 0&&(s={});const{placement:t="bottom",strategy:e="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:l}={},transform:c=!0,whileElementsMounted:h,open:d}=s,[p,f]=L.useState({x:0,y:0,strategy:e,placement:t,middlewareData:{},isPositioned:!1}),[g,y]=L.useState(n);bd(g,n)||y(n);const[w,v]=L.useState(null),[S,x]=L.useState(null),A=L.useCallback(q=>{q!==O.current&&(O.current=q,v(q))},[]),E=L.useCallback(q=>{q!==D.current&&(D.current=q,x(q))},[]),R=a||w,T=l||S,O=L.useRef(null),D=L.useRef(null),N=L.useRef(p),I=h!=null,G=$m(h),W=$m(i),F=$m(d),Y=L.useCallback(()=>{if(!O.current||!D.current)return;const q={placement:t,strategy:e,middleware:g};W.current&&(q.platform=W.current),qP(O.current,D.current,q).then(nt=>{const pt={...nt,isPositioned:F.current!==!1};k.current&&!bd(N.current,pt)&&(N.current=pt,Vc.flushSync(()=>{f(pt)}))})},[g,t,e,W,F]);Wh(()=>{d===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(q=>({...q,isPositioned:!1})))},[d]);const k=L.useRef(!1);Wh(()=>(k.current=!0,()=>{k.current=!1}),[]),Wh(()=>{if(R&&(O.current=R),T&&(D.current=T),R&&T){if(G.current)return G.current(R,T,Y);Y()}},[R,T,Y,G,I]);const J=L.useMemo(()=>({reference:O,floating:D,setReference:A,setFloating:E}),[A,E]),z=L.useMemo(()=>({reference:R,floating:T}),[R,T]),j=L.useMemo(()=>{const q={position:e,left:0,top:0};if(!z.floating)return q;const nt=Zx(z.floating,p.x),pt=Zx(z.floating,p.y);return c?{...q,transform:"translate("+nt+"px, "+pt+"px)",...mE(z.floating)>=1.5&&{willChange:"transform"}}:{position:e,left:nt,top:pt}},[e,c,z.floating,p.x,p.y]);return L.useMemo(()=>({...p,update:Y,refs:J,elements:z,floatingStyles:j}),[p,Y,J,z,j])}const KP=s=>{function t(e){return{}.hasOwnProperty.call(e,"current")}return{name:"arrow",options:s,fn(e){const{element:n,padding:i}=typeof s=="function"?s(e):s;return n&&t(n)?n.current!=null?Kx({element:n.current,padding:i}).fn(e):{}:n?Kx({element:n,padding:i}).fn(e):{}}}},ZP=(s,t)=>({...jP(s),options:[s,t]}),QP=(s,t)=>({...UP(s),options:[s,t]}),JP=(s,t)=>({...GP(s),options:[s,t]}),tL=(s,t)=>({...HP(s),options:[s,t]}),eL=(s,t)=>({...VP(s),options:[s,t]}),nL=(s,t)=>({...$P(s),options:[s,t]}),sL=(s,t)=>({...KP(s),options:[s,t]});var iL="Arrow",gE=L.forwardRef((s,t)=>{const{children:e,width:n=10,height:i=5,...a}=s;return $.jsx(Ue.svg,{...a,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?e:$.jsx("polygon",{points:"0,0 30,0 15,10"})})});gE.displayName=iL;var rL=gE;function aL(s){const[t,e]=L.useState(void 0);return On(()=>{if(s){e({width:s.offsetWidth,height:s.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let l,c;if("borderBoxSize"in a){const h=a.borderBoxSize,d=Array.isArray(h)?h[0]:h;l=d.inlineSize,c=d.blockSize}else l=s.offsetWidth,c=s.offsetHeight;e({width:l,height:c})});return n.observe(s,{box:"border-box"}),()=>n.unobserve(s)}else e(void 0)},[s]),t}var sv="Popper",[yE,Kd]=Gd(sv),[oL,vE]=yE(sv),bE=s=>{const{__scopePopper:t,children:e}=s,[n,i]=L.useState(null);return $.jsx(oL,{scope:t,anchor:n,onAnchorChange:i,children:e})};bE.displayName=sv;var wE="PopperAnchor",_E=L.forwardRef((s,t)=>{const{__scopePopper:e,virtualRef:n,...i}=s,a=vE(wE,e),l=L.useRef(null),c=Je(t,l),h=L.useRef(null);return L.useEffect(()=>{const d=h.current;h.current=n?.current||l.current,d!==h.current&&a.onAnchorChange(h.current)}),n?null:$.jsx(Ue.div,{...i,ref:c})});_E.displayName=wE;var iv="PopperContent",[lL,cL]=yE(iv),xE=L.forwardRef((s,t)=>{const{__scopePopper:e,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:h=!0,collisionBoundary:d=[],collisionPadding:p=0,sticky:f="partial",hideWhenDetached:g=!1,updatePositionStrategy:y="optimized",onPlaced:w,...v}=s,S=vE(iv,e),[x,A]=L.useState(null),E=Je(t,ut=>A(ut)),[R,T]=L.useState(null),O=aL(R),D=O?.width??0,N=O?.height??0,I=n+(a!=="center"?"-"+a:""),G=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},W=Array.isArray(d)?d:[d],F=W.length>0,Y={padding:G,boundary:W.filter(hL),altBoundary:F},{refs:k,floatingStyles:J,placement:z,isPositioned:j,middlewareData:q}=WP({strategy:"fixed",placement:I,whileElementsMounted:(...ut)=>zP(...ut,{animationFrame:y==="always"}),elements:{reference:S.anchor},middleware:[ZP({mainAxis:i+N,alignmentAxis:l}),h&&QP({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?JP():void 0,...Y}),h&&tL({...Y}),eL({...Y,apply:({elements:ut,rects:vt,availableWidth:Et,availableHeight:Lt})=>{const{width:Ot,height:Ht}=vt.reference,le=ut.floating.style;le.setProperty("--radix-popper-available-width",`${Et}px`),le.setProperty("--radix-popper-available-height",`${Lt}px`),le.setProperty("--radix-popper-anchor-width",`${Ot}px`),le.setProperty("--radix-popper-anchor-height",`${Ht}px`)}}),R&&sL({element:R,padding:c}),dL({arrowWidth:D,arrowHeight:N}),g&&nL({strategy:"referenceHidden",...Y})]}),[nt,pt]=EE(z),P=ba(w);On(()=>{j&&P?.()},[j,P]);const U=q.arrow?.x,K=q.arrow?.y,tt=q.arrow?.centerOffset!==0,[it,xt]=L.useState();return On(()=>{x&&xt(window.getComputedStyle(x).zIndex)},[x]),$.jsx("div",{ref:k.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:j?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:it,"--radix-popper-transform-origin":[q.transformOrigin?.x,q.transformOrigin?.y].join(" "),...q.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:$.jsx(lL,{scope:e,placedSide:nt,onArrowChange:T,arrowX:U,arrowY:K,shouldHideArrow:tt,children:$.jsx(Ue.div,{"data-side":nt,"data-align":pt,...v,ref:E,style:{...v.style,animation:j?void 0:"none"}})})})});xE.displayName=iv;var SE="PopperArrow",uL={top:"bottom",right:"left",bottom:"top",left:"right"},AE=L.forwardRef(function(t,e){const{__scopePopper:n,...i}=t,a=cL(SE,n),l=uL[a.placedSide];return $.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:$.jsx(rL,{...i,ref:e,style:{...i.style,display:"block"}})})});AE.displayName=SE;function hL(s){return s!==null}var dL=s=>({name:"transformOrigin",options:s,fn(t){const{placement:e,rects:n,middlewareData:i}=t,l=i.arrow?.centerOffset!==0,c=l?0:s.arrowWidth,h=l?0:s.arrowHeight,[d,p]=EE(e),f={start:"0%",center:"50%",end:"100%"}[p],g=(i.arrow?.x??0)+c/2,y=(i.arrow?.y??0)+h/2;let w="",v="";return d==="bottom"?(w=l?f:`${g}px`,v=`${-h}px`):d==="top"?(w=l?f:`${g}px`,v=`${n.floating.height+h}px`):d==="right"?(w=`${-h}px`,v=l?f:`${y}px`):d==="left"&&(w=`${n.floating.width+h}px`,v=l?f:`${y}px`),{data:{x:w,y:v}}}});function EE(s){const[t,e="center"]=s.split("-");return[t,e]}var fL=bE,CE=_E,TE=xE,RE=AE,pL="Portal",kE=L.forwardRef((s,t)=>{const{container:e,...n}=s,[i,a]=L.useState(!1);On(()=>a(!0),[]);const l=e||i&&globalThis?.document?.body;return l?eE.createPortal($.jsx(Ue.div,{...n,ref:t}),l):null});kE.displayName=pL;function mL(s,t){return L.useReducer((e,n)=>t[e][n]??e,s)}var ME=s=>{const{present:t,children:e}=s,n=gL(t),i=typeof e=="function"?e({present:n.isPresent}):L.Children.only(e),a=Je(n.ref,yL(i));return typeof e=="function"||n.isPresent?L.cloneElement(i,{ref:a}):null};ME.displayName="Presence";function gL(s){const[t,e]=L.useState(),n=L.useRef(null),i=L.useRef(s),a=L.useRef("none"),l=s?"mounted":"unmounted",[c,h]=mL(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L.useEffect(()=>{const d=bh(n.current);a.current=c==="mounted"?d:"none"},[c]),On(()=>{const d=n.current,p=i.current;if(p!==s){const g=a.current,y=bh(d);s?h("MOUNT"):y==="none"||d?.display==="none"?h("UNMOUNT"):h(p&&g!==y?"ANIMATION_OUT":"UNMOUNT"),i.current=s}},[s,h]),On(()=>{if(t){let d;const p=t.ownerDocument.defaultView??window,f=y=>{const v=bh(n.current).includes(CSS.escape(y.animationName));if(y.target===t&&v&&(h("ANIMATION_END"),!i.current)){const S=t.style.animationFillMode;t.style.animationFillMode="forwards",d=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=S)})}},g=y=>{y.target===t&&(a.current=bh(n.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{p.clearTimeout(d),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else h("ANIMATION_END")},[t,h]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:L.useCallback(d=>{n.current=d?getComputedStyle(d):null,e(d)},[])}}function bh(s){return s?.animationName||"none"}function yL(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}var vL=$d[" useInsertionEffect ".trim().toString()]||On;function Qx({prop:s,defaultProp:t,onChange:e=()=>{},caller:n}){const[i,a,l]=bL({defaultProp:t,onChange:e}),c=s!==void 0,h=c?s:i;{const p=L.useRef(s!==void 0);L.useEffect(()=>{const f=p.current;f!==c&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=c},[c,n])}const d=L.useCallback(p=>{if(c){const f=wL(p)?p(s):p;f!==s&&l.current?.(f)}else a(p)},[c,s,a,l]);return[h,d]}function bL({defaultProp:s,onChange:t}){const[e,n]=L.useState(s),i=L.useRef(e),a=L.useRef(t);return vL(()=>{a.current=t},[t]),L.useEffect(()=>{i.current!==e&&(a.current?.(e),i.current=e)},[e,i]),[e,n,a]}function wL(s){return typeof s=="function"}var DE=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),_L="VisuallyHidden",OE=L.forwardRef((s,t)=>$.jsx(Ue.span,{...s,ref:t,style:{...DE,...s.style}}));OE.displayName=_L;var xL=OE,[Zd]=Gd("Tooltip",[Kd]),rv=Kd(),NE="TooltipProvider",SL=700,Jx="tooltip.open",[AL,PE]=Zd(NE),LE=s=>{const{__scopeTooltip:t,delayDuration:e=SL,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:a}=s,l=L.useRef(!0),c=L.useRef(!1),h=L.useRef(0);return L.useEffect(()=>{const d=h.current;return()=>window.clearTimeout(d)},[]),$.jsx(AL,{scope:t,isOpenDelayedRef:l,delayDuration:e,onOpen:L.useCallback(()=>{window.clearTimeout(h.current),l.current=!1},[]),onClose:L.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:L.useCallback(d=>{c.current=d},[]),disableHoverableContent:i,children:a})};LE.displayName=NE;var BE="Tooltip",[yH,Qd]=Zd(BE),Hg="TooltipTrigger",EL=L.forwardRef((s,t)=>{const{__scopeTooltip:e,...n}=s,i=Qd(Hg,e),a=PE(Hg,e),l=rv(e),c=L.useRef(null),h=Je(t,c,i.onTriggerChange),d=L.useRef(!1),p=L.useRef(!1),f=L.useCallback(()=>d.current=!1,[]);return L.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),$.jsx(CE,{asChild:!0,...l,children:$.jsx(Ue.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:h,onPointerMove:Ee(s.onPointerMove,g=>{g.pointerType!=="touch"&&!p.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),p.current=!0)}),onPointerLeave:Ee(s.onPointerLeave,()=>{i.onTriggerLeave(),p.current=!1}),onPointerDown:Ee(s.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Ee(s.onFocus,()=>{d.current||i.onOpen()}),onBlur:Ee(s.onBlur,i.onClose),onClick:Ee(s.onClick,i.onClose)})})});EL.displayName=Hg;var CL="TooltipPortal",[vH,TL]=Zd(CL,{forceMount:void 0}),qo="TooltipContent",RL=L.forwardRef((s,t)=>{const e=TL(qo,s.__scopeTooltip),{forceMount:n=e.forceMount,side:i="top",...a}=s,l=Qd(qo,s.__scopeTooltip);return $.jsx(ME,{present:n||l.open,children:l.disableHoverableContent?$.jsx(IE,{side:i,...a,ref:t}):$.jsx(kL,{side:i,...a,ref:t})})}),kL=L.forwardRef((s,t)=>{const e=Qd(qo,s.__scopeTooltip),n=PE(qo,s.__scopeTooltip),i=L.useRef(null),a=Je(t,i),[l,c]=L.useState(null),{trigger:h,onClose:d}=e,p=i.current,{onPointerInTransitChange:f}=n,g=L.useCallback(()=>{c(null),f(!1)},[f]),y=L.useCallback((w,v)=>{const S=w.currentTarget,x={x:w.clientX,y:w.clientY},A=PL(x,S.getBoundingClientRect()),E=LL(x,A),R=BL(v.getBoundingClientRect()),T=FL([...E,...R]);c(T),f(!0)},[f]);return L.useEffect(()=>()=>g(),[g]),L.useEffect(()=>{if(h&&p){const w=S=>y(S,p),v=S=>y(S,h);return h.addEventListener("pointerleave",w),p.addEventListener("pointerleave",v),()=>{h.removeEventListener("pointerleave",w),p.removeEventListener("pointerleave",v)}}},[h,p,y,g]),L.useEffect(()=>{if(l){const w=v=>{const S=v.target,x={x:v.clientX,y:v.clientY},A=h?.contains(S)||p?.contains(S),E=!IL(x,l);A?g():E&&(g(),d())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[h,p,l,d,g]),$.jsx(IE,{...s,ref:a})}),[ML,DL]=Zd(BE,{isInside:!1}),OL=ON("TooltipContent"),IE=L.forwardRef((s,t)=>{const{__scopeTooltip:e,children:n,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:l,...c}=s,h=Qd(qo,e),d=rv(e),{onClose:p}=h;return L.useEffect(()=>(document.addEventListener(Jx,p),()=>document.removeEventListener(Jx,p)),[p]),L.useEffect(()=>{if(h.trigger){const f=g=>{g.target?.contains(h.trigger)&&p()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[h.trigger,p]),$.jsx(Wy,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:f=>f.preventDefault(),onDismiss:p,children:$.jsxs(TE,{"data-state":h.stateAttribute,...d,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[$.jsx(OL,{children:n}),$.jsx(ML,{scope:e,isInside:!0,children:$.jsx(xL,{id:h.contentId,role:"tooltip",children:i||n})})]})})});RL.displayName=qo;var FE="TooltipArrow",NL=L.forwardRef((s,t)=>{const{__scopeTooltip:e,...n}=s,i=rv(e);return DL(FE,e).isInside?null:$.jsx(RE,{...i,...n,ref:t})});NL.displayName=FE;function PL(s,t){const e=Math.abs(t.top-s.y),n=Math.abs(t.bottom-s.y),i=Math.abs(t.right-s.x),a=Math.abs(t.left-s.x);switch(Math.min(e,n,i,a)){case a:return"left";case i:return"right";case e:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function LL(s,t,e=5){const n=[];switch(t){case"top":n.push({x:s.x-e,y:s.y+e},{x:s.x+e,y:s.y+e});break;case"bottom":n.push({x:s.x-e,y:s.y-e},{x:s.x+e,y:s.y-e});break;case"left":n.push({x:s.x+e,y:s.y-e},{x:s.x+e,y:s.y+e});break;case"right":n.push({x:s.x-e,y:s.y-e},{x:s.x-e,y:s.y+e});break}return n}function BL(s){const{top:t,right:e,bottom:n,left:i}=s;return[{x:i,y:t},{x:e,y:t},{x:e,y:n},{x:i,y:n}]}function IL(s,t){const{x:e,y:n}=s;let i=!1;for(let a=0,l=t.length-1;a<t.length;l=a++){const c=t[a],h=t[l],d=c.x,p=c.y,f=h.x,g=h.y;p>n!=g>n&&e<(f-d)*(n-p)/(g-p)+d&&(i=!i)}return i}function FL(s){const t=s.slice();return t.sort((e,n)=>e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0),zL(t)}function zL(s){if(s.length<=1)return s.slice();const t=[];for(let n=0;n<s.length;n++){const i=s[n];for(;t.length>=2;){const a=t[t.length-1],l=t[t.length-2];if((a.x-l.x)*(i.y-l.y)>=(a.y-l.y)*(i.x-l.x))t.pop();else break}t.push(i)}t.pop();const e=[];for(let n=s.length-1;n>=0;n--){const i=s[n];for(;e.length>=2;){const a=e[e.length-1],l=e[e.length-2];if((a.x-l.x)*(i.y-l.y)>=(a.y-l.y)*(i.x-l.x))e.pop();else break}e.push(i)}return e.pop(),t.length===1&&e.length===1&&t[0].x===e[0].x&&t[0].y===e[0].y?t:t.concat(e)}var jL=LE;function zE(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var i=s.length;for(t=0;t<i;t++)s[t]&&(e=zE(s[t]))&&(n&&(n+=" "),n+=e)}else for(e in s)s[e]&&(n&&(n+=" "),n+=e);return n}function jE(){for(var s,t,e=0,n="",i=arguments.length;e<i;e++)(s=arguments[e])&&(t=zE(s))&&(n&&(n+=" "),n+=t);return n}const UL=(s,t)=>{const e=new Array(s.length+t.length);for(let n=0;n<s.length;n++)e[n]=s[n];for(let n=0;n<t.length;n++)e[s.length+n]=t[n];return e},HL=(s,t)=>({classGroupId:s,validator:t}),UE=(s=new Map,t=null,e)=>({nextPart:s,validators:t,classGroupId:e}),wd="-",t1=[],VL="arbitrary..",$L=s=>{const t=qL(s),{conflictingClassGroups:e,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return GL(l);const c=l.split(wd),h=c[0]===""&&c.length>1?1:0;return HE(c,h,t)},getConflictingClassGroupIds:(l,c)=>{if(c){const h=n[l],d=e[l];return h?d?UL(d,h):h:d||t1}return e[l]||t1}}},HE=(s,t,e)=>{if(s.length-t===0)return e.classGroupId;const i=s[t],a=e.nextPart.get(i);if(a){const d=HE(s,t+1,a);if(d)return d}const l=e.validators;if(l===null)return;const c=t===0?s.join(wd):s.slice(t).join(wd),h=l.length;for(let d=0;d<h;d++){const p=l[d];if(p.validator(c))return p.classGroupId}},GL=s=>s.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=s.slice(1,-1),e=t.indexOf(":"),n=t.slice(0,e);return n?VL+n:void 0})(),qL=s=>{const{theme:t,classGroups:e}=s;return XL(e,t)},XL=(s,t)=>{const e=UE();for(const n in s){const i=s[n];av(i,e,n,t)}return e},av=(s,t,e,n)=>{const i=s.length;for(let a=0;a<i;a++){const l=s[a];YL(l,t,e,n)}},YL=(s,t,e,n)=>{if(typeof s=="string"){WL(s,t,e);return}if(typeof s=="function"){KL(s,t,e,n);return}ZL(s,t,e,n)},WL=(s,t,e)=>{const n=s===""?t:VE(t,s);n.classGroupId=e},KL=(s,t,e,n)=>{if(QL(s)){av(s(n),t,e,n);return}t.validators===null&&(t.validators=[]),t.validators.push(HL(e,s))},ZL=(s,t,e,n)=>{const i=Object.entries(s),a=i.length;for(let l=0;l<a;l++){const[c,h]=i[l];av(h,VE(t,c),e,n)}},VE=(s,t)=>{let e=s;const n=t.split(wd),i=n.length;for(let a=0;a<i;a++){const l=n[a];let c=e.nextPart.get(l);c||(c=UE(),e.nextPart.set(l,c)),e=c}return e},QL=s=>"isThemeGetter"in s&&s.isThemeGetter===!0,JL=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,e=Object.create(null),n=Object.create(null);const i=(a,l)=>{e[a]=l,t++,t>s&&(t=0,n=e,e=Object.create(null))};return{get(a){let l=e[a];if(l!==void 0)return l;if((l=n[a])!==void 0)return i(a,l),l},set(a,l){a in e?e[a]=l:i(a,l)}}},Vg="!",e1=":",tB=[],n1=(s,t,e,n,i)=>({modifiers:s,hasImportantModifier:t,baseClassName:e,maybePostfixModifierPosition:n,isExternal:i}),eB=s=>{const{prefix:t,experimentalParseClassName:e}=s;let n=i=>{const a=[];let l=0,c=0,h=0,d;const p=i.length;for(let v=0;v<p;v++){const S=i[v];if(l===0&&c===0){if(S===e1){a.push(i.slice(h,v)),h=v+1;continue}if(S==="/"){d=v;continue}}S==="["?l++:S==="]"?l--:S==="("?c++:S===")"&&c--}const f=a.length===0?i:i.slice(h);let g=f,y=!1;f.endsWith(Vg)?(g=f.slice(0,-1),y=!0):f.startsWith(Vg)&&(g=f.slice(1),y=!0);const w=d&&d>h?d-h:void 0;return n1(a,y,g,w)};if(t){const i=t+e1,a=n;n=l=>l.startsWith(i)?a(l.slice(i.length)):n1(tB,!1,l,void 0,!0)}if(e){const i=n;n=a=>e({className:a,parseClassName:i})}return n},nB=s=>{const t=new Map;return s.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let i=[];for(let a=0;a<e.length;a++){const l=e[a],c=l[0]==="[",h=t.has(l);c||h?(i.length>0&&(i.sort(),n.push(...i),i=[]),n.push(l)):i.push(l)}return i.length>0&&(i.sort(),n.push(...i)),n}},sB=s=>({cache:JL(s.cacheSize),parseClassName:eB(s),sortModifiers:nB(s),...$L(s)}),iB=/\s+/,rB=(s,t)=>{const{parseClassName:e,getClassGroupId:n,getConflictingClassGroupIds:i,sortModifiers:a}=t,l=[],c=s.trim().split(iB);let h="";for(let d=c.length-1;d>=0;d-=1){const p=c[d],{isExternal:f,modifiers:g,hasImportantModifier:y,baseClassName:w,maybePostfixModifierPosition:v}=e(p);if(f){h=p+(h.length>0?" "+h:h);continue}let S=!!v,x=n(S?w.substring(0,v):w);if(!x){if(!S){h=p+(h.length>0?" "+h:h);continue}if(x=n(w),!x){h=p+(h.length>0?" "+h:h);continue}S=!1}const A=g.length===0?"":g.length===1?g[0]:a(g).join(":"),E=y?A+Vg:A,R=E+x;if(l.indexOf(R)>-1)continue;l.push(R);const T=i(x,S);for(let O=0;O<T.length;++O){const D=T[O];l.push(E+D)}h=p+(h.length>0?" "+h:h)}return h},aB=(...s)=>{let t=0,e,n,i="";for(;t<s.length;)(e=s[t++])&&(n=$E(e))&&(i&&(i+=" "),i+=n);return i},$E=s=>{if(typeof s=="string")return s;let t,e="";for(let n=0;n<s.length;n++)s[n]&&(t=$E(s[n]))&&(e&&(e+=" "),e+=t);return e},oB=(s,...t)=>{let e,n,i,a;const l=h=>{const d=t.reduce((p,f)=>f(p),s());return e=sB(d),n=e.cache.get,i=e.cache.set,a=c,c(h)},c=h=>{const d=n(h);if(d)return d;const p=rB(h,e);return i(h,p),p};return a=l,(...h)=>a(aB(...h))},lB=[],nn=s=>{const t=e=>e[s]||lB;return t.isThemeGetter=!0,t},GE=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,qE=/^\((?:(\w[\w-]*):)?(.+)\)$/i,cB=/^\d+\/\d+$/,uB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,fB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,mo=s=>cB.test(s),te=s=>!!s&&!Number.isNaN(Number(s)),_r=s=>!!s&&Number.isInteger(Number(s)),Gm=s=>s.endsWith("%")&&te(s.slice(0,-1)),zi=s=>uB.test(s),mB=()=>!0,gB=s=>hB.test(s)&&!dB.test(s),XE=()=>!1,yB=s=>fB.test(s),vB=s=>pB.test(s),bB=s=>!Nt(s)&&!Pt(s),wB=s=>Qo(s,KE,XE),Nt=s=>GE.test(s),ia=s=>Qo(s,ZE,gB),qm=s=>Qo(s,EB,te),s1=s=>Qo(s,YE,XE),_B=s=>Qo(s,WE,vB),wh=s=>Qo(s,QE,yB),Pt=s=>qE.test(s),Zl=s=>Jo(s,ZE),xB=s=>Jo(s,CB),i1=s=>Jo(s,YE),SB=s=>Jo(s,KE),AB=s=>Jo(s,WE),_h=s=>Jo(s,QE,!0),Qo=(s,t,e)=>{const n=GE.exec(s);return n?n[1]?t(n[1]):e(n[2]):!1},Jo=(s,t,e=!1)=>{const n=qE.exec(s);return n?n[1]?t(n[1]):e:!1},YE=s=>s==="position"||s==="percentage",WE=s=>s==="image"||s==="url",KE=s=>s==="length"||s==="size"||s==="bg-size",ZE=s=>s==="length",EB=s=>s==="number",CB=s=>s==="family-name",QE=s=>s==="shadow",TB=()=>{const s=nn("color"),t=nn("font"),e=nn("text"),n=nn("font-weight"),i=nn("tracking"),a=nn("leading"),l=nn("breakpoint"),c=nn("container"),h=nn("spacing"),d=nn("radius"),p=nn("shadow"),f=nn("inset-shadow"),g=nn("text-shadow"),y=nn("drop-shadow"),w=nn("blur"),v=nn("perspective"),S=nn("aspect"),x=nn("ease"),A=nn("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],T=()=>[...R(),Pt,Nt],O=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],N=()=>[Pt,Nt,h],I=()=>[mo,"full","auto",...N()],G=()=>[_r,"none","subgrid",Pt,Nt],W=()=>["auto",{span:["full",_r,Pt,Nt]},_r,Pt,Nt],F=()=>[_r,"auto",Pt,Nt],Y=()=>["auto","min","max","fr",Pt,Nt],k=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",...N()],j=()=>[mo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],q=()=>[s,Pt,Nt],nt=()=>[...R(),i1,s1,{position:[Pt,Nt]}],pt=()=>["no-repeat",{repeat:["","x","y","space","round"]}],P=()=>["auto","cover","contain",SB,wB,{size:[Pt,Nt]}],U=()=>[Gm,Zl,ia],K=()=>["","none","full",d,Pt,Nt],tt=()=>["",te,Zl,ia],it=()=>["solid","dashed","dotted","double"],xt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ut=()=>[te,Gm,i1,s1],vt=()=>["","none",w,Pt,Nt],Et=()=>["none",te,Pt,Nt],Lt=()=>["none",te,Pt,Nt],Ot=()=>[te,Pt,Nt],Ht=()=>[mo,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[zi],breakpoint:[zi],color:[mB],container:[zi],"drop-shadow":[zi],ease:["in","out","in-out"],font:[bB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[zi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[zi],shadow:[zi],spacing:["px",te],text:[zi],"text-shadow":[zi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",mo,Nt,Pt,S]}],container:["container"],columns:[{columns:[te,Nt,Pt,c]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:T()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[_r,"auto",Pt,Nt]}],basis:[{basis:[mo,"full","auto",c,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[te,mo,"auto","initial","none",Nt]}],grow:[{grow:["",te,Pt,Nt]}],shrink:[{shrink:["",te,Pt,Nt]}],order:[{order:[_r,"first","last","none",Pt,Nt]}],"grid-cols":[{"grid-cols":G()}],"col-start-end":[{col:W()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":G()}],"row-start-end":[{row:W()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Y()}],"auto-rows":[{"auto-rows":Y()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...k(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...k()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":k()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:j()}],w:[{w:[c,"screen",...j()]}],"min-w":[{"min-w":[c,"screen","none",...j()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...j()]}],h:[{h:["screen","lh",...j()]}],"min-h":[{"min-h":["screen","lh","none",...j()]}],"max-h":[{"max-h":["screen","lh",...j()]}],"font-size":[{text:["base",e,Zl,ia]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Pt,qm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Gm,Nt]}],"font-family":[{font:[xB,Nt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Pt,Nt]}],"line-clamp":[{"line-clamp":[te,"none",Pt,qm]}],leading:[{leading:[a,...N()]}],"list-image":[{"list-image":["none",Pt,Nt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Pt,Nt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:q()}],"text-color":[{text:q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...it(),"wavy"]}],"text-decoration-thickness":[{decoration:[te,"from-font","auto",Pt,ia]}],"text-decoration-color":[{decoration:q()}],"underline-offset":[{"underline-offset":[te,"auto",Pt,Nt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pt,Nt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pt,Nt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:nt()}],"bg-repeat":[{bg:pt()}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},_r,Pt,Nt],radial:["",Pt,Nt],conic:[_r,Pt,Nt]},AB,_B]}],"bg-color":[{bg:q()}],"gradient-from-pos":[{from:U()}],"gradient-via-pos":[{via:U()}],"gradient-to-pos":[{to:U()}],"gradient-from":[{from:q()}],"gradient-via":[{via:q()}],"gradient-to":[{to:q()}],rounded:[{rounded:K()}],"rounded-s":[{"rounded-s":K()}],"rounded-e":[{"rounded-e":K()}],"rounded-t":[{"rounded-t":K()}],"rounded-r":[{"rounded-r":K()}],"rounded-b":[{"rounded-b":K()}],"rounded-l":[{"rounded-l":K()}],"rounded-ss":[{"rounded-ss":K()}],"rounded-se":[{"rounded-se":K()}],"rounded-ee":[{"rounded-ee":K()}],"rounded-es":[{"rounded-es":K()}],"rounded-tl":[{"rounded-tl":K()}],"rounded-tr":[{"rounded-tr":K()}],"rounded-br":[{"rounded-br":K()}],"rounded-bl":[{"rounded-bl":K()}],"border-w":[{border:tt()}],"border-w-x":[{"border-x":tt()}],"border-w-y":[{"border-y":tt()}],"border-w-s":[{"border-s":tt()}],"border-w-e":[{"border-e":tt()}],"border-w-t":[{"border-t":tt()}],"border-w-r":[{"border-r":tt()}],"border-w-b":[{"border-b":tt()}],"border-w-l":[{"border-l":tt()}],"divide-x":[{"divide-x":tt()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":tt()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...it(),"hidden","none"]}],"divide-style":[{divide:[...it(),"hidden","none"]}],"border-color":[{border:q()}],"border-color-x":[{"border-x":q()}],"border-color-y":[{"border-y":q()}],"border-color-s":[{"border-s":q()}],"border-color-e":[{"border-e":q()}],"border-color-t":[{"border-t":q()}],"border-color-r":[{"border-r":q()}],"border-color-b":[{"border-b":q()}],"border-color-l":[{"border-l":q()}],"divide-color":[{divide:q()}],"outline-style":[{outline:[...it(),"none","hidden"]}],"outline-offset":[{"outline-offset":[te,Pt,Nt]}],"outline-w":[{outline:["",te,Zl,ia]}],"outline-color":[{outline:q()}],shadow:[{shadow:["","none",p,_h,wh]}],"shadow-color":[{shadow:q()}],"inset-shadow":[{"inset-shadow":["none",f,_h,wh]}],"inset-shadow-color":[{"inset-shadow":q()}],"ring-w":[{ring:tt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:q()}],"ring-offset-w":[{"ring-offset":[te,ia]}],"ring-offset-color":[{"ring-offset":q()}],"inset-ring-w":[{"inset-ring":tt()}],"inset-ring-color":[{"inset-ring":q()}],"text-shadow":[{"text-shadow":["none",g,_h,wh]}],"text-shadow-color":[{"text-shadow":q()}],opacity:[{opacity:[te,Pt,Nt]}],"mix-blend":[{"mix-blend":[...xt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":xt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[te]}],"mask-image-linear-from-pos":[{"mask-linear-from":ut()}],"mask-image-linear-to-pos":[{"mask-linear-to":ut()}],"mask-image-linear-from-color":[{"mask-linear-from":q()}],"mask-image-linear-to-color":[{"mask-linear-to":q()}],"mask-image-t-from-pos":[{"mask-t-from":ut()}],"mask-image-t-to-pos":[{"mask-t-to":ut()}],"mask-image-t-from-color":[{"mask-t-from":q()}],"mask-image-t-to-color":[{"mask-t-to":q()}],"mask-image-r-from-pos":[{"mask-r-from":ut()}],"mask-image-r-to-pos":[{"mask-r-to":ut()}],"mask-image-r-from-color":[{"mask-r-from":q()}],"mask-image-r-to-color":[{"mask-r-to":q()}],"mask-image-b-from-pos":[{"mask-b-from":ut()}],"mask-image-b-to-pos":[{"mask-b-to":ut()}],"mask-image-b-from-color":[{"mask-b-from":q()}],"mask-image-b-to-color":[{"mask-b-to":q()}],"mask-image-l-from-pos":[{"mask-l-from":ut()}],"mask-image-l-to-pos":[{"mask-l-to":ut()}],"mask-image-l-from-color":[{"mask-l-from":q()}],"mask-image-l-to-color":[{"mask-l-to":q()}],"mask-image-x-from-pos":[{"mask-x-from":ut()}],"mask-image-x-to-pos":[{"mask-x-to":ut()}],"mask-image-x-from-color":[{"mask-x-from":q()}],"mask-image-x-to-color":[{"mask-x-to":q()}],"mask-image-y-from-pos":[{"mask-y-from":ut()}],"mask-image-y-to-pos":[{"mask-y-to":ut()}],"mask-image-y-from-color":[{"mask-y-from":q()}],"mask-image-y-to-color":[{"mask-y-to":q()}],"mask-image-radial":[{"mask-radial":[Pt,Nt]}],"mask-image-radial-from-pos":[{"mask-radial-from":ut()}],"mask-image-radial-to-pos":[{"mask-radial-to":ut()}],"mask-image-radial-from-color":[{"mask-radial-from":q()}],"mask-image-radial-to-color":[{"mask-radial-to":q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[te]}],"mask-image-conic-from-pos":[{"mask-conic-from":ut()}],"mask-image-conic-to-pos":[{"mask-conic-to":ut()}],"mask-image-conic-from-color":[{"mask-conic-from":q()}],"mask-image-conic-to-color":[{"mask-conic-to":q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:nt()}],"mask-repeat":[{mask:pt()}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Pt,Nt]}],filter:[{filter:["","none",Pt,Nt]}],blur:[{blur:vt()}],brightness:[{brightness:[te,Pt,Nt]}],contrast:[{contrast:[te,Pt,Nt]}],"drop-shadow":[{"drop-shadow":["","none",y,_h,wh]}],"drop-shadow-color":[{"drop-shadow":q()}],grayscale:[{grayscale:["",te,Pt,Nt]}],"hue-rotate":[{"hue-rotate":[te,Pt,Nt]}],invert:[{invert:["",te,Pt,Nt]}],saturate:[{saturate:[te,Pt,Nt]}],sepia:[{sepia:["",te,Pt,Nt]}],"backdrop-filter":[{"backdrop-filter":["","none",Pt,Nt]}],"backdrop-blur":[{"backdrop-blur":vt()}],"backdrop-brightness":[{"backdrop-brightness":[te,Pt,Nt]}],"backdrop-contrast":[{"backdrop-contrast":[te,Pt,Nt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",te,Pt,Nt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[te,Pt,Nt]}],"backdrop-invert":[{"backdrop-invert":["",te,Pt,Nt]}],"backdrop-opacity":[{"backdrop-opacity":[te,Pt,Nt]}],"backdrop-saturate":[{"backdrop-saturate":[te,Pt,Nt]}],"backdrop-sepia":[{"backdrop-sepia":["",te,Pt,Nt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Pt,Nt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[te,"initial",Pt,Nt]}],ease:[{ease:["linear","initial",x,Pt,Nt]}],delay:[{delay:[te,Pt,Nt]}],animate:[{animate:["none",A,Pt,Nt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,Pt,Nt]}],"perspective-origin":[{"perspective-origin":T()}],rotate:[{rotate:Et()}],"rotate-x":[{"rotate-x":Et()}],"rotate-y":[{"rotate-y":Et()}],"rotate-z":[{"rotate-z":Et()}],scale:[{scale:Lt()}],"scale-x":[{"scale-x":Lt()}],"scale-y":[{"scale-y":Lt()}],"scale-z":[{"scale-z":Lt()}],"scale-3d":["scale-3d"],skew:[{skew:Ot()}],"skew-x":[{"skew-x":Ot()}],"skew-y":[{"skew-y":Ot()}],transform:[{transform:[Pt,Nt,"","none","gpu","cpu"]}],"transform-origin":[{origin:T()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ht()}],"translate-x":[{"translate-x":Ht()}],"translate-y":[{"translate-y":Ht()}],"translate-z":[{"translate-z":Ht()}],"translate-none":["translate-none"],accent:[{accent:q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pt,Nt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pt,Nt]}],fill:[{fill:["none",...q()]}],"stroke-w":[{stroke:[te,Zl,ia,qm]}],stroke:[{stroke:["none",...q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},RB=oB(TB);function Dn(...s){return RB(jE(s))}function kB({delayDuration:s=0,...t}){return $.jsx(jL,{"data-slot":"tooltip-provider",delayDuration:s,...t})}function MB(s,t){if(s instanceof RegExp)return{keys:!1,pattern:s};var e,n,i,a,l=[],c="",h=s.split("/");for(h[0]||h.shift();i=h.shift();)e=i[0],e==="*"?(l.push(e),c+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):e===":"?(n=i.indexOf("?",1),a=i.indexOf(".",1),l.push(i.substring(1,~n?n:~a?a:i.length)),c+=~n&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(c+=(~n?"?":"")+"\\"+i.substring(a))):c+="/"+i;return{keys:l,pattern:new RegExp("^"+c+(t?"(?=$|/)":"/?$"),"i")}}var Xm={exports:{}},Ym={};var r1;function DB(){if(r1)return Ym;r1=1;var s=Vd();function t(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var e=typeof Object.is=="function"?Object.is:t,n=s.useState,i=s.useEffect,a=s.useLayoutEffect,l=s.useDebugValue;function c(f,g){var y=g(),w=n({inst:{value:y,getSnapshot:g}}),v=w[0].inst,S=w[1];return a(function(){v.value=y,v.getSnapshot=g,h(v)&&S({inst:v})},[f,y,g]),i(function(){return h(v)&&S({inst:v}),f(function(){h(v)&&S({inst:v})})},[f]),l(y),y}function h(f){var g=f.getSnapshot;f=f.value;try{var y=g();return!e(f,y)}catch{return!0}}function d(f,g){return g()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return Ym.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:p,Ym}var a1;function OB(){return a1||(a1=1,Xm.exports=DB()),Xm.exports}var JE=OB();const NB=$d.useInsertionEffect,PB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LB=PB?L.useLayoutEffect:L.useEffect,BB=NB||LB,tC=s=>{const t=L.useRef([s,(...e)=>t[0](...e)]).current;return BB(()=>{t[0]=s}),t[1]},IB="popstate",ov="pushState",lv="replaceState",FB="hashchange",o1=[IB,ov,lv,FB],zB=s=>{for(const t of o1)addEventListener(t,s);return()=>{for(const t of o1)removeEventListener(t,s)}},eC=(s,t)=>JE.useSyncExternalStore(zB,s,t),l1=()=>location.search,jB=({ssrSearch:s}={})=>eC(l1,s!=null?()=>s:l1),c1=()=>location.pathname,UB=({ssrPath:s}={})=>eC(c1,s!=null?()=>s:c1),HB=(s,{replace:t=!1,state:e=null}={})=>history[t?lv:ov](e,"",s),VB=(s={})=>[UB(s),HB],u1=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[u1]>"u"){for(const s of[ov,lv]){const t=history[s];history[s]=function(){const e=t.apply(this,arguments),n=new Event(s);return n.arguments=arguments,dispatchEvent(n),e}}Object.defineProperty(window,u1,{value:!0})}const $B=(s,t)=>t.toLowerCase().indexOf(s.toLowerCase())?"~"+t:t.slice(s.length)||"/",nC=(s="")=>s==="/"?"":s,GB=(s,t)=>s[0]==="~"?s.slice(1):nC(t)+s,qB=(s="",t)=>$B(h1(nC(s)),h1(t)),h1=s=>{try{return decodeURI(s)}catch{return s}},sC={hook:VB,searchHook:jB,parser:MB,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:s=>s,aroundNav:(s,t,e)=>s(t,e)},iC=L.createContext(sC),Jd=()=>L.useContext(iC),rC={},aC=L.createContext(rC),XB=()=>L.useContext(aC),cv=s=>{const[t,e]=s.hook(s);return[qB(s.base,t),tC((n,i)=>s.aroundNav(e,GB(n,s.base),i))]},oC=(s,t,e,n)=>{const{pattern:i,keys:a}=t instanceof RegExp?{keys:!1,pattern:t}:s(t||"*",n),l=i.exec(e)||[],[c,...h]=l;return c!==void 0?[!0,(()=>{const d=a!==!1?Object.fromEntries(a.map((f,g)=>[f,h[g]])):l.groups;let p={...h};return d&&Object.assign(p,d),p})(),...n?[c]:[]]:[!1,null]},lC=({children:s,...t})=>{const e=Jd(),n=t.hook?sC:e;let i=n;const[a,l=t.ssrSearch??""]=t.ssrPath?.split("?")??[];a&&(t.ssrSearch=l,t.ssrPath=a),t.hrefs=t.hrefs??t.hook?.hrefs,t.searchHook=t.searchHook??t.hook?.searchHook;let c=L.useRef({}),h=c.current,d=h;for(let p in n){const f=p==="base"?n[p]+(t[p]??""):t[p]??n[p];h===d&&f!==d[p]&&(c.current=d={...d}),d[p]=f,(f!==n[p]||f!==i[p])&&(i=d)}return L.createElement(iC.Provider,{value:i,children:s})},d1=({children:s,component:t},e)=>t?L.createElement(t,{params:e}):typeof s=="function"?s(e):s,YB=s=>{let t=L.useRef(rC);const e=t.current;return t.current=Object.keys(s).length!==Object.keys(e).length||Object.entries(s).some(([n,i])=>i!==e[n])?s:e},f1=({path:s,nest:t,match:e,...n})=>{const i=Jd(),[a]=cv(i),[l,c,h]=e??oC(i.parser,s,a,t),d=YB({...XB(),...c});if(!l)return null;const p=h?L.createElement(lC,{base:h},d1(n,d)):d1(n,d);return L.createElement(aC.Provider,{value:d,children:p})},WB=L.forwardRef((s,t)=>{const e=Jd(),[n,i]=cv(e),{to:a="",href:l=a,onClick:c,asChild:h,children:d,className:p,replace:f,state:g,transition:y,...w}=s,v=tC(x=>{x.ctrlKey||x.metaKey||x.altKey||x.shiftKey||x.button!==0||(c?.(x),x.defaultPrevented||(x.preventDefault(),i(l,s)))}),S=e.hrefs(l[0]==="~"?l.slice(1):e.base+l,e);return h&&L.isValidElement(d)?L.cloneElement(d,{onClick:v,href:S}):L.createElement("a",{...w,onClick:v,href:S,className:p?.call?p(n===l):p,children:d,ref:t})}),cC=s=>Array.isArray(s)?s.flatMap(t=>cC(t&&t.type===L.Fragment?t.props.children:t)):[s],KB=({children:s,location:t})=>{const e=Jd(),[n]=cv(e);for(const i of cC(s)){let a=0;if(L.isValidElement(i)&&(a=oC(e.parser,i.props.path,t||n,i.props.nest))[0])return L.cloneElement(i,{match:a})}return null},rc={v:[]},p1=()=>rc.v.forEach(s=>s()),ZB=s=>(rc.v.push(s)===1&&addEventListener("hashchange",p1),()=>{rc.v=rc.v.filter(t=>t!==s),rc.v.length||removeEventListener("hashchange",p1)}),QB=()=>"/"+location.hash.replace(/^#?\/?/,""),JB=(s,{state:t=null,replace:e=!1}={})=>{const n=location.href,[i,a]=s.replace(/^#?\/?/,"").split("?"),l=new URL(location.href);l.hash=`/${i}`,a&&(l.search=a);const c=l.href;e?history.replaceState(t,"",c):history.pushState(t,"",c);const h=typeof HashChangeEvent<"u"?new HashChangeEvent("hashchange",{oldURL:n,newURL:c}):new Event("hashchange",{detail:{oldURL:n,newURL:c}});dispatchEvent(h)},uC=({ssrPath:s="/"}={})=>[JE.useSyncExternalStore(ZB,QB,()=>s),JB];uC.hrefs=s=>"#"+s;class t3 extends L.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?this.props.fallback||$.jsx("div",{className:"min-h-screen flex items-center justify-center","data-source":"src/components/ErrorBoundary.tsx:26:11",children:$.jsxs("div",{className:"text-center","data-source":"src/components/ErrorBoundary.tsx:27:13",children:[$.jsx("h1",{className:"text-2xl font-bold","data-source":"src/components/ErrorBoundary.tsx:28:15",children:"Something went wrong"}),$.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md","data-source":"src/components/ErrorBoundary.tsx:29:15",children:"Reload Page"})]})}):this.props.children}}const e3=L.createContext(void 0);function n3({children:s,defaultTheme:t="light",switchable:e=!1}){const[n,i]=L.useState(t);L.useEffect(()=>{document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(n)},[n]);const a=()=>{e&&i(l=>l==="light"?"dark":"light")};return $.jsx(e3.Provider,{value:{theme:n,toggleTheme:a},children:s})}const uv=L.createContext({});function hv(s){const t=L.useRef(null);return t.current===null&&(t.current=s()),t.current}const dv=typeof window<"u",hC=dv?L.useLayoutEffect:L.useEffect,tf=L.createContext(null);function fv(s,t){s.indexOf(t)===-1&&s.push(t)}function pv(s,t){const e=s.indexOf(t);e>-1&&s.splice(e,1)}const yi=(s,t,e)=>e>t?t:e<s?s:e;let mv=()=>{};const Yi={},dC=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function fC(s){return typeof s=="object"&&s!==null}const pC=s=>/^0[^.\s]+$/u.test(s);function gv(s){let t;return()=>(t===void 0&&(t=s()),t)}const zs=s=>s,s3=(s,t)=>e=>t(s(e)),Gc=(...s)=>s.reduce(s3),Dc=(s,t,e)=>{const n=t-s;return n===0?1:(e-s)/n};class yv{constructor(){this.subscriptions=[]}add(t){return fv(this.subscriptions,t),()=>pv(this.subscriptions,t)}notify(t,e,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,e,n);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gi=s=>s*1e3,Is=s=>s/1e3;function mC(s,t){return t?s*(1e3/t):0}const gC=(s,t,e)=>(((1-3*e+3*t)*s+(3*e-6*t))*s+3*t)*s,i3=1e-7,r3=12;function a3(s,t,e,n,i){let a,l,c=0;do l=t+(e-t)/2,a=gC(l,n,i)-s,a>0?e=l:t=l;while(Math.abs(a)>i3&&++c<r3);return l}function qc(s,t,e,n){if(s===t&&e===n)return zs;const i=a=>a3(a,0,1,s,e);return a=>a===0||a===1?a:gC(i(a),t,n)}const yC=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,vC=s=>t=>1-s(1-t),bC=qc(.33,1.53,.69,.99),vv=vC(bC),wC=yC(vv),_C=s=>(s*=2)<1?.5*vv(s):.5*(2-Math.pow(2,-10*(s-1))),bv=s=>1-Math.sin(Math.acos(s)),xC=vC(bv),SC=yC(bv),o3=qc(.42,0,1,1),l3=qc(0,0,.58,1),AC=qc(.42,0,.58,1),c3=s=>Array.isArray(s)&&typeof s[0]!="number",EC=s=>Array.isArray(s)&&typeof s[0]=="number",u3={linear:zs,easeIn:o3,easeInOut:AC,easeOut:l3,circIn:bv,circInOut:SC,circOut:xC,backIn:vv,backInOut:wC,backOut:bC,anticipate:_C},h3=s=>typeof s=="string",m1=s=>{if(EC(s)){mv(s.length===4);const[t,e,n,i]=s;return qc(t,e,n,i)}else if(h3(s))return u3[s];return s},xh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function d3(s,t){let e=new Set,n=new Set,i=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function h(p){l.has(p)&&(d.schedule(p),s()),p(c)}const d={schedule:(p,f=!1,g=!1)=>{const w=g&&i?e:n;return f&&l.add(p),w.has(p)||w.add(p),p},cancel:p=>{n.delete(p),l.delete(p)},process:p=>{if(c=p,i){a=!0;return}i=!0,[e,n]=[n,e],e.forEach(h),e.clear(),i=!1,a&&(a=!1,d.process(p))}};return d}const f3=40;function CC(s,t){let e=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>e=!0,l=xh.reduce((E,R)=>(E[R]=d3(a),E),{}),{setup:c,read:h,resolveKeyframes:d,preUpdate:p,update:f,preRender:g,render:y,postRender:w}=l,v=()=>{const E=Yi.useManualTiming?i.timestamp:performance.now();e=!1,Yi.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(E-i.timestamp,f3),1)),i.timestamp=E,i.isProcessing=!0,c.process(i),h.process(i),d.process(i),p.process(i),f.process(i),g.process(i),y.process(i),w.process(i),i.isProcessing=!1,e&&t&&(n=!1,s(v))},S=()=>{e=!0,n=!0,i.isProcessing||s(v)};return{schedule:xh.reduce((E,R)=>{const T=l[R];return E[R]=(O,D=!1,N=!1)=>(e||S(),T.schedule(O,D,N)),E},{}),cancel:E=>{for(let R=0;R<xh.length;R++)l[xh[R]].cancel(E)},state:i,steps:l}}const{schedule:Re,cancel:Or,state:Sn,steps:Wm}=CC(typeof requestAnimationFrame<"u"?requestAnimationFrame:zs,!0);let Kh;function p3(){Kh=void 0}const Un={now:()=>(Kh===void 0&&Un.set(Sn.isProcessing||Yi.useManualTiming?Sn.timestamp:performance.now()),Kh),set:s=>{Kh=s,queueMicrotask(p3)}},TC=s=>t=>typeof t=="string"&&t.startsWith(s),RC=TC("--"),m3=TC("var(--"),wv=s=>m3(s)?g3.test(s.split("/*")[0].trim()):!1,g3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function g1(s){return typeof s!="string"?!1:s.split("/*")[0].includes("var(--")}const tl={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Oc={...tl,transform:s=>yi(0,1,s)},Sh={...tl,default:1},_c=s=>Math.round(s*1e5)/1e5,_v=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function y3(s){return s==null}const v3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xv=(s,t)=>e=>!!(typeof e=="string"&&v3.test(e)&&e.startsWith(s)||t&&!y3(e)&&Object.prototype.hasOwnProperty.call(e,t)),kC=(s,t,e)=>n=>{if(typeof n!="string")return n;const[i,a,l,c]=n.match(_v);return{[s]:parseFloat(i),[t]:parseFloat(a),[e]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},b3=s=>yi(0,255,s),Km={...tl,transform:s=>Math.round(b3(s))},ua={test:xv("rgb","red"),parse:kC("red","green","blue"),transform:({red:s,green:t,blue:e,alpha:n=1})=>"rgba("+Km.transform(s)+", "+Km.transform(t)+", "+Km.transform(e)+", "+_c(Oc.transform(n))+")"};function w3(s){let t="",e="",n="",i="";return s.length>5?(t=s.substring(1,3),e=s.substring(3,5),n=s.substring(5,7),i=s.substring(7,9)):(t=s.substring(1,2),e=s.substring(2,3),n=s.substring(3,4),i=s.substring(4,5),t+=t,e+=e,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const $g={test:xv("#"),parse:w3,transform:ua.transform},Xc=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),Ar=Xc("deg"),mi=Xc("%"),Rt=Xc("px"),_3=Xc("vh"),x3=Xc("vw"),y1={...mi,parse:s=>mi.parse(s)/100,transform:s=>mi.transform(s*100)},ko={test:xv("hsl","hue"),parse:kC("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(s)+", "+mi.transform(_c(t))+", "+mi.transform(_c(e))+", "+_c(Oc.transform(n))+")"},Qe={test:s=>ua.test(s)||$g.test(s)||ko.test(s),parse:s=>ua.test(s)?ua.parse(s):ko.test(s)?ko.parse(s):$g.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?ua.transform(s):ko.transform(s),getAnimatableNone:s=>{const t=Qe.parse(s);return t.alpha=0,Qe.transform(t)}},S3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function A3(s){return isNaN(s)&&typeof s=="string"&&(s.match(_v)?.length||0)+(s.match(S3)?.length||0)>0}const MC="number",DC="color",E3="var",C3="var(",v1="${}",T3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nc(s){const t=s.toString(),e=[],n={color:[],number:[],var:[]},i=[];let a=0;const c=t.replace(T3,h=>(Qe.test(h)?(n.color.push(a),i.push(DC),e.push(Qe.parse(h))):h.startsWith(C3)?(n.var.push(a),i.push(E3),e.push(h)):(n.number.push(a),i.push(MC),e.push(parseFloat(h))),++a,v1)).split(v1);return{values:e,split:c,indexes:n,types:i}}function OC(s){return Nc(s).values}function NC(s){const{split:t,types:e}=Nc(s),n=t.length;return i=>{let a="";for(let l=0;l<n;l++)if(a+=t[l],i[l]!==void 0){const c=e[l];c===MC?a+=_c(i[l]):c===DC?a+=Qe.transform(i[l]):a+=i[l]}return a}}const R3=s=>typeof s=="number"?0:Qe.test(s)?Qe.getAnimatableNone(s):s;function k3(s){const t=OC(s);return NC(s)(t.map(R3))}const Nr={test:A3,parse:OC,createTransformer:NC,getAnimatableNone:k3};function Zm(s,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+(t-s)*6*e:e<1/2?t:e<2/3?s+(t-s)*(2/3-e)*6:s}function M3({hue:s,saturation:t,lightness:e,alpha:n}){s/=360,t/=100,e/=100;let i=0,a=0,l=0;if(!t)i=a=l=e;else{const c=e<.5?e*(1+t):e+t-e*t,h=2*e-c;i=Zm(h,c,s+1/3),a=Zm(h,c,s),l=Zm(h,c,s-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:n}}function _d(s,t){return e=>e>0?t:s}const Le=(s,t,e)=>s+(t-s)*e,Qm=(s,t,e)=>{const n=s*s,i=e*(t*t-n)+n;return i<0?0:Math.sqrt(i)},D3=[$g,ua,ko],O3=s=>D3.find(t=>t.test(s));function b1(s){const t=O3(s);if(!t)return!1;let e=t.parse(s);return t===ko&&(e=M3(e)),e}const w1=(s,t)=>{const e=b1(s),n=b1(t);if(!e||!n)return _d(s,t);const i={...e};return a=>(i.red=Qm(e.red,n.red,a),i.green=Qm(e.green,n.green,a),i.blue=Qm(e.blue,n.blue,a),i.alpha=Le(e.alpha,n.alpha,a),ua.transform(i))},Gg=new Set(["none","hidden"]);function N3(s,t){return Gg.has(s)?e=>e<=0?s:t:e=>e>=1?t:s}function P3(s,t){return e=>Le(s,t,e)}function Sv(s){return typeof s=="number"?P3:typeof s=="string"?wv(s)?_d:Qe.test(s)?w1:I3:Array.isArray(s)?PC:typeof s=="object"?Qe.test(s)?w1:L3:_d}function PC(s,t){const e=[...s],n=e.length,i=s.map((a,l)=>Sv(a)(a,t[l]));return a=>{for(let l=0;l<n;l++)e[l]=i[l](a);return e}}function L3(s,t){const e={...s,...t},n={};for(const i in e)s[i]!==void 0&&t[i]!==void 0&&(n[i]=Sv(s[i])(s[i],t[i]));return i=>{for(const a in n)e[a]=n[a](i);return e}}function B3(s,t){const e=[],n={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const a=t.types[i],l=s.indexes[a][n[a]],c=s.values[l]??0;e[i]=c,n[a]++}return e}const I3=(s,t)=>{const e=Nr.createTransformer(t),n=Nc(s),i=Nc(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?Gg.has(s)&&!i.values.length||Gg.has(t)&&!n.values.length?N3(s,t):Gc(PC(B3(n,i),i.values),e):_d(s,t)};function LC(s,t,e){return typeof s=="number"&&typeof t=="number"&&typeof e=="number"?Le(s,t,e):Sv(s)(s,t)}const F3=s=>{const t=({timestamp:e})=>s(e);return{start:(e=!0)=>Re.update(t,e),stop:()=>Or(t),now:()=>Sn.isProcessing?Sn.timestamp:Un.now()}},BC=(s,t,e=10)=>{let n="";const i=Math.max(Math.round(t/e),2);for(let a=0;a<i;a++)n+=Math.round(s(a/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},xd=2e4;function Av(s){let t=0;const e=50;let n=s.next(t);for(;!n.done&&t<xd;)t+=e,n=s.next(t);return t>=xd?1/0:t}function z3(s,t=100,e){const n=e({...s,keyframes:[0,t]}),i=Math.min(Av(n),xd);return{type:"keyframes",ease:a=>n.next(i*a).value/t,duration:Is(i)}}const j3=5;function IC(s,t,e){const n=Math.max(t-j3,0);return mC(e-s(n),t-n)}const ze={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Jm=.001;function U3({duration:s=ze.duration,bounce:t=ze.bounce,velocity:e=ze.velocity,mass:n=ze.mass}){let i,a,l=1-t;l=yi(ze.minDamping,ze.maxDamping,l),s=yi(ze.minDuration,ze.maxDuration,Is(s)),l<1?(i=d=>{const p=d*l,f=p*s,g=p-e,y=qg(d,l),w=Math.exp(-f);return Jm-g/y*w},a=d=>{const f=d*l*s,g=f*e+e,y=Math.pow(l,2)*Math.pow(d,2)*s,w=Math.exp(-f),v=qg(Math.pow(d,2),l);return(-i(d)+Jm>0?-1:1)*((g-y)*w)/v}):(i=d=>{const p=Math.exp(-d*s),f=(d-e)*s+1;return-Jm+p*f},a=d=>{const p=Math.exp(-d*s),f=(e-d)*(s*s);return p*f});const c=5/s,h=V3(i,a,c);if(s=Gi(s),isNaN(h))return{stiffness:ze.stiffness,damping:ze.damping,duration:s};{const d=Math.pow(h,2)*n;return{stiffness:d,damping:l*2*Math.sqrt(n*d),duration:s}}}const H3=12;function V3(s,t,e){let n=e;for(let i=1;i<H3;i++)n=n-s(n)/t(n);return n}function qg(s,t){return s*Math.sqrt(1-t*t)}const $3=["duration","bounce"],G3=["stiffness","damping","mass"];function _1(s,t){return t.some(e=>s[e]!==void 0)}function q3(s){let t={velocity:ze.velocity,stiffness:ze.stiffness,damping:ze.damping,mass:ze.mass,isResolvedFromDuration:!1,...s};if(!_1(s,G3)&&_1(s,$3))if(s.visualDuration){const e=s.visualDuration,n=2*Math.PI/(e*1.2),i=n*n,a=2*yi(.05,1,1-(s.bounce||0))*Math.sqrt(i);t={...t,mass:ze.mass,stiffness:i,damping:a}}else{const e=U3(s);t={...t,...e,mass:ze.mass},t.isResolvedFromDuration=!0}return t}function Sd(s=ze.visualDuration,t=ze.bounce){const e=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:n,restDelta:i}=e;const a=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],c={done:!1,value:a},{stiffness:h,damping:d,mass:p,duration:f,velocity:g,isResolvedFromDuration:y}=q3({...e,velocity:-Is(e.velocity||0)}),w=g||0,v=d/(2*Math.sqrt(h*p)),S=l-a,x=Is(Math.sqrt(h/p)),A=Math.abs(S)<5;n||(n=A?ze.restSpeed.granular:ze.restSpeed.default),i||(i=A?ze.restDelta.granular:ze.restDelta.default);let E;if(v<1){const T=qg(x,v);E=O=>{const D=Math.exp(-v*x*O);return l-D*((w+v*x*S)/T*Math.sin(T*O)+S*Math.cos(T*O))}}else if(v===1)E=T=>l-Math.exp(-x*T)*(S+(w+x*S)*T);else{const T=x*Math.sqrt(v*v-1);E=O=>{const D=Math.exp(-v*x*O),N=Math.min(T*O,300);return l-D*((w+v*x*S)*Math.sinh(N)+T*S*Math.cosh(N))/T}}const R={calculatedDuration:y&&f||null,next:T=>{const O=E(T);if(y)c.done=T>=f;else{let D=T===0?w:0;v<1&&(D=T===0?Gi(w):IC(E,T,O));const N=Math.abs(D)<=n,I=Math.abs(l-O)<=i;c.done=N&&I}return c.value=c.done?l:O,c},toString:()=>{const T=Math.min(Av(R),xd),O=BC(D=>R.next(T*D).value,T,30);return T+"ms "+O},toTransition:()=>{}};return R}Sd.applyToOptions=s=>{const t=z3(s,100,Sd);return s.ease=t.ease,s.duration=Gi(t.duration),s.type="keyframes",s};function Xg({keyframes:s,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:c,max:h,restDelta:d=.5,restSpeed:p}){const f=s[0],g={done:!1,value:f},y=N=>c!==void 0&&N<c||h!==void 0&&N>h,w=N=>c===void 0?h:h===void 0||Math.abs(c-N)<Math.abs(h-N)?c:h;let v=e*t;const S=f+v,x=l===void 0?S:l(S);x!==S&&(v=x-f);const A=N=>-v*Math.exp(-N/n),E=N=>x+A(N),R=N=>{const I=A(N),G=E(N);g.done=Math.abs(I)<=d,g.value=g.done?x:G};let T,O;const D=N=>{y(g.value)&&(T=N,O=Sd({keyframes:[g.value,w(g.value)],velocity:IC(E,N,g.value),damping:i,stiffness:a,restDelta:d,restSpeed:p}))};return D(0),{calculatedDuration:null,next:N=>{let I=!1;return!O&&T===void 0&&(I=!0,R(N),D(N)),T!==void 0&&N>=T?O.next(N-T):(!I&&R(N),g)}}}function X3(s,t,e){const n=[],i=e||Yi.mix||LC,a=s.length-1;for(let l=0;l<a;l++){let c=i(s[l],s[l+1]);if(t){const h=Array.isArray(t)?t[l]||zs:t;c=Gc(h,c)}n.push(c)}return n}function Y3(s,t,{clamp:e=!0,ease:n,mixer:i}={}){const a=s.length;if(mv(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const l=s[0]===s[1];s[0]>s[a-1]&&(s=[...s].reverse(),t=[...t].reverse());const c=X3(t,n,i),h=c.length,d=p=>{if(l&&p<s[0])return t[0];let f=0;if(h>1)for(;f<s.length-2&&!(p<s[f+1]);f++);const g=Dc(s[f],s[f+1],p);return c[f](g)};return e?p=>d(yi(s[0],s[a-1],p)):d}function W3(s,t){const e=s[s.length-1];for(let n=1;n<=t;n++){const i=Dc(0,t,n);s.push(Le(e,1,i))}}function K3(s){const t=[0];return W3(t,s.length-1),t}function Z3(s,t){return s.map(e=>e*t)}function Q3(s,t){return s.map(()=>t||AC).splice(0,s.length-1)}function xc({duration:s=300,keyframes:t,times:e,ease:n="easeInOut"}){const i=c3(n)?n.map(m1):m1(n),a={done:!1,value:t[0]},l=Z3(e&&e.length===t.length?e:K3(t),s),c=Y3(l,t,{ease:Array.isArray(i)?i:Q3(t,i)});return{calculatedDuration:s,next:h=>(a.value=c(h),a.done=h>=s,a)}}const J3=s=>s!==null;function Ev(s,{repeat:t,repeatType:e="loop"},n,i=1){const a=s.filter(J3),c=i<0||t&&e!=="loop"&&t%2===1?0:a.length-1;return!c||n===void 0?a[c]:n}const tI={decay:Xg,inertia:Xg,tween:xc,keyframes:xc,spring:Sd};function FC(s){typeof s.type=="string"&&(s.type=tI[s.type])}class Cv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const eI=s=>s/100;class Tv extends Cv{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==Un.now()&&this.tick(Un.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;FC(t);const{type:e=xc,repeat:n=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=t;let{keyframes:c}=t;const h=e||xc;h!==xc&&typeof c[0]!="number"&&(this.mixKeyframes=Gc(eI,LC(c[0],c[1])),c=[0,100]);const d=h({...t,keyframes:c});a==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...c].reverse(),velocity:-l})),d.calculatedDuration===null&&(d.calculatedDuration=Av(d));const{calculatedDuration:p}=d;this.calculatedDuration=p,this.resolvedDuration=p+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=d}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:i,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:h}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:p,repeat:f,repeatType:g,repeatDelay:y,type:w,onUpdate:v,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const x=this.currentTime-d*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?x<0:x>i;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let E=this.currentTime,R=n;if(f){const N=Math.min(this.currentTime,i)/c;let I=Math.floor(N),G=N%1;!G&&N>=1&&(G=1),G===1&&I--,I=Math.min(I,f+1),I%2&&(g==="reverse"?(G=1-G,y&&(G-=y/c)):g==="mirror"&&(R=l)),E=yi(0,1,G)*c}const T=A?{done:!1,value:p[0]}:R.next(E);a&&(T.value=a(T.value));let{done:O}=T;!A&&h!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return D&&w!==Xg&&(T.value=Ev(p,this.options,S,this.speed)),v&&v(T.value),D&&this.finish(),T}then(t,e){return this.finished.then(t,e)}get duration(){return Is(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Is(t)}get time(){return Is(this.currentTime)}set time(t){t=Gi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Un.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Is(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=F3,startTime:e}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Un.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function nI(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const ha=s=>s*180/Math.PI,Yg=s=>{const t=ha(Math.atan2(s[1],s[0]));return Wg(t)},sI={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:Yg,rotateZ:Yg,skewX:s=>ha(Math.atan(s[1])),skewY:s=>ha(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},Wg=s=>(s=s%360,s<0&&(s+=360),s),x1=Yg,S1=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),A1=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),iI={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:S1,scaleY:A1,scale:s=>(S1(s)+A1(s))/2,rotateX:s=>Wg(ha(Math.atan2(s[6],s[5]))),rotateY:s=>Wg(ha(Math.atan2(-s[2],s[0]))),rotateZ:x1,rotate:x1,skewX:s=>ha(Math.atan(s[4])),skewY:s=>ha(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function Kg(s){return s.includes("scale")?1:0}function Zg(s,t){if(!s||s==="none")return Kg(t);const e=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(e)n=iI,i=e;else{const c=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=sI,i=c}if(!i)return Kg(t);const a=n[t],l=i[1].split(",").map(aI);return typeof a=="function"?a(l):l[a]}const rI=(s,t)=>{const{transform:e="none"}=getComputedStyle(s);return Zg(e,t)};function aI(s){return parseFloat(s.trim())}const el=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],nl=new Set(el),E1=s=>s===tl||s===Rt,oI=new Set(["x","y","z"]),lI=el.filter(s=>!oI.has(s));function cI(s){const t=[];return lI.forEach(e=>{const n=s.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const kr={width:({x:s},{paddingLeft:t="0",paddingRight:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),height:({y:s},{paddingTop:t="0",paddingBottom:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>Zg(t,"x"),y:(s,{transform:t})=>Zg(t,"y")};kr.translateX=kr.x;kr.translateY=kr.y;const va=new Set;let Qg=!1,Jg=!1,ty=!1;function zC(){if(Jg){const s=Array.from(va).filter(n=>n.needsMeasurement),t=new Set(s.map(n=>n.element)),e=new Map;t.forEach(n=>{const i=cI(n);i.length&&(e.set(n,i),n.render())}),s.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=e.get(n);i&&i.forEach(([a,l])=>{n.getValue(a)?.set(l)})}),s.forEach(n=>n.measureEndState()),s.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Jg=!1,Qg=!1,va.forEach(s=>s.complete(ty)),va.clear()}function jC(){va.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(Jg=!0)})}function uI(){ty=!0,jC(),zC(),ty=!1}class Rv{constructor(t,e,n,i,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(va.add(this),Qg||(Qg=!0,Re.read(jC),Re.resolveKeyframes(zC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:i}=this;if(t[0]===null){const a=i?.get(),l=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&e){const c=n.readValue(e,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),i&&a===void 0&&i.set(t[0])}nI(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),va.delete(this)}cancel(){this.state==="scheduled"&&(va.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const hI=s=>s.startsWith("--");function dI(s,t,e){hI(t)?s.style.setProperty(t,e):s.style[t]=e}const fI=gv(()=>window.ScrollTimeline!==void 0),pI={};function mI(s,t){const e=gv(s);return()=>pI[t]??e()}const UC=mI(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ac=([s,t,e,n])=>`cubic-bezier(${s}, ${t}, ${e}, ${n})`,C1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ac([0,.65,.55,1]),circOut:ac([.55,0,1,.45]),backIn:ac([.31,.01,.66,-.59]),backOut:ac([.33,1.53,.69,.99])};function HC(s,t){if(s)return typeof s=="function"?UC()?BC(s,t):"ease-out":EC(s)?ac(s):Array.isArray(s)?s.map(e=>HC(e,t)||C1.easeOut):C1[s]}function gI(s,t,e,{delay:n=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:c="easeOut",times:h}={},d=void 0){const p={[t]:e};h&&(p.offset=h);const f=HC(c,i);Array.isArray(f)&&(p.easing=f);const g={delay:n,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return d&&(g.pseudoElement=d),s.animate(p,g)}function VC(s){return typeof s=="function"&&"applyToOptions"in s}function yI({type:s,...t}){return VC(s)&&UC()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class vI extends Cv{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:e,name:n,keyframes:i,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:c,onComplete:h}=t;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=t,mv(typeof t.type!="string");const d=yI(t);this.animation=gI(e,n,i,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=Ev(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):dI(e,n,p),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Is(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Is(t)}get time(){return Is(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Gi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&fI()?(this.animation.timeline=t,zs):e(this)}}const $C={anticipate:_C,backInOut:wC,circInOut:SC};function bI(s){return s in $C}function wI(s){typeof s.ease=="string"&&bI(s.ease)&&(s.ease=$C[s.ease])}const tg=10;class _I extends vI{constructor(t){wI(t),FC(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:i,element:a,...l}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const c=new Tv({...l,autoplay:!1}),h=Math.max(tg,Un.now()-this.startTime),d=yi(0,tg,h-tg);e.setWithVelocity(c.sample(Math.max(0,h-d)).value,c.sample(h).value,d),c.stop()}}const T1=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Nr.test(s)||s==="0")&&!s.startsWith("url("));function xI(s){const t=s[0];if(s.length===1)return!0;for(let e=0;e<s.length;e++)if(s[e]!==t)return!0}function SI(s,t,e,n){const i=s[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=s[s.length-1],l=T1(i,t),c=T1(a,t);return!l||!c?!1:xI(s)||(e==="spring"||VC(e))&&n}function ey(s){s.duration=0,s.type="keyframes"}const AI=new Set(["opacity","clipPath","filter","transform"]),EI=gv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function CI(s){const{motionValue:t,name:e,repeatDelay:n,repeatType:i,damping:a,type:l}=s;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:d}=t.owner.getProps();return EI()&&e&&AI.has(e)&&(e!=="transform"||!d)&&!h&&!n&&i!=="mirror"&&a!==0&&l!=="inertia"}const TI=40;class RI extends Cv{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",keyframes:c,name:h,motionValue:d,element:p,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Un.now();const g={autoplay:t,delay:e,type:n,repeat:i,repeatDelay:a,repeatType:l,name:h,motionValue:d,element:p,...f},y=p?.KeyframeResolver||Rv;this.keyframeResolver=new y(c,(w,v,S)=>this.onKeyframesResolved(w,v,g,!S),h,d,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,n,i){this.keyframeResolver=void 0;const{name:a,type:l,velocity:c,delay:h,isHandoff:d,onUpdate:p}=n;this.resolvedAt=Un.now(),SI(t,a,l,c)||((Yi.instantAnimations||!h)&&p?.(Ev(t,n,e)),t[0]=t[t.length-1],ey(n),n.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>TI?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},y=!d&&CI(g)?new _I({...g,element:g.motionValue.owner.current}):new Tv(g);y.finished.then(()=>this.notifyFinished()).catch(zs),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),uI()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const kI=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function MI(s){const t=kI.exec(s);if(!t)return[,];const[,e,n,i]=t;return[`--${e??n}`,i]}function GC(s,t,e=1){const[n,i]=MI(s);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const l=a.trim();return dC(l)?parseFloat(l):l}return wv(i)?GC(i,t,e+1):i}function kv(s,t){return s?.[t]??s?.default??s}const qC=new Set(["width","height","top","left","right","bottom",...el]),DI={test:s=>s==="auto",parse:s=>s},XC=s=>t=>t.test(s),YC=[tl,Rt,mi,Ar,x3,_3,DI],R1=s=>YC.find(XC(s));function OI(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||pC(s):!0}const NI=new Set(["brightness","contrast","saturate","opacity"]);function PI(s){const[t,e]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[n]=e.match(_v)||[];if(!n)return s;const i=e.replace(n,"");let a=NI.has(t)?1:0;return n!==e&&(a*=100),t+"("+a+i+")"}const LI=/\b([a-z-]*)\(.*?\)/gu,ny={...Nr,getAnimatableNone:s=>{const t=s.match(LI);return t?t.map(PI).join(" "):s}},k1={...tl,transform:Math.round},BI={rotate:Ar,rotateX:Ar,rotateY:Ar,rotateZ:Ar,scale:Sh,scaleX:Sh,scaleY:Sh,scaleZ:Sh,skew:Ar,skewX:Ar,skewY:Ar,distance:Rt,translateX:Rt,translateY:Rt,translateZ:Rt,x:Rt,y:Rt,z:Rt,perspective:Rt,transformPerspective:Rt,opacity:Oc,originX:y1,originY:y1,originZ:Rt},Mv={borderWidth:Rt,borderTopWidth:Rt,borderRightWidth:Rt,borderBottomWidth:Rt,borderLeftWidth:Rt,borderRadius:Rt,radius:Rt,borderTopLeftRadius:Rt,borderTopRightRadius:Rt,borderBottomRightRadius:Rt,borderBottomLeftRadius:Rt,width:Rt,maxWidth:Rt,height:Rt,maxHeight:Rt,top:Rt,right:Rt,bottom:Rt,left:Rt,inset:Rt,insetBlock:Rt,insetBlockStart:Rt,insetBlockEnd:Rt,insetInline:Rt,insetInlineStart:Rt,insetInlineEnd:Rt,padding:Rt,paddingTop:Rt,paddingRight:Rt,paddingBottom:Rt,paddingLeft:Rt,paddingBlock:Rt,paddingBlockStart:Rt,paddingBlockEnd:Rt,paddingInline:Rt,paddingInlineStart:Rt,paddingInlineEnd:Rt,margin:Rt,marginTop:Rt,marginRight:Rt,marginBottom:Rt,marginLeft:Rt,marginBlock:Rt,marginBlockStart:Rt,marginBlockEnd:Rt,marginInline:Rt,marginInlineStart:Rt,marginInlineEnd:Rt,backgroundPositionX:Rt,backgroundPositionY:Rt,...BI,zIndex:k1,fillOpacity:Oc,strokeOpacity:Oc,numOctaves:k1},II={...Mv,color:Qe,backgroundColor:Qe,outlineColor:Qe,fill:Qe,stroke:Qe,borderColor:Qe,borderTopColor:Qe,borderRightColor:Qe,borderBottomColor:Qe,borderLeftColor:Qe,filter:ny,WebkitFilter:ny},WC=s=>II[s];function KC(s,t){let e=WC(s);return e!==ny&&(e=Nr),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const FI=new Set(["auto","none","0"]);function zI(s,t,e){let n=0,i;for(;n<s.length&&!i;){const a=s[n];typeof a=="string"&&!FI.has(a)&&Nc(a).values.length&&(i=s[n]),n++}if(i&&e)for(const a of t)s[a]=KC(e,i)}class jI extends Rv{constructor(t,e,n,i,a){super(t,e,n,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let p=0;p<t.length;p++){let f=t[p];if(typeof f=="string"&&(f=f.trim(),wv(f))){const g=GC(f,e.current);g!==void 0&&(t[p]=g),p===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!qC.has(n)||t.length!==2)return;const[i,a]=t,l=R1(i),c=R1(a),h=g1(i),d=g1(a);if(h!==d&&kr[n]){this.needsMeasurement=!0;return}if(l!==c)if(E1(l)&&E1(c))for(let p=0;p<t.length;p++){const f=t[p];typeof f=="string"&&(t[p]=parseFloat(f))}else kr[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let i=0;i<t.length;i++)(t[i]===null||OI(t[i]))&&n.push(i);n.length&&zI(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=kr[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const i=t.getValue(e);i&&i.jump(this.measuredOrigin,!1);const a=n.length-1,l=n[a];n[a]=kr[e](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,h])=>{t.getValue(c).set(h)}),this.resolveNoneKeyframes()}}function UI(s,t,e){if(s instanceof EventTarget)return[s];if(typeof s=="string"){let n=document;const i=e?.[s]??n.querySelectorAll(s);return i?Array.from(i):[]}return Array.from(s)}const ZC=(s,t)=>t&&typeof s=="number"?t.transform(s):s;function QC(s){return fC(s)&&"offsetHeight"in s}const M1=30,HI=s=>!isNaN(parseFloat(s));class VI{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const i=Un.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Un.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=HI(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new yv);const n=this.events[t].add(e);return t==="change"?()=>{n(),Re.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Un.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>M1)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,M1);return mC(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Xo(s,t){return new VI(s,t)}const{schedule:Dv}=CC(queueMicrotask,!1),qs={x:!1,y:!1};function JC(){return qs.x||qs.y}function $I(s){return s==="x"||s==="y"?qs[s]?null:(qs[s]=!0,()=>{qs[s]=!1}):qs.x||qs.y?null:(qs.x=qs.y=!0,()=>{qs.x=qs.y=!1})}function tT(s,t){const e=UI(s),n=new AbortController,i={passive:!0,...t,signal:n.signal};return[e,i,()=>n.abort()]}function D1(s){return!(s.pointerType==="touch"||JC())}function GI(s,t,e={}){const[n,i,a]=tT(s,e),l=c=>{if(!D1(c))return;const{target:h}=c,d=t(h,c);if(typeof d!="function"||!h)return;const p=f=>{D1(f)&&(d(f),h.removeEventListener("pointerleave",p))};h.addEventListener("pointerleave",p,i)};return n.forEach(c=>{c.addEventListener("pointerenter",l,i)}),a}const eT=(s,t)=>t?s===t?!0:eT(s,t.parentElement):!1,Ov=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,qI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nT(s){return qI.has(s.tagName)||s.isContentEditable===!0}const Zh=new WeakSet;function O1(s){return t=>{t.key==="Enter"&&s(t)}}function eg(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const XI=(s,t)=>{const e=s.currentTarget;if(!e)return;const n=O1(()=>{if(Zh.has(e))return;eg(e,"down");const i=O1(()=>{eg(e,"up")}),a=()=>eg(e,"cancel");e.addEventListener("keyup",i,t),e.addEventListener("blur",a,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function N1(s){return Ov(s)&&!JC()}function YI(s,t,e={}){const[n,i,a]=tT(s,e),l=c=>{const h=c.currentTarget;if(!N1(c))return;Zh.add(h);const d=t(h,c),p=(y,w)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",g),Zh.has(h)&&Zh.delete(h),N1(y)&&typeof d=="function"&&d(y,{success:w})},f=y=>{p(y,h===window||h===document||e.useGlobalTarget||eT(h,y.target))},g=y=>{p(y,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",g,i)};return n.forEach(c=>{(e.useGlobalTarget?window:c).addEventListener("pointerdown",l,i),QC(c)&&(c.addEventListener("focus",d=>XI(d,i)),!nT(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function sT(s){return fC(s)&&"ownerSVGElement"in s}function WI(s){return sT(s)&&s.tagName==="svg"}const Mn=s=>!!(s&&s.getVelocity),KI=[...YC,Qe,Nr],ZI=s=>KI.find(XC(s)),Nv=L.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function P1(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function QI(...s){return t=>{let e=!1;const n=s.map(i=>{const a=P1(i,t);return!e&&typeof a=="function"&&(e=!0),a});if(e)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():P1(s[i],null)}}}}function JI(...s){return L.useCallback(QI(...s),s)}class t5 extends L.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const n=e.offsetParent,i=QC(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=e.offsetHeight||0,a.width=e.offsetWidth||0,a.top=e.offsetTop,a.left=e.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function e5({children:s,isPresent:t,anchorX:e,root:n}){const i=L.useId(),a=L.useRef(null),l=L.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=L.useContext(Nv),h=s.props?.ref??s?.ref,d=JI(a,h);return L.useInsertionEffect(()=>{const{width:p,height:f,top:g,left:y,right:w}=l.current;if(t||!a.current||!p||!f)return;const v=e==="left"?`left: ${y}`:`right: ${w}`;a.current.dataset.motionPopId=i;const S=document.createElement("style");c&&(S.nonce=c);const x=n??document.head;return x.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${f}px !important;
            ${v}px !important;
            top: ${g}px !important;
          }
        `),()=>{x.contains(S)&&x.removeChild(S)}},[t]),$.jsx(t5,{isPresent:t,childRef:a,sizeRef:l,children:L.cloneElement(s,{ref:d})})}const n5=({children:s,initial:t,isPresent:e,onExitComplete:n,custom:i,presenceAffectsLayout:a,mode:l,anchorX:c,root:h})=>{const d=hv(s5),p=L.useId();let f=!0,g=L.useMemo(()=>(f=!1,{id:p,initial:t,isPresent:e,custom:i,onExitComplete:y=>{d.set(y,!0);for(const w of d.values())if(!w)return;n&&n()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[e,d,n]);return a&&f&&(g={...g}),L.useMemo(()=>{d.forEach((y,w)=>d.set(w,!1))},[e]),L.useEffect(()=>{!e&&!d.size&&n&&n()},[e]),l==="popLayout"&&(s=$.jsx(e5,{isPresent:e,anchorX:c,root:h,children:s})),$.jsx(tf.Provider,{value:g,children:s})};function s5(){return new Map}function iT(s=!0){const t=L.useContext(tf);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,a=L.useId();L.useEffect(()=>{if(s)return i(a)},[s]);const l=L.useCallback(()=>s&&n&&n(a),[a,n,s]);return!e&&n?[!1,l]:[!0]}const Ah=s=>s.key||"";function L1(s){const t=[];return L.Children.forEach(s,e=>{L.isValidElement(e)&&t.push(e)}),t}const i5=({children:s,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:a="sync",propagate:l=!1,anchorX:c="left",root:h})=>{const[d,p]=iT(l),f=L.useMemo(()=>L1(s),[s]),g=l&&!d?[]:f.map(Ah),y=L.useRef(!0),w=L.useRef(f),v=hv(()=>new Map),S=L.useRef(new Set),[x,A]=L.useState(f),[E,R]=L.useState(f);hC(()=>{y.current=!1,w.current=f;for(let D=0;D<E.length;D++){const N=Ah(E[D]);g.includes(N)?(v.delete(N),S.current.delete(N)):v.get(N)!==!0&&v.set(N,!1)}},[E,g.length,g.join("-")]);const T=[];if(f!==x){let D=[...f];for(let N=0;N<E.length;N++){const I=E[N],G=Ah(I);g.includes(G)||(D.splice(N,0,I),T.push(I))}return a==="wait"&&T.length&&(D=T),R(L1(D)),A(f),null}const{forceRender:O}=L.useContext(uv);return $.jsx($.Fragment,{children:E.map(D=>{const N=Ah(D),I=l&&!d?!1:f===E||g.includes(N),G=()=>{if(S.current.has(N))return;if(S.current.add(N),v.has(N))v.set(N,!0);else return;let W=!0;v.forEach(F=>{F||(W=!1)}),W&&(O?.(),R(w.current),l&&p?.(),n&&n())};return $.jsx(n5,{isPresent:I,initial:!y.current||e?void 0:!1,custom:t,presenceAffectsLayout:i,mode:a,root:h,onExitComplete:I?void 0:G,anchorX:c,children:D},N)})})},rT=L.createContext({strict:!1}),B1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yo={};for(const s in B1)Yo[s]={isEnabled:t=>B1[s].some(e=>!!t[e])};function r5(s){for(const t in s)Yo[t]={...Yo[t],...s[t]}}const a5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ad(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||a5.has(s)}let aT=s=>!Ad(s);function o5(s){typeof s=="function"&&(aT=t=>t.startsWith("on")?!Ad(t):s(t))}try{o5(require("@emotion/is-prop-valid").default)}catch{}function l5(s,t,e){const n={};for(const i in s)i==="values"&&typeof s.values=="object"||(aT(i)||e===!0&&Ad(i)||!t&&!Ad(i)||s.draggable&&i.startsWith("onDrag"))&&(n[i]=s[i]);return n}const ef=L.createContext({});function nf(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function Pc(s){return typeof s=="string"||Array.isArray(s)}const Pv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Lv=["initial",...Pv];function sf(s){return nf(s.animate)||Lv.some(t=>Pc(s[t]))}function oT(s){return!!(sf(s)||s.variants)}function c5(s,t){if(sf(s)){const{initial:e,animate:n}=s;return{initial:e===!1||Pc(e)?e:void 0,animate:Pc(n)?n:void 0}}return s.inherit!==!1?t:{}}function u5(s){const{initial:t,animate:e}=c5(s,L.useContext(ef));return L.useMemo(()=>({initial:t,animate:e}),[I1(t),I1(e)])}function I1(s){return Array.isArray(s)?s.join(" "):s}function F1(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const Ql={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(Rt.test(s))s=parseFloat(s);else return s;const e=F1(s,t.target.x),n=F1(s,t.target.y);return`${e}% ${n}%`}},h5={correct:(s,{treeScale:t,projectionDelta:e})=>{const n=s,i=Nr.parse(s);if(i.length>5)return n;const a=Nr.createTransformer(s),l=typeof i[0]!="number"?1:0,c=e.x.scale*t.x,h=e.y.scale*t.y;i[0+l]/=c,i[1+l]/=h;const d=Le(c,h,.5);return typeof i[2+l]=="number"&&(i[2+l]/=d),typeof i[3+l]=="number"&&(i[3+l]/=d),a(i)}},sy={borderRadius:{...Ql,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ql,borderTopRightRadius:Ql,borderBottomLeftRadius:Ql,borderBottomRightRadius:Ql,boxShadow:h5};function lT(s,{layout:t,layoutId:e}){return nl.has(s)||s.startsWith("origin")||(t||e!==void 0)&&(!!sy[s]||s==="opacity")}const d5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},f5=el.length;function p5(s,t,e){let n="",i=!0;for(let a=0;a<f5;a++){const l=el[a],c=s[l];if(c===void 0)continue;let h=!0;if(typeof c=="number"?h=c===(l.startsWith("scale")?1:0):h=parseFloat(c)===0,!h||e){const d=ZC(c,Mv[l]);if(!h){i=!1;const p=d5[l]||l;n+=`${p}(${d}) `}e&&(t[l]=d)}}return n=n.trim(),e?n=e(t,i?"":n):i&&(n="none"),n}function Bv(s,t,e){const{style:n,vars:i,transformOrigin:a}=s;let l=!1,c=!1;for(const h in t){const d=t[h];if(nl.has(h)){l=!0;continue}else if(RC(h)){i[h]=d;continue}else{const p=ZC(d,Mv[h]);h.startsWith("origin")?(c=!0,a[h]=p):n[h]=p}}if(t.transform||(l||e?n.transform=p5(t,s.transform,e):n.transform&&(n.transform="none")),c){const{originX:h="50%",originY:d="50%",originZ:p=0}=a;n.transformOrigin=`${h} ${d} ${p}`}}const Iv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function cT(s,t,e){for(const n in t)!Mn(t[n])&&!lT(n,e)&&(s[n]=t[n])}function m5({transformTemplate:s},t){return L.useMemo(()=>{const e=Iv();return Bv(e,t,s),Object.assign({},e.vars,e.style)},[t])}function g5(s,t){const e=s.style||{},n={};return cT(n,e,s),Object.assign(n,m5(s,t)),n}function y5(s,t){const e={},n=g5(s,t);return s.drag&&s.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(e.tabIndex=0),e.style=n,e}const v5={offset:"stroke-dashoffset",array:"stroke-dasharray"},b5={offset:"strokeDashoffset",array:"strokeDasharray"};function w5(s,t,e=1,n=0,i=!0){s.pathLength=1;const a=i?v5:b5;s[a.offset]=Rt.transform(-n);const l=Rt.transform(t),c=Rt.transform(e);s[a.array]=`${l} ${c}`}const _5=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function uT(s,{attrX:t,attrY:e,attrScale:n,pathLength:i,pathSpacing:a=1,pathOffset:l=0,...c},h,d,p){if(Bv(s,c,d),h){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:f,style:g}=s;f.transform&&(g.transform=f.transform,delete f.transform),(g.transform||f.transformOrigin)&&(g.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),g.transform&&(g.transformBox=p?.transformBox??"fill-box",delete f.transformBox);for(const y of _5)f[y]!==void 0&&(g[y]=f[y],delete f[y]);t!==void 0&&(f.x=t),e!==void 0&&(f.y=e),n!==void 0&&(f.scale=n),i!==void 0&&w5(f,i,a,l,!1)}const hT=()=>({...Iv(),attrs:{}}),dT=s=>typeof s=="string"&&s.toLowerCase()==="svg";function x5(s,t,e,n){const i=L.useMemo(()=>{const a=hT();return uT(a,t,dT(n),s.transformTemplate,s.style),{...a.attrs,style:{...a.style}}},[t]);if(s.style){const a={};cT(a,s.style,s),i.style={...a,...i.style}}return i}const S5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Fv(s){return typeof s!="string"||s.includes("-")?!1:!!(S5.indexOf(s)>-1||/[A-Z]/u.test(s))}function A5(s,t,e,{latestValues:n},i,a=!1,l){const h=(l??Fv(s)?x5:y5)(t,n,i,s),d=l5(t,typeof s=="string",a),p=s!==L.Fragment?{...d,...h,ref:e}:{},{children:f}=t,g=L.useMemo(()=>Mn(f)?f.get():f,[f]);return L.createElement(s,{...p,children:g})}function z1(s){const t=[{},{}];return s?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function zv(s,t,e,n){if(typeof t=="function"){const[i,a]=z1(n);t=t(e!==void 0?e:s.custom,i,a)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[i,a]=z1(n);t=t(e!==void 0?e:s.custom,i,a)}return t}function Qh(s){return Mn(s)?s.get():s}function E5({scrapeMotionValuesFromProps:s,createRenderState:t},e,n,i){return{latestValues:C5(e,n,i,s),renderState:t()}}function C5(s,t,e,n){const i={},a=n(s,{});for(const g in a)i[g]=Qh(a[g]);let{initial:l,animate:c}=s;const h=sf(s),d=oT(s);t&&d&&!h&&s.inherit!==!1&&(l===void 0&&(l=t.initial),c===void 0&&(c=t.animate));let p=e?e.initial===!1:!1;p=p||l===!1;const f=p?c:l;if(f&&typeof f!="boolean"&&!nf(f)){const g=Array.isArray(f)?f:[f];for(let y=0;y<g.length;y++){const w=zv(s,g[y]);if(w){const{transitionEnd:v,transition:S,...x}=w;for(const A in x){let E=x[A];if(Array.isArray(E)){const R=p?E.length-1:0;E=E[R]}E!==null&&(i[A]=E)}for(const A in v)i[A]=v[A]}}}return i}const fT=s=>(t,e)=>{const n=L.useContext(ef),i=L.useContext(tf),a=()=>E5(s,t,n,i);return e?a():hv(a)};function jv(s,t,e){const{style:n}=s,i={};for(const a in n)(Mn(n[a])||t.style&&Mn(t.style[a])||lT(a,s)||e?.getValue(a)?.liveStyle!==void 0)&&(i[a]=n[a]);return i}const T5=fT({scrapeMotionValuesFromProps:jv,createRenderState:Iv});function pT(s,t,e){const n=jv(s,t,e);for(const i in s)if(Mn(s[i])||Mn(t[i])){const a=el.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[a]=s[i]}return n}const R5=fT({scrapeMotionValuesFromProps:pT,createRenderState:hT}),k5=Symbol.for("motionComponentSymbol");function M5(s,t,e){const n=L.useRef(e);L.useInsertionEffect(()=>{n.current=e});const i=L.useRef(null);return L.useCallback(a=>{a&&s.onMount?.(a),t&&(a?t.mount(a):t.unmount());const l=n.current;if(typeof l=="function")if(a){const c=l(a);typeof c=="function"&&(i.current=c)}else i.current?(i.current(),i.current=null):l(a);else l&&(l.current=a)},[t])}const Uv=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),D5="framerAppearId",mT="data-"+Uv(D5),gT=L.createContext({});function oc(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function O5(s,t,e,n,i,a){const{visualElement:l}=L.useContext(ef),c=L.useContext(rT),h=L.useContext(tf),d=L.useContext(Nv).reducedMotion,p=L.useRef(null);n=n||c.renderer,!p.current&&n&&(p.current=n(s,{visualState:t,parent:l,props:e,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:d,isSVG:a}));const f=p.current,g=L.useContext(gT);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&N5(p.current,e,i,g);const y=L.useRef(!1);L.useInsertionEffect(()=>{f&&y.current&&f.update(e,h)});const w=e[mT],v=L.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return hC(()=>{f&&(y.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),v.current&&f.animationState&&f.animationState.animateChanges())}),L.useEffect(()=>{f&&(!v.current&&f.animationState&&f.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),v.current=!1),f.enteringChildren=void 0)}),f}function N5(s,t,e,n){const{layoutId:i,layout:a,drag:l,dragConstraints:c,layoutScroll:h,layoutRoot:d,layoutCrossfade:p}=t;s.projection=new e(s.latestValues,t["data-framer-portal-id"]?void 0:yT(s.parent)),s.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||c&&oc(c),visualElement:s,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:h,layoutRoot:d})}function yT(s){if(s)return s.options.allowProjection!==!1?s.projection:yT(s.parent)}function ng(s,{forwardMotionProps:t=!1,type:e}={},n,i){n&&r5(n);const a=e?e==="svg":Fv(s),l=a?R5:T5;function c(d,p){let f;const g={...L.useContext(Nv),...d,layoutId:P5(d)},{isStatic:y}=g,w=u5(d),v=l(d,y);if(!y&&dv){L5();const S=B5(g);f=S.MeasureLayout,w.visualElement=O5(s,v,g,i,S.ProjectionNode,a)}return $.jsxs(ef.Provider,{value:w,children:[f&&w.visualElement?$.jsx(f,{visualElement:w.visualElement,...g}):null,A5(s,d,M5(v,w.visualElement,p),v,y,t,a)]})}c.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const h=L.forwardRef(c);return h[k5]=s,h}function P5({layoutId:s}){const t=L.useContext(uv).id;return t&&s!==void 0?t+"-"+s:s}function L5(s,t){L.useContext(rT).strict}function B5(s){const{drag:t,layout:e}=Yo;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t?.isEnabled(s)||e?.isEnabled(s)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function I5(s,t){if(typeof Proxy>"u")return ng;const e=new Map,n=(a,l)=>ng(a,l,s,t),i=(a,l)=>n(a,l);return new Proxy(i,{get:(a,l)=>l==="create"?n:(e.has(l)||e.set(l,ng(l,void 0,s,t)),e.get(l))})}function vT({top:s,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:s,max:n}}}function F5({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function z5(s,t){if(!t)return s;const e=t({x:s.left,y:s.top}),n=t({x:s.right,y:s.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function sg(s){return s===void 0||s===1}function iy({scale:s,scaleX:t,scaleY:e}){return!sg(s)||!sg(t)||!sg(e)}function aa(s){return iy(s)||bT(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function bT(s){return j1(s.x)||j1(s.y)}function j1(s){return s&&s!=="0%"}function Ed(s,t,e){const n=s-e,i=t*n;return e+i}function U1(s,t,e,n,i){return i!==void 0&&(s=Ed(s,i,n)),Ed(s,e,n)+t}function ry(s,t=0,e=1,n,i){s.min=U1(s.min,t,e,n,i),s.max=U1(s.max,t,e,n,i)}function wT(s,{x:t,y:e}){ry(s.x,t.translate,t.scale,t.originPoint),ry(s.y,e.translate,e.scale,e.originPoint)}const H1=.999999999999,V1=1.0000000000001;function j5(s,t,e,n=!1){const i=e.length;if(!i)return;t.x=t.y=1;let a,l;for(let c=0;c<i;c++){a=e[c],l=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Do(s,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,wT(s,l)),n&&aa(a.latestValues)&&Do(s,a.latestValues))}t.x<V1&&t.x>H1&&(t.x=1),t.y<V1&&t.y>H1&&(t.y=1)}function Mo(s,t){s.min=s.min+t,s.max=s.max+t}function $1(s,t,e,n,i=.5){const a=Le(s.min,s.max,i);ry(s,t,e,a,n)}function Do(s,t){$1(s.x,t.x,t.scaleX,t.scale,t.originX),$1(s.y,t.y,t.scaleY,t.scale,t.originY)}function _T(s,t){return vT(z5(s.getBoundingClientRect(),t))}function U5(s,t,e){const n=_T(s,e),{scroll:i}=t;return i&&(Mo(n.x,i.offset.x),Mo(n.y,i.offset.y)),n}const G1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Oo=()=>({x:G1(),y:G1()}),q1=()=>({min:0,max:0}),on=()=>({x:q1(),y:q1()}),ay={current:null},xT={current:!1};function H5(){if(xT.current=!0,!!dv)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>ay.current=s.matches;s.addEventListener("change",t),t()}else ay.current=!1}const V5=new WeakMap;function $5(s,t,e){for(const n in t){const i=t[n],a=e[n];if(Mn(i))s.addValue(n,i);else if(Mn(a))s.addValue(n,Xo(i,{owner:s}));else if(a!==i)if(s.hasValue(n)){const l=s.getValue(n);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=s.getStaticValue(n);s.addValue(n,Xo(l!==void 0?l:i,{owner:s}))}}for(const n in e)t[n]===void 0&&s.removeValue(n);return t}const X1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class G5{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Rv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Un.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Re.render(this.render,!1,!0))};const{latestValues:h,renderState:d}=l;this.latestValues=h,this.baseTarget={...h},this.initialValues=e.initial?{...h}:{},this.renderState=d,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=sf(e),this.isVariantNode=oT(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...f}=this.scrapeMotionValuesFromProps(e,{},this);for(const g in f){const y=f[g];h[g]!==void 0&&Mn(y)&&y.set(h[g])}}mount(t){this.current=t,V5.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(xT.current||H5(),this.shouldReduceMotion=ay.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Or(this.notifyUpdate),Or(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=nl.has(t);n&&this.onBindTransform&&this.onBindTransform();const i=e.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Re.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{i(),a&&a(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Yo){const e=Yo[t];if(!e)continue;const{isEnabled:n,Feature:i}=e;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):on()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<X1.length;n++){const i=X1[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=t[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=$5(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=Xo(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(dC(n)||pC(n))?n=parseFloat(n):!ZI(n)&&Nr.test(e)&&(n=KC(t,e)),this.setBaseTarget(t,Mn(n)?n.get():n)),Mn(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const a=zv(this.props,e,this.presenceContext?.custom);a&&(n=a[t])}if(e&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Mn(i)?i:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new yv),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){Dv.render(this.render)}}class ST extends G5{constructor(){super(...arguments),this.KeyframeResolver=jI}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Mn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function AT(s,{style:t,vars:e},n,i){const a=s.style;let l;for(l in t)a[l]=t[l];i?.applyProjectionStyles(a,n);for(l in e)a.setProperty(l,e[l])}function q5(s){return window.getComputedStyle(s)}class X5 extends ST{constructor(){super(...arguments),this.type="html",this.renderInstance=AT}readValueFromInstance(t,e){if(nl.has(e))return this.projection?.isProjecting?Kg(e):rI(t,e);{const n=q5(t),i=(RC(e)?n.getPropertyValue(e):n[e])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:e}){return _T(t,e)}build(t,e,n){Bv(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return jv(t,e,n)}}const ET=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Y5(s,t,e,n){AT(s,t,void 0,n);for(const i in t.attrs)s.setAttribute(ET.has(i)?i:Uv(i),t.attrs[i])}class W5 extends ST{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=on}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(nl.has(e)){const n=WC(e);return n&&n.default||0}return e=ET.has(e)?e:Uv(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return pT(t,e,n)}build(t,e,n){uT(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,i){Y5(t,e,n,i)}mount(t){this.isSVGTag=dT(t.tagName),super.mount(t)}}const K5=(s,t)=>t.isSVG??Fv(s)?new W5(t):new X5(t,{allowProjection:s!==L.Fragment});function Fo(s,t,e){const n=s.getProps();return zv(n,t,e!==void 0?e:n.custom,s)}const oy=s=>Array.isArray(s);function Z5(s,t,e){s.hasValue(t)?s.getValue(t).set(e):s.addValue(t,Xo(e))}function Q5(s){return oy(s)?s[s.length-1]||0:s}function J5(s,t){const e=Fo(s,t);let{transitionEnd:n={},transition:i={},...a}=e||{};a={...a,...n};for(const l in a){const c=Q5(a[l]);Z5(s,l,c)}}function tF(s){return!!(Mn(s)&&s.add)}function ly(s,t){const e=s.getValue("willChange");if(tF(e))return e.add(t);if(!e&&Yi.WillChange){const n=new Yi.WillChange("auto");s.addValue("willChange",n),n.add(t)}}function CT(s){return s.props[mT]}const eF=s=>s!==null;function nF(s,{repeat:t,repeatType:e="loop"},n){const i=s.filter(eF),a=t&&e!=="loop"&&t%2===1?0:i.length-1;return i[a]}const sF={type:"spring",stiffness:500,damping:25,restSpeed:10},iF=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),rF={type:"keyframes",duration:.8},aF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},oF=(s,{keyframes:t})=>t.length>2?rF:nl.has(s)?s.startsWith("scale")?iF(t[1]):sF:aF;function lF({when:s,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:c,from:h,elapsed:d,...p}){return!!Object.keys(p).length}const Hv=(s,t,e,n={},i,a)=>l=>{const c=kv(n,s)||{},h=c.delay||n.delay||0;let{elapsed:d=0}=n;d=d-Gi(h);const p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-d,onUpdate:g=>{t.set(g),c.onUpdate&&c.onUpdate(g)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:s,motionValue:t,element:a?void 0:i};lF(c)||Object.assign(p,oF(s,p)),p.duration&&(p.duration=Gi(p.duration)),p.repeatDelay&&(p.repeatDelay=Gi(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let f=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(ey(p),p.delay===0&&(f=!0)),(Yi.instantAnimations||Yi.skipAnimations)&&(f=!0,ey(p),p.delay=0),p.allowFlatten=!c.type&&!c.ease,f&&!a&&t.get()!==void 0){const g=nF(p.keyframes,c);if(g!==void 0){Re.update(()=>{p.onUpdate(g),p.onComplete()});return}}return c.isSync?new Tv(p):new RI(p)};function cF({protectedKeys:s,needsAnimating:t},e){const n=s.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function TT(s,t,{delay:e=0,transitionOverride:n,type:i}={}){let{transition:a=s.getDefaultTransition(),transitionEnd:l,...c}=t;n&&(a=n);const h=[],d=i&&s.animationState&&s.animationState.getState()[i];for(const p in c){const f=s.getValue(p,s.latestValues[p]??null),g=c[p];if(g===void 0||d&&cF(d,p))continue;const y={delay:e,...kv(a||{},p)},w=f.get();if(w!==void 0&&!f.isAnimating&&!Array.isArray(g)&&g===w&&!y.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const x=CT(s);if(x){const A=window.MotionHandoffAnimation(x,p,Re);A!==null&&(y.startTime=A,v=!0)}}ly(s,p),f.start(Hv(p,f,g,s.shouldReduceMotion&&qC.has(p)?{type:!1}:y,s,v));const S=f.animation;S&&h.push(S)}return l&&Promise.all(h).then(()=>{Re.update(()=>{l&&J5(s,l)})}),h}function RT(s,t,e,n=0,i=1){const a=Array.from(s).sort((d,p)=>d.sortNodePosition(p)).indexOf(t),l=s.size,c=(l-1)*n;return typeof e=="function"?e(a,l):i===1?a*n:c-a*n}function cy(s,t,e={}){const n=Fo(s,t,e.type==="exit"?s.presenceContext?.custom:void 0);let{transition:i=s.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(i=e.transitionOverride);const a=n?()=>Promise.all(TT(s,n,e)):()=>Promise.resolve(),l=s.variantChildren&&s.variantChildren.size?(h=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:f}=i;return uF(s,t,h,d,p,f,e)}:()=>Promise.resolve(),{when:c}=i;if(c){const[h,d]=c==="beforeChildren"?[a,l]:[l,a];return h().then(()=>d())}else return Promise.all([a(),l(e.delay)])}function uF(s,t,e=0,n=0,i=0,a=1,l){const c=[];for(const h of s.variantChildren)h.notify("AnimationStart",t),c.push(cy(h,t,{...l,delay:e+(typeof n=="function"?0:n)+RT(s.variantChildren,h,n,i,a)}).then(()=>h.notify("AnimationComplete",t)));return Promise.all(c)}function hF(s,t,e={}){s.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(a=>cy(s,a,e));n=Promise.all(i)}else if(typeof t=="string")n=cy(s,t,e);else{const i=typeof t=="function"?Fo(s,t,e.custom):t;n=Promise.all(TT(s,i,e))}return n.then(()=>{s.notify("AnimationComplete",t)})}function kT(s,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==s.length)return!1;for(let n=0;n<e;n++)if(t[n]!==s[n])return!1;return!0}const dF=Lv.length;function MT(s){if(!s)return;if(!s.isControllingVariants){const e=s.parent?MT(s.parent)||{}:{};return s.props.initial!==void 0&&(e.initial=s.props.initial),e}const t={};for(let e=0;e<dF;e++){const n=Lv[e],i=s.props[n];(Pc(i)||i===!1)&&(t[n]=i)}return t}const fF=[...Pv].reverse(),pF=Pv.length;function mF(s){return t=>Promise.all(t.map(({animation:e,options:n})=>hF(s,e,n)))}function gF(s){let t=mF(s),e=Y1(),n=!0;const i=h=>(d,p)=>{const f=Fo(s,p,h==="exit"?s.presenceContext?.custom:void 0);if(f){const{transition:g,transitionEnd:y,...w}=f;d={...d,...w,...y}}return d};function a(h){t=h(s)}function l(h){const{props:d}=s,p=MT(s.parent)||{},f=[],g=new Set;let y={},w=1/0;for(let S=0;S<pF;S++){const x=fF[S],A=e[x],E=d[x]!==void 0?d[x]:p[x],R=Pc(E),T=x===h?A.isActive:null;T===!1&&(w=S);let O=E===p[x]&&E!==d[x]&&R;if(O&&n&&s.manuallyAnimateOnMount&&(O=!1),A.protectedKeys={...y},!A.isActive&&T===null||!E&&!A.prevProp||nf(E)||typeof E=="boolean")continue;const D=yF(A.prevProp,E);let N=D||x===h&&A.isActive&&!O&&R||S>w&&R,I=!1;const G=Array.isArray(E)?E:[E];let W=G.reduce(i(x),{});T===!1&&(W={});const{prevResolvedValues:F={}}=A,Y={...F,...W},k=j=>{N=!0,g.has(j)&&(I=!0,g.delete(j)),A.needsAnimating[j]=!0;const q=s.getValue(j);q&&(q.liveStyle=!1)};for(const j in Y){const q=W[j],nt=F[j];if(y.hasOwnProperty(j))continue;let pt=!1;oy(q)&&oy(nt)?pt=!kT(q,nt):pt=q!==nt,pt?q!=null?k(j):g.add(j):q!==void 0&&g.has(j)?k(j):A.protectedKeys[j]=!0}A.prevProp=E,A.prevResolvedValues=W,A.isActive&&(y={...y,...W}),n&&s.blockInitialAnimation&&(N=!1);const J=O&&D;N&&(!J||I)&&f.push(...G.map(j=>{const q={type:x};if(typeof j=="string"&&n&&!J&&s.manuallyAnimateOnMount&&s.parent){const{parent:nt}=s,pt=Fo(nt,j);if(nt.enteringChildren&&pt){const{delayChildren:P}=pt.transition||{};q.delay=RT(nt.enteringChildren,s,P)}}return{animation:j,options:q}}))}if(g.size){const S={};if(typeof d.initial!="boolean"){const x=Fo(s,Array.isArray(d.initial)?d.initial[0]:d.initial);x&&x.transition&&(S.transition=x.transition)}g.forEach(x=>{const A=s.getBaseTarget(x),E=s.getValue(x);E&&(E.liveStyle=!0),S[x]=A??null}),f.push({animation:S})}let v=!!f.length;return n&&(d.initial===!1||d.initial===d.animate)&&!s.manuallyAnimateOnMount&&(v=!1),n=!1,v?t(f):Promise.resolve()}function c(h,d){if(e[h].isActive===d)return Promise.resolve();s.variantChildren?.forEach(f=>f.animationState?.setActive(h,d)),e[h].isActive=d;const p=l(h);for(const f in e)e[f].protectedKeys={};return p}return{animateChanges:l,setActive:c,setAnimateFunction:a,getState:()=>e,reset:()=>{e=Y1()}}}function yF(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!kT(t,s):!1}function ra(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Y1(){return{animate:ra(!0),whileInView:ra(),whileHover:ra(),whileTap:ra(),whileDrag:ra(),whileFocus:ra(),exit:ra()}}class Br{constructor(t){this.isMounted=!1,this.node=t}update(){}}class vF extends Br{constructor(t){super(t),t.animationState||(t.animationState=gF(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();nf(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let bF=0;class wF extends Br{constructor(){super(...arguments),this.id=bF++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const _F={animation:{Feature:vF},exit:{Feature:wF}};function Lc(s,t,e,n={passive:!0}){return s.addEventListener(t,e,n),()=>s.removeEventListener(t,e)}function Yc(s){return{point:{x:s.pageX,y:s.pageY}}}const xF=s=>t=>Ov(t)&&s(t,Yc(t));function Sc(s,t,e,n){return Lc(s,t,xF(e),n)}const DT=1e-4,SF=1-DT,AF=1+DT,OT=.01,EF=0-OT,CF=0+OT;function Hn(s){return s.max-s.min}function TF(s,t,e){return Math.abs(s-t)<=e}function W1(s,t,e,n=.5){s.origin=n,s.originPoint=Le(t.min,t.max,s.origin),s.scale=Hn(e)/Hn(t),s.translate=Le(e.min,e.max,s.origin)-s.originPoint,(s.scale>=SF&&s.scale<=AF||isNaN(s.scale))&&(s.scale=1),(s.translate>=EF&&s.translate<=CF||isNaN(s.translate))&&(s.translate=0)}function Ac(s,t,e,n){W1(s.x,t.x,e.x,n?n.originX:void 0),W1(s.y,t.y,e.y,n?n.originY:void 0)}function K1(s,t,e){s.min=e.min+t.min,s.max=s.min+Hn(t)}function RF(s,t,e){K1(s.x,t.x,e.x),K1(s.y,t.y,e.y)}function Z1(s,t,e){s.min=t.min-e.min,s.max=s.min+Hn(t)}function Cd(s,t,e){Z1(s.x,t.x,e.x),Z1(s.y,t.y,e.y)}function Ls(s){return[s("x"),s("y")]}const NT=({current:s})=>s?s.ownerDocument.defaultView:null,Q1=(s,t)=>Math.abs(s-t);function kF(s,t){const e=Q1(s.x,t.x),n=Q1(s.y,t.y);return Math.sqrt(e**2+n**2)}const J1=new Set(["auto","scroll"]);class PT{constructor(t,e,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=y=>{this.handleScroll(y.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=rg(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,v=kF(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!v)return;const{point:S}=y,{timestamp:x}=Sn;this.history.push({...S,timestamp:x});const{onStart:A,onMove:E}=this.handlers;w||(A&&A(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,y)},this.handlePointerMove=(y,w)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=ig(w,this.transformPagePoint),Re.update(this.updatePoint,!0)},this.handlePointerUp=(y,w)=>{this.end();const{onEnd:v,onSessionEnd:S,resumeAnimation:x}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=rg(y.type==="pointercancel"?this.lastMoveEventInfo:ig(w,this.transformPagePoint),this.history);this.startEvent&&v&&v(y,A),S&&S(y,A)},!Ov(t))return;this.dragSnapToOrigin=a,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=l,this.contextWindow=i||window;const h=Yc(t),d=ig(h,this.transformPagePoint),{point:p}=d,{timestamp:f}=Sn;this.history=[{...p,timestamp:f}];const{onSessionStart:g}=e;g&&g(t,rg(d,this.history)),this.removeListeners=Gc(Sc(this.contextWindow,"pointermove",this.handlePointerMove),Sc(this.contextWindow,"pointerup",this.handlePointerUp),Sc(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(t){let e=t.parentElement;for(;e;){const n=getComputedStyle(e);(J1.has(n.overflowX)||J1.has(n.overflowY))&&this.scrollPositions.set(e,{x:e.scrollLeft,y:e.scrollTop}),e=e.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const e=this.scrollPositions.get(t);if(!e)return;const n=t===window,i=n?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},a={x:i.x-e.x,y:i.y-e.y};a.x===0&&a.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(t,i),Re.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Or(this.updatePoint)}}function ig(s,t){return t?{point:t(s.point)}:s}function tS(s,t){return{x:s.x-t.x,y:s.y-t.y}}function rg({point:s},t){return{point:s,delta:tS(s,LT(t)),offset:tS(s,MF(t)),velocity:DF(t,.1)}}function MF(s){return s[0]}function LT(s){return s[s.length-1]}function DF(s,t){if(s.length<2)return{x:0,y:0};let e=s.length-1,n=null;const i=LT(s);for(;e>=0&&(n=s[e],!(i.timestamp-n.timestamp>Gi(t)));)e--;if(!n)return{x:0,y:0};const a=Is(i.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function OF(s,{min:t,max:e},n){return t!==void 0&&s<t?s=n?Le(t,s,n.min):Math.max(s,t):e!==void 0&&s>e&&(s=n?Le(e,s,n.max):Math.min(s,e)),s}function eS(s,t,e){return{min:t!==void 0?s.min+t:void 0,max:e!==void 0?s.max+e-(s.max-s.min):void 0}}function NF(s,{top:t,left:e,bottom:n,right:i}){return{x:eS(s.x,e,i),y:eS(s.y,t,n)}}function nS(s,t){let e=t.min-s.min,n=t.max-s.max;return t.max-t.min<s.max-s.min&&([e,n]=[n,e]),{min:e,max:n}}function PF(s,t){return{x:nS(s.x,t.x),y:nS(s.y,t.y)}}function LF(s,t){let e=.5;const n=Hn(s),i=Hn(t);return i>n?e=Dc(t.min,t.max-n,s.min):n>i&&(e=Dc(s.min,s.max-i,t.min)),yi(0,1,e)}function BF(s,t){const e={};return t.min!==void 0&&(e.min=t.min-s.min),t.max!==void 0&&(e.max=t.max-s.min),e}const uy=.35;function IF(s=uy){return s===!1?s=0:s===!0&&(s=uy),{x:sS(s,"left","right"),y:sS(s,"top","bottom")}}function sS(s,t,e){return{min:iS(s,t),max:iS(s,e)}}function iS(s,t){return typeof s=="number"?s:s[t]||0}const FF=new WeakMap;class zF{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=on(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=f=>{e?(this.stopAnimation(),this.snapToCursor(Yc(f).point)):this.pauseAnimation()},l=(f,g)=>{this.stopAnimation();const{drag:y,dragPropagation:w,onDragStart:v}=this.getProps();if(y&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$I(y),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ls(x=>{let A=this.getAxisMotionValue(x).get()||0;if(mi.test(A)){const{projection:E}=this.visualElement;if(E&&E.layout){const R=E.layout.layoutBox[x];R&&(A=Hn(R)*(parseFloat(A)/100))}}this.originPoint[x]=A}),v&&Re.postRender(()=>v(f,g)),ly(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},c=(f,g)=>{this.latestPointerEvent=f,this.latestPanInfo=g;const{dragPropagation:y,dragDirectionLock:w,onDirectionLock:v,onDrag:S}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:x}=g;if(w&&this.currentDirection===null){this.currentDirection=jF(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",g.point,x),this.updateAxis("y",g.point,x),this.visualElement.render(),S&&S(f,g)},h=(f,g)=>{this.latestPointerEvent=f,this.latestPanInfo=g,this.stop(f,g),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Ls(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new PT(t,{onSessionStart:a,onStart:l,onMove:c,onSessionEnd:h,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:NT(this.visualElement),element:this.visualElement.current})}stop(t,e){const n=t||this.latestPointerEvent,i=e||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!n)return;const{velocity:l}=i;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&Re.postRender(()=>c(n,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:i}=this.getProps();if(!n||!Eh(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=OF(l,this.constraints[t],this.elastic[t])),a.set(l)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&oc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=NF(n.layoutBox,t):this.constraints=!1,this.elastic=IF(e),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ls(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=BF(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!oc(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=U5(n,i.root,this.visualElement.getTransformPagePoint());let l=PF(i.layout.layoutBox,a);if(e){const c=e(F5(l));this.hasMutatedConstraints=!!c,c&&(l=vT(c))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),h=this.constraints||{},d=Ls(p=>{if(!Eh(p,e,this.currentDirection))return;let f=h&&h[p]||{};l&&(f={min:0,max:0});const g=i?200:1e6,y=i?40:1e7,w={type:"inertia",velocity:n?t[p]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(p,w)});return Promise.all(d).then(c)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return ly(this.visualElement,t),n.start(Hv(t,n,0,e,this.visualElement,!1))}stopAnimation(){Ls(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ls(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[e];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Ls(e=>{const{drag:n}=this.getProps();if(!Eh(e,n,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(e);if(i&&i.layout){const{min:l,max:c}=i.layout.layoutBox[e],h=a.get()||0;a.set(t[e]-Le(l,c,.5)+h)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!oc(e)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ls(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const h=c.get();i[l]=LF({min:h,max:h},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ls(l=>{if(!Eh(l,t,null))return;const c=this.getAxisMotionValue(l),{min:h,max:d}=this.constraints[l];c.set(Le(h,d,i[l]))})}addListeners(){if(!this.visualElement.current)return;FF.set(this.visualElement,this);const t=this.visualElement.current,e=Sc(t,"pointerdown",h=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&!nT(h.target)&&this.start(h)}),n=()=>{const{dragConstraints:h}=this.getProps();oc(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Re.read(n);const l=Lc(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ls(p=>{const f=this.getAxisMotionValue(p);f&&(this.originPoint[p]+=h[p].translate,f.set(f.get()+h[p].translate))}),this.visualElement.render())}));return()=>{l(),e(),a(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=uy,dragMomentum:c=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:c}}}function Eh(s,t,e){return(t===!0||t===s)&&(e===null||e===s)}function jF(s,t=10){let e=null;return Math.abs(s.y)>t?e="y":Math.abs(s.x)>t&&(e="x"),e}class UF extends Br{constructor(t){super(t),this.removeGroupControls=zs,this.removeListeners=zs,this.controls=new zF(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zs}update(){const{dragControls:t}=this.node.getProps(),{dragControls:e}=this.node.prevProps||{};t!==e&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const rS=s=>(t,e)=>{s&&Re.postRender(()=>s(t,e))};class HF extends Br{constructor(){super(...arguments),this.removePointerDownListener=zs}onPointerDown(t){this.session=new PT(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:NT(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:rS(t),onStart:rS(e),onMove:n,onEnd:(a,l)=>{delete this.session,i&&Re.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=Sc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Jh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let ag=!1;class VF extends L.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=t;a&&(e.group&&e.group.add(a),n&&n.register&&i&&n.register(a),ag&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Jh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:i,isPresent:a}=this.props,{projection:l}=n;return l&&(l.isPresent=a,ag=!0,i||t.layoutDependency!==e||e===void 0||t.isPresent!==a?l.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?l.promote():l.relegate()||Re.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Dv.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:i}=t;ag=!0,i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function BT(s){const[t,e]=iT(),n=L.useContext(uv);return $.jsx(VF,{...s,layoutGroup:n,switchLayoutGroup:L.useContext(gT),isPresent:t,safeToRemove:e})}function $F(s,t,e){const n=Mn(s)?s:Xo(s);return n.start(Hv("",n,t,e)),n.animation}const GF=(s,t)=>s.depth-t.depth;class qF{constructor(){this.children=[],this.isDirty=!1}add(t){fv(this.children,t),this.isDirty=!0}remove(t){pv(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(GF),this.isDirty=!1,this.children.forEach(t)}}function XF(s,t){const e=Un.now(),n=({timestamp:i})=>{const a=i-e;a>=t&&(Or(n),s(a-t))};return Re.setup(n,!0),()=>Or(n)}const IT=["TopLeft","TopRight","BottomLeft","BottomRight"],YF=IT.length,aS=s=>typeof s=="string"?parseFloat(s):s,oS=s=>typeof s=="number"||Rt.test(s);function WF(s,t,e,n,i,a){i?(s.opacity=Le(0,e.opacity??1,KF(n)),s.opacityExit=Le(t.opacity??1,0,ZF(n))):a&&(s.opacity=Le(t.opacity??1,e.opacity??1,n));for(let l=0;l<YF;l++){const c=`border${IT[l]}Radius`;let h=lS(t,c),d=lS(e,c);if(h===void 0&&d===void 0)continue;h||(h=0),d||(d=0),h===0||d===0||oS(h)===oS(d)?(s[c]=Math.max(Le(aS(h),aS(d),n),0),(mi.test(d)||mi.test(h))&&(s[c]+="%")):s[c]=d}(t.rotate||e.rotate)&&(s.rotate=Le(t.rotate||0,e.rotate||0,n))}function lS(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const KF=FT(0,.5,xC),ZF=FT(.5,.95,zs);function FT(s,t,e){return n=>n<s?0:n>t?1:e(Dc(s,t,n))}function cS(s,t){s.min=t.min,s.max=t.max}function Gs(s,t){cS(s.x,t.x),cS(s.y,t.y)}function uS(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}function hS(s,t,e,n,i){return s-=t,s=Ed(s,1/e,n),i!==void 0&&(s=Ed(s,1/i,n)),s}function QF(s,t=0,e=1,n=.5,i,a=s,l=s){if(mi.test(t)&&(t=parseFloat(t),t=Le(l.min,l.max,t/100)-l.min),typeof t!="number")return;let c=Le(a.min,a.max,n);s===a&&(c-=t),s.min=hS(s.min,t,e,c,i),s.max=hS(s.max,t,e,c,i)}function dS(s,t,[e,n,i],a,l){QF(s,t[e],t[n],t[i],t.scale,a,l)}const JF=["x","scaleX","originX"],t4=["y","scaleY","originY"];function fS(s,t,e,n){dS(s.x,t,JF,e?e.x:void 0,n?n.x:void 0),dS(s.y,t,t4,e?e.y:void 0,n?n.y:void 0)}function pS(s){return s.translate===0&&s.scale===1}function zT(s){return pS(s.x)&&pS(s.y)}function mS(s,t){return s.min===t.min&&s.max===t.max}function e4(s,t){return mS(s.x,t.x)&&mS(s.y,t.y)}function gS(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function jT(s,t){return gS(s.x,t.x)&&gS(s.y,t.y)}function yS(s){return Hn(s.x)/Hn(s.y)}function vS(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}class n4{constructor(){this.members=[]}add(t){fv(this.members,t),t.scheduleRender()}remove(t){if(pv(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(i=>t===i);if(e===0)return!1;let n;for(let i=e;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function s4(s,t,e){let n="";const i=s.x.translate/t.x,a=s.y.translate/t.y,l=e?.z||0;if((i||a||l)&&(n=`translate3d(${i}px, ${a}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:d,rotate:p,rotateX:f,rotateY:g,skewX:y,skewY:w}=e;d&&(n=`perspective(${d}px) ${n}`),p&&(n+=`rotate(${p}deg) `),f&&(n+=`rotateX(${f}deg) `),g&&(n+=`rotateY(${g}deg) `),y&&(n+=`skewX(${y}deg) `),w&&(n+=`skewY(${w}deg) `)}const c=s.x.scale*t.x,h=s.y.scale*t.y;return(c!==1||h!==1)&&(n+=`scale(${c}, ${h})`),n||"none"}const og=["","X","Y","Z"],i4=1e3;let r4=0;function lg(s,t,e,n){const{latestValues:i}=t;i[s]&&(e[s]=i[s],t.setStaticValue(s,0),n&&(n[s]=0))}function UT(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const e=CT(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:a}=s.options;window.MotionCancelOptimisedAnimation(e,"transform",Re,!(i||a))}const{parent:n}=s;n&&!n.hasCheckedOptimisedAppear&&UT(n)}function HT({attachResizeListener:s,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(l={},c=t?.()){this.id=r4++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(l4),this.nodes.forEach(d4),this.nodes.forEach(f4),this.nodes.forEach(c4)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new qF)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new yv),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const h=this.eventHandlers.get(l);h&&h.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=sT(l)&&!WI(l),this.instance=l;const{layoutId:c,layout:h,visualElement:d}=this.options;if(d&&!d.current&&d.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||c)&&(this.isLayoutDirty=!0),s){let p,f=0;const g=()=>this.root.updateBlockedByResize=!1;Re.read(()=>{f=window.innerWidth}),s(l,()=>{const y=window.innerWidth;y!==f&&(f=y,this.root.updateBlockedByResize=!0,p&&p(),p=XF(g,250),Jh.hasAnimatedSinceResize&&(Jh.hasAnimatedSinceResize=!1,this.nodes.forEach(_S)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:f,hasRelativeLayoutChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||d.getDefaultTransition()||v4,{onLayoutAnimationStart:v,onLayoutAnimationComplete:S}=d.getProps(),x=!this.targetLayout||!jT(this.targetLayout,y),A=!f&&g;if(this.options.layoutRoot||this.resumeFrom||A||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...kv(w,"layout"),onPlay:v,onComplete:S};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(p,A)}else f||_S(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Or(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(p4),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&UT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const f=this.path[p];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:c,layout:h}=this.options;if(c===void 0&&!h)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(wS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(h4),this.nodes.forEach(a4),this.nodes.forEach(o4)):this.nodes.forEach(wS),this.clearAllSnapshots();const c=Un.now();Sn.delta=yi(0,1e3/60,c-Sn.timestamp),Sn.timestamp=c,Sn.isProcessing=!0,Wm.update.process(Sn),Wm.preRender.process(Sn),Wm.render.process(Sn),Sn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Dv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(u4),this.sharedNodes.forEach(m4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Re.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Re.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Hn(this.snapshot.measuredBox.x)&&!Hn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=on(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const h=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!zT(this.projectionDelta),h=this.getTransformTemplate(),d=h?h(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;l&&this.instance&&(c||aa(this.latestValues)||p)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let h=this.removeElementScroll(c);return l&&(h=this.removeTransform(h)),b4(h),{animationId:this.root.animationId,measuredBox:c,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return on();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(w4))){const{scroll:d}=this.root;d&&(Mo(c.x,d.offset.x),Mo(c.y,d.offset.y))}return c}removeElementScroll(l){const c=on();if(Gs(c,l),this.scroll?.wasRoot)return c;for(let h=0;h<this.path.length;h++){const d=this.path[h],{scroll:p,options:f}=d;d!==this.root&&p&&f.layoutScroll&&(p.wasRoot&&Gs(c,l),Mo(c.x,p.offset.x),Mo(c.y,p.offset.y))}return c}applyTransform(l,c=!1){const h=on();Gs(h,l);for(let d=0;d<this.path.length;d++){const p=this.path[d];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Do(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),aa(p.latestValues)&&Do(h,p.latestValues)}return aa(this.latestValues)&&Do(h,this.latestValues),h}removeTransform(l){const c=on();Gs(c,l);for(let h=0;h<this.path.length;h++){const d=this.path[h];if(!d.instance||!aa(d.latestValues))continue;iy(d.latestValues)&&d.updateSnapshot();const p=on(),f=d.measurePageBox();Gs(p,f),fS(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return aa(this.latestValues)&&fS(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Sn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:f}=this.options;if(!this.layout||!(p||f))return;this.resolvedRelativeTargetAt=Sn.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=on(),this.targetWithTransforms=on()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),RF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gs(this.target,this.layout.layoutBox),wT(this.target,this.targetDelta)):Gs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||iy(this.parent.latestValues)||bT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,c,h){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=on(),this.relativeTargetOrigin=on(),Cd(this.relativeTargetOrigin,c,h),Gs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Sn.timestamp&&(h=!1),h)return;const{layout:d,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||p))return;Gs(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;j5(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=on());const{target:y}=l;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(uS(this.prevProjectionDelta.x,this.projectionDelta.x),uS(this.prevProjectionDelta.y,this.projectionDelta.y)),Ac(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==g||!vS(this.projectionDelta.x,this.prevProjectionDelta.x)||!vS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Oo(),this.projectionDelta=Oo(),this.projectionDeltaWithTransform=Oo()}setAnimationOrigin(l,c=!1){const h=this.snapshot,d=h?h.latestValues:{},p={...this.latestValues},f=Oo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const g=on(),y=h?h.source:void 0,w=this.layout?this.layout.source:void 0,v=y!==w,S=this.getStack(),x=!S||S.members.length<=1,A=!!(v&&!x&&this.options.crossfade===!0&&!this.path.some(y4));this.animationProgress=0;let E;this.mixTargetDelta=R=>{const T=R/1e3;xS(f.x,l.x,T),xS(f.y,l.y,T),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Cd(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),g4(this.relativeTarget,this.relativeTargetOrigin,g,T),E&&e4(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=on()),Gs(E,this.relativeTarget)),v&&(this.animationValues=p,WF(p,d,this.latestValues,T,A,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Or(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Re.update(()=>{Jh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Xo(0)),this.currentAnimation=$F(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(i4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:h,layout:d,latestValues:p}=l;if(!(!c||!h||!d)){if(this!==l&&this.layout&&d&&VT(this.options.animationType,this.layout.layoutBox,d.layoutBox)){h=this.target||on();const f=Hn(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+f;const g=Hn(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+g}Gs(c,h),Do(c,p),Ac(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new n4),this.sharedNodes.get(l).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:h}={}){const d=this.getStack();d&&d.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(c=!0),!c)return;const d={};h.z&&lg("z",l,d,this.animationValues);for(let p=0;p<og.length;p++)lg(`rotate${og[p]}`,l,d,this.animationValues),lg(`skew${og[p]}`,l,d,this.animationValues);l.render();for(const p in d)l.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Qh(c?.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Qh(c?.pointerEvents)||""),this.hasProjected&&!aa(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=d.animationValues||d.latestValues;this.applyTransformsToTarget();let f=s4(this.projectionDeltaWithTransform,this.treeScale,p);h&&(f=h(p,f)),l.transform=f;const{x:g,y}=this.projectionDelta;l.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,d.animationValues?l.opacity=d===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const w in sy){if(p[w]===void 0)continue;const{correct:v,applyTo:S,isCSSVariable:x}=sy[w],A=f==="none"?p[w]:v(p[w],d);if(S){const E=S.length;for(let R=0;R<E;R++)l[S[R]]=A}else x?this.options.visualElement.renderState.vars[w]=A:l[w]=A}this.options.layoutId&&(l.pointerEvents=d===this?Qh(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(bS),this.root.sharedNodes.clear()}}}function a4(s){s.updateLayout()}function o4(s){const t=s.resumeFrom?.snapshot||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:n}=s.layout,{animationType:i}=s.options,a=t.source!==s.layout.source;i==="size"?Ls(p=>{const f=a?t.measuredBox[p]:t.layoutBox[p],g=Hn(f);f.min=e[p].min,f.max=f.min+g}):VT(i,t.layoutBox,e)&&Ls(p=>{const f=a?t.measuredBox[p]:t.layoutBox[p],g=Hn(e[p]);f.max=f.min+g,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[p].max=s.relativeTarget[p].min+g)});const l=Oo();Ac(l,e,t.layoutBox);const c=Oo();a?Ac(c,s.applyTransform(n,!0),t.measuredBox):Ac(c,e,t.layoutBox);const h=!zT(l);let d=!1;if(!s.resumeFrom){const p=s.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:f,layout:g}=p;if(f&&g){const y=on();Cd(y,t.layoutBox,f.layoutBox);const w=on();Cd(w,e,g.layoutBox),jT(y,w)||(d=!0),p.options.layoutRoot&&(s.relativeTarget=w,s.relativeTargetOrigin=y,s.relativeParent=p)}}}s.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:d})}else if(s.isLead()){const{onExitComplete:e}=s.options;e&&e()}s.options.transition=void 0}function l4(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function c4(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function u4(s){s.clearSnapshot()}function bS(s){s.clearMeasurements()}function wS(s){s.isLayoutDirty=!1}function h4(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function _S(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function d4(s){s.resolveTargetDelta()}function f4(s){s.calcProjection()}function p4(s){s.resetSkewAndRotation()}function m4(s){s.removeLeadSnapshot()}function xS(s,t,e){s.translate=Le(t.translate,0,e),s.scale=Le(t.scale,1,e),s.origin=t.origin,s.originPoint=t.originPoint}function SS(s,t,e,n){s.min=Le(t.min,e.min,n),s.max=Le(t.max,e.max,n)}function g4(s,t,e,n){SS(s.x,t.x,e.x,n),SS(s.y,t.y,e.y,n)}function y4(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const v4={duration:.45,ease:[.4,0,.1,1]},AS=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),ES=AS("applewebkit/")&&!AS("chrome/")?Math.round:zs;function CS(s){s.min=ES(s.min),s.max=ES(s.max)}function b4(s){CS(s.x),CS(s.y)}function VT(s,t,e){return s==="position"||s==="preserve-aspect"&&!TF(yS(t),yS(e),.2)}function w4(s){return s!==s.root&&s.scroll?.wasRoot}const _4=HT({attachResizeListener:(s,t)=>Lc(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),cg={current:void 0},$T=HT({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!cg.current){const s=new _4({});s.mount(window),s.setOptions({layoutScroll:!0}),cg.current=s}return cg.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),x4={pan:{Feature:HF},drag:{Feature:UF,ProjectionNode:$T,MeasureLayout:BT}};function TS(s,t,e){const{props:n}=s;s.animationState&&n.whileHover&&s.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,a=n[i];a&&Re.postRender(()=>a(t,Yc(t)))}class S4 extends Br{mount(){const{current:t}=this.node;t&&(this.unmount=GI(t,(e,n)=>(TS(this.node,n,"Start"),i=>TS(this.node,i,"End"))))}unmount(){}}class A4 extends Br{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Gc(Lc(this.node.current,"focus",()=>this.onFocus()),Lc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function RS(s,t,e){const{props:n}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&n.whileTap&&s.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),a=n[i];a&&Re.postRender(()=>a(t,Yc(t)))}class E4 extends Br{mount(){const{current:t}=this.node;t&&(this.unmount=YI(t,(e,n)=>(RS(this.node,n,"Start"),(i,{success:a})=>RS(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const hy=new WeakMap,ug=new WeakMap,C4=s=>{const t=hy.get(s.target);t&&t(s)},T4=s=>{s.forEach(C4)};function R4({root:s,...t}){const e=s||document;ug.has(e)||ug.set(e,{});const n=ug.get(e),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(T4,{root:s,...t})),n[i]}function k4(s,t,e){const n=R4(t);return hy.set(s,e),n.observe(s),()=>{hy.delete(s),n.unobserve(s)}}const M4={some:0,all:1};class D4 extends Br{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:i="some",once:a}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:M4[i]},c=h=>{const{isIntersecting:d}=h;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:f}=this.node.getProps(),g=d?p:f;g&&g(h)};return k4(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(O4(t,e))&&this.startObserver()}unmount(){}}function O4({viewport:s={}},{viewport:t={}}={}){return e=>s[e]!==t[e]}const N4={inView:{Feature:D4},tap:{Feature:E4},focus:{Feature:A4},hover:{Feature:S4}},P4={layout:{ProjectionNode:$T,MeasureLayout:BT}},L4={..._F,...N4,...x4,...P4},B4=I5(L4,K5);var I4=Symbol.for("react.lazy"),Td=$d[" use ".trim().toString()];function F4(s){return typeof s=="object"&&s!==null&&"then"in s}function GT(s){return s!=null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===I4&&"_payload"in s&&F4(s._payload)}function qT(s){const t=j4(s),e=L.forwardRef((n,i)=>{let{children:a,...l}=n;GT(a)&&typeof Td=="function"&&(a=Td(a._payload));const c=L.Children.toArray(a),h=c.find(H4);if(h){const d=h.props.children,p=c.map(f=>f===h?L.Children.count(d)>1?L.Children.only(null):L.isValidElement(d)?d.props.children:null:f);return $.jsx(t,{...l,ref:i,children:L.isValidElement(d)?L.cloneElement(d,void 0,p):null})}return $.jsx(t,{...l,ref:i,children:a})});return e.displayName=`${s}.Slot`,e}var z4=qT("Slot");function j4(s){const t=L.forwardRef((e,n)=>{let{children:i,...a}=e;if(GT(i)&&typeof Td=="function"&&(i=Td(i._payload)),L.isValidElement(i)){const l=$4(i),c=V4(a,i.props);return i.type!==L.Fragment&&(c.ref=n?Yy(n,l):l),L.cloneElement(i,c)}return L.Children.count(i)>1?L.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var U4=Symbol("radix.slottable");function H4(s){return L.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===U4}function V4(s,t){const e={...t};for(const n in t){const i=s[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?e[n]=(...c)=>{const h=a(...c);return i(...c),h}:i&&(e[n]=i):n==="style"?e[n]={...i,...a}:n==="className"&&(e[n]=[i,a].filter(Boolean).join(" "))}return{...s,...e}}function $4(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}const kS=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,MS=jE,G4=(s,t)=>e=>{var n;if(t?.variants==null)return MS(s,e?.class,e?.className);const{variants:i,defaultVariants:a}=t,l=Object.keys(i).map(d=>{const p=e?.[d],f=a?.[d];if(p===null)return null;const g=kS(p)||kS(f);return i[d][g]}),c=e&&Object.entries(e).reduce((d,p)=>{let[f,g]=p;return g===void 0||(d[f]=g),d},{}),h=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,p)=>{let{class:f,className:g,...y}=p;return Object.entries(y).every(w=>{let[v,S]=w;return Array.isArray(S)?S.includes({...a,...c}[v]):{...a,...c}[v]===S})?[...d,f,g]:d},[]);return MS(s,l,h,e?.class,e?.className)},q4=G4("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function Bc({className:s,variant:t,size:e,asChild:n=!1,...i}){const a=n?z4:"button";return $.jsx(a,{"data-slot":"button",className:Dn(q4({variant:t,size:e,className:s})),...i})}function X4(s,t=[]){let e=[];function n(a,l){const c=L.createContext(l);c.displayName=a+"Context";const h=e.length;e=[...e,l];const d=f=>{const{scope:g,children:y,...w}=f,v=g?.[s]?.[h]||c,S=L.useMemo(()=>w,Object.values(w));return $.jsx(v.Provider,{value:S,children:y})};d.displayName=a+"Provider";function p(f,g){const y=g?.[s]?.[h]||c,w=L.useContext(y);if(w)return w;if(l!==void 0)return l;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[d,p]}const i=()=>{const a=e.map(l=>L.createContext(l));return function(c){const h=c?.[s]||a;return L.useMemo(()=>({[`__scope${s}`]:{...c,[s]:h}}),[c,h])}};return i.scopeName=s,[n,Y4(i,...t)]}function Y4(...s){const t=s[0];if(s.length===1)return t;const e=()=>{const n=s.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const l=n.reduce((c,{useScope:h,scopeName:d})=>{const f=h(a)[`__scope${d}`];return{...c,...f}},{});return L.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return e.scopeName=t.scopeName,e}var W4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Vv=W4.reduce((s,t)=>{const e=qT(`Primitive.${t}`),n=L.forwardRef((i,a)=>{const{asChild:l,...c}=i,h=l?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),$.jsx(h,{...c,ref:a})});return n.displayName=`Primitive.${t}`,{...s,[t]:n}},{}),$v="Progress",Gv=100,[K4]=X4($v),[Z4,Q4]=K4($v),XT=L.forwardRef((s,t)=>{const{__scopeProgress:e,value:n=null,max:i,getValueLabel:a=J4,...l}=s;(i||i===0)&&!DS(i)&&console.error(tz(`${i}`,"Progress"));const c=DS(i)?i:Gv;n!==null&&!OS(n,c)&&console.error(ez(`${n}`,"Progress"));const h=OS(n,c)?n:null,d=Rd(h)?a(h,c):void 0;return $.jsx(Z4,{scope:e,value:h,max:c,children:$.jsx(Vv.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Rd(h)?h:void 0,"aria-valuetext":d,role:"progressbar","data-state":KT(h,c),"data-value":h??void 0,"data-max":c,...l,ref:t})})});XT.displayName=$v;var YT="ProgressIndicator",WT=L.forwardRef((s,t)=>{const{__scopeProgress:e,...n}=s,i=Q4(YT,e);return $.jsx(Vv.div,{"data-state":KT(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:t})});WT.displayName=YT;function J4(s,t){return`${Math.round(s/t*100)}%`}function KT(s,t){return s==null?"indeterminate":s===t?"complete":"loading"}function Rd(s){return typeof s=="number"}function DS(s){return Rd(s)&&!isNaN(s)&&s>0}function OS(s,t){return Rd(s)&&!isNaN(s)&&s<=t&&s>=0}function tz(s,t){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Gv}\`.`}function ez(s,t){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Gv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var nz=XT,sz=WT;function iz({className:s,value:t,...e}){return $.jsx(nz,{"data-slot":"progress",className:Dn("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...e,children:$.jsx(sz,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}function rz({onFilesAdded:s,isProcessing:t}){const[e,n]=L.useState(!1),i=L.useRef(null),a=f=>{f.preventDefault(),f.stopPropagation(),t||n(!0)},l=f=>{f.preventDefault(),f.stopPropagation(),n(!1)},c=f=>{if(!f)return;const g=Array.from(f),y=[],w=[".pdf",".docx",".md",".txt"],v=10*1024*1024;g.forEach(S=>{if(!w.some(A=>S.name.toLowerCase().endsWith(A))){ca.error(`${S.name}: `);return}if(S.size>v){ca.error(`${S.name}:  ( 10MB)`);return}y.push(S)}),y.length>0&&s(y)},h=f=>{if(f.preventDefault(),f.stopPropagation(),n(!1),t){ca.warning("");return}c(f.dataTransfer.files)},d=f=>{t||(c(f.target.files),i.current&&(i.current.value=""))},p=()=>{!t&&i.current&&i.current.click()};return $.jsxs("div",{onClick:p,onDragOver:a,onDragLeave:l,onDrop:h,className:Dn("relative group cursor-pointer flex flex-col items-center justify-center w-full h-64 rounded-xl border-2 border-dashed transition-all duration-300 ease-out overflow-hidden bg-card",e?"border-primary bg-primary/5 scale-[1.01] shadow-lg":"border-border hover:border-primary/50 hover:bg-muted/30",t&&"opacity-50 cursor-not-allowed"),"data-source":"src/components/FileUpload.tsx:91:5",children:[$.jsx("input",{ref:i,type:"file",multiple:!0,className:"hidden",accept:".pdf,.docx,.md,.txt",onChange:d,disabled:t,"data-source":"src/components/FileUpload.tsx:104:7"}),$.jsx("div",{className:"absolute inset-0 bg-grid-slate-100 [mask-image:linear-gradient(0deg,white,rgba(255,255,255,0.6))] dark:bg-grid-slate-700/25 pointer-events-none","data-source":"src/components/FileUpload.tsx:114:7"}),$.jsxs("div",{className:"z-10 flex flex-col items-center space-y-4 text-center p-6","data-source":"src/components/FileUpload.tsx:116:7",children:[$.jsx("div",{className:Dn("p-4 rounded-full bg-primary/10 transition-transform duration-300",e?"scale-110":"group-hover:scale-105"),"data-source":"src/components/FileUpload.tsx:117:9",children:$.jsx(JO,{className:Dn("w-8 h-8 text-primary transition-colors",e?"text-primary":"text-primary/70")})}),$.jsxs("div",{className:"space-y-1","data-source":"src/components/FileUpload.tsx:127:9",children:[$.jsx("p",{className:"text-lg font-semibold text-foreground","data-source":"src/components/FileUpload.tsx:128:11",children:e?"":""}),$.jsx("p",{className:"text-sm text-muted-foreground","data-source":"src/components/FileUpload.tsx:131:11",children:" PDF, DOCX, Markdown ( 10MB)"})]})]})]})}function az({files:s,onRemove:t,onProcess:e}){if(s.length===0)return null;const n=s.every(a=>a.status==="completed"),i=s.some(a=>["uploading","processing","translating"].includes(a.status));return $.jsxs("div",{className:"w-full space-y-4 mt-6","data-source":"src/components/FileUpload.tsx:153:5",children:[$.jsxs("div",{className:"flex items-center justify-between","data-source":"src/components/FileUpload.tsx:154:7",children:[$.jsxs("h3",{className:"text-sm font-medium text-muted-foreground","data-source":"src/components/FileUpload.tsx:155:9",children:[" (",s.length,")"]}),s.length>0&&!i&&!n&&$.jsx(Bc,{onClick:e,size:"sm",className:"ml-auto",children:""})]}),$.jsx(i5,{mode:"popLayout",children:s.map(a=>$.jsxs(B4.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:"group relative flex items-center gap-4 p-4 rounded-lg border bg-card shadow-sm hover:shadow-md transition-all",children:[$.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10","data-source":"src/components/FileUpload.tsx:173:13",children:$.jsx(NO,{className:"h-5 w-5 text-primary"})}),$.jsxs("div",{className:"flex-1 min-w-0 space-y-1","data-source":"src/components/FileUpload.tsx:177:13",children:[$.jsxs("div",{className:"flex items-center justify-between mb-1","data-source":"src/components/FileUpload.tsx:178:15",children:[$.jsx("p",{className:"text-sm font-medium truncate pr-4","data-source":"src/components/FileUpload.tsx:179:17",children:a.name}),$.jsxs("span",{className:"text-xs text-muted-foreground whitespace-nowrap","data-source":"src/components/FileUpload.tsx:180:17",children:[(a.size/1024).toFixed(1)," KB"]})]}),$.jsxs("div",{className:"flex items-center gap-2","data-source":"src/components/FileUpload.tsx:185:15",children:[$.jsx(iz,{value:a.progress,className:"h-1.5 flex-1"}),$.jsx("span",{className:"text-xs w-16 text-right font-medium text-muted-foreground","data-source":"src/components/FileUpload.tsx:187:17",children:oz(a.status)})]})]}),a.status==="error"&&$.jsx("div",{className:"text-destructive","data-source":"src/components/FileUpload.tsx:194:16",children:$.jsx(RO,{className:"w-5 h-5"})}),a.status==="completed"&&$.jsx("div",{className:"text-green-500","data-source":"src/components/FileUpload.tsx:200:16",children:$.jsx(Xy,{className:"w-5 h-5"})}),a.status==="idle"&&$.jsx(Bc,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:l=>{l.stopPropagation(),t(a.id)},children:$.jsx(eN,{className:"w-4 h-4 text-muted-foreground hover:text-destructive"})})]},a.id))})]})}function oz(s){switch(s){case"idle":return"";case"uploading":return"...";case"processing":return"...";case"translating":return"...";case"completed":return"";case"error":return"";default:return""}}function hg({className:s,type:t,...e}){return $.jsx("input",{type:t,"data-slot":"input",className:Dn("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...e,"data-source":"src/components/ui/input.tsx:7:5"})}var lz="Label",ZT=L.forwardRef((s,t)=>$.jsx(Vv.label,{...s,ref:t,onMouseDown:e=>{e.target.closest("button, input, select, textarea")||(s.onMouseDown?.(e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));ZT.displayName=lz;var cz=ZT;function Ch({className:s,...t}){return $.jsx(cz,{"data-slot":"label",className:Dn("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}function NS({className:s,...t}){return $.jsx("div",{"data-slot":"card",className:Dn("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t,"data-source":"src/components/ui/card.tsx:7:5"})}function PS(s,[t,e]){return Math.min(e,Math.max(t,s))}function uz(s){const t=s+"CollectionProvider",[e,n]=Gd(t),[i,a]=e(t,{collectionRef:{current:null},itemMap:new Map}),l=v=>{const{scope:S,children:x}=v,A=St.useRef(null),E=St.useRef(new Map).current;return $.jsx(i,{scope:S,itemMap:E,collectionRef:A,children:x})};l.displayName=t;const c=s+"CollectionSlot",h=md(c),d=St.forwardRef((v,S)=>{const{scope:x,children:A}=v,E=a(c,x),R=Je(S,E.collectionRef);return $.jsx(h,{ref:R,children:A})});d.displayName=c;const p=s+"CollectionItemSlot",f="data-radix-collection-item",g=md(p),y=St.forwardRef((v,S)=>{const{scope:x,children:A,...E}=v,R=St.useRef(null),T=Je(S,R),O=a(p,x);return St.useEffect(()=>(O.itemMap.set(R,{ref:R,...E}),()=>{O.itemMap.delete(R)})),$.jsx(g,{[f]:"",ref:T,children:A})});y.displayName=p;function w(v){const S=a(s+"CollectionConsumer",v);return St.useCallback(()=>{const A=S.collectionRef.current;if(!A)return[];const E=Array.from(A.querySelectorAll(`[${f}]`));return Array.from(S.itemMap.values()).sort((O,D)=>E.indexOf(O.ref.current)-E.indexOf(D.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:l,Slot:d,ItemSlot:y},w,n]}var hz=L.createContext(void 0);function dz(s){const t=L.useContext(hz);return s||t||"ltr"}var dg=0;function fz(){L.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??LS()),document.body.insertAdjacentElement("beforeend",s[1]??LS()),dg++,()=>{dg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),dg--}},[])}function LS(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var fg="focusScope.autoFocusOnMount",pg="focusScope.autoFocusOnUnmount",BS={bubbles:!1,cancelable:!0},pz="FocusScope",QT=L.forwardRef((s,t)=>{const{loop:e=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...l}=s,[c,h]=L.useState(null),d=ba(i),p=ba(a),f=L.useRef(null),g=Je(t,v=>h(v)),y=L.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;L.useEffect(()=>{if(n){let v=function(E){if(y.paused||!c)return;const R=E.target;c.contains(R)?f.current=R:Er(f.current,{select:!0})},S=function(E){if(y.paused||!c)return;const R=E.relatedTarget;R!==null&&(c.contains(R)||Er(f.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const T of E)T.removedNodes.length>0&&Er(c)};document.addEventListener("focusin",v),document.addEventListener("focusout",S);const A=new MutationObserver(x);return c&&A.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",S),A.disconnect()}}},[n,c,y.paused]),L.useEffect(()=>{if(c){FS.add(y);const v=document.activeElement;if(!c.contains(v)){const x=new CustomEvent(fg,BS);c.addEventListener(fg,d),c.dispatchEvent(x),x.defaultPrevented||(mz(wz(JT(c)),{select:!0}),document.activeElement===v&&Er(c))}return()=>{c.removeEventListener(fg,d),setTimeout(()=>{const x=new CustomEvent(pg,BS);c.addEventListener(pg,p),c.dispatchEvent(x),x.defaultPrevented||Er(v??document.body,{select:!0}),c.removeEventListener(pg,p),FS.remove(y)},0)}}},[c,d,p,y]);const w=L.useCallback(v=>{if(!e&&!n||y.paused)return;const S=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(S&&x){const A=v.currentTarget,[E,R]=gz(A);E&&R?!v.shiftKey&&x===R?(v.preventDefault(),e&&Er(E,{select:!0})):v.shiftKey&&x===E&&(v.preventDefault(),e&&Er(R,{select:!0})):x===A&&v.preventDefault()}},[e,n,y.paused]);return $.jsx(Ue.div,{tabIndex:-1,...l,ref:g,onKeyDown:w})});QT.displayName=pz;function mz(s,{select:t=!1}={}){const e=document.activeElement;for(const n of s)if(Er(n,{select:t}),document.activeElement!==e)return}function gz(s){const t=JT(s),e=IS(t,s),n=IS(t.reverse(),s);return[e,n]}function JT(s){const t=[],e=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)t.push(e.currentNode);return t}function IS(s,t){for(const e of s)if(!yz(e,{upTo:t}))return e}function yz(s,{upTo:t}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(t!==void 0&&s===t)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function vz(s){return s instanceof HTMLInputElement&&"select"in s}function Er(s,{select:t=!1}={}){if(s&&s.focus){const e=document.activeElement;s.focus({preventScroll:!0}),s!==e&&vz(s)&&t&&s.select()}}var FS=bz();function bz(){let s=[];return{add(t){const e=s[0];t!==e&&e?.pause(),s=zS(s,t),s.unshift(t)},remove(t){s=zS(s,t),s[0]?.resume()}}}function zS(s,t){const e=[...s],n=e.indexOf(t);return n!==-1&&e.splice(n,1),e}function wz(s){return s.filter(t=>t.tagName!=="A")}function _z(s){const t=L.useRef({value:s,previous:s});return L.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var xz=function(s){if(typeof document>"u")return null;var t=Array.isArray(s)?s[0]:s;return t.ownerDocument.body},go=new WeakMap,Th=new WeakMap,Rh={},mg=0,t2=function(s){return s&&(s.host||t2(s.parentNode))},Sz=function(s,t){return t.map(function(e){if(s.contains(e))return e;var n=t2(e);return n&&s.contains(n)?n:(console.error("aria-hidden",e,"in not contained inside",s,". Doing nothing"),null)}).filter(function(e){return!!e})},Az=function(s,t,e,n){var i=Sz(t,Array.isArray(s)?s:[s]);Rh[e]||(Rh[e]=new WeakMap);var a=Rh[e],l=[],c=new Set,h=new Set(i),d=function(f){!f||c.has(f)||(c.add(f),d(f.parentNode))};i.forEach(d);var p=function(f){!f||h.has(f)||Array.prototype.forEach.call(f.children,function(g){if(c.has(g))p(g);else try{var y=g.getAttribute(n),w=y!==null&&y!=="false",v=(go.get(g)||0)+1,S=(a.get(g)||0)+1;go.set(g,v),a.set(g,S),l.push(g),v===1&&w&&Th.set(g,!0),S===1&&g.setAttribute(e,"true"),w||g.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",g,x)}})};return p(t),c.clear(),mg++,function(){l.forEach(function(f){var g=go.get(f)-1,y=a.get(f)-1;go.set(f,g),a.set(f,y),g||(Th.has(f)||f.removeAttribute(n),Th.delete(f)),y||f.removeAttribute(e)}),mg--,mg||(go=new WeakMap,go=new WeakMap,Th=new WeakMap,Rh={})}},Ez=function(s,t,e){e===void 0&&(e="data-aria-hidden");var n=Array.from(Array.isArray(s)?s:[s]),i=xz(s);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),Az(n,i,e,"aria-hidden")):function(){return null}},hi=function(){return hi=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},hi.apply(this,arguments)};function e2(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(e[n[i]]=s[n[i]]);return e}function Cz(s,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return s.concat(a||Array.prototype.slice.call(t))}var td="right-scroll-bar-position",ed="width-before-scroll-bar",Tz="with-scroll-bars-hidden",Rz="--removed-body-scroll-bar-size";function gg(s,t){return typeof s=="function"?s(t):s&&(s.current=t),s}function kz(s,t){var e=L.useState(function(){return{value:s,callback:t,facade:{get current(){return e.value},set current(n){var i=e.value;i!==n&&(e.value=n,e.callback(n,i))}}}})[0];return e.callback=t,e.facade}var Mz=typeof window<"u"?L.useLayoutEffect:L.useEffect,jS=new WeakMap;function Dz(s,t){var e=kz(null,function(n){return s.forEach(function(i){return gg(i,n)})});return Mz(function(){var n=jS.get(e);if(n){var i=new Set(n),a=new Set(s),l=e.current;i.forEach(function(c){a.has(c)||gg(c,null)}),a.forEach(function(c){i.has(c)||gg(c,l)})}jS.set(e,s)},[s]),e}function Oz(s){return s}function Nz(s,t){t===void 0&&(t=Oz);var e=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:s},useMedium:function(a){var l=t(a,n);return e.push(l),function(){e=e.filter(function(c){return c!==l})}},assignSyncMedium:function(a){for(n=!0;e.length;){var l=e;e=[],l.forEach(a)}e={push:function(c){return a(c)},filter:function(){return e}}},assignMedium:function(a){n=!0;var l=[];if(e.length){var c=e;e=[],c.forEach(a),l=e}var h=function(){var p=l;l=[],p.forEach(a)},d=function(){return Promise.resolve().then(h)};d(),e={push:function(p){l.push(p),d()},filter:function(p){return l=l.filter(p),e}}}};return i}function Pz(s){s===void 0&&(s={});var t=Nz(null);return t.options=hi({async:!0,ssr:!1},s),t}var n2=function(s){var t=s.sideCar,e=e2(s,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return L.createElement(n,hi({},e))};n2.isSideCarExport=!0;function Lz(s,t){return s.useMedium(t),n2}var s2=Pz(),yg=function(){},rf=L.forwardRef(function(s,t){var e=L.useRef(null),n=L.useState({onScrollCapture:yg,onWheelCapture:yg,onTouchMoveCapture:yg}),i=n[0],a=n[1],l=s.forwardProps,c=s.children,h=s.className,d=s.removeScrollBar,p=s.enabled,f=s.shards,g=s.sideCar,y=s.noRelative,w=s.noIsolation,v=s.inert,S=s.allowPinchZoom,x=s.as,A=x===void 0?"div":x,E=s.gapMode,R=e2(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=g,O=Dz([e,t]),D=hi(hi({},R),i);return L.createElement(L.Fragment,null,p&&L.createElement(T,{sideCar:s2,removeScrollBar:d,shards:f,noRelative:y,noIsolation:w,inert:v,setCallbacks:a,allowPinchZoom:!!S,lockRef:e,gapMode:E}),l?L.cloneElement(L.Children.only(c),hi(hi({},D),{ref:O})):L.createElement(A,hi({},D,{className:h,ref:O}),c))});rf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rf.classNames={fullWidth:ed,zeroRight:td};var Bz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Iz(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var t=Bz();return t&&s.setAttribute("nonce",t),s}function Fz(s,t){s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}function zz(s){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(s)}var jz=function(){var s=0,t=null;return{add:function(e){s==0&&(t=Iz())&&(Fz(t,e),zz(t)),s++},remove:function(){s--,!s&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Uz=function(){var s=jz();return function(t,e){L.useEffect(function(){return s.add(t),function(){s.remove()}},[t&&e])}},i2=function(){var s=Uz(),t=function(e){var n=e.styles,i=e.dynamic;return s(n,i),null};return t},Hz={left:0,top:0,right:0,gap:0},vg=function(s){return parseInt(s||"",10)||0},Vz=function(s){var t=window.getComputedStyle(document.body),e=t[s==="padding"?"paddingLeft":"marginLeft"],n=t[s==="padding"?"paddingTop":"marginTop"],i=t[s==="padding"?"paddingRight":"marginRight"];return[vg(e),vg(n),vg(i)]},$z=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return Hz;var t=Vz(s),e=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-e+t[2]-t[0])}},Gz=i2(),zo="data-scroll-locked",qz=function(s,t,e,n){var i=s.left,a=s.top,l=s.right,c=s.gap;return e===void 0&&(e="margin"),`
  .`.concat(Tz,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(zo,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),e==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),e==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(td,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(ed,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(td," .").concat(td,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ed," .").concat(ed,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(zo,`] {
    `).concat(Rz,": ").concat(c,`px;
  }
`)},US=function(){var s=parseInt(document.body.getAttribute(zo)||"0",10);return isFinite(s)?s:0},Xz=function(){L.useEffect(function(){return document.body.setAttribute(zo,(US()+1).toString()),function(){var s=US()-1;s<=0?document.body.removeAttribute(zo):document.body.setAttribute(zo,s.toString())}},[])},Yz=function(s){var t=s.noRelative,e=s.noImportant,n=s.gapMode,i=n===void 0?"margin":n;Xz();var a=L.useMemo(function(){return $z(i)},[i]);return L.createElement(Gz,{styles:qz(a,!t,i,e?"":"!important")})},dy=!1;if(typeof window<"u")try{var kh=Object.defineProperty({},"passive",{get:function(){return dy=!0,!0}});window.addEventListener("test",kh,kh),window.removeEventListener("test",kh,kh)}catch{dy=!1}var yo=dy?{passive:!1}:!1,Wz=function(s){return s.tagName==="TEXTAREA"},r2=function(s,t){if(!(s instanceof Element))return!1;var e=window.getComputedStyle(s);return e[t]!=="hidden"&&!(e.overflowY===e.overflowX&&!Wz(s)&&e[t]==="visible")},Kz=function(s){return r2(s,"overflowY")},Zz=function(s){return r2(s,"overflowX")},HS=function(s,t){var e=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=a2(s,n);if(i){var a=o2(s,n),l=a[1],c=a[2];if(l>c)return!0}n=n.parentNode}while(n&&n!==e.body);return!1},Qz=function(s){var t=s.scrollTop,e=s.scrollHeight,n=s.clientHeight;return[t,e,n]},Jz=function(s){var t=s.scrollLeft,e=s.scrollWidth,n=s.clientWidth;return[t,e,n]},a2=function(s,t){return s==="v"?Kz(t):Zz(t)},o2=function(s,t){return s==="v"?Qz(t):Jz(t)},t6=function(s,t){return s==="h"&&t==="rtl"?-1:1},e6=function(s,t,e,n,i){var a=t6(s,window.getComputedStyle(t).direction),l=a*n,c=e.target,h=t.contains(c),d=!1,p=l>0,f=0,g=0;do{if(!c)break;var y=o2(s,c),w=y[0],v=y[1],S=y[2],x=v-S-a*w;(w||x)&&a2(s,c)&&(f+=x,g+=w);var A=c.parentNode;c=A&&A.nodeType===Node.DOCUMENT_FRAGMENT_NODE?A.host:A}while(!h&&c!==document.body||h&&(t.contains(c)||t===c));return(p&&Math.abs(f)<1||!p&&Math.abs(g)<1)&&(d=!0),d},Mh=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},VS=function(s){return[s.deltaX,s.deltaY]},$S=function(s){return s&&"current"in s?s.current:s},n6=function(s,t){return s[0]===t[0]&&s[1]===t[1]},s6=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},i6=0,vo=[];function r6(s){var t=L.useRef([]),e=L.useRef([0,0]),n=L.useRef(),i=L.useState(i6++)[0],a=L.useState(i2)[0],l=L.useRef(s);L.useEffect(function(){l.current=s},[s]),L.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(i));var v=Cz([s.lockRef.current],(s.shards||[]).map($S),!0).filter(Boolean);return v.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[s.inert,s.lockRef.current,s.shards]);var c=L.useCallback(function(v,S){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!l.current.allowPinchZoom;var x=Mh(v),A=e.current,E="deltaX"in v?v.deltaX:A[0]-x[0],R="deltaY"in v?v.deltaY:A[1]-x[1],T,O=v.target,D=Math.abs(E)>Math.abs(R)?"h":"v";if("touches"in v&&D==="h"&&O.type==="range")return!1;var N=window.getSelection(),I=N&&N.anchorNode,G=I?I===O||I.contains(O):!1;if(G)return!1;var W=HS(D,O);if(!W)return!0;if(W?T=D:(T=D==="v"?"h":"v",W=HS(D,O)),!W)return!1;if(!n.current&&"changedTouches"in v&&(E||R)&&(n.current=T),!T)return!0;var F=n.current||T;return e6(F,S,v,F==="h"?E:R)},[]),h=L.useCallback(function(v){var S=v;if(!(!vo.length||vo[vo.length-1]!==a)){var x="deltaY"in S?VS(S):Mh(S),A=t.current.filter(function(T){return T.name===S.type&&(T.target===S.target||S.target===T.shadowParent)&&n6(T.delta,x)})[0];if(A&&A.should){S.cancelable&&S.preventDefault();return}if(!A){var E=(l.current.shards||[]).map($S).filter(Boolean).filter(function(T){return T.contains(S.target)}),R=E.length>0?c(S,E[0]):!l.current.noIsolation;R&&S.cancelable&&S.preventDefault()}}},[]),d=L.useCallback(function(v,S,x,A){var E={name:v,delta:S,target:x,should:A,shadowParent:a6(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(R){return R!==E})},1)},[]),p=L.useCallback(function(v){e.current=Mh(v),n.current=void 0},[]),f=L.useCallback(function(v){d(v.type,VS(v),v.target,c(v,s.lockRef.current))},[]),g=L.useCallback(function(v){d(v.type,Mh(v),v.target,c(v,s.lockRef.current))},[]);L.useEffect(function(){return vo.push(a),s.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:g}),document.addEventListener("wheel",h,yo),document.addEventListener("touchmove",h,yo),document.addEventListener("touchstart",p,yo),function(){vo=vo.filter(function(v){return v!==a}),document.removeEventListener("wheel",h,yo),document.removeEventListener("touchmove",h,yo),document.removeEventListener("touchstart",p,yo)}},[]);var y=s.removeScrollBar,w=s.inert;return L.createElement(L.Fragment,null,w?L.createElement(a,{styles:s6(i)}):null,y?L.createElement(Yz,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function a6(s){for(var t=null;s!==null;)s instanceof ShadowRoot&&(t=s.host,s=s.host),s=s.parentNode;return t}const o6=Lz(s2,r6);var l2=L.forwardRef(function(s,t){return L.createElement(rf,hi({},s,{ref:t,sideCar:o6}))});l2.classNames=rf.classNames;var l6=[" ","Enter","ArrowUp","ArrowDown"],c6=[" ","Enter"],_a="Select",[af,of,u6]=uz(_a),[sl]=Gd(_a,[u6,Kd]),lf=Kd(),[h6,Ir]=sl(_a),[d6,f6]=sl(_a),c2=s=>{const{__scopeSelect:t,children:e,open:n,defaultOpen:i,onOpenChange:a,value:l,defaultValue:c,onValueChange:h,dir:d,name:p,autoComplete:f,disabled:g,required:y,form:w}=s,v=lf(t),[S,x]=L.useState(null),[A,E]=L.useState(null),[R,T]=L.useState(!1),O=dz(d),[D,N]=Qx({prop:n,defaultProp:i??!1,onChange:a,caller:_a}),[I,G]=Qx({prop:l,defaultProp:c,onChange:h,caller:_a}),W=L.useRef(null),F=S?w||!!S.closest("form"):!0,[Y,k]=L.useState(new Set),J=Array.from(Y).map(z=>z.props.value).join(";");return $.jsx(fL,{...v,children:$.jsxs(h6,{required:y,scope:t,trigger:S,onTriggerChange:x,valueNode:A,onValueNodeChange:E,valueNodeHasChildren:R,onValueNodeHasChildrenChange:T,contentId:Ky(),value:I,onValueChange:G,open:D,onOpenChange:N,dir:O,triggerPointerDownPosRef:W,disabled:g,children:[$.jsx(af.Provider,{scope:t,children:$.jsx(d6,{scope:s.__scopeSelect,onNativeOptionAdd:L.useCallback(z=>{k(j=>new Set(j).add(z))},[]),onNativeOptionRemove:L.useCallback(z=>{k(j=>{const q=new Set(j);return q.delete(z),q})},[]),children:e})}),F?$.jsxs(D2,{"aria-hidden":!0,required:y,tabIndex:-1,name:p,autoComplete:f,value:I,onChange:z=>G(z.target.value),disabled:g,form:w,children:[I===void 0?$.jsx("option",{value:""}):null,Array.from(Y)]},J):null]})})};c2.displayName=_a;var u2="SelectTrigger",h2=L.forwardRef((s,t)=>{const{__scopeSelect:e,disabled:n=!1,...i}=s,a=lf(e),l=Ir(u2,e),c=l.disabled||n,h=Je(t,l.onTriggerChange),d=of(e),p=L.useRef("touch"),[f,g,y]=N2(v=>{const S=d().filter(E=>!E.disabled),x=S.find(E=>E.value===l.value),A=P2(S,v,x);A!==void 0&&l.onValueChange(A.value)}),w=v=>{c||(l.onOpenChange(!0),y()),v&&(l.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return $.jsx(CE,{asChild:!0,...a,children:$.jsx(Ue.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":O2(l.value)?"":void 0,...i,ref:h,onClick:Ee(i.onClick,v=>{v.currentTarget.focus(),p.current!=="mouse"&&w(v)}),onPointerDown:Ee(i.onPointerDown,v=>{p.current=v.pointerType;const S=v.target;S.hasPointerCapture(v.pointerId)&&S.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(w(v),v.preventDefault())}),onKeyDown:Ee(i.onKeyDown,v=>{const S=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&g(v.key),!(S&&v.key===" ")&&l6.includes(v.key)&&(w(),v.preventDefault())})})})});h2.displayName=u2;var d2="SelectValue",f2=L.forwardRef((s,t)=>{const{__scopeSelect:e,className:n,style:i,children:a,placeholder:l="",...c}=s,h=Ir(d2,e),{onValueNodeHasChildrenChange:d}=h,p=a!==void 0,f=Je(t,h.onValueNodeChange);return On(()=>{d(p)},[d,p]),$.jsx(Ue.span,{...c,ref:f,style:{pointerEvents:"none"},children:O2(h.value)?$.jsx($.Fragment,{children:l}):a})});f2.displayName=d2;var p6="SelectIcon",p2=L.forwardRef((s,t)=>{const{__scopeSelect:e,children:n,...i}=s;return $.jsx(Ue.span,{"aria-hidden":!0,...i,ref:t,children:n||""})});p2.displayName=p6;var m6="SelectPortal",m2=s=>$.jsx(kE,{asChild:!0,...s});m2.displayName=m6;var xa="SelectContent",g2=L.forwardRef((s,t)=>{const e=Ir(xa,s.__scopeSelect),[n,i]=L.useState();if(On(()=>{i(new DocumentFragment)},[]),!e.open){const a=n;return a?Vc.createPortal($.jsx(y2,{scope:s.__scopeSelect,children:$.jsx(af.Slot,{scope:s.__scopeSelect,children:$.jsx("div",{children:s.children})})}),a):null}return $.jsx(v2,{...s,ref:t})});g2.displayName=xa;var Xs=10,[y2,Fr]=sl(xa),g6="SelectContentImpl",y6=md("SelectContent.RemoveScroll"),v2=L.forwardRef((s,t)=>{const{__scopeSelect:e,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:l,side:c,sideOffset:h,align:d,alignOffset:p,arrowPadding:f,collisionBoundary:g,collisionPadding:y,sticky:w,hideWhenDetached:v,avoidCollisions:S,...x}=s,A=Ir(xa,e),[E,R]=L.useState(null),[T,O]=L.useState(null),D=Je(t,ut=>R(ut)),[N,I]=L.useState(null),[G,W]=L.useState(null),F=of(e),[Y,k]=L.useState(!1),J=L.useRef(!1);L.useEffect(()=>{if(E)return Ez(E)},[E]),fz();const z=L.useCallback(ut=>{const[vt,...Et]=F().map(Ht=>Ht.ref.current),[Lt]=Et.slice(-1),Ot=document.activeElement;for(const Ht of ut)if(Ht===Ot||(Ht?.scrollIntoView({block:"nearest"}),Ht===vt&&T&&(T.scrollTop=0),Ht===Lt&&T&&(T.scrollTop=T.scrollHeight),Ht?.focus(),document.activeElement!==Ot))return},[F,T]),j=L.useCallback(()=>z([N,E]),[z,N,E]);L.useEffect(()=>{Y&&j()},[Y,j]);const{onOpenChange:q,triggerPointerDownPosRef:nt}=A;L.useEffect(()=>{if(E){let ut={x:0,y:0};const vt=Lt=>{ut={x:Math.abs(Math.round(Lt.pageX)-(nt.current?.x??0)),y:Math.abs(Math.round(Lt.pageY)-(nt.current?.y??0))}},Et=Lt=>{ut.x<=10&&ut.y<=10?Lt.preventDefault():E.contains(Lt.target)||q(!1),document.removeEventListener("pointermove",vt),nt.current=null};return nt.current!==null&&(document.addEventListener("pointermove",vt),document.addEventListener("pointerup",Et,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",vt),document.removeEventListener("pointerup",Et,{capture:!0})}}},[E,q,nt]),L.useEffect(()=>{const ut=()=>q(!1);return window.addEventListener("blur",ut),window.addEventListener("resize",ut),()=>{window.removeEventListener("blur",ut),window.removeEventListener("resize",ut)}},[q]);const[pt,P]=N2(ut=>{const vt=F().filter(Ot=>!Ot.disabled),Et=vt.find(Ot=>Ot.ref.current===document.activeElement),Lt=P2(vt,ut,Et);Lt&&setTimeout(()=>Lt.ref.current.focus())}),U=L.useCallback((ut,vt,Et)=>{const Lt=!J.current&&!Et;(A.value!==void 0&&A.value===vt||Lt)&&(I(ut),Lt&&(J.current=!0))},[A.value]),K=L.useCallback(()=>E?.focus(),[E]),tt=L.useCallback((ut,vt,Et)=>{const Lt=!J.current&&!Et;(A.value!==void 0&&A.value===vt||Lt)&&W(ut)},[A.value]),it=n==="popper"?fy:b2,xt=it===fy?{side:c,sideOffset:h,align:d,alignOffset:p,arrowPadding:f,collisionBoundary:g,collisionPadding:y,sticky:w,hideWhenDetached:v,avoidCollisions:S}:{};return $.jsx(y2,{scope:e,content:E,viewport:T,onViewportChange:O,itemRefCallback:U,selectedItem:N,onItemLeave:K,itemTextRefCallback:tt,focusSelectedItem:j,selectedItemText:G,position:n,isPositioned:Y,searchRef:pt,children:$.jsx(l2,{as:y6,allowPinchZoom:!0,children:$.jsx(QT,{asChild:!0,trapped:A.open,onMountAutoFocus:ut=>{ut.preventDefault()},onUnmountAutoFocus:Ee(i,ut=>{A.trigger?.focus({preventScroll:!0}),ut.preventDefault()}),children:$.jsx(Wy,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:ut=>ut.preventDefault(),onDismiss:()=>A.onOpenChange(!1),children:$.jsx(it,{role:"listbox",id:A.contentId,"data-state":A.open?"open":"closed",dir:A.dir,onContextMenu:ut=>ut.preventDefault(),...x,...xt,onPlaced:()=>k(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Ee(x.onKeyDown,ut=>{const vt=ut.ctrlKey||ut.altKey||ut.metaKey;if(ut.key==="Tab"&&ut.preventDefault(),!vt&&ut.key.length===1&&P(ut.key),["ArrowUp","ArrowDown","Home","End"].includes(ut.key)){let Lt=F().filter(Ot=>!Ot.disabled).map(Ot=>Ot.ref.current);if(["ArrowUp","End"].includes(ut.key)&&(Lt=Lt.slice().reverse()),["ArrowUp","ArrowDown"].includes(ut.key)){const Ot=ut.target,Ht=Lt.indexOf(Ot);Lt=Lt.slice(Ht+1)}setTimeout(()=>z(Lt)),ut.preventDefault()}})})})})})})});v2.displayName=g6;var v6="SelectItemAlignedPosition",b2=L.forwardRef((s,t)=>{const{__scopeSelect:e,onPlaced:n,...i}=s,a=Ir(xa,e),l=Fr(xa,e),[c,h]=L.useState(null),[d,p]=L.useState(null),f=Je(t,D=>p(D)),g=of(e),y=L.useRef(!1),w=L.useRef(!0),{viewport:v,selectedItem:S,selectedItemText:x,focusSelectedItem:A}=l,E=L.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&d&&v&&S&&x){const D=a.trigger.getBoundingClientRect(),N=d.getBoundingClientRect(),I=a.valueNode.getBoundingClientRect(),G=x.getBoundingClientRect();if(a.dir!=="rtl"){const Ot=G.left-N.left,Ht=I.left-Ot,le=D.left-Ht,M=D.width+le,ft=Math.max(M,N.width),ct=window.innerWidth-Xs,V=PS(Ht,[Xs,Math.max(Xs,ct-ft)]);c.style.minWidth=M+"px",c.style.left=V+"px"}else{const Ot=N.right-G.right,Ht=window.innerWidth-I.right-Ot,le=window.innerWidth-D.right-Ht,M=D.width+le,ft=Math.max(M,N.width),ct=window.innerWidth-Xs,V=PS(Ht,[Xs,Math.max(Xs,ct-ft)]);c.style.minWidth=M+"px",c.style.right=V+"px"}const W=g(),F=window.innerHeight-Xs*2,Y=v.scrollHeight,k=window.getComputedStyle(d),J=parseInt(k.borderTopWidth,10),z=parseInt(k.paddingTop,10),j=parseInt(k.borderBottomWidth,10),q=parseInt(k.paddingBottom,10),nt=J+z+Y+q+j,pt=Math.min(S.offsetHeight*5,nt),P=window.getComputedStyle(v),U=parseInt(P.paddingTop,10),K=parseInt(P.paddingBottom,10),tt=D.top+D.height/2-Xs,it=F-tt,xt=S.offsetHeight/2,ut=S.offsetTop+xt,vt=J+z+ut,Et=nt-vt;if(vt<=tt){const Ot=W.length>0&&S===W[W.length-1].ref.current;c.style.bottom="0px";const Ht=d.clientHeight-v.offsetTop-v.offsetHeight,le=Math.max(it,xt+(Ot?K:0)+Ht+j),M=vt+le;c.style.height=M+"px"}else{const Ot=W.length>0&&S===W[0].ref.current;c.style.top="0px";const le=Math.max(tt,J+v.offsetTop+(Ot?U:0)+xt)+Et;c.style.height=le+"px",v.scrollTop=vt-tt+v.offsetTop}c.style.margin=`${Xs}px 0`,c.style.minHeight=pt+"px",c.style.maxHeight=F+"px",n?.(),requestAnimationFrame(()=>y.current=!0)}},[g,a.trigger,a.valueNode,c,d,v,S,x,a.dir,n]);On(()=>E(),[E]);const[R,T]=L.useState();On(()=>{d&&T(window.getComputedStyle(d).zIndex)},[d]);const O=L.useCallback(D=>{D&&w.current===!0&&(E(),A?.(),w.current=!1)},[E,A]);return $.jsx(w6,{scope:e,contentWrapper:c,shouldExpandOnScrollRef:y,onScrollButtonChange:O,children:$.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:$.jsx(Ue.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});b2.displayName=v6;var b6="SelectPopperPosition",fy=L.forwardRef((s,t)=>{const{__scopeSelect:e,align:n="start",collisionPadding:i=Xs,...a}=s,l=lf(e);return $.jsx(TE,{...l,...a,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});fy.displayName=b6;var[w6,qv]=sl(xa,{}),py="SelectViewport",w2=L.forwardRef((s,t)=>{const{__scopeSelect:e,nonce:n,...i}=s,a=Fr(py,e),l=qv(py,e),c=Je(t,a.onViewportChange),h=L.useRef(0);return $.jsxs($.Fragment,{children:[$.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),$.jsx(af.Slot,{scope:e,children:$.jsx(Ue.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Ee(i.onScroll,d=>{const p=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:g}=l;if(g?.current&&f){const y=Math.abs(h.current-p.scrollTop);if(y>0){const w=window.innerHeight-Xs*2,v=parseFloat(f.style.minHeight),S=parseFloat(f.style.height),x=Math.max(v,S);if(x<w){const A=x+y,E=Math.min(w,A),R=A-E;f.style.height=E+"px",f.style.bottom==="0px"&&(p.scrollTop=R>0?R:0,f.style.justifyContent="flex-end")}}}h.current=p.scrollTop})})})]})});w2.displayName=py;var _2="SelectGroup",[_6,x6]=sl(_2),S6=L.forwardRef((s,t)=>{const{__scopeSelect:e,...n}=s,i=Ky();return $.jsx(_6,{scope:e,id:i,children:$.jsx(Ue.div,{role:"group","aria-labelledby":i,...n,ref:t})})});S6.displayName=_2;var x2="SelectLabel",A6=L.forwardRef((s,t)=>{const{__scopeSelect:e,...n}=s,i=x6(x2,e);return $.jsx(Ue.div,{id:i.id,...n,ref:t})});A6.displayName=x2;var kd="SelectItem",[E6,S2]=sl(kd),A2=L.forwardRef((s,t)=>{const{__scopeSelect:e,value:n,disabled:i=!1,textValue:a,...l}=s,c=Ir(kd,e),h=Fr(kd,e),d=c.value===n,[p,f]=L.useState(a??""),[g,y]=L.useState(!1),w=Je(t,A=>h.itemRefCallback?.(A,n,i)),v=Ky(),S=L.useRef("touch"),x=()=>{i||(c.onValueChange(n),c.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return $.jsx(E6,{scope:e,value:n,disabled:i,textId:v,isSelected:d,onItemTextChange:L.useCallback(A=>{f(E=>E||(A?.textContent??"").trim())},[]),children:$.jsx(af.ItemSlot,{scope:e,value:n,disabled:i,textValue:p,children:$.jsx(Ue.div,{role:"option","aria-labelledby":v,"data-highlighted":g?"":void 0,"aria-selected":d&&g,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...l,ref:w,onFocus:Ee(l.onFocus,()=>y(!0)),onBlur:Ee(l.onBlur,()=>y(!1)),onClick:Ee(l.onClick,()=>{S.current!=="mouse"&&x()}),onPointerUp:Ee(l.onPointerUp,()=>{S.current==="mouse"&&x()}),onPointerDown:Ee(l.onPointerDown,A=>{S.current=A.pointerType}),onPointerMove:Ee(l.onPointerMove,A=>{S.current=A.pointerType,i?h.onItemLeave?.():S.current==="mouse"&&A.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ee(l.onPointerLeave,A=>{A.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:Ee(l.onKeyDown,A=>{h.searchRef?.current!==""&&A.key===" "||(c6.includes(A.key)&&x(),A.key===" "&&A.preventDefault())})})})})});A2.displayName=kd;var lc="SelectItemText",E2=L.forwardRef((s,t)=>{const{__scopeSelect:e,className:n,style:i,...a}=s,l=Ir(lc,e),c=Fr(lc,e),h=S2(lc,e),d=f6(lc,e),[p,f]=L.useState(null),g=Je(t,x=>f(x),h.onItemTextChange,x=>c.itemTextRefCallback?.(x,h.value,h.disabled)),y=p?.textContent,w=L.useMemo(()=>$.jsx("option",{value:h.value,disabled:h.disabled,children:y},h.value),[h.disabled,h.value,y]),{onNativeOptionAdd:v,onNativeOptionRemove:S}=d;return On(()=>(v(w),()=>S(w)),[v,S,w]),$.jsxs($.Fragment,{children:[$.jsx(Ue.span,{id:h.textId,...a,ref:g}),h.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Vc.createPortal(a.children,l.valueNode):null]})});E2.displayName=lc;var C2="SelectItemIndicator",T2=L.forwardRef((s,t)=>{const{__scopeSelect:e,...n}=s;return S2(C2,e).isSelected?$.jsx(Ue.span,{"aria-hidden":!0,...n,ref:t}):null});T2.displayName=C2;var my="SelectScrollUpButton",R2=L.forwardRef((s,t)=>{const e=Fr(my,s.__scopeSelect),n=qv(my,s.__scopeSelect),[i,a]=L.useState(!1),l=Je(t,n.onScrollButtonChange);return On(()=>{if(e.viewport&&e.isPositioned){let c=function(){const d=h.scrollTop>0;a(d)};const h=e.viewport;return c(),h.addEventListener("scroll",c),()=>h.removeEventListener("scroll",c)}},[e.viewport,e.isPositioned]),i?$.jsx(M2,{...s,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:h}=e;c&&h&&(c.scrollTop=c.scrollTop-h.offsetHeight)}}):null});R2.displayName=my;var gy="SelectScrollDownButton",k2=L.forwardRef((s,t)=>{const e=Fr(gy,s.__scopeSelect),n=qv(gy,s.__scopeSelect),[i,a]=L.useState(!1),l=Je(t,n.onScrollButtonChange);return On(()=>{if(e.viewport&&e.isPositioned){let c=function(){const d=h.scrollHeight-h.clientHeight,p=Math.ceil(h.scrollTop)<d;a(p)};const h=e.viewport;return c(),h.addEventListener("scroll",c),()=>h.removeEventListener("scroll",c)}},[e.viewport,e.isPositioned]),i?$.jsx(M2,{...s,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:h}=e;c&&h&&(c.scrollTop=c.scrollTop+h.offsetHeight)}}):null});k2.displayName=gy;var M2=L.forwardRef((s,t)=>{const{__scopeSelect:e,onAutoScroll:n,...i}=s,a=Fr("SelectScrollButton",e),l=L.useRef(null),c=of(e),h=L.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return L.useEffect(()=>()=>h(),[h]),On(()=>{c().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),$.jsx(Ue.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Ee(i.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(n,50))}),onPointerMove:Ee(i.onPointerMove,()=>{a.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(n,50))}),onPointerLeave:Ee(i.onPointerLeave,()=>{h()})})}),C6="SelectSeparator",T6=L.forwardRef((s,t)=>{const{__scopeSelect:e,...n}=s;return $.jsx(Ue.div,{"aria-hidden":!0,...n,ref:t})});T6.displayName=C6;var yy="SelectArrow",R6=L.forwardRef((s,t)=>{const{__scopeSelect:e,...n}=s,i=lf(e),a=Ir(yy,e),l=Fr(yy,e);return a.open&&l.position==="popper"?$.jsx(RE,{...i,...n,ref:t}):null});R6.displayName=yy;var k6="SelectBubbleInput",D2=L.forwardRef(({__scopeSelect:s,value:t,...e},n)=>{const i=L.useRef(null),a=Je(n,i),l=_z(t);return L.useEffect(()=>{const c=i.current;if(!c)return;const h=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(h,"value").set;if(l!==t&&p){const f=new Event("change",{bubbles:!0});p.call(c,t),c.dispatchEvent(f)}},[l,t]),$.jsx(Ue.select,{...e,style:{...DE,...e.style},ref:a,defaultValue:t})});D2.displayName=k6;function O2(s){return s===""||s===void 0}function N2(s){const t=ba(s),e=L.useRef(""),n=L.useRef(0),i=L.useCallback(l=>{const c=e.current+l;t(c),(function h(d){e.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>h(""),1e3))})(c)},[t]),a=L.useCallback(()=>{e.current="",window.clearTimeout(n.current)},[]);return L.useEffect(()=>()=>window.clearTimeout(n.current),[]),[e,i,a]}function P2(s,t,e){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=e?s.indexOf(e):-1;let l=M6(s,Math.max(a,0));i.length===1&&(l=l.filter(d=>d!==e));const h=l.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return h!==e?h:void 0}function M6(s,t){return s.map((e,n)=>s[(t+n)%s.length])}var D6=c2,O6=h2,N6=f2,P6=p2,L6=m2,B6=g2,I6=w2,F6=A2,z6=E2,j6=T2,U6=R2,H6=k2;function GS({...s}){return $.jsx(D6,{"data-slot":"select",...s})}function qS({...s}){return $.jsx(N6,{"data-slot":"select-value",...s})}function XS({className:s,size:t="default",children:e,...n}){return $.jsxs(O6,{"data-slot":"select-trigger","data-size":t,className:Dn("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...n,children:[e,$.jsx(P6,{asChild:!0,children:$.jsx(tE,{className:"size-4 opacity-50"})})]})}function YS({className:s,children:t,position:e="popper",align:n="center",...i}){return $.jsx(L6,{children:$.jsxs(B6,{"data-slot":"select-content",className:Dn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",e==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:e,align:n,...i,children:[$.jsx(V6,{}),$.jsx(I6,{className:Dn("p-1",e==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),$.jsx($6,{})]})})}function Dh({className:s,children:t,...e}){return $.jsxs(F6,{"data-slot":"select-item",className:Dn("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...e,children:[$.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center","data-source":"src/components/ui/select.tsx:115:7",children:$.jsx(j6,{children:$.jsx(SO,{className:"size-4"})})}),$.jsx(z6,{children:t})]})}function V6({className:s,...t}){return $.jsx(U6,{"data-slot":"select-scroll-up-button",className:Dn("flex cursor-default items-center justify-center py-1",s),...t,children:$.jsx(CO,{className:"size-4"})})}function $6({className:s,...t}){return $.jsx(H6,{"data-slot":"select-scroll-down-button",className:Dn("flex cursor-default items-center justify-center py-1",s),...t,children:$.jsx(tE,{className:"size-4"})})}const G6="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let q6=(s=21)=>{let t="",e=crypto.getRandomValues(new Uint8Array(s|=0));for(;s--;)t+=G6[e[s]&63];return t};function Oh(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bg={exports:{}};var WS;function X6(){return WS||(WS=1,(function(s,t){(function(e){s.exports=e()})(function(){return(function e(n,i,a){function l(d,p){if(!i[d]){if(!n[d]){var f=typeof Oh=="function"&&Oh;if(!p&&f)return f(d,!0);if(c)return c(d,!0);var g=new Error("Cannot find module '"+d+"'");throw g.code="MODULE_NOT_FOUND",g}var y=i[d]={exports:{}};n[d][0].call(y.exports,function(w){var v=n[d][1][w];return l(v||w)},y,y.exports,e,n,i,a)}return i[d].exports}for(var c=typeof Oh=="function"&&Oh,h=0;h<a.length;h++)l(a[h]);return l})({1:[function(e,n,i){var a=e("./utils"),l=e("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(h){for(var d,p,f,g,y,w,v,S=[],x=0,A=h.length,E=A,R=a.getTypeOf(h)!=="string";x<h.length;)E=A-x,f=R?(d=h[x++],p=x<A?h[x++]:0,x<A?h[x++]:0):(d=h.charCodeAt(x++),p=x<A?h.charCodeAt(x++):0,x<A?h.charCodeAt(x++):0),g=d>>2,y=(3&d)<<4|p>>4,w=1<E?(15&p)<<2|f>>6:64,v=2<E?63&f:64,S.push(c.charAt(g)+c.charAt(y)+c.charAt(w)+c.charAt(v));return S.join("")},i.decode=function(h){var d,p,f,g,y,w,v=0,S=0,x="data:";if(h.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var A,E=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===c.charAt(64)&&E--,h.charAt(h.length-2)===c.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(A=l.uint8array?new Uint8Array(0|E):new Array(0|E);v<h.length;)d=c.indexOf(h.charAt(v++))<<2|(g=c.indexOf(h.charAt(v++)))>>4,p=(15&g)<<4|(y=c.indexOf(h.charAt(v++)))>>2,f=(3&y)<<6|(w=c.indexOf(h.charAt(v++))),A[S++]=d,y!==64&&(A[S++]=p),w!==64&&(A[S++]=f);return A}},{"./support":30,"./utils":32}],2:[function(e,n,i){var a=e("./external"),l=e("./stream/DataWorker"),c=e("./stream/Crc32Probe"),h=e("./stream/DataLengthProbe");function d(p,f,g,y,w){this.compressedSize=p,this.uncompressedSize=f,this.crc32=g,this.compression=y,this.compressedContent=w}d.prototype={getContentWorker:function(){var p=new l(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),f=this;return p.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new l(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(p,f,g){return p.pipe(new c).pipe(new h("uncompressedSize")).pipe(f.compressWorker(g)).pipe(new h("compressedSize")).withStreamInfo("compression",f)},n.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,i){var a=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,i){var a=e("./utils"),l=(function(){for(var c,h=[],d=0;d<256;d++){c=d;for(var p=0;p<8;p++)c=1&c?3988292384^c>>>1:c>>>1;h[d]=c}return h})();n.exports=function(c,h){return c!==void 0&&c.length?a.getTypeOf(c)!=="string"?(function(d,p,f,g){var y=l,w=g+f;d^=-1;for(var v=g;v<w;v++)d=d>>>8^y[255&(d^p[v])];return-1^d})(0|h,c,c.length,0):(function(d,p,f,g){var y=l,w=g+f;d^=-1;for(var v=g;v<w;v++)d=d>>>8^y[255&(d^p.charCodeAt(v))];return-1^d})(0|h,c,c.length,0):0}},{"./utils":32}],5:[function(e,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,n,i){var a=null;a=typeof Promise<"u"?Promise:e("lie"),n.exports={Promise:a}},{lie:37}],7:[function(e,n,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=e("pako"),c=e("./utils"),h=e("./stream/GenericWorker"),d=a?"uint8array":"array";function p(f,g){h.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=g,this.meta={}}i.magic="\b\0",c.inherits(p,h),p.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(d,f.data),!1)},p.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(g){f.push({data:g,meta:f.meta})}},i.compressWorker=function(f){return new p("Deflate",f)},i.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,i){function a(y,w){var v,S="";for(v=0;v<w;v++)S+=String.fromCharCode(255&y),y>>>=8;return S}function l(y,w,v,S,x,A){var E,R,T=y.file,O=y.compression,D=A!==d.utf8encode,N=c.transformTo("string",A(T.name)),I=c.transformTo("string",d.utf8encode(T.name)),G=T.comment,W=c.transformTo("string",A(G)),F=c.transformTo("string",d.utf8encode(G)),Y=I.length!==T.name.length,k=F.length!==G.length,J="",z="",j="",q=T.dir,nt=T.date,pt={crc32:0,compressedSize:0,uncompressedSize:0};w&&!v||(pt.crc32=y.crc32,pt.compressedSize=y.compressedSize,pt.uncompressedSize=y.uncompressedSize);var P=0;w&&(P|=8),D||!Y&&!k||(P|=2048);var U=0,K=0;q&&(U|=16),x==="UNIX"?(K=798,U|=(function(it,xt){var ut=it;return it||(ut=xt?16893:33204),(65535&ut)<<16})(T.unixPermissions,q)):(K=20,U|=(function(it){return 63&(it||0)})(T.dosPermissions)),E=nt.getUTCHours(),E<<=6,E|=nt.getUTCMinutes(),E<<=5,E|=nt.getUTCSeconds()/2,R=nt.getUTCFullYear()-1980,R<<=4,R|=nt.getUTCMonth()+1,R<<=5,R|=nt.getUTCDate(),Y&&(z=a(1,1)+a(p(N),4)+I,J+="up"+a(z.length,2)+z),k&&(j=a(1,1)+a(p(W),4)+F,J+="uc"+a(j.length,2)+j);var tt="";return tt+=`
\0`,tt+=a(P,2),tt+=O.magic,tt+=a(E,2),tt+=a(R,2),tt+=a(pt.crc32,4),tt+=a(pt.compressedSize,4),tt+=a(pt.uncompressedSize,4),tt+=a(N.length,2),tt+=a(J.length,2),{fileRecord:f.LOCAL_FILE_HEADER+tt+N+J,dirRecord:f.CENTRAL_FILE_HEADER+a(K,2)+tt+a(W.length,2)+"\0\0\0\0"+a(U,4)+a(S,4)+N+J+W}}var c=e("../utils"),h=e("../stream/GenericWorker"),d=e("../utf8"),p=e("../crc32"),f=e("../signature");function g(y,w,v,S){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=v,this.encodeFileName=S,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(g,h),g.prototype.push=function(y){var w=y.meta.percent||0,v=this.entriesCount,S=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,h.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:v?(w+100*(v-S-1))/v:100}}))},g.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var w=this.streamFiles&&!y.file.dir;if(w){var v=l(y,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(y){this.accumulate=!1;var w=this.streamFiles&&!y.file.dir,v=l(y,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),w)this.push({data:(function(S){return f.DATA_DESCRIPTOR+a(S.crc32,4)+a(S.compressedSize,4)+a(S.uncompressedSize,4)})(y),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var y=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var v=this.bytesWritten-y,S=(function(x,A,E,R,T){var O=c.transformTo("string",T(R));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(x,2)+a(x,2)+a(A,4)+a(E,4)+a(O.length,2)+O})(this.dirRecords.length,v,y,this.zipComment,this.encodeFileName);this.push({data:S,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(y){this._sources.push(y);var w=this;return y.on("data",function(v){w.processChunk(v)}),y.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),y.on("error",function(v){w.error(v)}),this},g.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(y){var w=this._sources;if(!h.prototype.error.call(this,y))return!1;for(var v=0;v<w.length;v++)try{w[v].error(y)}catch{}return!0},g.prototype.lock=function(){h.prototype.lock.call(this);for(var y=this._sources,w=0;w<y.length;w++)y[w].lock()},n.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,i){var a=e("../compressions"),l=e("./ZipFileWorker");i.generateWorker=function(c,h,d){var p=new l(h.streamFiles,d,h.platform,h.encodeFileName),f=0;try{c.forEach(function(g,y){f++;var w=(function(A,E){var R=A||E,T=a[R];if(!T)throw new Error(R+" is not a valid compression method !");return T})(y.options.compression,h.compression),v=y.options.compressionOptions||h.compressionOptions||{},S=y.dir,x=y.date;y._compressWorker(w,v).withStreamInfo("file",{name:g,dir:S,date:x,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(p)}),p.entriesCount=f}catch(g){p.error(g)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,i){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new a;for(var c in this)typeof this[c]!="function"&&(l[c]=this[c]);return l}}(a.prototype=e("./object")).loadAsync=e("./load"),a.support=e("./support"),a.defaults=e("./defaults"),a.version="3.10.1",a.loadAsync=function(l,c){return new a().loadAsync(l,c)},a.external=e("./external"),n.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,i){var a=e("./utils"),l=e("./external"),c=e("./utf8"),h=e("./zipEntries"),d=e("./stream/Crc32Probe"),p=e("./nodejsUtils");function f(g){return new l.Promise(function(y,w){var v=g.decompressed.getContentWorker().pipe(new d);v.on("error",function(S){w(S)}).on("end",function(){v.streamInfo.crc32!==g.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}n.exports=function(g,y){var w=this;return y=a.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),p.isNode&&p.isStream(g)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",g,!0,y.optimizedBinaryString,y.base64).then(function(v){var S=new h(y);return S.load(v),S}).then(function(v){var S=[l.Promise.resolve(v)],x=v.files;if(y.checkCRC32)for(var A=0;A<x.length;A++)S.push(f(x[A]));return l.Promise.all(S)}).then(function(v){for(var S=v.shift(),x=S.files,A=0;A<x.length;A++){var E=x[A],R=E.fileNameStr,T=a.resolve(E.fileNameStr);w.file(T,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:y.createFolders}),E.dir||(w.file(T).unsafeOriginalName=R)}return S.zipComment.length&&(w.comment=S.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,i){var a=e("../utils"),l=e("../stream/GenericWorker");function c(h,d){l.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(d)}a.inherits(c,l),c.prototype._bindStream=function(h){var d=this;(this._stream=h).pause(),h.on("data",function(p){d.push({data:p,meta:{percent:0}})}).on("error",function(p){d.isPaused?this.generatedError=p:d.error(p)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},c.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,i){var a=e("readable-stream").Readable;function l(c,h,d){a.call(this,h),this._helper=c;var p=this;c.on("data",function(f,g){p.push(f)||p._helper.pause(),d&&d(g)}).on("error",function(f){p.emit("error",f)}).on("end",function(){p.push(null)})}e("../utils").inherits(l,a),l.prototype._read=function(){this._helper.resume()},n.exports=l},{"../utils":32,"readable-stream":16}],14:[function(e,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,l);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,l)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var l=new Buffer(a);return l.fill(0),l},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(e,n,i){function a(T,O,D){var N,I=c.getTypeOf(O),G=c.extend(D||{},p);G.date=G.date||new Date,G.compression!==null&&(G.compression=G.compression.toUpperCase()),typeof G.unixPermissions=="string"&&(G.unixPermissions=parseInt(G.unixPermissions,8)),G.unixPermissions&&16384&G.unixPermissions&&(G.dir=!0),G.dosPermissions&&16&G.dosPermissions&&(G.dir=!0),G.dir&&(T=x(T)),G.createFolders&&(N=S(T))&&A.call(this,N,!0);var W=I==="string"&&G.binary===!1&&G.base64===!1;D&&D.binary!==void 0||(G.binary=!W),(O instanceof f&&O.uncompressedSize===0||G.dir||!O||O.length===0)&&(G.base64=!1,G.binary=!0,O="",G.compression="STORE",I="string");var F=null;F=O instanceof f||O instanceof h?O:w.isNode&&w.isStream(O)?new v(T,O):c.prepareContent(T,O,G.binary,G.optimizedBinaryString,G.base64);var Y=new g(T,F,G);this.files[T]=Y}var l=e("./utf8"),c=e("./utils"),h=e("./stream/GenericWorker"),d=e("./stream/StreamHelper"),p=e("./defaults"),f=e("./compressedObject"),g=e("./zipObject"),y=e("./generate"),w=e("./nodejsUtils"),v=e("./nodejs/NodejsStreamInputAdapter"),S=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var O=T.lastIndexOf("/");return 0<O?T.substring(0,O):""},x=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},A=function(T,O){return O=O!==void 0?O:p.createFolders,T=x(T),this.files[T]||a.call(this,T,null,{dir:!0,createFolders:O}),this.files[T]};function E(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var O,D,N;for(O in this.files)N=this.files[O],(D=O.slice(this.root.length,O.length))&&O.slice(0,this.root.length)===this.root&&T(D,N)},filter:function(T){var O=[];return this.forEach(function(D,N){T(D,N)&&O.push(N)}),O},file:function(T,O,D){if(arguments.length!==1)return T=this.root+T,a.call(this,T,O,D),this;if(E(T)){var N=T;return this.filter(function(G,W){return!W.dir&&N.test(G)})}var I=this.files[this.root+T];return I&&!I.dir?I:null},folder:function(T){if(!T)return this;if(E(T))return this.filter(function(I,G){return G.dir&&T.test(I)});var O=this.root+T,D=A.call(this,O),N=this.clone();return N.root=D.name,N},remove:function(T){T=this.root+T;var O=this.files[T];if(O||(T.slice(-1)!=="/"&&(T+="/"),O=this.files[T]),O&&!O.dir)delete this.files[T];else for(var D=this.filter(function(I,G){return G.name.slice(0,T.length)===T}),N=0;N<D.length;N++)delete this.files[D[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var O,D={};try{if((D=c.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");c.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var N=D.comment||this.comment||"";O=y.generateWorker(this,D,N)}catch(I){(O=new h("error")).error(I)}return new d(O,D.type||"string",D.mimeType)},generateAsync:function(T,O){return this.generateInternalStream(T).accumulate(O)},generateNodeStream:function(T,O){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(O)}};n.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,i){n.exports=e("stream")},{stream:void 0}],17:[function(e,n,i){var a=e("./DataReader");function l(c){a.call(this,c);for(var h=0;h<this.data.length;h++)c[h]=255&c[h]}e("../utils").inherits(l,a),l.prototype.byteAt=function(c){return this.data[this.zero+c]},l.prototype.lastIndexOfSignature=function(c){for(var h=c.charCodeAt(0),d=c.charCodeAt(1),p=c.charCodeAt(2),f=c.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===h&&this.data[g+1]===d&&this.data[g+2]===p&&this.data[g+3]===f)return g-this.zero;return-1},l.prototype.readAndCheckSignature=function(c){var h=c.charCodeAt(0),d=c.charCodeAt(1),p=c.charCodeAt(2),f=c.charCodeAt(3),g=this.readData(4);return h===g[0]&&d===g[1]&&p===g[2]&&f===g[3]},l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,h},n.exports=l},{"../utils":32,"./DataReader":18}],18:[function(e,n,i){var a=e("../utils");function l(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var h,d=0;for(this.checkOffset(c),h=this.index+c-1;h>=this.index;h--)d=(d<<8)+this.byteAt(h);return this.index+=c,d},readString:function(c){return a.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},n.exports=l},{"../utils":32}],19:[function(e,n,i){var a=e("./Uint8ArrayReader");function l(c){a.call(this,c)}e("../utils").inherits(l,a),l.prototype.readData=function(c){this.checkOffset(c);var h=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,h},n.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,i){var a=e("./DataReader");function l(c){a.call(this,c)}e("../utils").inherits(l,a),l.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},l.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},l.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},l.prototype.readData=function(c){this.checkOffset(c);var h=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,h},n.exports=l},{"../utils":32,"./DataReader":18}],21:[function(e,n,i){var a=e("./ArrayReader");function l(c){a.call(this,c)}e("../utils").inherits(l,a),l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,h},n.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,i){var a=e("../utils"),l=e("../support"),c=e("./ArrayReader"),h=e("./StringReader"),d=e("./NodeBufferReader"),p=e("./Uint8ArrayReader");n.exports=function(f){var g=a.getTypeOf(f);return a.checkSupport(g),g!=="string"||l.uint8array?g==="nodebuffer"?new d(f):l.uint8array?new p(a.transformTo("uint8array",f)):new c(a.transformTo("array",f)):new h(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,i){var a=e("./GenericWorker"),l=e("../utils");function c(h){a.call(this,"ConvertWorker to "+h),this.destType=h}l.inherits(c,a),c.prototype.processChunk=function(h){this.push({data:l.transformTo(this.destType,h.data),meta:h.meta})},n.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,i){var a=e("./GenericWorker"),l=e("../crc32");function c(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(c,a),c.prototype.processChunk=function(h){this.streamInfo.crc32=l(h.data,this.streamInfo.crc32||0),this.push(h)},n.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,i){var a=e("../utils"),l=e("./GenericWorker");function c(h){l.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}a.inherits(c,l),c.prototype.processChunk=function(h){if(h){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+h.data.length}l.prototype.processChunk.call(this,h)},n.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,i){var a=e("../utils"),l=e("./GenericWorker");function c(h){l.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(p){d.dataIsReady=!0,d.data=p,d.max=p&&p.length||0,d.type=a.getTypeOf(p),d.isPaused||d._tickAndRepeat()},function(p){d.error(p)})}a.inherits(c,l),c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,d);break;case"uint8array":h=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":h=this.data.slice(this.index,d)}return this.index=d,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,i){function a(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,c){return this._listeners[l].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,c){if(this._listeners[l])for(var h=0;h<this._listeners[l].length;h++)this._listeners[l][h].call(this,c)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var c=this;return l.on("data",function(h){c.processChunk(h)}),l.on("end",function(){c.end()}),l.on("error",function(h){c.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,c){return this.extraStreamInfo[l]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},n.exports=a},{}],29:[function(e,n,i){var a=e("../utils"),l=e("./ConvertWorker"),c=e("./GenericWorker"),h=e("../base64"),d=e("../support"),p=e("../external"),f=null;if(d.nodestream)try{f=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(w,v){return new p.Promise(function(S,x){var A=[],E=w._internalType,R=w._outputType,T=w._mimeType;w.on("data",function(O,D){A.push(O),v&&v(D)}).on("error",function(O){A=[],x(O)}).on("end",function(){try{var O=(function(D,N,I){switch(D){case"blob":return a.newBlob(a.transformTo("arraybuffer",N),I);case"base64":return h.encode(N);default:return a.transformTo(D,N)}})(R,(function(D,N){var I,G=0,W=null,F=0;for(I=0;I<N.length;I++)F+=N[I].length;switch(D){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(W=new Uint8Array(F),I=0;I<N.length;I++)W.set(N[I],G),G+=N[I].length;return W;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+D+"'")}})(E,A),T);S(O)}catch(D){x(D)}A=[]}).resume()})}function y(w,v,S){var x=v;switch(v){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=v,this._mimeType=S,a.checkSupport(x),this._worker=w.pipe(new l(x)),w.lock()}catch(A){this._worker=new c("error"),this._worker.error(A)}}y.prototype={accumulate:function(w){return g(this,w)},on:function(w,v){var S=this;return w==="data"?this._worker.on(w,function(x){v.call(S,x.data,x.meta)}):this._worker.on(w,function(){a.delay(v,arguments,S)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},w)}},n.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var a=new ArrayBuffer(0);try{i.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(a),i.blob=l.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,i){for(var a=e("./utils"),l=e("./support"),c=e("./nodejsUtils"),h=e("./stream/GenericWorker"),d=new Array(256),p=0;p<256;p++)d[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;d[254]=d[254]=1;function f(){h.call(this,"utf-8 decode"),this.leftOver=null}function g(){h.call(this,"utf-8 encode")}i.utf8encode=function(y){return l.nodebuffer?c.newBufferFrom(y,"utf-8"):(function(w){var v,S,x,A,E,R=w.length,T=0;for(A=0;A<R;A++)(64512&(S=w.charCodeAt(A)))==55296&&A+1<R&&(64512&(x=w.charCodeAt(A+1)))==56320&&(S=65536+(S-55296<<10)+(x-56320),A++),T+=S<128?1:S<2048?2:S<65536?3:4;for(v=l.uint8array?new Uint8Array(T):new Array(T),A=E=0;E<T;A++)(64512&(S=w.charCodeAt(A)))==55296&&A+1<R&&(64512&(x=w.charCodeAt(A+1)))==56320&&(S=65536+(S-55296<<10)+(x-56320),A++),S<128?v[E++]=S:(S<2048?v[E++]=192|S>>>6:(S<65536?v[E++]=224|S>>>12:(v[E++]=240|S>>>18,v[E++]=128|S>>>12&63),v[E++]=128|S>>>6&63),v[E++]=128|63&S);return v})(y)},i.utf8decode=function(y){return l.nodebuffer?a.transformTo("nodebuffer",y).toString("utf-8"):(function(w){var v,S,x,A,E=w.length,R=new Array(2*E);for(v=S=0;v<E;)if((x=w[v++])<128)R[S++]=x;else if(4<(A=d[x]))R[S++]=65533,v+=A-1;else{for(x&=A===2?31:A===3?15:7;1<A&&v<E;)x=x<<6|63&w[v++],A--;1<A?R[S++]=65533:x<65536?R[S++]=x:(x-=65536,R[S++]=55296|x>>10&1023,R[S++]=56320|1023&x)}return R.length!==S&&(R.subarray?R=R.subarray(0,S):R.length=S),a.applyFromCharCode(R)})(y=a.transformTo(l.uint8array?"uint8array":"array",y))},a.inherits(f,h),f.prototype.processChunk=function(y){var w=a.transformTo(l.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var v=w;(w=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),w.set(v,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var S=(function(A,E){var R;for((E=E||A.length)>A.length&&(E=A.length),R=E-1;0<=R&&(192&A[R])==128;)R--;return R<0||R===0?E:R+d[A[R]]>E?R:E})(w),x=w;S!==w.length&&(l.uint8array?(x=w.subarray(0,S),this.leftOver=w.subarray(S,w.length)):(x=w.slice(0,S),this.leftOver=w.slice(S,w.length))),this.push({data:i.utf8decode(x),meta:y.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=f,a.inherits(g,h),g.prototype.processChunk=function(y){this.push({data:i.utf8encode(y.data),meta:y.meta})},i.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,i){var a=e("./support"),l=e("./base64"),c=e("./nodejsUtils"),h=e("./external");function d(v){return v}function p(v,S){for(var x=0;x<v.length;++x)S[x]=255&v.charCodeAt(x);return S}e("setimmediate"),i.newBlob=function(v,S){i.checkSupport("blob");try{return new Blob([v],{type:S})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(v),x.getBlob(S)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(v,S,x){var A=[],E=0,R=v.length;if(R<=x)return String.fromCharCode.apply(null,v);for(;E<R;)S==="array"||S==="nodebuffer"?A.push(String.fromCharCode.apply(null,v.slice(E,Math.min(E+x,R)))):A.push(String.fromCharCode.apply(null,v.subarray(E,Math.min(E+x,R)))),E+=x;return A.join("")},stringifyByChar:function(v){for(var S="",x=0;x<v.length;x++)S+=String.fromCharCode(v[x]);return S},applyCanBeUsed:{uint8array:(function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}})()}};function g(v){var S=65536,x=i.getTypeOf(v),A=!0;if(x==="uint8array"?A=f.applyCanBeUsed.uint8array:x==="nodebuffer"&&(A=f.applyCanBeUsed.nodebuffer),A)for(;1<S;)try{return f.stringifyByChunk(v,x,S)}catch{S=Math.floor(S/2)}return f.stringifyByChar(v)}function y(v,S){for(var x=0;x<v.length;x++)S[x]=v[x];return S}i.applyFromCharCode=g;var w={};w.string={string:d,array:function(v){return p(v,new Array(v.length))},arraybuffer:function(v){return w.string.uint8array(v).buffer},uint8array:function(v){return p(v,new Uint8Array(v.length))},nodebuffer:function(v){return p(v,c.allocBuffer(v.length))}},w.array={string:g,array:d,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return c.newBufferFrom(v)}},w.arraybuffer={string:function(v){return g(new Uint8Array(v))},array:function(v){return y(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:d,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return c.newBufferFrom(new Uint8Array(v))}},w.uint8array={string:g,array:function(v){return y(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:d,nodebuffer:function(v){return c.newBufferFrom(v)}},w.nodebuffer={string:g,array:function(v){return y(v,new Array(v.length))},arraybuffer:function(v){return w.nodebuffer.uint8array(v).buffer},uint8array:function(v){return y(v,new Uint8Array(v.length))},nodebuffer:d},i.transformTo=function(v,S){if(S=S||"",!v)return S;i.checkSupport(v);var x=i.getTypeOf(S);return w[x][v](S)},i.resolve=function(v){for(var S=v.split("/"),x=[],A=0;A<S.length;A++){var E=S[A];E==="."||E===""&&A!==0&&A!==S.length-1||(E===".."?x.pop():x.push(E))}return x.join("/")},i.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":a.nodebuffer&&c.isBuffer(v)?"nodebuffer":a.uint8array&&v instanceof Uint8Array?"uint8array":a.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(v){if(!a[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(v){var S,x,A="";for(x=0;x<(v||"").length;x++)A+="\\x"+((S=v.charCodeAt(x))<16?"0":"")+S.toString(16).toUpperCase();return A},i.delay=function(v,S,x){setImmediate(function(){v.apply(x||null,S||[])})},i.inherits=function(v,S){function x(){}x.prototype=S.prototype,v.prototype=new x},i.extend=function(){var v,S,x={};for(v=0;v<arguments.length;v++)for(S in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],S)&&x[S]===void 0&&(x[S]=arguments[v][S]);return x},i.prepareContent=function(v,S,x,A,E){return h.Promise.resolve(S).then(function(R){return a.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new h.Promise(function(T,O){var D=new FileReader;D.onload=function(N){T(N.target.result)},D.onerror=function(N){O(N.target.error)},D.readAsArrayBuffer(R)}):R}).then(function(R){var T=i.getTypeOf(R);return T?(T==="arraybuffer"?R=i.transformTo("uint8array",R):T==="string"&&(E?R=l.decode(R):x&&A!==!0&&(R=(function(O){return p(O,a.uint8array?new Uint8Array(O.length):new Array(O.length))})(R))),R):h.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,i){var a=e("./reader/readerFor"),l=e("./utils"),c=e("./signature"),h=e("./zipEntry"),d=e("./support");function p(f){this.files=[],this.loadOptions=f}p.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(g)+", expected "+l.pretty(f)+")")}},isSignature:function(f,g){var y=this.reader.index;this.reader.setIndex(f);var w=this.reader.readString(4)===g;return this.reader.setIndex(y),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),g=d.uint8array?"uint8array":"array",y=l.transformTo(g,f);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,g,y,w=this.zip64EndOfCentralSize-44;0<w;)f=this.reader.readInt(2),g=this.reader.readInt(4),y=this.reader.readData(g),this.zip64ExtensibleData[f]={id:f,length:g,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,g;for(f=0;f<this.files.length;f++)g=this.files[f],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(f=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var g=f;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var w=g-y;if(0<w)this.isSignature(g,c.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(f){this.reader=a(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,i){var a=e("./reader/readerFor"),l=e("./utils"),c=e("./compressedObject"),h=e("./crc32"),d=e("./utf8"),p=e("./compressions"),f=e("./support");function g(y,w){this.options=y,this.loadOptions=w}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var w,v;if(y.skip(22),this.fileNameLength=y.readInt(2),v=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=(function(S){for(var x in p)if(Object.prototype.hasOwnProperty.call(p,x)&&p[x].magic===S)return p[x];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,w,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var w=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(w),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=a(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var w,v,S,x=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<x;)w=y.readInt(2),v=y.readInt(2),S=y.readData(v),this.extraFields[w]={id:w,length:v,value:S};y.setIndex(x)},handleUTF8:function(){var y=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var v=l.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var S=this.findExtraFieldUnicodeComment();if(S!==null)this.fileCommentStr=S;else{var x=l.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var w=a(y.value);return w.readInt(1)!==1||h(this.fileName)!==w.readInt(4)?null:d.utf8decode(w.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var w=a(y.value);return w.readInt(1)!==1||h(this.fileComment)!==w.readInt(4)?null:d.utf8decode(w.readData(y.length-5))}return null}},n.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,i){function a(w,v,S){this.name=w,this.dir=S.dir,this.date=S.date,this.comment=S.comment,this.unixPermissions=S.unixPermissions,this.dosPermissions=S.dosPermissions,this._data=v,this._dataBinary=S.binary,this.options={compression:S.compression,compressionOptions:S.compressionOptions}}var l=e("./stream/StreamHelper"),c=e("./stream/DataWorker"),h=e("./utf8"),d=e("./compressedObject"),p=e("./stream/GenericWorker");a.prototype={internalStream:function(w){var v=null,S="string";try{if(!w)throw new Error("No output type specified.");var x=(S=w.toLowerCase())==="string"||S==="text";S!=="binarystring"&&S!=="text"||(S="string"),v=this._decompressWorker();var A=!this._dataBinary;A&&!x&&(v=v.pipe(new h.Utf8EncodeWorker)),!A&&x&&(v=v.pipe(new h.Utf8DecodeWorker))}catch(E){(v=new p("error")).error(E)}return new l(v,S,"")},async:function(w,v){return this.internalStream(w).accumulate(v)},nodeStream:function(w,v){return this.internalStream(w||"nodebuffer").toNodejsStream(v)},_compressWorker:function(w,v){if(this._data instanceof d&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var S=this._decompressWorker();return this._dataBinary||(S=S.pipe(new h.Utf8EncodeWorker)),d.createWorkerFrom(S,w,v)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof p?this._data:new c(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<f.length;y++)a.prototype[f[y]]=g;n.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,i){(function(a){var l,c,h=a.MutationObserver||a.WebKitMutationObserver;if(h){var d=0,p=new h(w),f=a.document.createTextNode("");p.observe(f,{characterData:!0}),l=function(){f.data=d=++d%2}}else if(a.setImmediate||a.MessageChannel===void 0)l="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var v=a.document.createElement("script");v.onreadystatechange=function(){w(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},a.document.documentElement.appendChild(v)}:function(){setTimeout(w,0)};else{var g=new a.MessageChannel;g.port1.onmessage=w,l=function(){g.port2.postMessage(0)}}var y=[];function w(){var v,S;c=!0;for(var x=y.length;x;){for(S=y,y=[],v=-1;++v<x;)S[v]();x=y.length}c=!1}n.exports=function(v){y.push(v)!==1||c||l()}}).call(this,typeof Rr<"u"?Rr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,n,i){var a=e("immediate");function l(){}var c={},h=["REJECTED"],d=["FULFILLED"],p=["PENDING"];function f(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,x!==l&&v(this,x)}function g(x,A,E){this.promise=x,typeof A=="function"&&(this.onFulfilled=A,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function y(x,A,E){a(function(){var R;try{R=A(E)}catch(T){return c.reject(x,T)}R===x?c.reject(x,new TypeError("Cannot resolve promise with itself")):c.resolve(x,R)})}function w(x){var A=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof A=="function")return function(){A.apply(x,arguments)}}function v(x,A){var E=!1;function R(D){E||(E=!0,c.reject(x,D))}function T(D){E||(E=!0,c.resolve(x,D))}var O=S(function(){A(T,R)});O.status==="error"&&R(O.value)}function S(x,A){var E={};try{E.value=x(A),E.status="success"}catch(R){E.status="error",E.value=R}return E}(n.exports=f).prototype.finally=function(x){if(typeof x!="function")return this;var A=this.constructor;return this.then(function(E){return A.resolve(x()).then(function(){return E})},function(E){return A.resolve(x()).then(function(){throw E})})},f.prototype.catch=function(x){return this.then(null,x)},f.prototype.then=function(x,A){if(typeof x!="function"&&this.state===d||typeof A!="function"&&this.state===h)return this;var E=new this.constructor(l);return this.state!==p?y(E,this.state===d?x:A,this.outcome):this.queue.push(new g(E,x,A)),E},g.prototype.callFulfilled=function(x){c.resolve(this.promise,x)},g.prototype.otherCallFulfilled=function(x){y(this.promise,this.onFulfilled,x)},g.prototype.callRejected=function(x){c.reject(this.promise,x)},g.prototype.otherCallRejected=function(x){y(this.promise,this.onRejected,x)},c.resolve=function(x,A){var E=S(w,A);if(E.status==="error")return c.reject(x,E.value);var R=E.value;if(R)v(x,R);else{x.state=d,x.outcome=A;for(var T=-1,O=x.queue.length;++T<O;)x.queue[T].callFulfilled(A)}return x},c.reject=function(x,A){x.state=h,x.outcome=A;for(var E=-1,R=x.queue.length;++E<R;)x.queue[E].callRejected(A);return x},f.resolve=function(x){return x instanceof this?x:c.resolve(new this(l),x)},f.reject=function(x){var A=new this(l);return c.reject(A,x)},f.all=function(x){var A=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,R=!1;if(!E)return this.resolve([]);for(var T=new Array(E),O=0,D=-1,N=new this(l);++D<E;)I(x[D],D);return N;function I(G,W){A.resolve(G).then(function(F){T[W]=F,++O!==E||R||(R=!0,c.resolve(N,T))},function(F){R||(R=!0,c.reject(N,F))})}},f.race=function(x){var A=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,R=!1;if(!E)return this.resolve([]);for(var T=-1,O=new this(l);++T<E;)D=x[T],A.resolve(D).then(function(N){R||(R=!0,c.resolve(O,N))},function(N){R||(R=!0,c.reject(O,N))});var D;return O}},{immediate:36}],38:[function(e,n,i){var a={};(0,e("./lib/utils/common").assign)(a,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,i){var a=e("./zlib/deflate"),l=e("./utils/common"),c=e("./utils/strings"),h=e("./zlib/messages"),d=e("./zlib/zstream"),p=Object.prototype.toString,f=0,g=-1,y=0,w=8;function v(x){if(!(this instanceof v))return new v(x);this.options=l.assign({level:g,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},x||{});var A=this.options;A.raw&&0<A.windowBits?A.windowBits=-A.windowBits:A.gzip&&0<A.windowBits&&A.windowBits<16&&(A.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var E=a.deflateInit2(this.strm,A.level,A.method,A.windowBits,A.memLevel,A.strategy);if(E!==f)throw new Error(h[E]);if(A.header&&a.deflateSetHeader(this.strm,A.header),A.dictionary){var R;if(R=typeof A.dictionary=="string"?c.string2buf(A.dictionary):p.call(A.dictionary)==="[object ArrayBuffer]"?new Uint8Array(A.dictionary):A.dictionary,(E=a.deflateSetDictionary(this.strm,R))!==f)throw new Error(h[E]);this._dict_set=!0}}function S(x,A){var E=new v(A);if(E.push(x,!0),E.err)throw E.msg||h[E.err];return E.result}v.prototype.push=function(x,A){var E,R,T=this.strm,O=this.options.chunkSize;if(this.ended)return!1;R=A===~~A?A:A===!0?4:0,typeof x=="string"?T.input=c.string2buf(x):p.call(x)==="[object ArrayBuffer]"?T.input=new Uint8Array(x):T.input=x,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new l.Buf8(O),T.next_out=0,T.avail_out=O),(E=a.deflate(T,R))!==1&&E!==f)return this.onEnd(E),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(l.shrinkBuf(T.output,T.next_out))):this.onData(l.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&E!==1);return R===4?(E=a.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===f):R!==2||(this.onEnd(f),!(T.avail_out=0))},v.prototype.onData=function(x){this.chunks.push(x)},v.prototype.onEnd=function(x){x===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},i.Deflate=v,i.deflate=S,i.deflateRaw=function(x,A){return(A=A||{}).raw=!0,S(x,A)},i.gzip=function(x,A){return(A=A||{}).gzip=!0,S(x,A)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,i){var a=e("./zlib/inflate"),l=e("./utils/common"),c=e("./utils/strings"),h=e("./zlib/constants"),d=e("./zlib/messages"),p=e("./zlib/zstream"),f=e("./zlib/gzheader"),g=Object.prototype.toString;function y(v){if(!(this instanceof y))return new y(v);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},v||{});var S=this.options;S.raw&&0<=S.windowBits&&S.windowBits<16&&(S.windowBits=-S.windowBits,S.windowBits===0&&(S.windowBits=-15)),!(0<=S.windowBits&&S.windowBits<16)||v&&v.windowBits||(S.windowBits+=32),15<S.windowBits&&S.windowBits<48&&(15&S.windowBits)==0&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var x=a.inflateInit2(this.strm,S.windowBits);if(x!==h.Z_OK)throw new Error(d[x]);this.header=new f,a.inflateGetHeader(this.strm,this.header)}function w(v,S){var x=new y(S);if(x.push(v,!0),x.err)throw x.msg||d[x.err];return x.result}y.prototype.push=function(v,S){var x,A,E,R,T,O,D=this.strm,N=this.options.chunkSize,I=this.options.dictionary,G=!1;if(this.ended)return!1;A=S===~~S?S:S===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof v=="string"?D.input=c.binstring2buf(v):g.call(v)==="[object ArrayBuffer]"?D.input=new Uint8Array(v):D.input=v,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new l.Buf8(N),D.next_out=0,D.avail_out=N),(x=a.inflate(D,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&I&&(O=typeof I=="string"?c.string2buf(I):g.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,x=a.inflateSetDictionary(this.strm,O)),x===h.Z_BUF_ERROR&&G===!0&&(x=h.Z_OK,G=!1),x!==h.Z_STREAM_END&&x!==h.Z_OK)return this.onEnd(x),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&x!==h.Z_STREAM_END&&(D.avail_in!==0||A!==h.Z_FINISH&&A!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=c.utf8border(D.output,D.next_out),R=D.next_out-E,T=c.buf2string(D.output,E),D.next_out=R,D.avail_out=N-R,R&&l.arraySet(D.output,D.output,E,R,0),this.onData(T)):this.onData(l.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(G=!0)}while((0<D.avail_in||D.avail_out===0)&&x!==h.Z_STREAM_END);return x===h.Z_STREAM_END&&(A=h.Z_FINISH),A===h.Z_FINISH?(x=a.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===h.Z_OK):A!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(D.avail_out=0))},y.prototype.onData=function(v){this.chunks.push(v)},y.prototype.onEnd=function(v){v===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Inflate=y,i.inflate=w,i.inflateRaw=function(v,S){return(S=S||{}).raw=!0,w(v,S)},i.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(h){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var p=d.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var f in p)p.hasOwnProperty(f)&&(h[f]=p[f])}}return h},i.shrinkBuf=function(h,d){return h.length===d?h:h.subarray?h.subarray(0,d):(h.length=d,h)};var l={arraySet:function(h,d,p,f,g){if(d.subarray&&h.subarray)h.set(d.subarray(p,p+f),g);else for(var y=0;y<f;y++)h[g+y]=d[p+y]},flattenChunks:function(h){var d,p,f,g,y,w;for(d=f=0,p=h.length;d<p;d++)f+=h[d].length;for(w=new Uint8Array(f),d=g=0,p=h.length;d<p;d++)y=h[d],w.set(y,g),g+=y.length;return w}},c={arraySet:function(h,d,p,f,g){for(var y=0;y<f;y++)h[g+y]=d[p+y]},flattenChunks:function(h){return[].concat.apply([],h)}};i.setTyped=function(h){h?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,l)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,c))},i.setTyped(a)},{}],42:[function(e,n,i){var a=e("./common"),l=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var h=new a.Buf8(256),d=0;d<256;d++)h[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function p(f,g){if(g<65537&&(f.subarray&&c||!f.subarray&&l))return String.fromCharCode.apply(null,a.shrinkBuf(f,g));for(var y="",w=0;w<g;w++)y+=String.fromCharCode(f[w]);return y}h[254]=h[254]=1,i.string2buf=function(f){var g,y,w,v,S,x=f.length,A=0;for(v=0;v<x;v++)(64512&(y=f.charCodeAt(v)))==55296&&v+1<x&&(64512&(w=f.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),v++),A+=y<128?1:y<2048?2:y<65536?3:4;for(g=new a.Buf8(A),v=S=0;S<A;v++)(64512&(y=f.charCodeAt(v)))==55296&&v+1<x&&(64512&(w=f.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(w-56320),v++),y<128?g[S++]=y:(y<2048?g[S++]=192|y>>>6:(y<65536?g[S++]=224|y>>>12:(g[S++]=240|y>>>18,g[S++]=128|y>>>12&63),g[S++]=128|y>>>6&63),g[S++]=128|63&y);return g},i.buf2binstring=function(f){return p(f,f.length)},i.binstring2buf=function(f){for(var g=new a.Buf8(f.length),y=0,w=g.length;y<w;y++)g[y]=f.charCodeAt(y);return g},i.buf2string=function(f,g){var y,w,v,S,x=g||f.length,A=new Array(2*x);for(y=w=0;y<x;)if((v=f[y++])<128)A[w++]=v;else if(4<(S=h[v]))A[w++]=65533,y+=S-1;else{for(v&=S===2?31:S===3?15:7;1<S&&y<x;)v=v<<6|63&f[y++],S--;1<S?A[w++]=65533:v<65536?A[w++]=v:(v-=65536,A[w++]=55296|v>>10&1023,A[w++]=56320|1023&v)}return p(A,w)},i.utf8border=function(f,g){var y;for((g=g||f.length)>f.length&&(g=f.length),y=g-1;0<=y&&(192&f[y])==128;)y--;return y<0||y===0?g:y+h[f[y]]>g?y:g}},{"./common":41}],43:[function(e,n,i){n.exports=function(a,l,c,h){for(var d=65535&a|0,p=a>>>16&65535|0,f=0;c!==0;){for(c-=f=2e3<c?2e3:c;p=p+(d=d+l[h++]|0)|0,--f;);d%=65521,p%=65521}return d|p<<16|0}},{}],44:[function(e,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,i){var a=(function(){for(var l,c=[],h=0;h<256;h++){l=h;for(var d=0;d<8;d++)l=1&l?3988292384^l>>>1:l>>>1;c[h]=l}return c})();n.exports=function(l,c,h,d){var p=a,f=d+h;l^=-1;for(var g=d;g<f;g++)l=l>>>8^p[255&(l^c[g])];return-1^l}},{}],46:[function(e,n,i){var a,l=e("../utils/common"),c=e("./trees"),h=e("./adler32"),d=e("./crc32"),p=e("./messages"),f=0,g=4,y=0,w=-2,v=-1,S=4,x=2,A=8,E=9,R=286,T=30,O=19,D=2*R+1,N=15,I=3,G=258,W=G+I+1,F=42,Y=113,k=1,J=2,z=3,j=4;function q(M,ft){return M.msg=p[ft],ft}function nt(M){return(M<<1)-(4<M?9:0)}function pt(M){for(var ft=M.length;0<=--ft;)M[ft]=0}function P(M){var ft=M.state,ct=ft.pending;ct>M.avail_out&&(ct=M.avail_out),ct!==0&&(l.arraySet(M.output,ft.pending_buf,ft.pending_out,ct,M.next_out),M.next_out+=ct,ft.pending_out+=ct,M.total_out+=ct,M.avail_out-=ct,ft.pending-=ct,ft.pending===0&&(ft.pending_out=0))}function U(M,ft){c._tr_flush_block(M,0<=M.block_start?M.block_start:-1,M.strstart-M.block_start,ft),M.block_start=M.strstart,P(M.strm)}function K(M,ft){M.pending_buf[M.pending++]=ft}function tt(M,ft){M.pending_buf[M.pending++]=ft>>>8&255,M.pending_buf[M.pending++]=255&ft}function it(M,ft){var ct,V,H=M.max_chain_length,Q=M.strstart,yt=M.prev_length,bt=M.nice_match,st=M.strstart>M.w_size-W?M.strstart-(M.w_size-W):0,_t=M.window,Ct=M.w_mask,At=M.prev,It=M.strstart+G,he=_t[Q+yt-1],Kt=_t[Q+yt];M.prev_length>=M.good_match&&(H>>=2),bt>M.lookahead&&(bt=M.lookahead);do if(_t[(ct=ft)+yt]===Kt&&_t[ct+yt-1]===he&&_t[ct]===_t[Q]&&_t[++ct]===_t[Q+1]){Q+=2,ct++;do;while(_t[++Q]===_t[++ct]&&_t[++Q]===_t[++ct]&&_t[++Q]===_t[++ct]&&_t[++Q]===_t[++ct]&&_t[++Q]===_t[++ct]&&_t[++Q]===_t[++ct]&&_t[++Q]===_t[++ct]&&_t[++Q]===_t[++ct]&&Q<It);if(V=G-(It-Q),Q=It-G,yt<V){if(M.match_start=ft,bt<=(yt=V))break;he=_t[Q+yt-1],Kt=_t[Q+yt]}}while((ft=At[ft&Ct])>st&&--H!=0);return yt<=M.lookahead?yt:M.lookahead}function xt(M){var ft,ct,V,H,Q,yt,bt,st,_t,Ct,At=M.w_size;do{if(H=M.window_size-M.lookahead-M.strstart,M.strstart>=At+(At-W)){for(l.arraySet(M.window,M.window,At,At,0),M.match_start-=At,M.strstart-=At,M.block_start-=At,ft=ct=M.hash_size;V=M.head[--ft],M.head[ft]=At<=V?V-At:0,--ct;);for(ft=ct=At;V=M.prev[--ft],M.prev[ft]=At<=V?V-At:0,--ct;);H+=At}if(M.strm.avail_in===0)break;if(yt=M.strm,bt=M.window,st=M.strstart+M.lookahead,_t=H,Ct=void 0,Ct=yt.avail_in,_t<Ct&&(Ct=_t),ct=Ct===0?0:(yt.avail_in-=Ct,l.arraySet(bt,yt.input,yt.next_in,Ct,st),yt.state.wrap===1?yt.adler=h(yt.adler,bt,Ct,st):yt.state.wrap===2&&(yt.adler=d(yt.adler,bt,Ct,st)),yt.next_in+=Ct,yt.total_in+=Ct,Ct),M.lookahead+=ct,M.lookahead+M.insert>=I)for(Q=M.strstart-M.insert,M.ins_h=M.window[Q],M.ins_h=(M.ins_h<<M.hash_shift^M.window[Q+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[Q+I-1])&M.hash_mask,M.prev[Q&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=Q,Q++,M.insert--,!(M.lookahead+M.insert<I)););}while(M.lookahead<W&&M.strm.avail_in!==0)}function ut(M,ft){for(var ct,V;;){if(M.lookahead<W){if(xt(M),M.lookahead<W&&ft===f)return k;if(M.lookahead===0)break}if(ct=0,M.lookahead>=I&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+I-1])&M.hash_mask,ct=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),ct!==0&&M.strstart-ct<=M.w_size-W&&(M.match_length=it(M,ct)),M.match_length>=I)if(V=c._tr_tally(M,M.strstart-M.match_start,M.match_length-I),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=I){for(M.match_length--;M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+I-1])&M.hash_mask,ct=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart,--M.match_length!=0;);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else V=c._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(V&&(U(M,!1),M.strm.avail_out===0))return k}return M.insert=M.strstart<I-1?M.strstart:I-1,ft===g?(U(M,!0),M.strm.avail_out===0?z:j):M.last_lit&&(U(M,!1),M.strm.avail_out===0)?k:J}function vt(M,ft){for(var ct,V,H;;){if(M.lookahead<W){if(xt(M),M.lookahead<W&&ft===f)return k;if(M.lookahead===0)break}if(ct=0,M.lookahead>=I&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+I-1])&M.hash_mask,ct=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=I-1,ct!==0&&M.prev_length<M.max_lazy_match&&M.strstart-ct<=M.w_size-W&&(M.match_length=it(M,ct),M.match_length<=5&&(M.strategy===1||M.match_length===I&&4096<M.strstart-M.match_start)&&(M.match_length=I-1)),M.prev_length>=I&&M.match_length<=M.prev_length){for(H=M.strstart+M.lookahead-I,V=c._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-I),M.lookahead-=M.prev_length-1,M.prev_length-=2;++M.strstart<=H&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+I-1])&M.hash_mask,ct=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),--M.prev_length!=0;);if(M.match_available=0,M.match_length=I-1,M.strstart++,V&&(U(M,!1),M.strm.avail_out===0))return k}else if(M.match_available){if((V=c._tr_tally(M,0,M.window[M.strstart-1]))&&U(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return k}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(V=c._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<I-1?M.strstart:I-1,ft===g?(U(M,!0),M.strm.avail_out===0?z:j):M.last_lit&&(U(M,!1),M.strm.avail_out===0)?k:J}function Et(M,ft,ct,V,H){this.good_length=M,this.max_lazy=ft,this.nice_length=ct,this.max_chain=V,this.func=H}function Lt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*D),this.dyn_dtree=new l.Buf16(2*(2*T+1)),this.bl_tree=new l.Buf16(2*(2*O+1)),pt(this.dyn_ltree),pt(this.dyn_dtree),pt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(N+1),this.heap=new l.Buf16(2*R+1),pt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*R+1),pt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ot(M){var ft;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=x,(ft=M.state).pending=0,ft.pending_out=0,ft.wrap<0&&(ft.wrap=-ft.wrap),ft.status=ft.wrap?F:Y,M.adler=ft.wrap===2?0:1,ft.last_flush=f,c._tr_init(ft),y):q(M,w)}function Ht(M){var ft=Ot(M);return ft===y&&(function(ct){ct.window_size=2*ct.w_size,pt(ct.head),ct.max_lazy_match=a[ct.level].max_lazy,ct.good_match=a[ct.level].good_length,ct.nice_match=a[ct.level].nice_length,ct.max_chain_length=a[ct.level].max_chain,ct.strstart=0,ct.block_start=0,ct.lookahead=0,ct.insert=0,ct.match_length=ct.prev_length=I-1,ct.match_available=0,ct.ins_h=0})(M.state),ft}function le(M,ft,ct,V,H,Q){if(!M)return w;var yt=1;if(ft===v&&(ft=6),V<0?(yt=0,V=-V):15<V&&(yt=2,V-=16),H<1||E<H||ct!==A||V<8||15<V||ft<0||9<ft||Q<0||S<Q)return q(M,w);V===8&&(V=9);var bt=new Lt;return(M.state=bt).strm=M,bt.wrap=yt,bt.gzhead=null,bt.w_bits=V,bt.w_size=1<<bt.w_bits,bt.w_mask=bt.w_size-1,bt.hash_bits=H+7,bt.hash_size=1<<bt.hash_bits,bt.hash_mask=bt.hash_size-1,bt.hash_shift=~~((bt.hash_bits+I-1)/I),bt.window=new l.Buf8(2*bt.w_size),bt.head=new l.Buf16(bt.hash_size),bt.prev=new l.Buf16(bt.w_size),bt.lit_bufsize=1<<H+6,bt.pending_buf_size=4*bt.lit_bufsize,bt.pending_buf=new l.Buf8(bt.pending_buf_size),bt.d_buf=1*bt.lit_bufsize,bt.l_buf=3*bt.lit_bufsize,bt.level=ft,bt.strategy=Q,bt.method=ct,Ht(M)}a=[new Et(0,0,0,0,function(M,ft){var ct=65535;for(ct>M.pending_buf_size-5&&(ct=M.pending_buf_size-5);;){if(M.lookahead<=1){if(xt(M),M.lookahead===0&&ft===f)return k;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var V=M.block_start+ct;if((M.strstart===0||M.strstart>=V)&&(M.lookahead=M.strstart-V,M.strstart=V,U(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-W&&(U(M,!1),M.strm.avail_out===0))return k}return M.insert=0,ft===g?(U(M,!0),M.strm.avail_out===0?z:j):(M.strstart>M.block_start&&(U(M,!1),M.strm.avail_out),k)}),new Et(4,4,8,4,ut),new Et(4,5,16,8,ut),new Et(4,6,32,32,ut),new Et(4,4,16,16,vt),new Et(8,16,32,32,vt),new Et(8,16,128,128,vt),new Et(8,32,128,256,vt),new Et(32,128,258,1024,vt),new Et(32,258,258,4096,vt)],i.deflateInit=function(M,ft){return le(M,ft,A,15,8,0)},i.deflateInit2=le,i.deflateReset=Ht,i.deflateResetKeep=Ot,i.deflateSetHeader=function(M,ft){return M&&M.state?M.state.wrap!==2?w:(M.state.gzhead=ft,y):w},i.deflate=function(M,ft){var ct,V,H,Q;if(!M||!M.state||5<ft||ft<0)return M?q(M,w):w;if(V=M.state,!M.output||!M.input&&M.avail_in!==0||V.status===666&&ft!==g)return q(M,M.avail_out===0?-5:w);if(V.strm=M,ct=V.last_flush,V.last_flush=ft,V.status===F)if(V.wrap===2)M.adler=0,K(V,31),K(V,139),K(V,8),V.gzhead?(K(V,(V.gzhead.text?1:0)+(V.gzhead.hcrc?2:0)+(V.gzhead.extra?4:0)+(V.gzhead.name?8:0)+(V.gzhead.comment?16:0)),K(V,255&V.gzhead.time),K(V,V.gzhead.time>>8&255),K(V,V.gzhead.time>>16&255),K(V,V.gzhead.time>>24&255),K(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),K(V,255&V.gzhead.os),V.gzhead.extra&&V.gzhead.extra.length&&(K(V,255&V.gzhead.extra.length),K(V,V.gzhead.extra.length>>8&255)),V.gzhead.hcrc&&(M.adler=d(M.adler,V.pending_buf,V.pending,0)),V.gzindex=0,V.status=69):(K(V,0),K(V,0),K(V,0),K(V,0),K(V,0),K(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),K(V,3),V.status=Y);else{var yt=A+(V.w_bits-8<<4)<<8;yt|=(2<=V.strategy||V.level<2?0:V.level<6?1:V.level===6?2:3)<<6,V.strstart!==0&&(yt|=32),yt+=31-yt%31,V.status=Y,tt(V,yt),V.strstart!==0&&(tt(V,M.adler>>>16),tt(V,65535&M.adler)),M.adler=1}if(V.status===69)if(V.gzhead.extra){for(H=V.pending;V.gzindex<(65535&V.gzhead.extra.length)&&(V.pending!==V.pending_buf_size||(V.gzhead.hcrc&&V.pending>H&&(M.adler=d(M.adler,V.pending_buf,V.pending-H,H)),P(M),H=V.pending,V.pending!==V.pending_buf_size));)K(V,255&V.gzhead.extra[V.gzindex]),V.gzindex++;V.gzhead.hcrc&&V.pending>H&&(M.adler=d(M.adler,V.pending_buf,V.pending-H,H)),V.gzindex===V.gzhead.extra.length&&(V.gzindex=0,V.status=73)}else V.status=73;if(V.status===73)if(V.gzhead.name){H=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>H&&(M.adler=d(M.adler,V.pending_buf,V.pending-H,H)),P(M),H=V.pending,V.pending===V.pending_buf_size)){Q=1;break}Q=V.gzindex<V.gzhead.name.length?255&V.gzhead.name.charCodeAt(V.gzindex++):0,K(V,Q)}while(Q!==0);V.gzhead.hcrc&&V.pending>H&&(M.adler=d(M.adler,V.pending_buf,V.pending-H,H)),Q===0&&(V.gzindex=0,V.status=91)}else V.status=91;if(V.status===91)if(V.gzhead.comment){H=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>H&&(M.adler=d(M.adler,V.pending_buf,V.pending-H,H)),P(M),H=V.pending,V.pending===V.pending_buf_size)){Q=1;break}Q=V.gzindex<V.gzhead.comment.length?255&V.gzhead.comment.charCodeAt(V.gzindex++):0,K(V,Q)}while(Q!==0);V.gzhead.hcrc&&V.pending>H&&(M.adler=d(M.adler,V.pending_buf,V.pending-H,H)),Q===0&&(V.status=103)}else V.status=103;if(V.status===103&&(V.gzhead.hcrc?(V.pending+2>V.pending_buf_size&&P(M),V.pending+2<=V.pending_buf_size&&(K(V,255&M.adler),K(V,M.adler>>8&255),M.adler=0,V.status=Y)):V.status=Y),V.pending!==0){if(P(M),M.avail_out===0)return V.last_flush=-1,y}else if(M.avail_in===0&&nt(ft)<=nt(ct)&&ft!==g)return q(M,-5);if(V.status===666&&M.avail_in!==0)return q(M,-5);if(M.avail_in!==0||V.lookahead!==0||ft!==f&&V.status!==666){var bt=V.strategy===2?(function(st,_t){for(var Ct;;){if(st.lookahead===0&&(xt(st),st.lookahead===0)){if(_t===f)return k;break}if(st.match_length=0,Ct=c._tr_tally(st,0,st.window[st.strstart]),st.lookahead--,st.strstart++,Ct&&(U(st,!1),st.strm.avail_out===0))return k}return st.insert=0,_t===g?(U(st,!0),st.strm.avail_out===0?z:j):st.last_lit&&(U(st,!1),st.strm.avail_out===0)?k:J})(V,ft):V.strategy===3?(function(st,_t){for(var Ct,At,It,he,Kt=st.window;;){if(st.lookahead<=G){if(xt(st),st.lookahead<=G&&_t===f)return k;if(st.lookahead===0)break}if(st.match_length=0,st.lookahead>=I&&0<st.strstart&&(At=Kt[It=st.strstart-1])===Kt[++It]&&At===Kt[++It]&&At===Kt[++It]){he=st.strstart+G;do;while(At===Kt[++It]&&At===Kt[++It]&&At===Kt[++It]&&At===Kt[++It]&&At===Kt[++It]&&At===Kt[++It]&&At===Kt[++It]&&At===Kt[++It]&&It<he);st.match_length=G-(he-It),st.match_length>st.lookahead&&(st.match_length=st.lookahead)}if(st.match_length>=I?(Ct=c._tr_tally(st,1,st.match_length-I),st.lookahead-=st.match_length,st.strstart+=st.match_length,st.match_length=0):(Ct=c._tr_tally(st,0,st.window[st.strstart]),st.lookahead--,st.strstart++),Ct&&(U(st,!1),st.strm.avail_out===0))return k}return st.insert=0,_t===g?(U(st,!0),st.strm.avail_out===0?z:j):st.last_lit&&(U(st,!1),st.strm.avail_out===0)?k:J})(V,ft):a[V.level].func(V,ft);if(bt!==z&&bt!==j||(V.status=666),bt===k||bt===z)return M.avail_out===0&&(V.last_flush=-1),y;if(bt===J&&(ft===1?c._tr_align(V):ft!==5&&(c._tr_stored_block(V,0,0,!1),ft===3&&(pt(V.head),V.lookahead===0&&(V.strstart=0,V.block_start=0,V.insert=0))),P(M),M.avail_out===0))return V.last_flush=-1,y}return ft!==g?y:V.wrap<=0?1:(V.wrap===2?(K(V,255&M.adler),K(V,M.adler>>8&255),K(V,M.adler>>16&255),K(V,M.adler>>24&255),K(V,255&M.total_in),K(V,M.total_in>>8&255),K(V,M.total_in>>16&255),K(V,M.total_in>>24&255)):(tt(V,M.adler>>>16),tt(V,65535&M.adler)),P(M),0<V.wrap&&(V.wrap=-V.wrap),V.pending!==0?y:1)},i.deflateEnd=function(M){var ft;return M&&M.state?(ft=M.state.status)!==F&&ft!==69&&ft!==73&&ft!==91&&ft!==103&&ft!==Y&&ft!==666?q(M,w):(M.state=null,ft===Y?q(M,-3):y):w},i.deflateSetDictionary=function(M,ft){var ct,V,H,Q,yt,bt,st,_t,Ct=ft.length;if(!M||!M.state||(Q=(ct=M.state).wrap)===2||Q===1&&ct.status!==F||ct.lookahead)return w;for(Q===1&&(M.adler=h(M.adler,ft,Ct,0)),ct.wrap=0,Ct>=ct.w_size&&(Q===0&&(pt(ct.head),ct.strstart=0,ct.block_start=0,ct.insert=0),_t=new l.Buf8(ct.w_size),l.arraySet(_t,ft,Ct-ct.w_size,ct.w_size,0),ft=_t,Ct=ct.w_size),yt=M.avail_in,bt=M.next_in,st=M.input,M.avail_in=Ct,M.next_in=0,M.input=ft,xt(ct);ct.lookahead>=I;){for(V=ct.strstart,H=ct.lookahead-(I-1);ct.ins_h=(ct.ins_h<<ct.hash_shift^ct.window[V+I-1])&ct.hash_mask,ct.prev[V&ct.w_mask]=ct.head[ct.ins_h],ct.head[ct.ins_h]=V,V++,--H;);ct.strstart=V,ct.lookahead=I-1,xt(ct)}return ct.strstart+=ct.lookahead,ct.block_start=ct.strstart,ct.insert=ct.lookahead,ct.lookahead=0,ct.match_length=ct.prev_length=I-1,ct.match_available=0,M.next_in=bt,M.input=st,M.avail_in=yt,ct.wrap=Q,y},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,i){n.exports=function(a,l){var c,h,d,p,f,g,y,w,v,S,x,A,E,R,T,O,D,N,I,G,W,F,Y,k,J;c=a.state,h=a.next_in,k=a.input,d=h+(a.avail_in-5),p=a.next_out,J=a.output,f=p-(l-a.avail_out),g=p+(a.avail_out-257),y=c.dmax,w=c.wsize,v=c.whave,S=c.wnext,x=c.window,A=c.hold,E=c.bits,R=c.lencode,T=c.distcode,O=(1<<c.lenbits)-1,D=(1<<c.distbits)-1;t:do{E<15&&(A+=k[h++]<<E,E+=8,A+=k[h++]<<E,E+=8),N=R[A&O];e:for(;;){if(A>>>=I=N>>>24,E-=I,(I=N>>>16&255)===0)J[p++]=65535&N;else{if(!(16&I)){if((64&I)==0){N=R[(65535&N)+(A&(1<<I)-1)];continue e}if(32&I){c.mode=12;break t}a.msg="invalid literal/length code",c.mode=30;break t}G=65535&N,(I&=15)&&(E<I&&(A+=k[h++]<<E,E+=8),G+=A&(1<<I)-1,A>>>=I,E-=I),E<15&&(A+=k[h++]<<E,E+=8,A+=k[h++]<<E,E+=8),N=T[A&D];n:for(;;){if(A>>>=I=N>>>24,E-=I,!(16&(I=N>>>16&255))){if((64&I)==0){N=T[(65535&N)+(A&(1<<I)-1)];continue n}a.msg="invalid distance code",c.mode=30;break t}if(W=65535&N,E<(I&=15)&&(A+=k[h++]<<E,(E+=8)<I&&(A+=k[h++]<<E,E+=8)),y<(W+=A&(1<<I)-1)){a.msg="invalid distance too far back",c.mode=30;break t}if(A>>>=I,E-=I,(I=p-f)<W){if(v<(I=W-I)&&c.sane){a.msg="invalid distance too far back",c.mode=30;break t}if(Y=x,(F=0)===S){if(F+=w-I,I<G){for(G-=I;J[p++]=x[F++],--I;);F=p-W,Y=J}}else if(S<I){if(F+=w+S-I,(I-=S)<G){for(G-=I;J[p++]=x[F++],--I;);if(F=0,S<G){for(G-=I=S;J[p++]=x[F++],--I;);F=p-W,Y=J}}}else if(F+=S-I,I<G){for(G-=I;J[p++]=x[F++],--I;);F=p-W,Y=J}for(;2<G;)J[p++]=Y[F++],J[p++]=Y[F++],J[p++]=Y[F++],G-=3;G&&(J[p++]=Y[F++],1<G&&(J[p++]=Y[F++]))}else{for(F=p-W;J[p++]=J[F++],J[p++]=J[F++],J[p++]=J[F++],2<(G-=3););G&&(J[p++]=J[F++],1<G&&(J[p++]=J[F++]))}break}}break}}while(h<d&&p<g);h-=G=E>>3,A&=(1<<(E-=G<<3))-1,a.next_in=h,a.next_out=p,a.avail_in=h<d?d-h+5:5-(h-d),a.avail_out=p<g?g-p+257:257-(p-g),c.hold=A,c.bits=E}},{}],49:[function(e,n,i){var a=e("../utils/common"),l=e("./adler32"),c=e("./crc32"),h=e("./inffast"),d=e("./inftrees"),p=1,f=2,g=0,y=-2,w=1,v=852,S=592;function x(F){return(F>>>24&255)+(F>>>8&65280)+((65280&F)<<8)+((255&F)<<24)}function A(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(F){var Y;return F&&F.state?(Y=F.state,F.total_in=F.total_out=Y.total=0,F.msg="",Y.wrap&&(F.adler=1&Y.wrap),Y.mode=w,Y.last=0,Y.havedict=0,Y.dmax=32768,Y.head=null,Y.hold=0,Y.bits=0,Y.lencode=Y.lendyn=new a.Buf32(v),Y.distcode=Y.distdyn=new a.Buf32(S),Y.sane=1,Y.back=-1,g):y}function R(F){var Y;return F&&F.state?((Y=F.state).wsize=0,Y.whave=0,Y.wnext=0,E(F)):y}function T(F,Y){var k,J;return F&&F.state?(J=F.state,Y<0?(k=0,Y=-Y):(k=1+(Y>>4),Y<48&&(Y&=15)),Y&&(Y<8||15<Y)?y:(J.window!==null&&J.wbits!==Y&&(J.window=null),J.wrap=k,J.wbits=Y,R(F))):y}function O(F,Y){var k,J;return F?(J=new A,(F.state=J).window=null,(k=T(F,Y))!==g&&(F.state=null),k):y}var D,N,I=!0;function G(F){if(I){var Y;for(D=new a.Buf32(512),N=new a.Buf32(32),Y=0;Y<144;)F.lens[Y++]=8;for(;Y<256;)F.lens[Y++]=9;for(;Y<280;)F.lens[Y++]=7;for(;Y<288;)F.lens[Y++]=8;for(d(p,F.lens,0,288,D,0,F.work,{bits:9}),Y=0;Y<32;)F.lens[Y++]=5;d(f,F.lens,0,32,N,0,F.work,{bits:5}),I=!1}F.lencode=D,F.lenbits=9,F.distcode=N,F.distbits=5}function W(F,Y,k,J){var z,j=F.state;return j.window===null&&(j.wsize=1<<j.wbits,j.wnext=0,j.whave=0,j.window=new a.Buf8(j.wsize)),J>=j.wsize?(a.arraySet(j.window,Y,k-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(J<(z=j.wsize-j.wnext)&&(z=J),a.arraySet(j.window,Y,k-J,z,j.wnext),(J-=z)?(a.arraySet(j.window,Y,k-J,J,0),j.wnext=J,j.whave=j.wsize):(j.wnext+=z,j.wnext===j.wsize&&(j.wnext=0),j.whave<j.wsize&&(j.whave+=z))),0}i.inflateReset=R,i.inflateReset2=T,i.inflateResetKeep=E,i.inflateInit=function(F){return O(F,15)},i.inflateInit2=O,i.inflate=function(F,Y){var k,J,z,j,q,nt,pt,P,U,K,tt,it,xt,ut,vt,Et,Lt,Ot,Ht,le,M,ft,ct,V,H=0,Q=new a.Buf8(4),yt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return y;(k=F.state).mode===12&&(k.mode=13),q=F.next_out,z=F.output,pt=F.avail_out,j=F.next_in,J=F.input,nt=F.avail_in,P=k.hold,U=k.bits,K=nt,tt=pt,ft=g;t:for(;;)switch(k.mode){case w:if(k.wrap===0){k.mode=13;break}for(;U<16;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}if(2&k.wrap&&P===35615){Q[k.check=0]=255&P,Q[1]=P>>>8&255,k.check=c(k.check,Q,2,0),U=P=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&P)<<8)+(P>>8))%31){F.msg="incorrect header check",k.mode=30;break}if((15&P)!=8){F.msg="unknown compression method",k.mode=30;break}if(U-=4,M=8+(15&(P>>>=4)),k.wbits===0)k.wbits=M;else if(M>k.wbits){F.msg="invalid window size",k.mode=30;break}k.dmax=1<<M,F.adler=k.check=1,k.mode=512&P?10:12,U=P=0;break;case 2:for(;U<16;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}if(k.flags=P,(255&k.flags)!=8){F.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){F.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=P>>8&1),512&k.flags&&(Q[0]=255&P,Q[1]=P>>>8&255,k.check=c(k.check,Q,2,0)),U=P=0,k.mode=3;case 3:for(;U<32;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}k.head&&(k.head.time=P),512&k.flags&&(Q[0]=255&P,Q[1]=P>>>8&255,Q[2]=P>>>16&255,Q[3]=P>>>24&255,k.check=c(k.check,Q,4,0)),U=P=0,k.mode=4;case 4:for(;U<16;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}k.head&&(k.head.xflags=255&P,k.head.os=P>>8),512&k.flags&&(Q[0]=255&P,Q[1]=P>>>8&255,k.check=c(k.check,Q,2,0)),U=P=0,k.mode=5;case 5:if(1024&k.flags){for(;U<16;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}k.length=P,k.head&&(k.head.extra_len=P),512&k.flags&&(Q[0]=255&P,Q[1]=P>>>8&255,k.check=c(k.check,Q,2,0)),U=P=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(nt<(it=k.length)&&(it=nt),it&&(k.head&&(M=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),a.arraySet(k.head.extra,J,j,it,M)),512&k.flags&&(k.check=c(k.check,J,it,j)),nt-=it,j+=it,k.length-=it),k.length))break t;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(nt===0)break t;for(it=0;M=J[j+it++],k.head&&M&&k.length<65536&&(k.head.name+=String.fromCharCode(M)),M&&it<nt;);if(512&k.flags&&(k.check=c(k.check,J,it,j)),nt-=it,j+=it,M)break t}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(nt===0)break t;for(it=0;M=J[j+it++],k.head&&M&&k.length<65536&&(k.head.comment+=String.fromCharCode(M)),M&&it<nt;);if(512&k.flags&&(k.check=c(k.check,J,it,j)),nt-=it,j+=it,M)break t}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;U<16;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}if(P!==(65535&k.check)){F.msg="header crc mismatch",k.mode=30;break}U=P=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),F.adler=k.check=0,k.mode=12;break;case 10:for(;U<32;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}F.adler=k.check=x(P),U=P=0,k.mode=11;case 11:if(k.havedict===0)return F.next_out=q,F.avail_out=pt,F.next_in=j,F.avail_in=nt,k.hold=P,k.bits=U,2;F.adler=k.check=1,k.mode=12;case 12:if(Y===5||Y===6)break t;case 13:if(k.last){P>>>=7&U,U-=7&U,k.mode=27;break}for(;U<3;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}switch(k.last=1&P,U-=1,3&(P>>>=1)){case 0:k.mode=14;break;case 1:if(G(k),k.mode=20,Y!==6)break;P>>>=2,U-=2;break t;case 2:k.mode=17;break;case 3:F.msg="invalid block type",k.mode=30}P>>>=2,U-=2;break;case 14:for(P>>>=7&U,U-=7&U;U<32;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}if((65535&P)!=(P>>>16^65535)){F.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&P,U=P=0,k.mode=15,Y===6)break t;case 15:k.mode=16;case 16:if(it=k.length){if(nt<it&&(it=nt),pt<it&&(it=pt),it===0)break t;a.arraySet(z,J,j,it,q),nt-=it,j+=it,pt-=it,q+=it,k.length-=it;break}k.mode=12;break;case 17:for(;U<14;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}if(k.nlen=257+(31&P),P>>>=5,U-=5,k.ndist=1+(31&P),P>>>=5,U-=5,k.ncode=4+(15&P),P>>>=4,U-=4,286<k.nlen||30<k.ndist){F.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;U<3;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}k.lens[yt[k.have++]]=7&P,P>>>=3,U-=3}for(;k.have<19;)k.lens[yt[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,ct={bits:k.lenbits},ft=d(0,k.lens,0,19,k.lencode,0,k.work,ct),k.lenbits=ct.bits,ft){F.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;Et=(H=k.lencode[P&(1<<k.lenbits)-1])>>>16&255,Lt=65535&H,!((vt=H>>>24)<=U);){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}if(Lt<16)P>>>=vt,U-=vt,k.lens[k.have++]=Lt;else{if(Lt===16){for(V=vt+2;U<V;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}if(P>>>=vt,U-=vt,k.have===0){F.msg="invalid bit length repeat",k.mode=30;break}M=k.lens[k.have-1],it=3+(3&P),P>>>=2,U-=2}else if(Lt===17){for(V=vt+3;U<V;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}U-=vt,M=0,it=3+(7&(P>>>=vt)),P>>>=3,U-=3}else{for(V=vt+7;U<V;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}U-=vt,M=0,it=11+(127&(P>>>=vt)),P>>>=7,U-=7}if(k.have+it>k.nlen+k.ndist){F.msg="invalid bit length repeat",k.mode=30;break}for(;it--;)k.lens[k.have++]=M}}if(k.mode===30)break;if(k.lens[256]===0){F.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,ct={bits:k.lenbits},ft=d(p,k.lens,0,k.nlen,k.lencode,0,k.work,ct),k.lenbits=ct.bits,ft){F.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,ct={bits:k.distbits},ft=d(f,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,ct),k.distbits=ct.bits,ft){F.msg="invalid distances set",k.mode=30;break}if(k.mode=20,Y===6)break t;case 20:k.mode=21;case 21:if(6<=nt&&258<=pt){F.next_out=q,F.avail_out=pt,F.next_in=j,F.avail_in=nt,k.hold=P,k.bits=U,h(F,tt),q=F.next_out,z=F.output,pt=F.avail_out,j=F.next_in,J=F.input,nt=F.avail_in,P=k.hold,U=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;Et=(H=k.lencode[P&(1<<k.lenbits)-1])>>>16&255,Lt=65535&H,!((vt=H>>>24)<=U);){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}if(Et&&(240&Et)==0){for(Ot=vt,Ht=Et,le=Lt;Et=(H=k.lencode[le+((P&(1<<Ot+Ht)-1)>>Ot)])>>>16&255,Lt=65535&H,!(Ot+(vt=H>>>24)<=U);){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}P>>>=Ot,U-=Ot,k.back+=Ot}if(P>>>=vt,U-=vt,k.back+=vt,k.length=Lt,Et===0){k.mode=26;break}if(32&Et){k.back=-1,k.mode=12;break}if(64&Et){F.msg="invalid literal/length code",k.mode=30;break}k.extra=15&Et,k.mode=22;case 22:if(k.extra){for(V=k.extra;U<V;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}k.length+=P&(1<<k.extra)-1,P>>>=k.extra,U-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;Et=(H=k.distcode[P&(1<<k.distbits)-1])>>>16&255,Lt=65535&H,!((vt=H>>>24)<=U);){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}if((240&Et)==0){for(Ot=vt,Ht=Et,le=Lt;Et=(H=k.distcode[le+((P&(1<<Ot+Ht)-1)>>Ot)])>>>16&255,Lt=65535&H,!(Ot+(vt=H>>>24)<=U);){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}P>>>=Ot,U-=Ot,k.back+=Ot}if(P>>>=vt,U-=vt,k.back+=vt,64&Et){F.msg="invalid distance code",k.mode=30;break}k.offset=Lt,k.extra=15&Et,k.mode=24;case 24:if(k.extra){for(V=k.extra;U<V;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}k.offset+=P&(1<<k.extra)-1,P>>>=k.extra,U-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){F.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(pt===0)break t;if(it=tt-pt,k.offset>it){if((it=k.offset-it)>k.whave&&k.sane){F.msg="invalid distance too far back",k.mode=30;break}xt=it>k.wnext?(it-=k.wnext,k.wsize-it):k.wnext-it,it>k.length&&(it=k.length),ut=k.window}else ut=z,xt=q-k.offset,it=k.length;for(pt<it&&(it=pt),pt-=it,k.length-=it;z[q++]=ut[xt++],--it;);k.length===0&&(k.mode=21);break;case 26:if(pt===0)break t;z[q++]=k.length,pt--,k.mode=21;break;case 27:if(k.wrap){for(;U<32;){if(nt===0)break t;nt--,P|=J[j++]<<U,U+=8}if(tt-=pt,F.total_out+=tt,k.total+=tt,tt&&(F.adler=k.check=k.flags?c(k.check,z,tt,q-tt):l(k.check,z,tt,q-tt)),tt=pt,(k.flags?P:x(P))!==k.check){F.msg="incorrect data check",k.mode=30;break}U=P=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;U<32;){if(nt===0)break t;nt--,P+=J[j++]<<U,U+=8}if(P!==(4294967295&k.total)){F.msg="incorrect length check",k.mode=30;break}U=P=0}k.mode=29;case 29:ft=1;break t;case 30:ft=-3;break t;case 31:return-4;default:return y}return F.next_out=q,F.avail_out=pt,F.next_in=j,F.avail_in=nt,k.hold=P,k.bits=U,(k.wsize||tt!==F.avail_out&&k.mode<30&&(k.mode<27||Y!==4))&&W(F,F.output,F.next_out,tt-F.avail_out)?(k.mode=31,-4):(K-=F.avail_in,tt-=F.avail_out,F.total_in+=K,F.total_out+=tt,k.total+=tt,k.wrap&&tt&&(F.adler=k.check=k.flags?c(k.check,z,tt,F.next_out-tt):l(k.check,z,tt,F.next_out-tt)),F.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(K==0&&tt===0||Y===4)&&ft===g&&(ft=-5),ft)},i.inflateEnd=function(F){if(!F||!F.state)return y;var Y=F.state;return Y.window&&(Y.window=null),F.state=null,g},i.inflateGetHeader=function(F,Y){var k;return F&&F.state?(2&(k=F.state).wrap)==0?y:((k.head=Y).done=!1,g):y},i.inflateSetDictionary=function(F,Y){var k,J=Y.length;return F&&F.state?(k=F.state).wrap!==0&&k.mode!==11?y:k.mode===11&&l(1,Y,J,0)!==k.check?-3:W(F,Y,J,J)?(k.mode=31,-4):(k.havedict=1,g):y},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,i){var a=e("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(p,f,g,y,w,v,S,x){var A,E,R,T,O,D,N,I,G,W=x.bits,F=0,Y=0,k=0,J=0,z=0,j=0,q=0,nt=0,pt=0,P=0,U=null,K=0,tt=new a.Buf16(16),it=new a.Buf16(16),xt=null,ut=0;for(F=0;F<=15;F++)tt[F]=0;for(Y=0;Y<y;Y++)tt[f[g+Y]]++;for(z=W,J=15;1<=J&&tt[J]===0;J--);if(J<z&&(z=J),J===0)return w[v++]=20971520,w[v++]=20971520,x.bits=1,0;for(k=1;k<J&&tt[k]===0;k++);for(z<k&&(z=k),F=nt=1;F<=15;F++)if(nt<<=1,(nt-=tt[F])<0)return-1;if(0<nt&&(p===0||J!==1))return-1;for(it[1]=0,F=1;F<15;F++)it[F+1]=it[F]+tt[F];for(Y=0;Y<y;Y++)f[g+Y]!==0&&(S[it[f[g+Y]]++]=Y);if(D=p===0?(U=xt=S,19):p===1?(U=l,K-=257,xt=c,ut-=257,256):(U=h,xt=d,-1),F=k,O=v,q=Y=P=0,R=-1,T=(pt=1<<(j=z))-1,p===1&&852<pt||p===2&&592<pt)return 1;for(;;){for(N=F-q,G=S[Y]<D?(I=0,S[Y]):S[Y]>D?(I=xt[ut+S[Y]],U[K+S[Y]]):(I=96,0),A=1<<F-q,k=E=1<<j;w[O+(P>>q)+(E-=A)]=N<<24|I<<16|G|0,E!==0;);for(A=1<<F-1;P&A;)A>>=1;if(A!==0?(P&=A-1,P+=A):P=0,Y++,--tt[F]==0){if(F===J)break;F=f[g+S[Y]]}if(z<F&&(P&T)!==R){for(q===0&&(q=z),O+=k,nt=1<<(j=F-q);j+q<J&&!((nt-=tt[j+q])<=0);)j++,nt<<=1;if(pt+=1<<j,p===1&&852<pt||p===2&&592<pt)return 1;w[R=P&T]=z<<24|j<<16|O-v|0}}return P!==0&&(w[O+P]=F-q<<24|64<<16|0),x.bits=z,0}},{"../utils/common":41}],51:[function(e,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,i){var a=e("../utils/common"),l=0,c=1;function h(H){for(var Q=H.length;0<=--Q;)H[Q]=0}var d=0,p=29,f=256,g=f+1+p,y=30,w=19,v=2*g+1,S=15,x=16,A=7,E=256,R=16,T=17,O=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=new Array(2*(g+2));h(W);var F=new Array(2*y);h(F);var Y=new Array(512);h(Y);var k=new Array(256);h(k);var J=new Array(p);h(J);var z,j,q,nt=new Array(y);function pt(H,Q,yt,bt,st){this.static_tree=H,this.extra_bits=Q,this.extra_base=yt,this.elems=bt,this.max_length=st,this.has_stree=H&&H.length}function P(H,Q){this.dyn_tree=H,this.max_code=0,this.stat_desc=Q}function U(H){return H<256?Y[H]:Y[256+(H>>>7)]}function K(H,Q){H.pending_buf[H.pending++]=255&Q,H.pending_buf[H.pending++]=Q>>>8&255}function tt(H,Q,yt){H.bi_valid>x-yt?(H.bi_buf|=Q<<H.bi_valid&65535,K(H,H.bi_buf),H.bi_buf=Q>>x-H.bi_valid,H.bi_valid+=yt-x):(H.bi_buf|=Q<<H.bi_valid&65535,H.bi_valid+=yt)}function it(H,Q,yt){tt(H,yt[2*Q],yt[2*Q+1])}function xt(H,Q){for(var yt=0;yt|=1&H,H>>>=1,yt<<=1,0<--Q;);return yt>>>1}function ut(H,Q,yt){var bt,st,_t=new Array(S+1),Ct=0;for(bt=1;bt<=S;bt++)_t[bt]=Ct=Ct+yt[bt-1]<<1;for(st=0;st<=Q;st++){var At=H[2*st+1];At!==0&&(H[2*st]=xt(_t[At]++,At))}}function vt(H){var Q;for(Q=0;Q<g;Q++)H.dyn_ltree[2*Q]=0;for(Q=0;Q<y;Q++)H.dyn_dtree[2*Q]=0;for(Q=0;Q<w;Q++)H.bl_tree[2*Q]=0;H.dyn_ltree[2*E]=1,H.opt_len=H.static_len=0,H.last_lit=H.matches=0}function Et(H){8<H.bi_valid?K(H,H.bi_buf):0<H.bi_valid&&(H.pending_buf[H.pending++]=H.bi_buf),H.bi_buf=0,H.bi_valid=0}function Lt(H,Q,yt,bt){var st=2*Q,_t=2*yt;return H[st]<H[_t]||H[st]===H[_t]&&bt[Q]<=bt[yt]}function Ot(H,Q,yt){for(var bt=H.heap[yt],st=yt<<1;st<=H.heap_len&&(st<H.heap_len&&Lt(Q,H.heap[st+1],H.heap[st],H.depth)&&st++,!Lt(Q,bt,H.heap[st],H.depth));)H.heap[yt]=H.heap[st],yt=st,st<<=1;H.heap[yt]=bt}function Ht(H,Q,yt){var bt,st,_t,Ct,At=0;if(H.last_lit!==0)for(;bt=H.pending_buf[H.d_buf+2*At]<<8|H.pending_buf[H.d_buf+2*At+1],st=H.pending_buf[H.l_buf+At],At++,bt===0?it(H,st,Q):(it(H,(_t=k[st])+f+1,Q),(Ct=D[_t])!==0&&tt(H,st-=J[_t],Ct),it(H,_t=U(--bt),yt),(Ct=N[_t])!==0&&tt(H,bt-=nt[_t],Ct)),At<H.last_lit;);it(H,E,Q)}function le(H,Q){var yt,bt,st,_t=Q.dyn_tree,Ct=Q.stat_desc.static_tree,At=Q.stat_desc.has_stree,It=Q.stat_desc.elems,he=-1;for(H.heap_len=0,H.heap_max=v,yt=0;yt<It;yt++)_t[2*yt]!==0?(H.heap[++H.heap_len]=he=yt,H.depth[yt]=0):_t[2*yt+1]=0;for(;H.heap_len<2;)_t[2*(st=H.heap[++H.heap_len]=he<2?++he:0)]=1,H.depth[st]=0,H.opt_len--,At&&(H.static_len-=Ct[2*st+1]);for(Q.max_code=he,yt=H.heap_len>>1;1<=yt;yt--)Ot(H,_t,yt);for(st=It;yt=H.heap[1],H.heap[1]=H.heap[H.heap_len--],Ot(H,_t,1),bt=H.heap[1],H.heap[--H.heap_max]=yt,H.heap[--H.heap_max]=bt,_t[2*st]=_t[2*yt]+_t[2*bt],H.depth[st]=(H.depth[yt]>=H.depth[bt]?H.depth[yt]:H.depth[bt])+1,_t[2*yt+1]=_t[2*bt+1]=st,H.heap[1]=st++,Ot(H,_t,1),2<=H.heap_len;);H.heap[--H.heap_max]=H.heap[1],(function(Kt,un){var Nn,Pn,$n,me,Ge,Ln,Ae=un.dyn_tree,Ra=un.max_code,zr=un.stat_desc.static_tree,xs=un.stat_desc.has_stree,Wi=un.stat_desc.extra_bits,wi=un.stat_desc.extra_base,as=un.stat_desc.max_length,Bn=0;for(me=0;me<=S;me++)Kt.bl_count[me]=0;for(Ae[2*Kt.heap[Kt.heap_max]+1]=0,Nn=Kt.heap_max+1;Nn<v;Nn++)as<(me=Ae[2*Ae[2*(Pn=Kt.heap[Nn])+1]+1]+1)&&(me=as,Bn++),Ae[2*Pn+1]=me,Ra<Pn||(Kt.bl_count[me]++,Ge=0,wi<=Pn&&(Ge=Wi[Pn-wi]),Ln=Ae[2*Pn],Kt.opt_len+=Ln*(me+Ge),xs&&(Kt.static_len+=Ln*(zr[2*Pn+1]+Ge)));if(Bn!==0){do{for(me=as-1;Kt.bl_count[me]===0;)me--;Kt.bl_count[me]--,Kt.bl_count[me+1]+=2,Kt.bl_count[as]--,Bn-=2}while(0<Bn);for(me=as;me!==0;me--)for(Pn=Kt.bl_count[me];Pn!==0;)Ra<($n=Kt.heap[--Nn])||(Ae[2*$n+1]!==me&&(Kt.opt_len+=(me-Ae[2*$n+1])*Ae[2*$n],Ae[2*$n+1]=me),Pn--)}})(H,Q),ut(_t,he,H.bl_count)}function M(H,Q,yt){var bt,st,_t=-1,Ct=Q[1],At=0,It=7,he=4;for(Ct===0&&(It=138,he=3),Q[2*(yt+1)+1]=65535,bt=0;bt<=yt;bt++)st=Ct,Ct=Q[2*(bt+1)+1],++At<It&&st===Ct||(At<he?H.bl_tree[2*st]+=At:st!==0?(st!==_t&&H.bl_tree[2*st]++,H.bl_tree[2*R]++):At<=10?H.bl_tree[2*T]++:H.bl_tree[2*O]++,_t=st,he=(At=0)===Ct?(It=138,3):st===Ct?(It=6,3):(It=7,4))}function ft(H,Q,yt){var bt,st,_t=-1,Ct=Q[1],At=0,It=7,he=4;for(Ct===0&&(It=138,he=3),bt=0;bt<=yt;bt++)if(st=Ct,Ct=Q[2*(bt+1)+1],!(++At<It&&st===Ct)){if(At<he)for(;it(H,st,H.bl_tree),--At!=0;);else st!==0?(st!==_t&&(it(H,st,H.bl_tree),At--),it(H,R,H.bl_tree),tt(H,At-3,2)):At<=10?(it(H,T,H.bl_tree),tt(H,At-3,3)):(it(H,O,H.bl_tree),tt(H,At-11,7));_t=st,he=(At=0)===Ct?(It=138,3):st===Ct?(It=6,3):(It=7,4)}}h(nt);var ct=!1;function V(H,Q,yt,bt){tt(H,(d<<1)+(bt?1:0),3),(function(st,_t,Ct,At){Et(st),K(st,Ct),K(st,~Ct),a.arraySet(st.pending_buf,st.window,_t,Ct,st.pending),st.pending+=Ct})(H,Q,yt)}i._tr_init=function(H){ct||((function(){var Q,yt,bt,st,_t,Ct=new Array(S+1);for(st=bt=0;st<p-1;st++)for(J[st]=bt,Q=0;Q<1<<D[st];Q++)k[bt++]=st;for(k[bt-1]=st,st=_t=0;st<16;st++)for(nt[st]=_t,Q=0;Q<1<<N[st];Q++)Y[_t++]=st;for(_t>>=7;st<y;st++)for(nt[st]=_t<<7,Q=0;Q<1<<N[st]-7;Q++)Y[256+_t++]=st;for(yt=0;yt<=S;yt++)Ct[yt]=0;for(Q=0;Q<=143;)W[2*Q+1]=8,Q++,Ct[8]++;for(;Q<=255;)W[2*Q+1]=9,Q++,Ct[9]++;for(;Q<=279;)W[2*Q+1]=7,Q++,Ct[7]++;for(;Q<=287;)W[2*Q+1]=8,Q++,Ct[8]++;for(ut(W,g+1,Ct),Q=0;Q<y;Q++)F[2*Q+1]=5,F[2*Q]=xt(Q,5);z=new pt(W,D,f+1,g,S),j=new pt(F,N,0,y,S),q=new pt(new Array(0),I,0,w,A)})(),ct=!0),H.l_desc=new P(H.dyn_ltree,z),H.d_desc=new P(H.dyn_dtree,j),H.bl_desc=new P(H.bl_tree,q),H.bi_buf=0,H.bi_valid=0,vt(H)},i._tr_stored_block=V,i._tr_flush_block=function(H,Q,yt,bt){var st,_t,Ct=0;0<H.level?(H.strm.data_type===2&&(H.strm.data_type=(function(At){var It,he=4093624447;for(It=0;It<=31;It++,he>>>=1)if(1&he&&At.dyn_ltree[2*It]!==0)return l;if(At.dyn_ltree[18]!==0||At.dyn_ltree[20]!==0||At.dyn_ltree[26]!==0)return c;for(It=32;It<f;It++)if(At.dyn_ltree[2*It]!==0)return c;return l})(H)),le(H,H.l_desc),le(H,H.d_desc),Ct=(function(At){var It;for(M(At,At.dyn_ltree,At.l_desc.max_code),M(At,At.dyn_dtree,At.d_desc.max_code),le(At,At.bl_desc),It=w-1;3<=It&&At.bl_tree[2*G[It]+1]===0;It--);return At.opt_len+=3*(It+1)+5+5+4,It})(H),st=H.opt_len+3+7>>>3,(_t=H.static_len+3+7>>>3)<=st&&(st=_t)):st=_t=yt+5,yt+4<=st&&Q!==-1?V(H,Q,yt,bt):H.strategy===4||_t===st?(tt(H,2+(bt?1:0),3),Ht(H,W,F)):(tt(H,4+(bt?1:0),3),(function(At,It,he,Kt){var un;for(tt(At,It-257,5),tt(At,he-1,5),tt(At,Kt-4,4),un=0;un<Kt;un++)tt(At,At.bl_tree[2*G[un]+1],3);ft(At,At.dyn_ltree,It-1),ft(At,At.dyn_dtree,he-1)})(H,H.l_desc.max_code+1,H.d_desc.max_code+1,Ct+1),Ht(H,H.dyn_ltree,H.dyn_dtree)),vt(H),bt&&Et(H)},i._tr_tally=function(H,Q,yt){return H.pending_buf[H.d_buf+2*H.last_lit]=Q>>>8&255,H.pending_buf[H.d_buf+2*H.last_lit+1]=255&Q,H.pending_buf[H.l_buf+H.last_lit]=255&yt,H.last_lit++,Q===0?H.dyn_ltree[2*yt]++:(H.matches++,Q--,H.dyn_ltree[2*(k[yt]+f+1)]++,H.dyn_dtree[2*U(Q)]++),H.last_lit===H.lit_bufsize-1},i._tr_align=function(H){tt(H,2,3),it(H,E,W),(function(Q){Q.bi_valid===16?(K(Q,Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0):8<=Q.bi_valid&&(Q.pending_buf[Q.pending++]=255&Q.bi_buf,Q.bi_buf>>=8,Q.bi_valid-=8)})(H)}},{"../utils/common":41}],53:[function(e,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,i){(function(a){(function(l,c){if(!l.setImmediate){var h,d,p,f,g=1,y={},w=!1,v=l.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(l);S=S&&S.setTimeout?S:l,h={}.toString.call(l.process)==="[object process]"?function(R){process.nextTick(function(){A(R)})}:(function(){if(l.postMessage&&!l.importScripts){var R=!0,T=l.onmessage;return l.onmessage=function(){R=!1},l.postMessage("","*"),l.onmessage=T,R}})()?(f="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",E,!1):l.attachEvent("onmessage",E),function(R){l.postMessage(f+R,"*")}):l.MessageChannel?((p=new MessageChannel).port1.onmessage=function(R){A(R.data)},function(R){p.port2.postMessage(R)}):v&&"onreadystatechange"in v.createElement("script")?(d=v.documentElement,function(R){var T=v.createElement("script");T.onreadystatechange=function(){A(R),T.onreadystatechange=null,d.removeChild(T),T=null},d.appendChild(T)}):function(R){setTimeout(A,0,R)},S.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var T=new Array(arguments.length-1),O=0;O<T.length;O++)T[O]=arguments[O+1];var D={callback:R,args:T};return y[g]=D,h(g),g++},S.clearImmediate=x}function x(R){delete y[R]}function A(R){if(w)setTimeout(A,0,R);else{var T=y[R];if(T){w=!0;try{(function(O){var D=O.callback,N=O.args;switch(N.length){case 0:D();break;case 1:D(N[0]);break;case 2:D(N[0],N[1]);break;case 3:D(N[0],N[1],N[2]);break;default:D.apply(c,N)}})(T)}finally{x(R),w=!1}}}}function E(R){R.source===l&&typeof R.data=="string"&&R.data.indexOf(f)===0&&A(+R.data.slice(f.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof Rr<"u"?Rr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(bg)),bg.exports}var Y6=X6();const W6=qy(Y6),zn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),vy=[.001,0,0,.001,0,0],wg=1.35,ys={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Cr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ic="pdfjs_internal_editor_",Wt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ae={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},K6={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},by={TRIANGLES:1,LATTICE:2},rn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},nd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ze={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},So={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},cf={ERRORS:0,WARNINGS:1,INFOS:5},Fc={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Jl={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},Z6={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let uf=cf.WARNINGS;function Q6(s){Number.isInteger(s)&&(uf=s)}function J6(){return uf}function hf(s){uf>=cf.INFOS&&console.info(`Info: ${s}`)}function Xt(s){uf>=cf.WARNINGS&&console.warn(`Warning: ${s}`)}function Se(s){throw new Error(s)}function oe(s,t){s||Se(t)}function tj(s){switch(s?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function L2(s,t=null,e=null){if(!s)return null;if(e&&typeof s=="string"&&(e.addDefaultProtocol&&s.startsWith("www.")&&s.match(/\./g)?.length>=2&&(s=`http://${s}`),e.tryConvertEncoding))try{s=rj(s)}catch{}const n=t?URL.parse(s,t):URL.parse(s);return tj(n)?n:null}function B2(s,t,e=!1){const n=URL.parse(s);return n?(n.hash=t,n.href):e&&L2(s,"http://example.com")?s.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Yt(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Ca=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class KS extends Ca{constructor(t,e){super(t,"PasswordException"),this.code=e}}class _g extends Ca{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class wy extends Ca{constructor(t){super(t,"InvalidPDFException")}}class Md extends Ca{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class ej extends Ca{constructor(t){super(t,"FormatError")}}class Pr extends Ca{constructor(t){super(t,"AbortException")}}function I2(s){(typeof s!="object"||s?.length===void 0)&&Se("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let i=0;i<t;i+=e){const a=Math.min(i+e,t),l=s.subarray(i,a);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function Wc(s){typeof s!="string"&&Se("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function nj(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function sj(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function ij(){try{return new Function(""),!0}catch{return!1}}class ln{static get isLittleEndian(){return Yt(this,"isLittleEndian",sj())}static get isEvalSupported(){return Yt(this,"isEvalSupported",ij())}static get isOffscreenCanvasSupported(){return Yt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Yt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Yt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Yt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Yt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Yt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const xg=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));class Tt{static makeHexColor(t,e,n){return`#${xg[t]}${xg[e]}${xg[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const i=t[n],a=t[n+1];t[n]=i*e[0]+a*e[2]+e[4],t[n+1]=i*e[1]+a*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const i=e[0],a=e[1],l=e[2],c=e[3],h=e[4],d=e[5];for(let p=0;p<6;p+=2){const f=t[n+p],g=t[n+p+1];t[n+p]=f*i+g*l+h,t[n+p+1]=f*a+g*c+d}}static applyInverseTransform(t,e){const n=t[0],i=t[1],a=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/a,t[1]=(-n*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/a}static axialAlignedBoundingBox(t,e,n){const i=e[0],a=e[1],l=e[2],c=e[3],h=e[4],d=e[5],p=t[0],f=t[1],g=t[2],y=t[3];let w=i*p+h,v=w,S=i*g+h,x=S,A=c*f+d,E=A,R=c*y+d,T=R;if(a!==0||l!==0){const O=a*p,D=a*g,N=l*f,I=l*y;w+=N,x+=N,S+=I,v+=I,A+=O,T+=O,R+=D,E+=D}n[0]=Math.min(n[0],w,S,v,x),n[1]=Math.min(n[1],A,R,E,T),n[2]=Math.max(n[2],w,S,v,x),n[3]=Math.max(n[3],A,R,E,T)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],i=t[1],a=t[2],l=t[3],c=n**2+i**2,h=n*a+i*l,d=a**2+l**2,p=(c+d)/2,f=Math.sqrt(p**2-(c*d-h**2));e[0]=Math.sqrt(p+f||1),e[1]=Math.sqrt(p-f||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>l?null:[n,a,i,l]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,i,a){a[0]=Math.min(a[0],t,n),a[1]=Math.min(a[1],e,i),a[2]=Math.max(a[2],t,n),a[3]=Math.max(a[3],e,i)}static#t(t,e,n,i,a,l,c,h,d,p){if(d<=0||d>=1)return;const f=1-d,g=d*d,y=g*d,w=f*(f*(f*t+3*d*e)+3*g*n)+y*i,v=f*(f*(f*a+3*d*l)+3*g*c)+y*h;p[0]=Math.min(p[0],w),p[1]=Math.min(p[1],v),p[2]=Math.max(p[2],w),p[3]=Math.max(p[3],v)}static#e(t,e,n,i,a,l,c,h,d,p,f,g){if(Math.abs(d)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,n,i,a,l,c,h,-f/p,g);return}const y=p**2-4*f*d;if(y<0)return;const w=Math.sqrt(y),v=2*d;this.#t(t,e,n,i,a,l,c,h,(-p+w)/v,g),this.#t(t,e,n,i,a,l,c,h,(-p-w)/v,g)}static bezierBoundingBox(t,e,n,i,a,l,c,h,d){d[0]=Math.min(d[0],t,c),d[1]=Math.min(d[1],e,h),d[2]=Math.max(d[2],t,c),d[3]=Math.max(d[3],e,h),this.#e(t,n,a,c,e,i,l,h,3*(-t+3*(n-a)+c),6*(t-2*n+a),3*(n-t),d),this.#e(t,n,a,c,e,i,l,h,3*(-e+3*(i-l)+h),6*(e-2*i+l),3*(i-e),d)}}function rj(s){return decodeURIComponent(escape(s))}let Sg=null,ZS=null;function aj(s){return Sg||(Sg=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ZS=new Map([["","t"]])),s.replaceAll(Sg,(t,e,n)=>e?e.normalize("NFKC"):ZS.get(n))}function F2(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),I2(s)}const No="pdfjs_internal_id_";function oj(s,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,i,...a]=e;if(!s(n)&&!Number.isInteger(n)||!t(i))return!1;const l=a.length;let c=!0;switch(i.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;c=!1;break;default:return!1}for(const h of a)if(!(typeof h=="number"||c&&h===null))return!1;return!0}function jn(s,t,e){return Math.min(Math.max(s,t),e)}function z2(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(I2(s))}function lj(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):Wc(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...t){return new Promise(e=>{e(s(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((t,e)=>t+e,0)});class zc{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(a){if(!a)return;let l=null;const c=a.name;if(c==="#text")l=a.value;else if(zc.shouldBuildText(c))a?.attributes?.textContent?l=a.attributes.textContent:a.value&&(l=a.value);else return;if(l!==null&&e.push({str:l}),!!a.children)for(const h of a.children)i(h)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class j2{static setupStorage(t,e,n,i,a){const l=i.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),a==="print")break;t.addEventListener("input",c=>{i.setValue(e,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",c=>{i.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),a==="print")break;t.addEventListener("input",c=>{i.setValue(e,{value:c.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const c of n.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const h=c.target.options,d=h.selectedIndex===-1?"":h[h.selectedIndex].value;i.setValue(e,{value:d})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:a}){const{attributes:l}=e,c=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${i}`);for(const[h,d]of Object.entries(l))if(d!=null)switch(h){case"class":d.length&&t.setAttribute(h,d.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",d);break;case"style":Object.assign(t.style,d);break;case"textContent":t.textContent=d;break;default:(!c||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,d)}c&&a.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,a=t.intent||"display",l=document.createElement(i.name);i.attributes&&this.setAttributes({html:l,element:i,intent:a,linkService:n});const c=a!=="richText",h=t.div;if(h.append(l),t.viewport){const f=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=f}c&&h.setAttribute("class","xfaLayer xfaFont");const d=[];if(i.children.length===0){if(i.value){const f=document.createTextNode(i.value);l.append(f),c&&zc.shouldBuildText(i.name)&&d.push(f)}return{textDivs:d}}const p=[[i,-1,l]];for(;p.length>0;){const[f,g,y]=p.at(-1);if(g+1===f.children.length){p.pop();continue}const w=f.children[++p.at(-1)[1]];if(w===null)continue;const{name:v}=w;if(v==="#text"){const x=document.createTextNode(w.value);d.push(x),y.append(x);continue}const S=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,v):document.createElement(v);if(y.append(S),w.attributes&&this.setAttributes({html:S,element:w,storage:e,intent:a,linkService:n}),w.children?.length>0)p.push([w,-1,S]);else if(w.value){const x=document.createTextNode(w.value);c&&zc.shouldBuildText(v)&&d.push(x),S.append(x)}}for(const f of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:d}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Ui="http://www.w3.org/2000/svg";class Wo{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Kc(s,t="text"){if(cc(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class Zc{constructor({viewBox:t,userUnit:e,scale:n,rotation:i,offsetX:a=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=i,this.offsetX=a,this.offsetY=l,n*=e;const h=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let p,f,g,y;switch(i%=360,i<0&&(i+=360),i){case 180:p=-1,f=0,g=0,y=1;break;case 90:p=0,f=1,g=1,y=0;break;case 270:p=0,f=-1,g=-1,y=0;break;case 0:p=1,f=0,g=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(g=-g,y=-y);let w,v,S,x;p===0?(w=Math.abs(d-t[1])*n+a,v=Math.abs(h-t[0])*n+l,S=(t[3]-t[1])*n,x=(t[2]-t[0])*n):(w=Math.abs(h-t[0])*n+a,v=Math.abs(d-t[1])*n+l,S=(t[2]-t[0])*n,x=(t[3]-t[1])*n),this.transform=[p*n,f*n,g*n,y*n,w-p*n*h-g*n*d,v-f*n*h-y*n*d],this.width=S,this.height=x}get rawDims(){const t=this.viewBox;return Yt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new Zc({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:a})}convertToViewportPoint(t,e){const n=[t,e];return Tt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];Tt.applyTransform(e,this.transform);const n=[t[2],t[3]];return Tt.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return Tt.applyInverseTransform(n,this.transform),n}}class Xv extends Ca{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function df(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function Yv(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function cj(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function uj(s,t="document.pdf"){if(typeof s!="string")return t;if(df(s))return Xt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return t;const i=c=>{try{let h=decodeURIComponent(c);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:c):h}catch{return c}},a=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(a.test(l))return i(l);if(n.searchParams.size>0){const c=Array.from(n.searchParams.values()).reverse();for(const d of c)if(a.test(d))return i(d);const h=Array.from(n.searchParams.keys()).reverse();for(const d of h)if(a.test(d))return i(d)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return i(h[0])}return t}class QS{started=Object.create(null);times=[];time(t){t in this.started&&Xt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Xt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:a}of this.times)t.push(`${n.padEnd(e)} ${a-i}ms
`);return t.join("")}}function cc(s,t){const e=t?URL.parse(s,t):URL.parse(s);return e?.protocol==="http:"||e?.protocol==="https:"}function js(s){s.preventDefault()}function je(s){s.preventDefault(),s.stopPropagation()}function hj(s){console.log("Deprecated API usage: "+s)}class _y{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const d=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let f=parseInt(e[9],10)||0;return f=f>=0&&f<=59?f:0,d==="-"?(l+=p,c+=f):d==="+"&&(l-=p,c-=f),new Date(Date.UTC(n,i,a,l,c,h))}}function dj(s,{scale:t=1,rotation:e=0}){const{width:n,height:i}=s.attributes.style,a=[0,0,parseInt(n),parseInt(i)];return new Zc({viewBox:a,userUnit:1,scale:t,rotation:e})}function Qc(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Xt(`Not a valid color format: "${s}"`),[0,0,0])}function fj(s){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,Qc(n))}t.remove()}function Pe(s){const{a:t,b:e,c:n,d:i,e:a,f:l}=s.getTransform();return[t,e,n,i,a,l]}function ri(s){const{a:t,b:e,c:n,d:i,e:a,f:l}=s.getTransform().invertSelf();return[t,e,n,i,a,l]}function Sa(s,t,e=!1,n=!0){if(t instanceof Zc){const{pageWidth:i,pageHeight:a}=t.rawDims,{style:l}=s,c=ln.isCSSRoundSupported,h=`var(--total-scale-factor) * ${i}px`,d=`var(--total-scale-factor) * ${a}px`,p=c?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,f=c?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!e||t.rotation%180===0?(l.width=p,l.height=f):(l.width=f,l.height=p)}n&&s.setAttribute("data-main-rotation",t.rotation)}class vi{constructor(){const{pixelRatio:t}=vi;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,i,a=-1){let l=1/0,c=1/0,h=1/0;n=vi.capPixels(n,a),n>0&&(l=Math.sqrt(n/(t*e))),i!==-1&&(c=i/t,h=i/e);const d=Math.min(l,c,h);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const xy=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class pj{static get isDarkMode(){return Yt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class mj{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Yt(this,"commentForegroundColor",Qc(n))}}function gj(s,t,e,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return s=Math.round(s*n+i),t=Math.round(t*n+i),e=Math.round(e*n+i),[s,t,e]}function JS(s,t){const e=s[0]/255,n=s[1]/255,i=s[2]/255,a=Math.max(e,n,i),l=Math.min(e,n,i),c=(a+l)/2;if(a===l)t[0]=t[1]=0;else{const h=a-l;switch(t[1]=c<.5?h/(a+l):h/(2-a-l),a){case e:t[0]=((n-i)/h+(n<i?6:0))*60;break;case n:t[0]=((i-e)/h+2)*60;break;case i:t[0]=((e-n)/h+4)*60;break}}t[2]=c}function Sy(s,t){const e=s[0],n=s[1],i=s[2],a=(1-Math.abs(2*i-1))*n,l=a*(1-Math.abs(e/60%2-1)),c=i-a/2;switch(Math.floor(e/60)){case 0:t[0]=a+c,t[1]=l+c,t[2]=c;break;case 1:t[0]=l+c,t[1]=a+c,t[2]=c;break;case 2:t[0]=c,t[1]=a+c,t[2]=l+c;break;case 3:t[0]=c,t[1]=l+c,t[2]=a+c;break;case 4:t[0]=l+c,t[1]=c,t[2]=a+c;break;case 5:case 6:t[0]=a+c,t[1]=c,t[2]=l+c;break}}function tA(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function eA(s,t,e){Sy(s,e),e.map(tA);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];Sy(t,e),e.map(tA);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const nA=new Map;function yj(s,t){const e=s[0]+s[1]*256+s[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=nA.get(e);if(n)return n;const i=new Float32Array(9),a=i.subarray(0,3),l=i.subarray(3,6);JS(s,l);const c=i.subarray(6,9);JS(t,c);const h=c[2]<.5,d=h?12:4.5;if(l[2]=h?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),eA(l,c,a)<d){let p,f;h?(p=l[2],f=1):(p=0,f=l[2]);const g=.005;for(;f-p>g;){const y=l[2]=(p+f)/2;h===eA(l,c,a)<d?p=y:f=y}l[2]=h?f:p}return Sy(l,a),n=Tt.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),nA.set(e,n),n}function U2({html:s,dir:t,className:e},n){const i=document.createDocumentFragment();if(typeof s=="string"){const a=document.createElement("p");a.dir=t||"auto";const l=s.split(/(?:\r\n?|\n)/);for(let c=0,h=l.length;c<h;++c){const d=l[c];a.append(document.createTextNode(d)),c<h-1&&a.append(document.createElement("br"))}i.append(a)}else j2.render({xfaHtml:s,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",e),n.append(i)}function H2(s){const t=new Path2D;if(!s)return t;for(let e=0,n=s.length;e<n;)switch(s[e++]){case Jl.moveTo:t.moveTo(s[e++],s[e++]);break;case Jl.lineTo:t.lineTo(s[e++],s[e++]);break;case Jl.curveTo:t.bezierCurveTo(s[e++],s[e++],s[e++],s[e++],s[e++],s[e++]);break;case Jl.quadraticCurveTo:t.quadraticCurveTo(s[e++],s[e++],s[e++],s[e++]);break;case Jl.closePath:t.closePath();break;default:Xt(`Unrecognized drawing path operator: ${s[e-1]}`);break}return t}class Ec{#t=null;#e=null;#s;#n=null;#a=null;#r=null;#i=null;#o=null;static#c=null;constructor(t){this.#s=t,Ec.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#s._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",js,{signal:e}),t.addEventListener("pointerdown",Ec.#l,{signal:e}));const n=this.#n=document.createElement("div");n.className="buttons",t.append(n);const i=this.#s.toolbarPosition;if(i){const{style:a}=t,l=this.#s._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*l}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#s._focusEventsAllowed=!1,je(t)}#h(t){this.#s._focusEventsAllowed=!0,je(t)}#f(t){const e=this.#s._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",js,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#s,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",Ec.#c[t]),this.#f(n)&&n.addEventListener("click",i=>{e.delete()},{signal:e._signal}),this.#n.append(n)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#g),this.#a=t}addComment(t,e=null){if(this.#r)return;const n=t.renderForToolbar();if(!n)return;this.#f(n);const i=this.#i=this.#g;e?(this.#n.insertBefore(n,e),this.#n.insertBefore(i,e)):this.#n.append(n,i),this.#r=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#s);this.#f(e),this.#n.append(e,this.#g)}removeButton(t){t==="comment"&&(this.#r?.removeToolbarCommentButton(),this.#r=null,this.#i?.remove(),this.#i=null)}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const i=this.#n.querySelector(n);i&&t==="comment"&&this.addComment(e,i)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class vj{#t=null;#e=null;#s;constructor(t){this.#s=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#s._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",js,{signal:e});const n=this.#t=document.createElement("div");return n.className="buttons",t.append(n),this.#s.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#s.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#s.highlightSelection("floating_button")}),t}#a(t,e){let n=0,i=0;for(const a of t){const l=a.y+a.height;if(l<n)continue;const c=a.x+(e?a.width:0);if(l>n){i=c,n=l;continue}e?c>i&&(i=c):c<i&&(i=c)}return[e?1-i:i,n]}show(t,e,n){const[i,a]=this.#a(e,n),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*i}%`,l.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(t,e,n,i){const a=document.createElement("button");a.classList.add("basic",t),a.tabIndex=0,a.setAttribute("data-l10n-id",e);const l=document.createElement("span");a.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const c=this.#s._signal;c instanceof AbortSignal&&!c.aborted&&(a.addEventListener("contextmenu",js,{signal:c}),a.addEventListener("click",i,{signal:c})),this.#t.append(a)}}function V2(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}class pe{static#t=NaN;static#e=null;static#s=NaN;static#n=null;static initializeAndAddPointerId(t){(pe.#e||=new Set).add(t)}static setPointer(t,e){pe.#t||=e,pe.#n??=t}static setTimeStamp(t){pe.#s=t}static isSamePointerId(t){return pe.#t===t}static isSamePointerIdOrRemove(t){return pe.#t===t?!0:(pe.#e?.delete(t),!1)}static isSamePointerType(t){return pe.#n===t}static isInitializedAndDifferentPointerType(t){return pe.#n!==null&&!pe.isSamePointerType(t)}static isSameTimeStamp(t){return pe.#s===t}static isUsingMultiplePointers(){return pe.#e?.size>=1}static clearPointerType(){pe.#n=null}static clearPointerIds(){pe.#t=NaN,pe.#e=null}static clearTimeStamp(){pe.#s=NaN}}class bj{#t=0;get id(){return`${Ic}${this.#t++}`}}class Wv{#t=F2();#e=0;#s=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const a=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Yt(this,"_isSVGFittingCanvas",a)}async#n(t,e){this.#s||=new Map;let n=this.#s.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let i;if(typeof e=="string"?(n.url=e,i=await Kc(e,"blob")):e instanceof File?i=n.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const a=Wv._isSVGFittingCanvas,l=new FileReader,c=new Image,h=new Promise((d,p)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,d()},l.onload=async()=>{const f=n.svgUrl=l.result;c.src=await a?`${f}#svgView(preserveAspectRatio(none))`:f},c.onerror=l.onerror=p});l.readAsDataURL(i),await h}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Xt(i),n=null}return this.#s.set(t,n),n&&this.#s.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:i,type:a}=t;return this.#n(`${e}_${n}_${i}_${a}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const n=await e;return this.#n(t,n)}async getFromId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#s||=new Map;let n=this.#s.get(t);if(n?.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#s.set(t,n),this.#s.set(n.id,n),n}getSvgUrl(t){const e=this.#s.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=i.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class wj{#t=[];#e=!1;#s;#n=-1;constructor(t=128){this.#s=t}add({cmd:t,undo:e,post:n,mustExec:i,type:a=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(i&&t(),this.#e)return;const h={cmd:t,undo:e,post:n,type:a};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(h);return}if(l&&this.#t[this.#n].type===a){c&&(h.undo=this.#t[this.#n].undo),this.#t[this.#n]=h;return}const d=this.#n+1;d===this.#s?this.#t.splice(0,1):(this.#n=d,d<this.#t.length&&this.#t.splice(d)),this.#t.push(h)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class Jc{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ln.platform;for(const[n,i,a={}]of t)for(const l of n){const c=l.startsWith("mac+");e&&c?(this.callbacks.set(l.slice(4),{callback:i,options:a}),this.allKeys.add(l.split("+").at(-1))):!e&&!c&&(this.callbacks.set(l,{callback:i,options:a}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#t(e));if(!n)return;const{callback:i,options:{bubbles:a=!1,args:l=[],checker:c=null}}=n;c&&!c(t,e)||(i.bind(t,...l,e)(),a||je(e))}}class Kv{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return fj(t),Yt(this,"_colors",t)}convert(t){const e=Qc(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((a,l)=>a===e[l]))return Kv._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Tt.makeHexColor(...e):t}}class Lr{#t=new AbortController;#e=null;#s=null;#n=new Map;#a=new Map;#r=null;#i=null;#o=null;#c=new wj;#l=null;#d=null;#h=null;#f=0;#g=new Set;#m=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#b=!1;#v=!1;#E=null;#S=null;#_=null;#T=null;#w=!1;#A=null;#M=new bj;#R=!1;#k=!1;#I=!1;#O=null;#P=null;#F=null;#L=null;#$=null;#C=Wt.NONE;#x=new Set;#N=null;#z=null;#U=null;#X=null;#q=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#B=null;#G=null;#Q=null;#J=null;#j=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Lr.prototype,e=l=>l.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:h}=c;return h!=="text"&&h!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Yt(this,"_keyboardManager",new Jc([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#G.contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}constructor(t,e,n,i,a,l,c,h,d,p,f,g,y,w,v,S){const x=this._signal=this.#t.signal;this.#G=t,this.#Q=e,this.#J=n,this.#r=i,this.#l=a,this.#z=l,this.#q=h,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:x}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),c._on("setpreference",this.onSetPreference.bind(this),{signal:x}),c._on("switchannotationeditorparams",A=>this.updateParams(A.type,A.value),{signal:x}),window.addEventListener("pointerdown",()=>{this.#k=!0},{capture:!0,signal:x}),window.addEventListener("pointerup",()=>{this.#k=!1},{capture:!0,signal:x}),this.#at(),this.#dt(),this.#et(),this.#i=h.annotationStorage,this.#E=h.filterFactory,this.#U=d,this.#T=p||null,this.#y=f,this.#b=g,this.#v=y,this.#$=w||null,this.viewParameters={realScale:Wo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=S!==!1,a?.setSidebarUiManager(this)}destroy(){this.#j?.resolve(),this.#j=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#a.values())t.destroy();this.#a.clear(),this.#n.clear(),this.#p.clear(),this.#L?.clear(),this.#e=null,this.#x.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#z?.destroy(),this.#A?.hide(),this.#A=null,this.#F?.destroy(),this.#F=null,this.#s=null,this.#S&&(clearTimeout(this.#S),this.#S=null),this.#B&&(clearTimeout(this.#B),this.#B=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#$}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return Yt(this,"hcmFilter",this.#U?this.#E.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return Yt(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return Yt(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Yt(this,"highlightColors",null);const e=new Map,n=!!this.#U;for(const[i,a]of t){const l=i.endsWith("_HCM");if(n&&l){e.set(i.replace("_HCM",""),a);continue}!n&&!l&&e.set(i,a)}return Yt(this,"highlightColors",e)}get highlightColorNames(){return Yt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,n,i){this.#l?.showDialog(this,t,e,n,i)}selectComment(t,e){this.#a.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,n=void 0){this.#l?.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#a.has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),i=a=>{a.pageNumber===t&&(this._eventBus._off("editorsrendered",i),e())};this._eventBus.on("editorsrendered",i),await n}getSignature(t){this.#z?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#z}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#v=e)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#G.focus()}findParent(t,e){for(const n of this.#a.values()){const{x:i,y:a,width:l,height:c}=n.div.getBoundingClientRect();if(t>=i&&t<=i+l&&e>=a&&e<=a+c)return n}return null}disableUserSelect(t=!1){this.#Q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Wo.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Z({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of this.#a.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:l,focusOffset:c}=n,h=n.toString(),p=this.#Z(n).closest(".textLayer"),f=this.getSelectionBoxes(p);if(!f)return;n.empty();const g=this.#tt(p),y=this.#C===Wt.NONE,w=()=>{const v=g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:f,anchorNode:i,anchorOffset:a,focusNode:l,focusOffset:c,text:h});y&&this.showAllEditors("highlight",!0,!0),e&&v?.editComment()};if(y){this.switchToMode(Wt.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#it(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#Z(t).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(this.#A||=new vj(this),this.#A.show(n,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#i)return null;const e=`${Ic}${t}`,n=this.#i.getRawValue(e);return n&&this.#i.remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&this.#i&&!this.#i.has(t.id)&&this.#i.setValue(t.id,t)}a11yAlert(t,e=null){const n=this.#J;n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}#rt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#N&&(this.#A?.hide(),this.#N=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#N)return;const i=this.#Z(t).closest(".textLayer");if(!i){this.#N&&(this.#A?.hide(),this.#N=null,this.#D({hasSelectedText:!1}));return}if(this.#A?.hide(),this.#N=e,this.#D({hasSelectedText:!0}),!(this.#C!==Wt.HIGHLIGHT&&this.#C!==Wt.NONE)&&(this.#C===Wt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#C===Wt.HIGHLIGHT?this.#tt(i):null;if(a?.toggleDrawing(),this.#k){const l=new AbortController,c=this.combinedSignal(l),h=d=>{d.type==="pointerup"&&d.button!==0||(l.abort(),a?.toggleDrawing(!0),d.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",h,{signal:c}),window.addEventListener("blur",h,{signal:c})}else a?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(t=""){this.#C===Wt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#it()}#at(){document.addEventListener("selectionchange",this.#rt.bind(this),{signal:this._signal})}#ot(){if(this.#_)return;this.#_=new AbortController;const t=this.combinedSignal(this.#_);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#_?.abort(),this.#_=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#x)if(e.div.contains(t)){this.#P=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;const[t,e]=this.#P;this.#P=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#O?.abort(),this.#O=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of this.#x){const i=n.serialize(!0);i&&e.push(i)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(a.type)){l.paste(a,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Xt(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const h of n){const d=await i.deserialize(h);if(!d)return;a.push(d)}const l=()=>{for(const h of a)this.#nt(h);this.#st(a)},c=()=>{for(const h of a)h.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(a){Xt(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==Wt.NONE&&!this.isEditorHandlingKeyboard&&Lr._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#D(t){Object.entries(t).some(([n,i])=>this.#Y[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,t)}),this.#C===Wt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#V([[ae.HIGHLIGHT_FREE,!0]]))}#V(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#D({isEditing:this.#C!==Wt.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#V(e.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(t){return this.#a.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#a.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#a.delete(t.pageIndex)}async updateMode(t,e=null,n=!1,i=!1,a=!1,l=!1){if(this.#C!==t&&!(this.#j&&(await this.#j.promise,!this.#j))){if(this.#j=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#C===Wt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=t,t===Wt.NONE){this.setEditingState(!1),this.#pt();for(const c of this.#n.values())c.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#j.resolve();return}for(const c of this.#n.values())c.addStandaloneCommentButton();t===Wt.SIGNATURE&&await this.#z?.loadSignatures(),n&&pe.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const c of this.#a.values())c.updateMode(t);if(t===Wt.POPUP){this.#s||=await this.#q.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const c=new Set,h=[];for(const d of this.#n.values()){const{annotationElementId:p,hasComment:f,deleted:g}=d;p&&c.add(p),f&&!g&&h.push(d.getData())}for(const d of this.#s){const{id:p,popupRef:f,contentsObj:g}=d;f&&g?.str&&!c.has(p)&&!this.#g.has(p)&&h.push(d)}this.#l?.showSidebar(h)}if(!e){i&&this.addNewEditorFromKeyboard(),this.#j.resolve();return}for(const c of this.#n.values())c.uid===e?(this.setSelected(c),l?c.editComment():a?c.enterInEditMode():c.focus()):c.unselect();this.#j.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case ae.CREATE:this.currentLayer.addNewEditor(e);return;case ae.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of this.#x)n.updateParams(t,e);else for(const n of this.#u)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const a of this.#n.values())a.editorType===t&&a.show(e);(this.#X?.get(ae.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#V([[ae.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#I!==t){this.#I=t;for(const e of this.#a.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const e of this.#a.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#a.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#S&&clearTimeout(this.#S),this.#S=setTimeout(()=>{this.focusMainContainer(),this.#S=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#L?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#i?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#nt(t){const e=this.#a.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#V(t.propertiesToUpdate))}get#mt(){let t=null;for(t of this.#x);return t}updateUI(t){this.#mt===t&&this.#V(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#V(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#x.has(t)){this.#x.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#x.add(t),t.select(),this.#V(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const e of this.#x)e!==t&&e.unselect();this.#x.clear(),this.#x.add(t),t.select(),this.#V(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#x.has(t)}get firstSelectedEditor(){return this.#x.values().next().value}unselect(t){t.unselect(),this.#x.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#x.size!==0}get isEnterHandled(){return this.#x.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#D({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#x],n=()=>{this._editorUndoBar?.show(i,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},i=()=>{for(const a of e)this.#nt(a)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#st(t){for(const e of this.#x)e.unselect();this.#x.clear();for(const e of t)e.isEmpty()||(this.#x.add(e),e.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#x)t.commit();this.#st(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==Wt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#x)t.unselect();this.#x.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;const[i,a]=this.#H,l=[...this.#x],c=1e3;this.#B&&clearTimeout(this.#B),this.#B=setTimeout(()=>{this.#B=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(i,a),h.translationDone())},undo:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(-i,-a),h.translationDone())},mustExec:!1})},c);for(const h of l)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const t of this.#x)this.#m.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const t=this.#m;this.#m=null;let e=!1;for(const[{x:i,y:a,pageIndex:l},c]of t)c.newX=i,c.newY=a,c.newPageIndex=l,e||=i!==c.savedX||a!==c.savedY||l!==c.savedPageIndex;if(!e)return!1;const n=(i,a,l,c)=>{if(this.#n.has(i.id)){const h=this.#a.get(c);h?i._setParentAndPosition(h,a,l):(i.pageIndex=c,i.x=a,i.y=l)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:l,newPageIndex:c}]of t)n(i,a,l,c)},undo:()=>{for(const[i,{savedX:a,savedY:l,savedPageIndex:c}]of t)n(i,a,l,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#m)for(const n of this.#m.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#x.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}isEditingMode(){return this.#C!==Wt.NONE}get imageManager(){return Yt(this,"imageManager",new Wv)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let d=0,p=e.rangeCount;d<p;d++)if(!t.contains(e.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:i,width:a,height:l}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(d,p,f,g)=>({x:(p-i)/l,y:1-(d+f-n)/a,width:g/l,height:f/a});break;case"180":c=(d,p,f,g)=>({x:1-(d+f-n)/a,y:1-(p+g-i)/l,width:f/a,height:g/l});break;case"270":c=(d,p,f,g)=>({x:1-(p+g-i)/l,y:(d-n)/a,width:g/l,height:f/a});break;default:c=(d,p,f,g)=>({x:(d-n)/a,y:(p-i)/l,width:f/a,height:g/l});break}const h=[];for(let d=0,p=e.rangeCount;d<p;d++){const f=e.getRangeAt(d);if(!f.collapsed)for(const{x:g,y,width:w,height:v}of f.getClientRects())w===0||v===0||h.push(c(g,y,w,v))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const n=this.#i.getRawValue(e);n&&(this.#C===Wt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){const i=this.#L?.get(t);i&&(i.setCanvas(e,n),this.#L.delete(t))}addMissingCanvas(t,e){(this.#L||=new Map).set(t,e)}}class ci{#t=null;#e=!1;#s=null;#n=null;#a=null;#r=null;#i=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,ci.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){ci._l10n??=t}async render(){const t=this.#s=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",ci.#f.missing),e.setAttribute("data-l10n-id",ci.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;t.addEventListener("contextmenu",js,{signal:n}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#i=!0,i(a))},{signal:n}),await this.#m(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#i}),this.#i=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await ci._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#m())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:i,cancel:a=!1}){n&&(this.#l=n,this.#d=i),!(this.#t===t&&this.#e===e)&&(a||(this.#t=t,this.#e=e),this.#m())}toggle(t=!1){this.#s&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#s.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#a=null,this.#o?.remove(),this.#o=null}async#m(){const t=this.#s;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",ci.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",ci.#f[`${this.#g}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#a;if(!e){this.#a=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const i=100,a=this.#c._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#a?.classList.remove("show")},{signal:a})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Nh{#t=null;#e=null;#s=!1;#n=null;#a=null;#r=null;#i=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const i=this.#n.commentButtonColor;i&&(n.backgroundColor=i)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:n}=this.#t.getBoundingClientRect(),{x:i,y:a,width:l,height:c}=this.#n.parent.boundingClientRect;return[(t-i)/l,(e+n-a)/c]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",js,{signal:n}),e&&(t.addEventListener("focusin",a=>{this.#n._focusEventsAllowed=!1,je(a)},{capture:!0,signal:n}),t.addEventListener("focusout",a=>{this.#n._focusEventsAllowed=!0,je(a)},{capture:!0,signal:n})),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#s=!0,i(a))},{signal:n}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),t}edit(t){const e=this.commentPopupPositionInLayer;let n,i;if(e)[n,i]=e;else{[n,i]=this.#n.commentButtonPosition;const{width:p,height:f,x:g,y}=this.#n;n=g+n*p,i=y+i*f}const a=this.#n.parent.boundingClientRect,{x:l,y:c,width:h,height:d}=a;this.#n._uiManager.editComment(this.#n,l+n*h,c+i*d,{...t,parentDimensions:a})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#s}),this.#s=!1)}isDeleted(){return this.#c||this.#i===""}isEmpty(){return this.#i===null}hasBeenEdited(){return this.isDeleted()||this.#i!==this.#a}serialize(){return this.data}get data(){return{text:this.#i,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#i&&(this.#r=null),t===null){this.#i="",this.#c=!0;return}this.#i=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#a=t,this.data=t,this.#o=null,this.#r=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#i="",this.#r=null,this.#o=null,this.#n=null,this.#s=!1,this.#c=!1}}class ff{#t;#e=!1;#s=null;#n;#a;#r;#i;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:l=null,signal:c}){this.#t=t,this.#s=n,this.#n=e,this.#a=i,this.#r=a,this.#i=l,this.#d=new AbortController,this.#c=AbortSignal.any([c,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/vi.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,a=AbortSignal.any([this.#c,i.signal]),l=this.#t,c={capture:!0,signal:a,passive:!1},h=d=>{d.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(je(d),h(d))},c),l.addEventListener("pointerup",h,c),l.addEventListener("pointercancel",h,c);return}if(!this.#h){this.#h=new AbortController;const i=AbortSignal.any([this.#c,this.#h.signal]),a=this.#t,l={signal:i,capture:!1,passive:!1};a.addEventListener("touchmove",this.#g.bind(this),l);const c=this.#m.bind(this);a.addEventListener("touchend",c,l),a.addEventListener("touchcancel",c,l),l.capture=!0,a.addEventListener("pointerdown",je,l),a.addEventListener("pointermove",je,l),a.addEventListener("pointercancel",je,l),a.addEventListener("pointerup",je,l),this.#a?.()}if(je(t),t.touches.length!==2||this.#s?.()){this.#l=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;je(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:i,screenY:a}=e,{screenX:l,screenY:c}=n,h=this.#l,{touch0X:d,touch0Y:p,touch1X:f,touch1Y:g}=h,y=f-d,w=g-p,v=l-i,S=c-a,x=Math.hypot(v,S)||1,A=Math.hypot(y,w)||1;if(!this.#e&&Math.abs(A-x)<=ff.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=i,h.touch0Y=a,h.touch1X=l,h.touch1Y=c,!this.#e){this.#e=!0;return}const E=[(i+l)/2,(a+c)/2];this.#r?.(E,A,x)}#m(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#i?.()),this.#l&&(je(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class jt{#t=null;#e=null;#s=null;#n=null;#a=null;#r=!1;#i=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#g="";#m=!1;#u=null;#p=!1;#y=!1;#b=!1;#v=null;#E=0;#S=0;#_=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#w=!1;#A=jt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Kv;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=jt.prototype._resizeWithKeyboard,e=Lr.TRANSLATE_SMALL,n=Lr.TRANSLATE_BIG;return Yt(this,"_resizerKeyboardManager",new Jc([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],jt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[a,l];const[c,h]=this.parentDimensions;this.x=t.x/c,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Yt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new _j({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(jt._l10n??=t,jt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),jt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);jt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Se("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#w}set _isDraggable(t){this.#w=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#A}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#B(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[a,l]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/a,this.y=(e+i)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i),this._onTranslated()}#M([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#M(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[i,a]}=this;if(this.x+=t/i,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[h,d]=this.getBaseTranslation();l+=h,c+=d;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=jt,i=n/t,a=n/e;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,i]}=this;let{x:a,y:l,width:c,height:h}=this;if(c*=n,h*=i,a*=n,l*=i,this._mustFixPosition)switch(t){case 0:a=jn(a,0,n-c),l=jn(l,0,i-h);break;case 90:a=jn(a,0,n-h),l=jn(l,c,i);break;case 180:a=jn(a,c,n),l=jn(l,h,i);break;case 270:a=jn(a,h,n),l=jn(l,0,i-c);break}this.x=a/=n,this.y=l/=i;const[d,p]=this.getBaseTranslation();a+=d,l+=p,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#R(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return jt.#R(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return jt.#R(t,e,360-this.parentRotation)}#k(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#I(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",this.#O.bind(this,n),{signal:e}),i.addEventListener("contextmenu",js,{signal:e}),i.tabIndex=-1}this.div.prepend(this.#c)}#O(t,e){e.preventDefault();const{isMac:n}=ln.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#s?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const a=new AbortController,l=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#L.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",je,{passive:!1,signal:l}),window.addEventListener("contextmenu",js,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const d=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=c,this.div.style.cursor=h,this.#F()};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}#P(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=this.#d;this.#d=null;const a=this.x,l=this.y,c=this.width,h=this.height;a===t&&l===e&&c===n&&h===i||this.addCommands({cmd:this.#P.bind(this,a,l,c,h),undo:this.#P.bind(this,t,e,n,i),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#L(t,e){const[n,i]=this.parentDimensions,a=this.x,l=this.y,c=this.width,h=this.height,d=jt.MIN_SIZE/n,p=jt.MIN_SIZE/i,f=this.#k(this.rotation),g=(z,j)=>[f[0]*z+f[2]*j,f[1]*z+f[3]*j],y=this.#k(360-this.rotation),w=(z,j)=>[y[0]*z+y[2]*j,y[1]*z+y[3]*j];let v,S,x=!1,A=!1;switch(t){case"topLeft":x=!0,v=(z,j)=>[0,0],S=(z,j)=>[z,j];break;case"topMiddle":v=(z,j)=>[z/2,0],S=(z,j)=>[z/2,j];break;case"topRight":x=!0,v=(z,j)=>[z,0],S=(z,j)=>[0,j];break;case"middleRight":A=!0,v=(z,j)=>[z,j/2],S=(z,j)=>[0,j/2];break;case"bottomRight":x=!0,v=(z,j)=>[z,j],S=(z,j)=>[0,0];break;case"bottomMiddle":v=(z,j)=>[z/2,j],S=(z,j)=>[z/2,0];break;case"bottomLeft":x=!0,v=(z,j)=>[0,j],S=(z,j)=>[z,0];break;case"middleLeft":A=!0,v=(z,j)=>[0,j/2],S=(z,j)=>[z,j/2];break}const E=v(c,h),R=S(c,h);let T=g(...R);const O=jt._round(a+T[0]),D=jt._round(l+T[1]);let N=1,I=1,G,W;if(e.fromKeyboard)({deltaX:G,deltaY:W}=e);else{const{screenX:z,screenY:j}=e,[q,nt]=this.#l;[G,W]=this.screenToPageTranslation(z-q,j-nt),this.#l[0]=z,this.#l[1]=j}if([G,W]=w(G/n,W/i),x){const z=Math.hypot(c,h);N=I=Math.max(Math.min(Math.hypot(R[0]-E[0]-G,R[1]-E[1]-W)/z,1/c,1/h),d/c,p/h)}else A?N=jn(Math.abs(R[0]-E[0]-G),d,1)/c:I=jn(Math.abs(R[1]-E[1]-W),p,1)/h;const F=jt._round(c*N),Y=jt._round(h*I);T=g(...S(F,Y));const k=O-T[0],J=D-T[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=F,this.height=Y,this.x=k,this.y=J,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Ec(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#s?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(ci.initialize(jt._l10n),this.#s=new ci(this),this.#t&&(this.#s.data=this.#t,this.#t=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(t){this.#s&&(this.#s.data=t)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(t){await this.#s?.setGuessedText(t)}serializeAltText(t){return this.#s?.serialize(t)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new Nh(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#n.renderForStandalone(),this.div.append(this.#a))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:i}}=this.#n;return{text:e,richText:t,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Nh(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(this.#n||=new Nh(this),this.#n.setInitialText(t,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Nh(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,i]=t.rect,[a]=this.pageDimensions,[l]=this.pageTranslation,c=l+a+1,h=i-100,d=c+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,h,d,i]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#U();const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),V2(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new ff({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#$.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#x.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#$(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(t,e,n){let a=.7*(n/e)+1-.7;if(a===1)return;const l=this.#k(this.rotation),c=(O,D)=>[l[0]*O+l[2]*D,l[1]*O+l[3]*D],[h,d]=this.parentDimensions,p=this.x,f=this.y,g=this.width,y=this.height,w=jt.MIN_SIZE/h,v=jt.MIN_SIZE/d;a=Math.max(Math.min(a,1/g,1/y),w/g,v/y);const S=jt._round(g*a),x=jt._round(y*a);if(S===g&&x===y)return;this.#u||=[p,f,g,y];const A=c(g/2,y/2),E=jt._round(p+A[0]),R=jt._round(f+A[1]),T=c(S/2,x/2);this.x=E-T[0],this.y=R-T[1],this.width=S,this.height=x,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#x(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:e}=ln.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#z(t);return}this.#N(t)}#N(t){const{isMac:e}=ln.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#z(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),l={capture:!0,passive:!1,signal:a},c=d=>{i.abort(),this.#i=null,this.#m=!1,this._uiManager.endDragSession()||this.#N(d),n&&this._onStopDragging()};e&&(this.#E=t.clientX,this.#S=t.clientY,this.#i=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",d=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:f,pointerId:g}=d;if(g!==this.#i){je(d);return}const[y,w]=this.screenToPageTranslation(p-this.#E,f-this.#S);this.#E=p,this.#S=f,this._uiManager.dragSelectedEditors(y,w)},l),window.addEventListener("touchmove",je,l),window.addEventListener("pointerdown",d=>{d.pointerType===this.#o&&(this.#T||d.isPrimary)&&c(d),je(d)},l));const h=d=>{if(!this.#i||this.#i===d.pointerId){c(d);return}je(d)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const i=this.parentScale,[a,l]=this.pageDimensions,[c,h]=this.pageTranslation,d=t/i,p=e/i,f=this.x*a,g=this.y*l,y=this.width*a,w=this.height*l;switch(n){case 0:return[f+d+c,l-g-p-w+h,f+d+y+c,l-g-p+h];case 90:return[f+p+c,l-g+d+h,f+p+w+c,l-g+d+y+h];case 180:return[f-d-y+c,l-g+p+h,f-d+c,l-g+p+w+h];case 270:return[f-p-w+c,l-g-d-y+h,f-p+c,l-g-d+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,a,l]=t,c=a-n,h=l-i;switch(this.rotation){case 0:return[n,e-l,c,h];case 90:return[n,e-i,h,c];case 180:return[a,e-i,c,h];case 270:return[a,e-l,h,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&jt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:i,deleted:a,richText:l},uid:c,pageIndex:h,creationDate:d,modificationDate:p}=this;return{id:c,pageIndex:h,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:d,modificationDate:n||p,popupRef:!a,color:e,opacity:i}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:l}=window;return e<l&&i>0&&t<a&&n>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#U()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});i.rotation=t.rotation,i.#t=t.accessibilityData,i._isCopy=t.isCopy||!1;const[a,l]=i.pageDimensions,[c,h,d,p]=i.getRectInCurrentCoords(t.rect,l);return i.x=c/a,i.y=h/l,i.width=d/a,i.height=p/l,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#B(),this.removeEditToolbar(),this.#_){for(const t of this.#_.values())clearTimeout(t);this.#_=null}this.parent=null,this.#T?.destroy(),this.#T=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,i,a,l]=this.getPDFRect();return[jt._round(n+(a-n)*t),jt._round(i+(l-i)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const l=this.#X.bind(this),c=this.#q.bind(this),h=this._uiManager._signal;for(const d of this.#e){const p=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",l,{signal:h}),d.addEventListener("blur",c,{signal:h}),d.addEventListener("focus",this.#Y.bind(this,p),{signal:h}),d.setAttribute("data-l10n-id",jt._l10nResizer[p])}}const n=this.#e[0];let i=0;for(const l of e){if(l===n)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(a!==i){if(a<i)for(let c=0;c<i-a;c++)this.#c.append(this.#c.firstElementChild);else if(a>i)for(let c=0;c<a-i;c++)this.#c.firstElementChild.before(this.#c.lastElementChild);let l=0;for(const c of e){const d=this.#e[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",jt._l10nResizer[d])}}this.#H(0),this.#b=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#X(t){jt._resizerKeyboardManager.exec(this,t)}#q(t){this.#b&&t.relatedTarget?.parentNode!==this.#c&&this.#B()}#Y(t){this.#g=this.#b?t:""}#H(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#b&&this.#L(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#B(){this.#b=!1,this.#H(-1),this.#F()}_stopResizingWithKeyboard(){this.#B(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#_||=new Map;const{action:n}=t;let i=this.#_.get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),this.#_.delete(n),this.#_.size===0&&(this.#_=null)},jt._telemetryTimeout),this.#_.set(n,i);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class _j extends jt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const sA=3285377520,Ns=4294901760,ai=65535;class $2{constructor(t){this.h1=t?t&4294967295:sA,this.h2=t?t&4294967295:sA}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let v=0,S=t.length;v<S;v++){const x=t.charCodeAt(v);x<=255?e[n++]=x:(e[n++]=x>>>8,e[n++]=x&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,a=n-i*4,l=new Uint32Array(e.buffer,0,i);let c=0,h=0,d=this.h1,p=this.h2;const f=3432918353,g=461845907,y=f&ai,w=g&ai;for(let v=0;v<i;v++)v&1?(c=l[v],c=c*f&Ns|c*y&ai,c=c<<15|c>>>17,c=c*g&Ns|c*w&ai,d^=c,d=d<<13|d>>>19,d=d*5+3864292196):(h=l[v],h=h*f&Ns|h*y&ai,h=h<<15|h>>>17,h=h*g&Ns|h*w&ai,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(c=0,a){case 3:c^=e[i*4+2]<<16;case 2:c^=e[i*4+1]<<8;case 1:c^=e[i*4],c=c*f&Ns|c*y&ai,c=c<<15|c>>>17,c=c*g&Ns|c*w&ai,i&1?d^=c:p^=c}this.h1=d,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ns|t*36045&ai,e=e*4283543511&Ns|((e<<16|t>>>16)*2950163797&Ns)>>>16,t^=e>>>1,t=t*444984403&Ns|t*60499&ai,e=e*3301882366&Ns|((e<<16|t>>>16)*3120437893&Ns)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Ay=Object.freeze({map:null,hash:"",transfer:void 0});class Zv{#t=!1;#e=null;#s=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#n.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof jt&&this.#s.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof jt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#n.get(t);let i=!1;if(n!==void 0)for(const[a,l]of Object.entries(e))n[a]!==l&&(i=!0,n[a]=l);else i=!0,this.#n.set(t,e);i&&this.#a(),e instanceof jt&&((this.#s||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#a(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new G2(this)}get serializable(){if(this.#n.size===0)return Ay;const t=new Map,e=new $2,n=[],i=Object.create(null);let a=!1;for(const[l,c]of this.#n){const h=c instanceof jt?c.serialize(!1,i):c;h&&(t.set(l,h),e.update(`${l}:${JSON.stringify(h)}`),a||=!!h.bitmap)}if(a)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Ay}get editorStats(){let t=null;const e=new Map;let n=0,i=0;for(const a of this.#n.values()){if(!(a instanceof jt)){a.popup&&(a.popup.deleted?i+=1:n+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(n+=1);const l=a.telemetryFinalData;if(!l)continue;const{type:c}=l;e.has(c)||e.set(c,Object.getPrototypeOf(a).constructor),t||=Object.create(null);const h=t[c]||=new Map;for(const[d,p]of Object.entries(l)){if(d==="type")continue;let f=h.get(d);f||(f=new Map,h.set(d,f));const g=f.get(p)??0;f.set(p,g+1)}}if((i>0||n>0)&&(t||=Object.create(null),t.comments={deleted:i,edited:n}),!t)return null;for(const[a,l]of e)t[a]=l.computeTelemetryFinalData(t[a]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const n=this.#s?.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#s?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#s)for(const e of this.#s.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class G2 extends Zv{#t;constructor(t){super();const{map:e,hash:n,transfer:i}=t.serializable,a=structuredClone(e,i?{transfer:i}:null);this.#t={map:a,hash:n,transfer:i}}get print(){Se("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Yt(this,"modifiedIds",{ids:new Set,hash:""})}}class xj{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(oe(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:l}=t,c=new FontFace(i,a,l);this.addNativeFontFace(c);try{await c.load(),this.#t.add(i),n?.(t)}catch{Xt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}Se("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Xt(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Yt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Yt(this,"isSyncFontLoadingSupported",zn||ln.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(oe(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Yt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(R,T){return R.charCodeAt(T)<<24|R.charCodeAt(T+1)<<16|R.charCodeAt(T+2)<<8|R.charCodeAt(T+3)&255}function i(R,T,O,D){const N=R.substring(0,T),I=R.substring(T+O);return N+D+I}let a,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const h=c.getContext("2d");let d=0;function p(R,T){if(++d>30){Xt("Load test font never loaded."),T();return}if(h.font="30px "+R,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(p.bind(null,R,T))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=i(g,976,f.length,f);const w=16,v=1482184792;let S=n(g,w);for(a=0,l=f.length-3;a<l;a+=4)S=S-v+n(f,a)|0;a<f.length&&(S=S-v+n(f+"XXX",a)|0),g=i(g,w,4,nj(S));const x=`url(data:font/opentype;base64,${btoa(g)});`,A=`@font-face {font-family:"${f}";src:${x}}`;this.insertRule(A);const E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(const R of[t.loadedName,f]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=R,E.append(T)}this._document.body.append(E),p(f,()=>{E.remove(),e.complete()})}}class Sj{#t;constructor(t,e=null,n,i){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${z2(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(l){Xt(`getPathGenerator - ignoring character: "${l}".`)}const a=H2(i?.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=a}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){Yt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){Yt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class jo{#t;#e;#s;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,n={};let i=0;for(const d of jo.strings){const p=e.encode(t[d]);n[d]=p,i+=4+p.length}const a=new ArrayBuffer(i),l=new Uint8Array(a),c=new DataView(a);let h=0;for(const d of jo.strings){const p=n[d],f=p.length;c.setUint32(h,f),l.set(p,h+4),h+=4+f}return oe(h===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#s=new TextDecoder}#n(t){oe(t<jo.strings.length,"Invalid string index");let e=0;for(let i=0;i<t;i++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#s.decode(new Uint8Array(this.#t,e+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Uo{#t;#e;#s;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,n={};let i=0;for(const g of Uo.strings){const y=e.encode(t[g]);n[g]=y,i+=4+y.length}i+=4;let a,l,c=1+i;t.style&&(a=e.encode(t.style.style),l=e.encode(t.style.weight),c+=4+a.length+4+l.length);const h=new ArrayBuffer(c),d=new Uint8Array(h),p=new DataView(h);let f=0;p.setUint8(f++,t.guessFallback?1:0),p.setUint32(f,0),f+=4,i=0;for(const g of Uo.strings){const y=n[g],w=y.length;i+=4+w,p.setUint32(f,w),d.set(y,f+4),f+=4+w}return p.setUint32(f-i-4,i),t.style&&(p.setUint32(f,a.length),d.set(a,f+4),f+=4+a.length,p.setUint32(f,l.length),d.set(l,f+4),f+=4+l.length),oe(f<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(f)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#s=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){oe(t<Uo.strings.length,"Invalid string index");let e=5;for(let i=0;i<t;i++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#s.decode(new Uint8Array(this.#t,e+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),n=this.#s.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const i=this.#e.getUint32(t),a=this.#s.decode(new Uint8Array(this.#t,t+4,i));return{style:n,weight:a}}}class _e{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#s=this.#e+1+8;static#n=this.#s+1+48;static#a=this.#n+1+6;#r;#i;#o;constructor({data:t,extra:e}){this.#r=t,this.#i=new TextDecoder,this.#o=new DataView(this.#r),e&&Object.assign(this,e)}#c(t){oe(t<_e.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,i=this.#o.getUint8(e)>>n&3;return i===0?void 0:i===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return oe(t<_e.numbers.length,"Invalid number index"),this.#o.getFloat64(_e.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=_e.#e;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<4;i++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=_e.#s;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<6;i++)n.push(this.#o.getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=_e.#n;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<3;i++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}#d(t){oe(t<_e.strings.length,"Invalid string index");let e=_e.#a+4;for(let a=0;a<t;a++)e+=this.#o.getUint32(e)+4;const n=this.#o.getUint32(e),i=new Uint8Array(n);return i.set(new Uint8Array(this.#r,e+4,n)),this.#i.decode(i)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=_e.#a;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);if(a!==0)return new Uint8Array(this.#r,t+4,a)}clearData(){let t=_e.#a;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);new Uint8Array(this.#r,t+4,a).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=_e.#a;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const i=this.#o.getUint32(t);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#r,t+4,i)),new jo(a.buffer)}get systemFontInfo(){let t=_e.#a;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(this.#r,t+4,n)),new Uo(i.buffer)}static write(t){const e=t.systemFontInfo?Uo.write(t.systemFontInfo):null,n=t.cssFontInfo?jo.write(t.cssFontInfo):null,i=new TextEncoder,a={};let l=0;for(const v of _e.strings)a[v]=i.encode(t[v]),l+=4+a[v].length;const c=_e.#a+4+l+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(c),d=new Uint8Array(h),p=new DataView(h);let f=0;const g=_e.bools.length;let y=0,w=0;for(let v=0;v<g;v++){const S=t[_e.bools[v]];y|=(S===void 0?0:S?2:1)<<w,w+=2,(w===8||v===g-1)&&(p.setUint8(f++,y),y=0,w=0)}oe(f===_e.#t,"FontInfo.write: Boolean properties offset mismatch");for(const v of _e.numbers)p.setFloat64(f,t[v]),f+=8;if(oe(f===_e.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(f++,4);for(const v of t.bbox)p.setInt16(f,v,!0),f+=2}else p.setUint8(f++,0),f+=8;if(oe(f===_e.#s,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(f++,6);for(const v of t.fontMatrix)p.setFloat64(f,v,!0),f+=8}else p.setUint8(f++,0),f+=48;if(oe(f===_e.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(f++,1);for(const v of t.defaultVMetrics)p.setInt16(f,v,!0),f+=2}else p.setUint8(f++,0),f+=6;oe(f===_e.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(_e.#a,0),f+=4;for(const v of _e.strings){const S=a[v],x=S.length;p.setUint32(f,x),d.set(S,f+4),f+=4+x}if(p.setUint32(_e.#a,f-_e.#a-4),!e)p.setUint32(f,0),f+=4;else{const v=e.byteLength;p.setUint32(f,v),oe(f+4+v<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),d.set(new Uint8Array(e),f+4),f+=4+v}if(!n)p.setUint32(f,0),f+=4;else{const v=n.byteLength;p.setUint32(f,v),oe(f+4+v<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),d.set(new Uint8Array(n),f+4),f+=4+v}return t.data===void 0?(p.setUint32(f,0),f+=4):(p.setUint32(f,t.data.length),d.set(t.data,f+4),f+=4+t.data.length),oe(f<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(f)}}class pn{static#t=0;static#e=1;static#s=2;static#n=3;static#a=4;static#r=8;static#i=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,i=[],a=[],l=[],c=[],h=null,d=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],l=t[3],e===1?i.push(...t[4],...t[5]):i.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,h=t[1],i=t[2],a=t[3],c=t[4]||[],n=t[6],d=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const p=Math.floor(i.length/2),f=Math.floor(a.length/3),g=l.length,y=c.length;let w=0;for(const T of c)w+=1,w=Math.ceil(w/4)*4,w+=4+T.coords.length*4,w+=4+T.colors.length*4,T.verticesPerRow!==void 0&&(w+=4);const v=20+p*8+f*3+g*8+(n?16:0)+(d?3:0)+w,S=new ArrayBuffer(v),x=new DataView(S),A=new Uint8Array(S);x.setUint8(pn.#t,e),x.setUint8(pn.#e,n?1:0),x.setUint8(pn.#s,d?1:0),x.setUint8(pn.#n,h),x.setUint32(pn.#a,p,!0),x.setUint32(pn.#r,f,!0),x.setUint32(pn.#i,g,!0),x.setUint32(pn.#o,y,!0);let E=20;new Float32Array(S,E,p*2).set(i),E+=p*8,A.set(a,E),E+=f*3;for(const[T,O]of l)x.setFloat32(E,T,!0),E+=4,x.setUint32(E,parseInt(O.slice(1),16),!0),E+=4;if(n)for(const T of n)x.setFloat32(E,T,!0),E+=4;d&&(A.set(d,E),E+=3);for(let T=0;T<c.length;T++){const O=c[T];x.setUint8(E,O.type),E+=1,E=Math.ceil(E/4)*4,x.setUint32(E,O.coords.length,!0),E+=4,new Int32Array(S,E,O.coords.length).set(O.coords),E+=O.coords.length*4,x.setUint32(E,O.colors.length,!0),E+=4,new Int32Array(S,E,O.colors.length).set(O.colors),E+=O.colors.length*4,O.verticesPerRow!==void 0&&(x.setUint32(E,O.verticesPerRow,!0),E+=4)}return S}getIR(){const t=this.view,e=this.data[pn.#t],n=!!this.data[pn.#e],i=!!this.data[pn.#s],a=t.getUint32(pn.#a,!0),l=t.getUint32(pn.#r,!0),c=t.getUint32(pn.#i,!0),h=t.getUint32(pn.#o,!0);let d=20;const p=new Float32Array(this.buffer,d,a*2);d+=a*8;const f=new Uint8Array(this.buffer,d,l*3);d+=l*3;const g=[];for(let S=0;S<c;++S){const x=t.getFloat32(d,!0);d+=4;const A=t.getUint32(d,!0);d+=4,g.push([x,`#${A.toString(16).padStart(6,"0")}`])}let y=null;if(n){y=[];for(let S=0;S<4;++S)y.push(t.getFloat32(d,!0)),d+=4}let w=null;i&&(w=new Uint8Array(this.buffer,d,3),d+=3);const v=[];for(let S=0;S<h;++S){const x=t.getUint8(d);d+=1,d=Math.ceil(d/4)*4;const A=t.getUint32(d,!0);d+=4;const E=new Int32Array(this.buffer,d,A);d+=A*4;const R=t.getUint32(d,!0);d+=4;const T=new Int32Array(this.buffer,d,R);d+=R*4;const O={type:x,coords:E,colors:T};x===by.LATTICE&&(O.verticesPerRow=t.getUint32(d,!0),d+=4),v.push(O)}if(e===1)return["RadialAxial","axial",y,g,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",y,g,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(e===3){const S=this.data[pn.#n];let x=null;if(p.length>0){let A=p[0],E=p[0],R=p[1],T=p[1];for(let O=0;O<p.length;O+=2){const D=p[O],N=p[O+1];A=A>D?D:A,R=R>N?N:R,E=E<D?D:E,T=T<N?N:T}x=[A,R,E,T]}return["Mesh",S,p,f,v,x,y,w]}throw new Error(`Unsupported pattern kind: ${e}`)}}class Aj{static write(t){let e,n;return ln.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}#t;constructor(t){this.#t=t}get path(){return ln.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function Ej(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(zn)return s;const t=URL.parse(s,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Cj(s){if(zn&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return Wc(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s?.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Ph(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const Ey=s=>typeof s=="object"&&Number.isInteger(s?.num)&&s.num>=0&&Number.isInteger(s?.gen)&&s.gen>=0,Tj=s=>typeof s=="object"&&typeof s?.name=="string",Rj=oj.bind(null,Ey,Tj);class kj{#t=new Map;#e=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[i]of this.#t)i.call(this,n)})}addEventListener(t,e,n=null){let i=null;if(n?.signal instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Xt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);i=()=>a.removeEventListener("abort",l),a.addEventListener("abort",l)}this.#t.set(e,i)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Lh={DATA:1,ERROR:2},Ke={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function iA(){}function ns(s){if(s instanceof Pr||s instanceof wy||s instanceof KS||s instanceof Md||s instanceof _g)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||Se('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Pr(s.message);case"InvalidPDFException":return new wy(s.message);case"PasswordException":return new KS(s.message,s.code);case"ResponseException":return new Md(s.message,s.status,s.missing);case"UnknownErrorException":return new _g(s.message,s.details)}return new _g(s.message,s.toString())}class uc{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const n=t.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Lh.DATA)i.resolve(t.data);else if(t.callback===Lh.ERROR)i.reject(ns(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,i=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(l){a.postMessage({sourceName:n,targetName:i,callback:Lh.DATA,callbackId:t.callbackId,data:l})},function(l){a.postMessage({sourceName:n,targetName:i,callback:Lh.ERROR,callbackId:t.callbackId,reason:ns(l)})});return}if(t.streamId){this.#s(t);return}e(t.data)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(l){a.reject(l)}return a.promise}sendWithStream(t,e,n,i){const a=this.streamId++,l=this.sourceName,c=this.targetName,h=this.comObj;return new ReadableStream({start:d=>{const p=Promise.withResolvers();return this.streamControllers[a]={controller:d,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:c,action:t,streamId:a,data:e,desiredSize:d.desiredSize},i),p.promise},pull:d=>{const p=Promise.withResolvers();return this.streamControllers[a].pullCall=p,h.postMessage({sourceName:l,targetName:c,stream:Ke.PULL,streamId:a,desiredSize:d.desiredSize}),p.promise},cancel:d=>{oe(d instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[a].cancelCall=p,this.streamControllers[a].isClosed=!0,h.postMessage({sourceName:l,targetName:c,stream:Ke.CANCEL,streamId:a,reason:ns(d)}),p.promise}},n)}#s(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,a=this.comObj,l=this,c=this.actionHandler[t.action],h={enqueue(d,p=1,f){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=p,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:Ke.ENQUEUE,streamId:e,chunk:d},f)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Ke.CLOSE,streamId:e}),delete l.streamSinks[e])},error(d){oe(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Ke.ERROR,streamId:e,reason:ns(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(c,t.data,h).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Ke.START_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:n,targetName:i,stream:Ke.START_COMPLETE,streamId:e,reason:ns(d)})})}#n(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,a=this.comObj,l=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case Ke.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(ns(t.reason));break;case Ke.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(ns(t.reason));break;case Ke.PULL:if(!c){a.postMessage({sourceName:n,targetName:i,stream:Ke.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||iA).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Ke.PULL_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:n,targetName:i,stream:Ke.PULL_COMPLETE,streamId:e,reason:ns(d)})});break;case Ke.ENQUEUE:if(oe(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case Ke.CLOSE:if(oe(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#a(l,e);break;case Ke.ERROR:oe(l,"error should have stream controller"),l.controller.error(ns(t.reason)),this.#a(l,e);break;case Ke.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(ns(t.reason)),this.#a(l,e);break;case Ke.CANCEL:if(!c)break;const h=ns(t.reason);Promise.try(c.onCancel||iA,h).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Ke.CANCEL_COMPLETE,streamId:e,success:!0})},function(d){a.postMessage({sourceName:n,targetName:i,stream:Ke.CANCEL_COMPLETE,streamId:e,reason:ns(d)})}),c.sinkCapability.reject(h),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#a(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class q2{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Se("Abstract method `_createCanvas` called.")}}class Mj extends q2{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class X2{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Se("Abstract method `_fetch` called.")}}class rA extends X2{async _fetch(t){const e=await Kc(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Wc(e)}}class Y2{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,a){return"none"}destroy(t=!1){}}class Dj extends Y2{#t;#e;#s;#n;#a;#r;#i=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#a=e}get#o(){return this.#e||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#s){const t=this.#a.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#a.createElementNS(Ui,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#s=this.#a.createElementNS(Ui,"defs"),t.append(n),n.append(this.#s),this.#a.body.append(t)}return this.#s}#d(t){if(t.length===1){const h=t[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=h[f]/255;const p=d.join(",");return[p,p,p]}const[e,n,i]=t,a=new Array(256),l=new Array(256),c=new Array(256);for(let h=0;h<256;h++)a[h]=e[h]/255,l[h]=n[h]/255,c[h]=i[h]/255;return[a.join(","),l.join(","),c.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#a.URL;e!==this.#a.baseURI&&(df(e)?Xt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=B2(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[n,i,a]=this.#d(t),l=t.length===1?n:`${n}${i}${a}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const c=`g_${this.#n}_transfer_map_${this.#i++}`,h=this.#h(c);this.#o.set(t,h),this.#o.set(l,h);const d=this.#m(c);return this.#p(n,i,a,d),h}addHCMFilter(t,e){const n=`${t}-${e}`,i="base";let a=this.#c.get(i);if(a?.key===n||(a?(a.filter?.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},this.#c.set(i,a)),!t||!e))return a.url;const l=this.#b(t);t=Tt.makeHexColor(...l);const c=this.#b(e);if(e=Tt.makeHexColor(...c),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return a.url;const h=new Array(256);for(let y=0;y<=255;y++){const w=y/255;h[y]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const d=h.join(","),p=`g_${this.#n}_hcm_filter`,f=a.filter=this.#m(p);this.#p(d,d,d,f),this.#g(f);const g=(y,w)=>{const v=l[y]/255,S=c[y]/255,x=new Array(w+1);for(let A=0;A<=w;A++)x[A]=v+A/w*(S-v);return x.join(",")};return this.#p(g(0,5),g(1,5),g(2,5),f),a.url=this.#h(p),a.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[n]=this.#d([t]),i=`alpha_${n}`;if(e=this.#o.get(i),e)return this.#o.set(t,e),e;const a=`g_${this.#n}_alpha_map_${this.#i++}`,l=this.#h(a);this.#o.set(t,l),this.#o.set(i,l);const c=this.#m(a);return this.#y(n,c),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let n,i;if(t?([n]=this.#d([t]),i=`luminosity_${n}`):i="luminosity",e=this.#o.get(i),e)return this.#o.set(t,e),e;const a=`g_${this.#n}_luminosity_map_${this.#i++}`,l=this.#h(a);this.#o.set(t,l),this.#o.set(i,l);const c=this.#m(a);return this.#f(c),t&&this.#y(n,c),l}addHighlightHCMFilter(t,e,n,i,a){const l=`${e}-${n}-${i}-${a}`;let c=this.#c.get(t);if(c?.key===l||(c?(c.filter?.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},this.#c.set(t,c)),!e||!n))return c.url;const[h,d]=[e,n].map(this.#b.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[g,y]=[i,a].map(this.#b.bind(this));f<p&&([p,f,g,y]=[f,p,y,g]),this.#l.style.color="";const w=(x,A,E)=>{const R=new Array(256),T=(f-p)/E,O=x/255,D=(A-x)/(255*E);let N=0;for(let I=0;I<=E;I++){const G=Math.round(p+I*T),W=O+I*D;for(let F=N;F<=G;F++)R[F]=W;N=G+1}for(let I=N;I<256;I++)R[I]=R[N-1];return R.join(",")},v=`g_${this.#n}_hcm_${t}_filter`,S=c.filter=this.#m(v);return this.#g(S),this.#p(w(g[0],y[0],5),w(g[1],y[1],5),w(g[2],y[2],5),S),c.url=this.#h(v),c.url}destroy(t=!1){t&&this.#r?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#i=0)}#f(t){const e=this.#a.createElementNS(Ui,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#a.createElementNS(Ui,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#m(t){const e=this.#a.createElementNS(Ui,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,n){const i=this.#a.createElementNS(Ui,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),t.append(i)}#p(t,e,n,i){const a=this.#a.createElementNS(Ui,"feComponentTransfer");i.append(a),this.#u(a,"feFuncR",t),this.#u(a,"feFuncG",e),this.#u(a,"feFuncB",n)}#y(t,e){const n=this.#a.createElementNS(Ui,"feComponentTransfer");e.append(n),this.#u(n,"feFuncA",t)}#b(t){return this.#l.style.color=t,Qc(getComputedStyle(this.#l).getPropertyValue("color"))}}class W2{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Se("Abstract method `_fetch` called.")}}class aA extends W2{async _fetch(t){const e=await Kc(t,"arraybuffer");return new Uint8Array(e)}}class K2{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Se("Abstract method `_fetch` called.")}}class oA extends K2{async _fetch(t){const e=await Kc(t,"arraybuffer");return new Uint8Array(e)}}zn&&Xt("Please use the `legacy` build in Node.js environments.");async function Qv(s){const e=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(e)}class Oj extends Y2{}class Nj extends q2{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class Pj extends X2{async _fetch(t){return Qv(t)}}class Lj extends W2{async _fetch(t){return Qv(t)}}class Bj extends K2{async _fetch(t){return Qv(t)}}const bo="__forcedDependency",{floor:lA,ceil:cA}=Math;function Bh(s,t,e,n,i,a){s[t*4+0]=Math.min(s[t*4+0],e),s[t*4+1]=Math.min(s[t*4+1],n),s[t*4+2]=Math.max(s[t*4+2],i),s[t*4+3]=Math.max(s[t*4+3],a)}const Cy=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class Ij{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Cy}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Ih=(s,t)=>{if(!s)return;let e=s.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},s.set(t,e)),e};class Fj{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[bo]:[]};#s=new Map;#n=[];#a=[];#r=[[1,0,0,1,0,0]];#i=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#g;#m;#u;#p;constructor(t,e,n=!1){this.#f=t.width,this.#g=t.height,this.#y(e),n&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const n=new ArrayBuffer(t*4);this.#m=new Uint8ClampedArray(n),this.#u=new Uint32Array(n),e&&e.length>0?(this.#u.set(e),this.#u.fill(Cy,e.length)):this.#u.fill(Cy)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[bo]:{__proto__:this.#e[bo]}},this.#i={__proto__:this.#i},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#i=Object.getPrototypeOf(this.#i);const n=this.#n.pop();return n!==void 0&&(Ih(this.#p,t)?.dependencies.add(n),this.#u[t]=this.#u[n]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(Ih(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#a.push(t),this}endMarkedContent(t){const e=this.#a.pop();return e!==void 0&&(Ih(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#r.push(Tt.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#s.set(t,e),this}recordSimpleDataFromNamed(t,e,n){this.#t[t]=this.#s.get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(bo,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(bo,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,n,i,a,l){const c=Tt.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];Tt.axialAlignedBoundingBox([n,a,i,l],c,h);const d=Tt.intersect(this.#i,h);return d?(this.#i[0]=d[0],this.#i[1]=d[1],this.#i[2]=d[2],this.#i[3]=d[3]):(this.#i[0]=this.#i[1]=1/0,this.#i[2]=this.#i[3]=-1/0),this}recordBBox(t,e,n,i,a,l){const c=this.#i;if(c[0]===1/0)return this;const h=Tt.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform());if(c[0]===-1/0)return Tt.axialAlignedBoundingBox([n,a,i,l],h,this.#o),this;const d=[1/0,1/0,-1/0,-1/0];return Tt.axialAlignedBoundingBox([n,a,i,l],h,d),this.#o[0]=Math.min(this.#o[0],Math.max(d[0],c[0])),this.#o[1]=Math.min(this.#o[1],Math.max(d[1],c[1])),this.#o[2]=Math.max(this.#o[2],Math.min(d[2],c[2])),this.#o[3]=Math.max(this.#o[3],Math.min(d[3],c[3])),this}recordCharacterBBox(t,e,n,i=1,a=0,l=0,c){const h=n.bbox;let d,p;if(h&&(d=h[2]!==h[0]&&h[3]!==h[1]&&this.#h.get(n),d!==!1&&(p=[0,0,0,0],Tt.axialAlignedBoundingBox(h,n.fontMatrix,p),(i!==1||a!==0||l!==0)&&Tt.scaleMinMax([i,0,0,-i,a,l],p),d)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!c)return this.recordFullPageBBox(t);const f=c();return h&&p&&d===void 0&&(d=p[0]<=a-f.actualBoundingBoxLeft&&p[2]>=a+f.actualBoundingBoxRight&&p[1]<=l-f.actualBoundingBoxAscent&&p[3]>=l+f.actualBoundingBoxDescent,this.#h.set(n,d),d)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,a-f.actualBoundingBoxLeft,a+f.actualBoundingBoxRight,l-f.actualBoundingBoxAscent,l+f.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#i[0]),this.#o[1]=Math.max(0,this.#i[1]),this.#o[2]=Math.min(this.#f,this.#i[2]),this.#o[3]=Math.min(this.#g,this.#i[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const n=this.#l,i=this.#t,a=this.#e;for(const l of e)l in this.#t?n.add(i[l]):l in a&&a[l].forEach(n.add,n);return this}recordNamedDependency(t,e){return this.#s.has(e)&&this.#l.add(this.#s.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[bo]),this.#p){const n=Ih(this.#p,t),{dependencies:i}=n;this.#l.forEach(i.add,i),this.#n.forEach(i.add,i),this.#a.forEach(i.add,i),i.delete(t),n.isRenderingOperation=!0}if(this.#c===t){const n=lA(this.#o[0]*256/this.#f),i=lA(this.#o[1]*256/this.#g),a=cA(this.#o[2]*256/this.#f),l=cA(this.#o[3]*256/this.#g);Bh(this.#m,t,n,i,a,l);for(const c of this.#l)c!==t&&Bh(this.#m,c,n,i,a,l);for(const c of this.#n)c!==t&&Bh(this.#m,c,n,i,a,l);for(const c of this.#a)c!==t&&Bh(this.#m,c,n,i,a,l);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const n=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#i[0]=Math.max(this.#i[0],this.#o[0]),this.#i[1]=Math.max(this.#i[1],this.#o[1]),this.#i[2]=Math.min(this.#i[2],this.#o[2]),this.#i[3]=Math.min(this.#i[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new Ij(this.#u,this.#m)}takeDebugMetadata(){return this.#p}}class Dd{#t;#e;#s;#n=0;#a=0;constructor(t,e,n){if(t instanceof Dd&&t.#s===!!n)return t;this.#t=t,this.#e=e,this.#s=!!n}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#a++,this.#t.save(this.#e),this}restore(t){return this.#a>0&&(this.#t.restore(this.#e),this.#a--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#s||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,n,i,a,l){return this.#s||this.#t.recordClipBox(this.#e,e,n,i,a,l),this}recordBBox(t,e,n,i,a,l){return this.#s||this.#t.recordBBox(this.#e,e,n,i,a,l),this}recordCharacterBBox(t,e,n,i,a,l,c){return this.#s||this.#t.recordCharacterBBox(this.#e,e,n,i,a,l,c),this}recordFullPageBBox(t){return this.#s||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#s||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Ps={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Cn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ty(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),s.clip(i)}class Jv{isModifyingCurrentTransform(){return!1}getPattern(){Se("Abstract method `getPattern` called.")}}class zj extends Jv{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,i=this._p0,a=this._p1;if(e&&(i=i.slice(),a=a.slice(),Tt.applyTransform(i,e),Tt.applyTransform(a,e)),this._type==="axial")n=t.createLinearGradient(i[0],i[1],a[0],a[1]);else if(this._type==="radial"){let l=this._r0,c=this._r1;if(e){const h=new Float32Array(2);Tt.singularValueDecompose2dScale(e,h),l*=h[0],c*=h[0]}n=t.createRadialGradient(i[0],i[1],l,a[0],a[1],c)}for(const l of this._colorStops)n.addColorStop(l[0],l[1]);return n}getPattern(t,e,n,i){let a;if(i===Cn.STROKE||i===Cn.FILL){if(this.isOriginBased()){let g=Tt.transform(n,e.baseTransform);this.matrix&&(g=Tt.transform(g,this.matrix));const y=.001,w=Math.hypot(g[0],g[1]),v=Math.hypot(g[2],g[3]),S=(g[0]*g[2]+g[1]*g[3])/(w*v);if(Math.abs(S)<y)if(this.isRadial()){if(Math.abs(w-v)<y)return this._createGradient(t,g)}else return this._createGradient(t,g)}const l=e.current.getClippedPathBoundingBox(i,Pe(t))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,d=e.cachedCanvases.getCanvas("pattern",c,h),p=d.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=Tt.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),Ty(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),a=t.createPattern(d.canvas,"no-repeat");const f=new DOMMatrix(n);a.setTransform(f)}else Ty(t,this._bbox),a=this._createGradient(t);return a}}function Ag(s,t,e,n,i,a,l,c){const h=t.coords,d=t.colors,p=s.data,f=s.width*4;let g;h[e+1]>h[n+1]&&(g=e,e=n,n=g,g=a,a=l,l=g),h[n+1]>h[i+1]&&(g=n,n=i,i=g,g=l,l=c,c=g),h[e+1]>h[n+1]&&(g=e,e=n,n=g,g=a,a=l,l=g);const y=(h[e]+t.offsetX)*t.scaleX,w=(h[e+1]+t.offsetY)*t.scaleY,v=(h[n]+t.offsetX)*t.scaleX,S=(h[n+1]+t.offsetY)*t.scaleY,x=(h[i]+t.offsetX)*t.scaleX,A=(h[i+1]+t.offsetY)*t.scaleY;if(w>=A)return;const E=d[a],R=d[a+1],T=d[a+2],O=d[l],D=d[l+1],N=d[l+2],I=d[c],G=d[c+1],W=d[c+2],F=Math.round(w),Y=Math.round(A);let k,J,z,j,q,nt,pt,P;for(let U=F;U<=Y;U++){if(U<S){const ut=U<w?0:(w-U)/(w-S);k=y-(y-v)*ut,J=E-(E-O)*ut,z=R-(R-D)*ut,j=T-(T-N)*ut}else{let ut;U>A?ut=1:S===A?ut=0:ut=(S-U)/(S-A),k=v-(v-x)*ut,J=O-(O-I)*ut,z=D-(D-G)*ut,j=N-(N-W)*ut}let K;U<w?K=0:U>A?K=1:K=(w-U)/(w-A),q=y-(y-x)*K,nt=E-(E-I)*K,pt=R-(R-G)*K,P=T-(T-W)*K;const tt=Math.round(Math.min(k,q)),it=Math.round(Math.max(k,q));let xt=f*U+tt*4;for(let ut=tt;ut<=it;ut++)K=(k-ut)/(k-q),K<0?K=0:K>1&&(K=1),p[xt++]=J-(J-nt)*K|0,p[xt++]=z-(z-pt)*K|0,p[xt++]=j-(j-P)*K|0,p[xt++]=255}}function jj(s,t,e){const n=t.coords,i=t.colors;let a,l;switch(t.type){case by.LATTICE:const c=t.verticesPerRow,h=Math.floor(n.length/c)-1,d=c-1;for(a=0;a<h;a++){let p=a*c;for(let f=0;f<d;f++,p++)Ag(s,e,n[p],n[p+1],n[p+c],i[p],i[p+1],i[p+c]),Ag(s,e,n[p+c+1],n[p+1],n[p+c],i[p+c+1],i[p+1],i[p+c])}break;case by.TRIANGLES:for(a=0,l=n.length;a<l;a+=3)Ag(s,e,n[a],n[a+1],n[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class Uj extends Jv{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const c=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-c,p=Math.ceil(this._bounds[3])-h,f=Math.min(Math.ceil(Math.abs(d*t[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),y=d/f,w=p/g,v={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-h,scaleX:1/y,scaleY:1/w},S=f+4,x=g+4,A=n.getCanvas("mesh",S,x),E=A.context,R=E.createImageData(f,g);if(e){const O=R.data;for(let D=0,N=O.length;D<N;D+=4)O[D]=e[0],O[D+1]=e[1],O[D+2]=e[2],O[D+3]=255}for(const O of this._figures)jj(R,O,v);return E.putImageData(R,2,2),{canvas:A.canvas,offsetX:c-2*y,offsetY:h-2*w,scaleX:y,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,i){Ty(t,this._bbox);const a=new Float32Array(2);if(i===Cn.SHADING)Tt.singularValueDecompose2dScale(Pe(t),a);else if(this.matrix){Tt.singularValueDecompose2dScale(this.matrix,a);const[c,h]=a;Tt.singularValueDecompose2dScale(e.baseTransform,a),a[0]*=c,a[1]*=h}else Tt.singularValueDecompose2dScale(e.baseTransform,a);const l=this._createMeshCanvas(a,i===Cn.SHADING?null:this._background,e.cachedCanvases);return i!==Cn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class Hj extends Jv{getPattern(){return"hotpink"}}function Vj(s){switch(s[0]){case"RadialAxial":return new zj(s);case"Mesh":return new Uj(s);case"Dummy":return new Hj}throw new Error(`Unknown IR type: ${s[0]}`)}const uA={COLORED:1,UNCOLORED:2};class tb{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(t,e){const{bbox:n,operatorList:i,paintType:a,tilingType:l,color:c,canvasGraphicsFactory:h}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),hf("TilingType: "+l);const f=n[0],g=n[1],y=n[2],w=n[3],v=y-f,S=w-g,x=new Float32Array(2);Tt.singularValueDecompose2dScale(this.matrix,x);const[A,E]=x;Tt.singularValueDecompose2dScale(this.baseTransform,x);const R=A*x[0],T=E*x[1];let O=v,D=S,N=!1,I=!1;const G=Math.ceil(d*R),W=Math.ceil(p*T),F=Math.ceil(v*R),Y=Math.ceil(S*T);G>=F?O=d:N=!0,W>=Y?D=p:I=!0;const k=this.getSizeAndScale(O,this.ctx.canvas.width,R),J=this.getSizeAndScale(D,this.ctx.canvas.height,T),z=t.cachedCanvases.getCanvas("pattern",k.size,J.size),j=z.context,q=h.createCanvasGraphics(j,e);if(q.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(q,a,c),j.translate(-k.scale*f,-J.scale*g),q.transform(0,k.scale,0,0,J.scale,0,0),j.save(),q.dependencyTracker?.save(),this.clipBbox(q,f,g,y,w),q.baseTransform=Pe(q.ctx),q.executeOperatorList(i),q.endDrawing(),q.dependencyTracker?.restore(),j.restore(),N||I){const nt=z.canvas;N&&(O=d),I&&(D=p);const pt=this.getSizeAndScale(O,this.ctx.canvas.width,R),P=this.getSizeAndScale(D,this.ctx.canvas.height,T),U=pt.size,K=P.size,tt=t.cachedCanvases.getCanvas("pattern-workaround",U,K),it=tt.context,xt=N?Math.floor(v/d):0,ut=I?Math.floor(S/p):0;for(let vt=0;vt<=xt;vt++)for(let Et=0;Et<=ut;Et++)it.drawImage(nt,U*vt,K*Et,U,K,0,0,U,K);return{canvas:tt.canvas,scaleX:pt.scale,scaleY:P.scale,offsetX:f,offsetY:g}}return{canvas:z.canvas,scaleX:k.scale,scaleY:J.scale,offsetX:f,offsetY:g}}getSizeAndScale(t,e,n){const i=Math.max(tb.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*n);return a>=i?a=i:n=a/t,{scale:n,size:a}}clipBbox(t,e,n,i,a){const l=i-e,c=a-n;t.ctx.rect(e,n,l,c),Tt.axialAlignedBoundingBox([e,n,i,a],Pe(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,a=t.current;switch(e){case uA.COLORED:const{fillStyle:l,strokeStyle:c}=this.ctx;i.fillStyle=a.fillColor=l,i.strokeStyle=a.strokeColor=c;break;case uA.UNCOLORED:i.fillStyle=i.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new ej(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,i,a){let l=n;i!==Cn.SHADING&&(l=Tt.transform(l,e.baseTransform),this.matrix&&(l=Tt.transform(l,this.matrix)));const c=this.createPatternCanvas(e,a);let h=new DOMMatrix(l);h=h.translate(c.offsetX,c.offsetY),h=h.scale(1/c.scaleX,1/c.scaleY);const d=t.createPattern(c.canvas,"repeat");return d.setTransform(h),d}}function $j({src:s,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:a=4294967295,inverseDecode:l=!1}){const c=ln.isLittleEndian?4278190080:255,[h,d]=l?[a,c]:[c,a],p=n>>3,f=n&7,g=s.length;e=new Uint32Array(e.buffer);let y=0;for(let w=0;w<i;w++){for(const S=t+p;t<S;t++){const x=t<g?s[t]:255;e[y++]=x&128?d:h,e[y++]=x&64?d:h,e[y++]=x&32?d:h,e[y++]=x&16?d:h,e[y++]=x&8?d:h,e[y++]=x&4?d:h,e[y++]=x&2?d:h,e[y++]=x&1?d:h}if(f===0)continue;const v=t<g?s[t++]:255;for(let S=0;S<f;S++)e[y++]=v&1<<7-S?d:h}return{srcPos:t,destPos:y}}const hA=16,dA=100,Gj=15,fA=10,is=16,Eg=new DOMMatrix,bs=new Float32Array(2),Po=new Float32Array([1/0,1/0,-1/0,-1/0]);function qj(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},s.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},s.transform=function(e,n,i,a,l,c){t.transform(e,n,i,a,l,c),this.__originalTransform(e,n,i,a,l,c)},s.setTransform=function(e,n,i,a,l,c){t.setTransform(e,n,i,a,l,c),this.__originalSetTransform(e,n,i,a,l,c)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(e){t.rotate(e),this.__originalRotate(e)},s.clip=function(e){t.clip(e),this.__originalClip(e)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,i,a,l,c){t.bezierCurveTo(e,n,i,a,l,c),this.__originalBezierCurveTo(e,n,i,a,l,c)},s.rect=function(e,n,i,a){t.rect(e,n,i,a),this.__originalRect(e,n,i,a)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Xj{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Fh(s,t,e,n,i,a,l,c,h,d){const[p,f,g,y,w,v]=Pe(s);if(f===0&&g===0){const A=l*p+w,E=Math.round(A),R=c*y+v,T=Math.round(R),O=(l+h)*p+w,D=Math.abs(Math.round(O)-E)||1,N=(c+d)*y+v,I=Math.abs(Math.round(N)-T)||1;return s.setTransform(Math.sign(p),0,0,Math.sign(y),E,T),s.drawImage(t,e,n,i,a,0,0,D,I),s.setTransform(p,f,g,y,w,v),[D,I]}if(p===0&&y===0){const A=c*g+w,E=Math.round(A),R=l*f+v,T=Math.round(R),O=(c+d)*g+w,D=Math.abs(Math.round(O)-E)||1,N=(l+h)*f+v,I=Math.abs(Math.round(N)-T)||1;return s.setTransform(0,Math.sign(f),Math.sign(g),0,E,T),s.drawImage(t,e,n,i,a,0,0,I,D),s.setTransform(p,f,g,y,w,v),[I,D]}s.drawImage(t,e,n,i,a,l,c,h,d);const S=Math.hypot(p,f),x=Math.hypot(g,y);return[S*h,x*d]}class pA{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=vy;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=rn.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,n){n?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Po.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Cn.FILL,e=null){const n=this.minMax.slice();if(t===Cn.STROKE){e||Se("Stroke bounding box must include transform."),Tt.singularValueDecompose2dScale(e,bs);const i=bs[0]*this.lineWidth/2,a=bs[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const t=Tt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Po,0)}getClippedPathBoundingBox(t=Cn.FILL,e=null){return Tt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function mA(s,t){if(t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%is,a=(e-i)/is,l=i===0?a:a+1,c=s.createImageData(n,is);let h=0,d;const p=t.data,f=c.data;let g,y,w,v;if(t.kind===nd.GRAYSCALE_1BPP){const S=p.byteLength,x=new Uint32Array(f.buffer,0,f.byteLength>>2),A=x.length,E=n+7>>3,R=4294967295,T=ln.isLittleEndian?4278190080:255;for(g=0;g<l;g++){for(w=g<a?is:i,d=0,y=0;y<w;y++){const O=S-h;let D=0;const N=O>E?n:O*8-7,I=N&-8;let G=0,W=0;for(;D<I;D+=8)W=p[h++],x[d++]=W&128?R:T,x[d++]=W&64?R:T,x[d++]=W&32?R:T,x[d++]=W&16?R:T,x[d++]=W&8?R:T,x[d++]=W&4?R:T,x[d++]=W&2?R:T,x[d++]=W&1?R:T;for(;D<N;D++)G===0&&(W=p[h++],G=128),x[d++]=W&G?R:T,G>>=1}for(;d<A;)x[d++]=0;s.putImageData(c,0,g*is)}}else if(t.kind===nd.RGBA_32BPP){for(y=0,v=n*is*4,g=0;g<a;g++)f.set(p.subarray(h,h+v)),h+=v,s.putImageData(c,0,y),y+=is;g<l&&(v=n*i*4,f.set(p.subarray(h,h+v)),s.putImageData(c,0,y))}else if(t.kind===nd.RGB_24BPP)for(w=is,v=n*w,g=0;g<l;g++){for(g>=a&&(w=i,v=n*w),d=0,y=v;y--;)f[d++]=p[h++],f[d++]=p[h++],f[d++]=p[h++],f[d++]=255;s.putImageData(c,0,g*is)}else throw new Error(`bad image kind: ${t.kind}`)}function gA(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%is,a=(e-i)/is,l=i===0?a:a+1,c=s.createImageData(n,is);let h=0;const d=t.data,p=c.data;for(let f=0;f<l;f++){const g=f<a?is:i;({srcPos:h}=$j({src:d,srcPos:h,dest:p,width:n,height:g,nonBlackColor:0})),s.putImageData(c,0,f*is)}}function tc(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function zh(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}function yA(s,t){if(t)return!0;Tt.singularValueDecompose2dScale(s,bs);const e=Math.fround(vi.pixelRatio*Wo.PDF_TO_CSS_UNITS);return bs[0]<=e&&bs[1]<=e}const Yj=["butt","round","square"],Wj=["miter","round","bevel"],Kj={},vA={};class Ho{constructor(t,e,n,i,a,{optionalContentConfig:l,markedContentStack:c=null},h,d,p){this.ctx=t,this.current=new pA(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new Xj(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,n=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const a=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,l),this.ctx.fillStyle=c,n){const h=this.cachedCanvases.getCanvas("transparent",a,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Pe(this.compositeCtx))}this.ctx.save(),zh(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Pe(this.ctx)}executeOperatorList(t,e,n,i,a){const l=t.argsArray,c=t.fnArray;let h=e||0;const d=l.length;if(d===h)return h;const p=d-h>fA&&typeof n=="function",f=p?Date.now()+Gj:0;let g=0;const y=this.commonObjs,w=this.objs;let v,S;for(;;){if(i!==void 0&&h===i.nextBreakPoint)return i.breakIt(h,n),h;if(!a||a(h))if(v=c[h],S=l[h]??null,v!==Fc.dependency)S===null?this[v](h):this[v](h,...S);else for(const x of S){this.dependencyTracker?.recordNamedData(x,h);const A=x.startsWith("g_")?y:w;if(!A.has(x))return A.get(x,n),h}if(h++,h===d)return h;if(p&&++g>fA){if(Date.now()>f)return n(),h;g=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width??t.displayWidth,i=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),c=n,h=i,d="prescale1",p,f;for(;a>2&&c>1||l>2&&h>1;){let g=c,y=h;a>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),a/=c/g),l>2&&h>1&&(y=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/y),p=this.cachedCanvases.getCanvas(d,g,y),f=p.context,f.clearRect(0,0,g,y),f.drawImage(t,0,0,c,h,0,0,g,y),t=p.canvas,c=g,h=y,d=d==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:h}}_createMaskCanvas(t,e){const n=this.ctx,{width:i,height:a}=e,l=this.current.fillColor,c=this.current.patternFill,h=Pe(n);let d,p,f,g;if((e.bitmap||e.data)&&e.count>1){const G=e.bitmap||e.data.buffer;p=JSON.stringify(c?h:[h.slice(0,4),l]),d=this._cachedBitmapsMap.get(G),d||(d=new Map,this._cachedBitmapsMap.set(G,d));const W=d.get(p);if(W&&!c){const F=Math.round(Math.min(h[0],h[2])+h[4]),Y=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,Ps.transformAndFill),{canvas:W,offsetX:F,offsetY:Y}}f=W}f||(g=this.cachedCanvases.getCanvas("maskCanvas",i,a),gA(g.context,e));let y=Tt.transform(h,[1/i,0,0,-1/a,0,0]);y=Tt.transform(y,[1,0,0,1,0,-a]);const w=Po.slice();Tt.axialAlignedBoundingBox([0,0,i,a],y,w);const[v,S,x,A]=w,E=Math.round(x-v)||1,R=Math.round(A-S)||1,T=this.cachedCanvases.getCanvas("fillCanvas",E,R),O=T.context,D=v,N=S;O.translate(-D,-N),O.transform(...y),f||(f=this._scaleImage(g.canvas,ri(O)),f=f.img,d&&c&&d.set(p,f)),O.imageSmoothingEnabled=yA(Pe(O),e.interpolate),Fh(O,f,0,0,f.width,f.height,0,0,i,a),O.globalCompositeOperation="source-in";const I=Tt.transform(ri(O),[1,0,0,1,-D,-N]);return O.fillStyle=c?l.getPattern(n,this,I,Cn.FILL,t):l,O.fillRect(0,0,i,a),d&&!c&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,T.canvas)),this.dependencyTracker?.recordDependencies(t,Ps.transformAndFill),{canvas:T.canvas,offsetX:Math.round(D),offsetY:Math.round(N)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=Yj[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=Wj[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){this.dependencyTracker?.recordSimpleData("dash",t);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[n,i]of e)switch(n){case"LW":this.setLineWidth(t,i);break;case"LC":this.setLineCap(t,i);break;case"LJ":this.setLineJoin(t,i);break;case"ML":this.setMiterLimit(t,i);break;case"D":this.setDash(t,i[0],i[1]);break;case"RI":this.setRenderingIntent(t,i);break;case"FL":this.setFlatness(t,i);break;case"Font":this.setFont(t,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,e,n);this.suspendedCtx=this.ctx;const l=this.ctx=a.context;l.setTransform(this.suspendedCtx.getTransform()),tc(this.suspendedCtx,l),qj(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),tc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const a=i[0],l=i[1],c=i[2]-a,h=i[3]-l;c===0||h===0||(this.genericComposeSMask(e.context,n,c,h,e.subtype,e.backdrop,e.transferMap,a,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,a,l,c,h,d,p,f){let g=t.canvas,y=h-p,w=d-f;if(l)if(y<0||w<0||y+n>g.width||w+i>g.height){const S=this.cachedCanvases.getCanvas("maskExtension",n,i),x=S.context;x.drawImage(g,-y,-w),x.globalCompositeOperation="destination-atop",x.fillStyle=l,x.fillRect(0,0,n,i),x.globalCompositeOperation="source-over",g=S.canvas,y=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(y,w,n,i),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(y,w,n,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const v=new Path2D;v.rect(h,d,n,i),e.clip(v),e.globalCompositeOperation="destination-in",e.drawImage(g,y,w,n,i,h,d,n,i),e.restore()}save(t){this.inSMaskMode&&tc(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&tc(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,i,a,l,c){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,n,i,a,l,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,i){let[a]=n;if(!i){a||=n[0]=new Path2D,this[e](t,a);return}if(this.dependencyTracker!==null){const l=e===Fc.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,i[0]-l,i[2]+l,i[1]-l,i[3]+l).recordDependencies(t,["transform"])}a instanceof Path2D||(a=n[0]=H2(a)),Tt.axialAlignedBoundingBox(i,Pe(this.ctx),this.current.minMax),this[e](t,a),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const l=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,ri(i),Cn.STROKE,t),l){const c=new Path2D;c.addPath(e,i.getTransform().invertSelf().multiplySelf(l)),e=c}this.rescaleAndStroke(e,!1),i.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,Ps.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Cn.STROKE,Pe(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){const i=this.ctx,a=this.current.fillColor,l=this.current.patternFill;let c=!1;if(l){const d=a.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(t),i.save(),i.fillStyle=a.getPattern(i,this,ri(i),Cn.FILL,t),d){const p=new Path2D;p.addPath(e,i.getTransform().invertSelf().multiplySelf(d)),e=p}c=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(i.fill(e,"evenodd"),this.pendingEOFill=!1):i.fill(e)),this.dependencyTracker?.recordDependencies(t,Ps.fill),c&&(i.restore(),this.dependencyTracker?.restore(t)),n&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,Ps.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Kj}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=vA}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;e!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",t),i.recordCloseMarker(t)}if(e!==void 0){const i=new Path2D,a=n.getTransform().invertSelf();for(const{transform:l,x:c,y:h,fontSize:d,path:p}of e)p&&i.addPath(p,new DOMMatrix(l).preMultiplySelf(a).translate(c,h).scale(d,-d));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const i=this.commonObjs.get(e),a=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(a.fontMatrix=i.fontMatrix||vy,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&Xt("Invalid font matrix for font "+e),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const l=i.loadedName||"sans-serif",c=i.systemFontInfo?.css||`"${l}", ${i.fallbackName}`;let h="normal";i.black?h="900":i.bold&&(h="bold");const d=i.italic?"italic":"normal";let p=n;n<hA?p=hA:n>dA&&(p=dA),this.current.fontSizeScale=n/p,this.ctx.font=`${d} ${h} ${p}px ${c}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#s(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i}paintChar(t,e,n,i,a,l){const c=this.ctx,h=this.current,d=h.font,p=h.textRenderingMode,f=h.fontSize/h.fontSizeScale,g=p&rn.FILL_STROKE_MASK,y=!!(p&rn.ADD_TO_PATH_FLAG),w=h.patternFill&&!d.missingFile,v=h.patternStroke&&!d.missingFile;let S;if((d.disableFontFace||y||w||v)&&!d.missingFile&&(S=d.getPathGenerator(this.commonObjs,e)),S&&(d.disableFontFace||w||v)){c.save(),c.translate(n,i),c.scale(f,-f),this.dependencyTracker?.recordCharacterBBox(t,c,d);let x;if(g===rn.FILL||g===rn.FILL_STROKE)if(a){x=c.getTransform(),c.setTransform(...a);const A=this.#s(S,x,a);c.fill(A)}else c.fill(S);if(g===rn.STROKE||g===rn.FILL_STROKE)if(l){x||=c.getTransform(),c.setTransform(...l);const{a:A,b:E,c:R,d:T}=x,O=Tt.inverseTransform(l),D=Tt.transform([A,E,R,T,0,0],O);Tt.singularValueDecompose2dScale(D,bs),c.lineWidth*=Math.max(bs[0],bs[1])/f,c.stroke(this.#s(S,x,l))}else c.lineWidth/=f,c.stroke(S);c.restore()}else(g===rn.FILL||g===rn.FILL_STROKE)&&(c.fillText(e,n,i),this.dependencyTracker?.recordCharacterBBox(t,c,d,f,n,i,()=>c.measureText(e))),(g===rn.STROKE||g===rn.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,c,d,f,n,i,()=>c.measureText(e)).recordDependencies(t,Ps.stroke),c.strokeText(e,n,i));y&&((this.pendingTextPaths||=[]).push({transform:Pe(c),x:n,y:i,fontSize:f,path:S}),this.dependencyTracker?.recordCharacterBBox(t,c,d,f,n,i))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return Yt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Ps.showText).resetBBox(t),this.current.textRenderingMode&rn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const a=n.fontSize;if(a===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,c=n.fontSizeScale,h=n.charSpacing,d=n.wordSpacing,p=n.fontDirection,f=n.textHScale*p,g=e.length,y=i.vertical,w=y?1:-1,v=i.defaultVMetrics,S=a*n.fontMatrix[0],x=n.textRenderingMode===rn.FILL&&!i.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),p>0?l.scale(f,-1):l.scale(f,1);let A,E;const R=n.textRenderingMode&rn.FILL_STROKE_MASK,T=R===rn.FILL||R===rn.FILL_STROKE,O=R===rn.STROKE||R===rn.FILL_STROKE;if(T&&n.patternFill){l.save();const W=n.fillColor.getPattern(l,this,ri(l),Cn.FILL,t);A=Pe(l),l.restore(),l.fillStyle=W}if(O&&n.patternStroke){l.save();const W=n.strokeColor.getPattern(l,this,ri(l),Cn.STROKE,t);E=Pe(l),l.restore(),l.strokeStyle=W}let D=n.lineWidth;const N=n.textMatrixScale;if(N===0||D===0?O&&(D=this.getSinglePixelWidth()):D/=N,c!==1&&(l.scale(c,c),D/=c),l.lineWidth=D,i.isInvalidPDFjsFont){const W=[];let F=0;for(const k of e)W.push(k.unicode),F+=k.width;const Y=W.join("");if(l.fillText(Y,0,0),this.dependencyTracker!==null){const k=l.measureText(Y);this.dependencyTracker.recordBBox(t,this.ctx,-k.actualBoundingBoxLeft,k.actualBoundingBoxRight,-k.actualBoundingBoxAscent,k.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=F*S*f,l.restore(),this.compose();return}let I=0,G;for(G=0;G<g;++G){const W=e[G];if(typeof W=="number"){I+=w*W*a/1e3;continue}let F=!1;const Y=(W.isSpace?d:0)+h,k=W.fontChar,J=W.accent;let z,j,q=W.width;if(y){const P=W.vmetric||v,U=-(W.vmetric?P[1]:q*.5)*S,K=P[2]*S;q=P?-P[0]:q,z=U/c,j=(I+K)/c}else z=I/c,j=0;let nt;if(i.remeasure&&q>0){nt=l.measureText(k);const P=nt.width*1e3/a*c;if(q<P&&this.isFontSubpixelAAEnabled){const U=q/P;F=!0,l.save(),l.scale(U,1),z/=U}else q!==P&&(z+=(q-P)/2e3*a/c)}if(this.contentVisible&&(W.isInFont||i.missingFile)){if(x&&!J)l.fillText(k,z,j),this.dependencyTracker?.recordCharacterBBox(t,l,nt?{bbox:null}:i,a/c,z,j,()=>nt??l.measureText(k));else if(this.paintChar(t,k,z,j,A,E),J){const P=z+a*J.offset.x/c,U=j-a*J.offset.y/c;this.paintChar(t,J.fontChar,P,U,A,E)}}const pt=y?q*S-Y*p:q*S+Y*p;I+=pt,F&&l.restore()}y?n.y-=I:n.x+=I*f,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,i=this.current,a=i.font,l=i.fontSize,c=i.fontDirection,h=a.vertical?1:-1,d=i.charSpacing,p=i.wordSpacing,f=i.textHScale*c,g=i.fontMatrix||vy,y=e.length,w=i.textRenderingMode===rn.INVISIBLE;let v,S,x,A;if(w||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(f,c);const E=this.dependencyTracker;for(this.dependencyTracker=E?new Dd(E,t):null,v=0;v<y;++v){if(S=e[v],typeof S=="number"){A=h*S*l/1e3,this.ctx.translate(A,0),i.x+=A*f;continue}const R=(S.isSpace?p:0)+d,T=a.charProcOperatorList[S.operatorListId];T?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...g),this.executeOperatorList(T),this.restore()):Xt(`Type3 character "${S.operatorListId}" is not available.`);const O=[S.width,0];Tt.applyTransform(O,g),x=O[0]*l+R,n.translate(x,0),i.x+=x*f}n.restore(),E&&(this.dependencyTracker=E)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,i,a,l,c){const h=new Path2D;h.rect(i,a,l-i,c-a),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,i,l,a,c).recordClipBox(t,this.ctx,i,l,a,c),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const i=this.baseTransform||Pe(this.ctx),a={createCanvasGraphics:(l,c)=>new Ho(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Dd(this.dependencyTracker,c,!0):null)};n=new tb(e,this.ctx,a,i)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=Vj(this.getObject(t,e)),this.cachedPatterns.set(e,i)),n&&(i.matrix=n),i}shadingFill(t,e){if(!this.contentVisible)return;const n=this.ctx;this.save(t);const i=this._getPattern(t,e);n.fillStyle=i.getPattern(n,this,ri(n),Cn.SHADING,t);const a=ri(n);if(a){const{width:l,height:c}=n.canvas,h=Po.slice();Tt.axialAlignedBoundingBox([0,0,l,c],a,h);const[d,p,f,g]=h;this.ctx.fillRect(d,p,f-d,g-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Ps.transform).recordDependencies(t,Ps.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Se("Should not call beginInlineImage")}beginImageData(){Se("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Pe(this.ctx),n)){Tt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,a,l,c]=n,h=new Path2D;h.rect(i,a,l-i,c-a),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,i,l,a,c),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||hf("TODO: Support non-isolated groups."),e.knockout&&Xt("Knockout groups not supported.");const i=Pe(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let a=Po.slice();Tt.axialAlignedBoundingBox(e.bbox,Pe(n),a);const l=[0,0,n.canvas.width,n.canvas.height];a=Tt.intersect(a,l)||[0,0,0,0];const c=Math.floor(a[0]),h=Math.floor(a[1]),d=Math.max(Math.ceil(a[2])-c,1),p=Math.max(Math.ceil(a[3])-h,1);this.current.startNewPathAndClipBox([0,0,d,p]);let f="groupAt"+this.groupLevel;e.smask&&(f+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(f,d,p),y=g.context;y.translate(-c,-h),y.transform(...i);let w=new Path2D;const[v,S,x,A]=e.bbox;if(w.rect(v,S,x-v,A-S),e.matrix){const E=new Path2D;E.addPath(w,new DOMMatrix(e.matrix)),w=E}y.clip(w),e.smask&&this.smaskStack.push({canvas:g.canvas,context:y,offsetX:c,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(c,h),n.save()),tc(n,y),this.ctx=y,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=Pe(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...a);const l=Po.slice();Tt.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,n,i,a,l){if(this.#t(),zh(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const c=n[2]-n[0],h=n[3]-n[1];if(l&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=c,n[3]=h,Tt.singularValueDecompose2dScale(Pe(this.ctx),bs);const{viewportScale:d}=this,p=Math.ceil(c*this.outputScaleX*d),f=Math.ceil(h*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(p,f);const{canvas:g,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(e,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(bs[0],0,0,-bs[1],0,h*bs[1]),zh(this.ctx)}else{zh(this.ctx),this.endPath(t);const d=new Path2D;d.rect(n[0],n[1],c,h),this.ctx.clip(d)}}this.current=new pA(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...i),this.transform(t,...a)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const i=this.ctx,a=this._createMaskCanvas(t,e),l=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(l,a.offsetX,a.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,a.offsetX,a.offsetX+l.width,a.offsetY,a.offsetY+l.height).recordOperation(t),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,i=0,a=0,l,c){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const d=Pe(h);h.transform(n,i,a,l,0,0);const p=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]),this.dependencyTracker?.resetBBox(t);for(let f=0,g=c.length;f<g;f+=2){const y=Tt.transform(d,[n,i,a,l,c[f],c[f+1]]);h.drawImage(p.canvas,y[4],y[5]),this.dependencyTracker?.recordBBox(t,this.ctx,y[4],y[4]+p.canvas.width,y[5],y[5]+p.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,a=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,Ps.transformAndFill);for(const l of e){const{data:c,width:h,height:d,transform:p}=l,f=this.cachedCanvases.getCanvas("maskCanvas",h,d),g=f.context;g.save();const y=this.getObject(t,c,l);gA(g,y),g.globalCompositeOperation="source-in",g.fillStyle=a?i.getPattern(g,this,ri(n),Cn.FILL,t):i,g.fillRect(0,0,h,d),g.restore(),n.save(),n.transform(...p),n.scale(1,-1),Fh(n,f.canvas,0,0,h,d,0,-1,1,1),this.dependencyTracker?.recordBBox(t,n,0,h,0,d),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Xt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,i,a){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){Xt("Dependent image isn't ready yet");return}const c=l.width,h=l.height,d=[];for(let p=0,f=a.length;p<f;p+=2)d.push({transform:[n,0,0,i,a[p],a[p+1]],x:0,y:0,w:c,h});this.paintInlineImageXObjectGroup(t,l,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,a=this.cachedCanvases.getCanvas("inlineImage",n,i),l=a.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",a.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const n=e.width,i=e.height,a=this.ctx;this.save(t);const{filter:l}=a;l!=="none"&&l!==""&&(a.filter="none"),a.scale(1/n,-1/i);let c;if(e.bitmap)c=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)c=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",n,i).context;mA(p,e),c=this.applyTransferMapsToCanvas(p)}const h=this._scaleImage(c,ri(a));a.imageSmoothingEnabled=yA(Pe(a),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,a,0,n,-i,0).recordDependencies(t,Ps.imageXObject).recordOperation(t),Fh(a,h.img,0,0,h.paintWidth,h.paintHeight,0,-i,n,i),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){if(!this.contentVisible)return;const i=this.ctx;let a;if(e.bitmap)a=e.bitmap;else{const l=e.width,c=e.height,d=this.cachedCanvases.getCanvas("inlineImage",l,c).context;mA(d,e),a=this.applyTransferMapsToCanvas(d)}this.dependencyTracker?.resetBBox(t);for(const l of n)i.save(),i.transform(...l.transform),i.scale(1,-1),Fh(i,a,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Ps.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const a=this.ctx;this.pendingClip?(i||(this.pendingClip===vA?a.clip(e,"evenodd"):a.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Pe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:a}=this.ctx.getTransform();let l,c;if(n===0&&i===0){const h=Math.abs(e),d=Math.abs(a);if(h===d)if(t===0)l=c=1/h;else{const p=h*t;l=c=p<1?1/p:1}else if(t===0)l=1/h,c=1/d;else{const p=h*t,f=d*t;l=p<1?1/p:1,c=f<1?1/f:1}}else{const h=Math.abs(e*a-n*i),d=Math.hypot(e,n),p=Math.hypot(i,a);if(t===0)l=p/h,c=d/h;else{const f=t*h;l=p>f?p/f:1,c=d>f?d/f:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:i}}=this,[a,l]=this.getScaleForStroking();if(a===l){n.lineWidth=(i||1)*a,n.stroke(t);return}const c=n.getLineDash();e&&n.save(),n.scale(a,l),Eg.a=1/a,Eg.d=1/l;const h=new Path2D;if(h.addPath(t,Eg),c.length>0){const d=Math.max(a,l);n.setLineDash(c.map(p=>p/d)),n.lineDashOffset/=d}n.lineWidth=i||1,n.stroke(h),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const s in Fc)Ho.prototype[s]!==void 0&&(Ho.prototype[Fc[s]]=Ho.prototype[s]);class Vo{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class Zj{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Ao=Symbol("INTERNAL");class Qj{#t=!1;#e=!1;#s=!1;#n=!0;constructor(t,{name:e,intent:n,usage:i,rbGroups:a}){this.#t=!!(t&ys.DISPLAY),this.#e=!!(t&ys.PRINT),this.name=e,this.intent=n,this.usage=i,this.rbGroups=a}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==Ao&&Se("Internal method `_setVisible` called."),this.#s=n,this.#n=e}}class Jj{#t=null;#e=new Map;#s=null;#n=null;constructor(t,e=ys.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const n of t.groups)this.#e.set(n.id,new Qj(e,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(Ao,!1);for(const n of t.on)this.#e.get(n)._setVisible(Ao,!0);for(const n of t.off)this.#e.get(n)._setVisible(Ao,!1);this.#s=this.getHash()}}#a(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const a=t[i];let l;if(Array.isArray(a))l=this.#a(a);else if(this.#e.has(a))l=this.#e.get(a).visible;else return Xt(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return hf("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Xt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return Xt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return Xt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return Xt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return Xt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return Xt(`Unknown optional content policy ${t.policy}.`),!0}return Xt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const i=this.#e.get(t);if(!i){Xt(`Optional content group not found: ${t}`);return}if(n&&e&&i.rbGroups.length)for(const a of i.rbGroups)for(const l of a)l!==t&&this.#e.get(l)?._setVisible(Ao,!1,!0);i._setVisible(Ao,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const a=this.#e.get(i);if(a)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!a.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new $2;for(const[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class tU{constructor(t,{disableRange:e=!1,disableStream:n=!1}){oe(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:l,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=c,a?.length>0){const h=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,d)=>{this._onReceiveData({begin:h,chunk:d})}),t.addProgressListener((h,d)=>{this._onProgress({loaded:h,total:d})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(n),!0)});oe(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){oe(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new eU(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new nU(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class eU{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=Yv(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class nU{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function sU(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let p=c(e);return p=unescape(p),p=h(p),p=d(p),a(p)}if(e=l(s),e){const p=d(e);return a(p)}if(e=n("filename","i").exec(s),e){e=e[1];let p=c(e);return p=d(p),a(p)}function n(p,f){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function i(p,f){if(p){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const g=new TextDecoder(p,{fatal:!0}),y=Wc(f);f=g.decode(y),t=!1}catch{}}return f}function a(p){return t&&/[\x80-\xff]/.test(p)&&(p=i("utf-8",p),t&&(p=i("iso-8859-1",p))),p}function l(p){const f=[];let g;const y=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=y.exec(p))!==null;){let[,v,S,x]=g;if(v=parseInt(v,10),v in f){if(v===0)break;continue}f[v]=[S,x]}const w=[];for(let v=0;v<f.length&&v in f;++v){let[S,x]=f[v];x=c(x),S&&(x=unescape(x),v===0&&(x=h(x))),w.push(x)}return w.join("")}function c(p){if(p.startsWith('"')){const f=p.slice(1).split('\\"');for(let g=0;g<f.length;++g){const y=f[g].indexOf('"');y!==-1&&(f[g]=f[g].slice(0,y),f.length=g+1),f[g]=f[g].replaceAll(/\\(.)/g,"$1")}p=f.join('"')}return p}function h(p){const f=p.indexOf("'");if(f===-1)return p;const g=p.slice(0,f),w=p.slice(f+1).replace(/^[^']*'/,"");return i(g,w)}function d(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,g,y,w){if(y==="q"||y==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,S){return String.fromCharCode(parseInt(S,16))}),i(g,w);try{w=atob(w)}catch{}return i(g,w)})}return""}function Z2(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const i=t[n];i!==void 0&&e.append(n,i)}return e}function pf(s){return URL.parse(s)?.origin??null}function Q2({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(s.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function J2(s){const t=s.get("Content-Disposition");if(t){let e=sU(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Yv(e))return e}return null}function tu(s,t){return new Md(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s,s===404||s===0&&t.startsWith("file:"))}function tR(s){return s===200||s===206}function eR(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function nR(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Xt(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class iU{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Z2(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return oe(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new rU(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new aU(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class rU{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,eR(n,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=pf(a.url),!tR(a.status))throw tu(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const l=a.headers,{allowRangeRequests:c,suggestedLength:h}=Q2({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=h||this._contentLength,this._filename=J2(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Pr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:nR(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class aU{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${e}-${n-1}`);const l=i.url;fetch(l,eR(a,this._withCredentials,this._abortController)).then(c=>{const h=pf(c.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!tR(c.status))throw tu(c.status,l);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:nR(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Cg=200,Tg=206;function oU(s){const t=s.response;return typeof t!="string"?t:Wc(t).buffer}class lU{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Z2(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[a,l]of this.headers)e.setRequestHeader(a,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=Tg):i.expectedStatus=Cg,e.responseType="arraybuffer",oe(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){const n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){n.onError(i.status);return}const a=i.status||Cg;if(!(a===Cg&&n.expectedStatus===Tg)&&a!==n.expectedStatus){n.onError(i.status);return}const c=oU(i);if(a===Tg){const h=i.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);d?n.onDone({begin:parseInt(d[1],10),chunk:c}):(Xt('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class cU{constructor(t){this._source=t,this._manager=new lU(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return oe(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new uU(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new hU(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class uU{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=pf(e.responseURL);const n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[h,...d]=c.split(": ");return[h,d.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:l}=Q2({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=J2(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=tu(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class hU{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=pf(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=tu(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const dU=/^[a-z][a-z0-9\-+.]+:/i;function fU(s){if(dU.test(s))return new URL(s);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(s))}class pU{constructor(t){this.source=t,this.url=fU(t.url),oe(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return oe(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new mU(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new gU(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class mU{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=tu(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Pr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class gU{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ec=Symbol("INITIAL_DATA");class sR{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:ec}}get(t,e=null){if(e){const i=this.#e(t);return i.promise.then(()=>e(i.data)),null}const n=this.#t[t];if(!n||n.data===ec)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#t[t];return!!e&&e.data!==ec}delete(t){const e=this.#t[t];return!e||e.data===ec?!1:(delete this.#t[t],!0)}resolve(t,e=null){const n=this.#e(t);n.data=e,n.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==ec&&(yield[t,e])}}}const yU=1e5,bA=30;class vs{#t=Promise.withResolvers();#e=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#r=null;#i=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#g=[];#m=null;#u=[];#p=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#E=new WeakMap;static#S=null;static#_=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#m=t;else if(typeof t=="object")this.#m=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=n.scale*vi.pixelRatio,this.#d=n.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:a,pageX:l,pageY:c}=n.rawDims;this.#y=[1,0,0,-1,-l,c+a],this.#o=i,this.#i=a,vs.#k(),e.style.setProperty("--min-font-size",vs.#S),Sa(e,n),this.#t.promise.finally(()=>{vs.#_.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=ln.platform;return Yt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#a??=e.lang,Object.assign(this.#f,e.styles),this.#T(e.items),t()},this.#t.reject)};return this.#c=this.#m.getReader(),vs.#_.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const n=t.scale*vi.pixelRatio,i=t.rotation;if(i!==this.#d&&(e?.(),this.#d=i,Sa(this.#l,{rotation:i})),n!==this.#h){e?.(),this.#h=n;const a={div:null,properties:null,ctx:vs.#M(this.#a)};for(const l of this.#u)a.properties=this.#p.get(l),a.div=l,this.#A(a)}}cancel(){const t=new Pr("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#T(t){if(this.#s)return;this.#r.ctx??=vs.#M(this.#a);const e=this.#u,n=this.#g;for(const i of t){if(e.length>yU){Xt("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const a=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),i.id&&this.#e.setAttribute("id",`${i.id}`),a.append(this.#e)}else i.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(i.str),this.#w(i)}}#w(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const i=Tt.transform(this.#y,t.transform);let a=Math.atan2(i[1],i[0]);const l=this.#f[t.fontName];l.vertical&&(a+=Math.PI/2);let c=this.#n&&l.fontSubstitution||l.fontFamily;c=vs.fontFamilyMap.get(c)||c;const h=Math.hypot(i[2],i[3]),d=h*vs.#I(c,l,this.#a);let p,f;a===0?(p=i[4],f=i[5]-d):(p=i[4]+d*Math.sin(a),f=i[5]-d*Math.cos(a));const g=e.style;g.left=`${(100*p/this.#o).toFixed(2)}%`,g.top=`${(100*f/this.#i).toFixed(2)}%`,g.setProperty("--font-height",`${h.toFixed(2)}px`),g.fontFamily=c,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),a!==0&&(n.angle=a*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),v=Math.abs(t.transform[3]);w!==v&&Math.max(w,v)/Math.min(w,v)>1.5&&(y=!0)}if(y&&(n.canvasWidth=l.vertical?t.height:t.width),this.#p.set(e,n),this.#r.div=e,this.#r.properties=n,this.#A(this.#r),n.hasText&&this.#e.append(e),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#A(t){const{div:e,properties:n,ctx:i}=t,{style:a}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=a,{canvasWidth:c,fontSize:h}=n;vs.#R(i,h*this.#h,l);const{width:d}=i.measureText(e.textContent);d>0&&a.setProperty("--scale-x",c*this.#h/d)}n.angle!==0&&a.setProperty("--rotate",`${n.angle}deg`)}static cleanup(){if(!(this.#_.size>0)){this.#b.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#M(t=null){let e=this.#v.get(t||="");if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,e),this.#E.set(e,{size:0,family:""})}return e}static#R(t,e,n){const i=this.#E.get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)}static#k(){if(this.#S!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#S=t.getBoundingClientRect().height,t.remove()}static#I(t,e,n){const i=this.#b.get(t);if(i)return i;const a=this.#M(n);a.canvas.width=a.canvas.height=bA,this.#R(a,bA,t);const l=a.measureText(""),c=l.fontBoundingBoxAscent,h=Math.abs(l.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let d=.8;return c?d=c/(c+h):(ln.platform.isFirefox&&Xt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?d=e.ascent:e.descent&&(d=1+e.descent)),this.#b.set(t,d),d}}const vU=100;function iR(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new eb,{docId:e}=t,n=s.url?Ej(s.url):null,i=s.data?Cj(s.data):null,a=s.httpHeaders||null,l=s.withCredentials===!0,c=s.password??null,h=s.range instanceof rR?s.range:null,d=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let p=s.worker instanceof jc?s.worker:null;const f=s.verbosity,g=typeof s.docBaseUrl=="string"&&!df(s.docBaseUrl)?s.docBaseUrl:null,y=Ph(s.cMapUrl),w=s.cMapPacked!==!1,v=s.CMapReaderFactory||(zn?Pj:rA),S=Ph(s.iccUrl),x=Ph(s.standardFontDataUrl),A=s.StandardFontDataFactory||(zn?Lj:aA),E=Ph(s.wasmUrl),R=s.WasmFactory||(zn?Bj:oA),T=s.stopAtErrors!==!0,O=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,D=s.isEvalSupported!==!1,N=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!zn,I=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!zn&&(ln.platform.isFirefox||!globalThis.chrome),G=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,W=typeof s.disableFontFace=="boolean"?s.disableFontFace:zn,F=s.fontExtraProperties===!0,Y=s.enableXfa===!0,k=s.ownerDocument||globalThis.document,J=s.disableRange===!0,z=s.disableStream===!0,j=s.disableAutoFetch===!0,q=s.pdfBug===!0,nt=s.CanvasFactory||(zn?Nj:Mj),pt=s.FilterFactory||(zn?Oj:Dj),P=s.enableHWA===!0,U=s.useWasm!==!1,K=h?h.length:s.length??NaN,tt=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!zn&&!W,it=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(v===rA&&A===aA&&R===oA&&y&&x&&E&&cc(y,document.baseURI)&&cc(x,document.baseURI)&&cc(E,document.baseURI)),xt=null;Q6(f);const ut={canvasFactory:new nt({ownerDocument:k,enableHWA:P}),filterFactory:new pt({docId:e,ownerDocument:k}),cMapReaderFactory:it?null:new v({baseUrl:y,isCompressed:w}),standardFontDataFactory:it?null:new A({baseUrl:x}),wasmFactory:it?null:new R({baseUrl:E})};p||(p=jc.create({verbosity:f,port:Vo.workerPort}),t._worker=p);const vt={docId:e,apiVersion:"5.4.530",data:i,password:c,disableAutoFetch:j,rangeChunkSize:d,length:K,docBaseUrl:g,enableXfa:Y,evaluatorOptions:{maxImageSize:O,disableFontFace:W,ignoreErrors:T,isEvalSupported:D,isOffscreenCanvasSupported:N,isImageDecoderSupported:I,canvasMaxAreaInBytes:G,fontExtraProperties:F,useSystemFonts:tt,useWasm:U,useWorkerFetch:it,cMapUrl:y,iccUrl:S,standardFontDataUrl:x,wasmUrl:E}},Et={ownerDocument:k,pdfBug:q,styleElement:xt,loadingParams:{disableAutoFetch:j,enableXfa:Y}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Lt=p.messageHandler.sendWithPromise("GetDocRequest",vt,i?[i.buffer]:null);let Ot;if(h)Ot=new tU(h,{disableRange:J,disableStream:z});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Ht=cc(n)?iU:zn?pU:cU;Ot=new Ht({url:n,length:K,httpHeaders:a,withCredentials:l,rangeChunkSize:d,disableRange:J,disableStream:z})}return Lt.then(Ht=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const le=new uc(e,Ht,p.port),M=new _U(le,t,Ot,Et,ut,P);t._transport=M,le.send("Ready",null)})}).catch(t._capability.reject),t}class eb{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${eb.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class rR{#t=Promise.withResolvers();#e=[];#s=[];#n=[];#a=[];constructor(t,e,n=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#s.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const n of this.#a)n(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const n of this.#n)n(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#s)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Se("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class bU{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Yt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class wU{#t=!1;constructor(t,e,n,i=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new QS:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new sR,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:a=!1}={}){return new Zc({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Yt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:i="display",annotationMode:a=Cr.ENABLE,transform:l=null,background:c=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:f=null,isEditing:g=!1,recordOperations:y=!1,operationsFilter:w=null}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(i,a,f,g),{renderingIntent:S,cacheKey:x}=v;this.#t=!1,h||=this._transport.getOptionalContentConfig(S);let A=this._intentStates.get(x);A||(A=Object.create(null),this._intentStates.set(x,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const E=!!(S&ys.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const R=!!(this._pdfBug&&globalThis.StepperManager?.enabled),T=!this.recordedBBoxes&&(y||R),O=I=>{if(A.renderTasks.delete(D),T){const G=D.gfx?.dependencyTracker.take();G&&(D.stepper&&D.stepper.setOperatorBBoxes(G,D.gfx.dependencyTracker.takeDebugMetadata()),y&&(this.recordedBBoxes=G))}E&&(this.#t=!0),this.#e(),I?(D.capability.reject(I),this._abortOperatorList({intentState:A,reason:I instanceof Error?I:new Error(I)})):D.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},D=new Lo({callback:O,params:{canvas:e,canvasContext:t,dependencyTracker:T?new Fj(e,A.operatorList.length,R):null,viewport:n,transform:l,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:w});(A.renderTasks||=new Set).add(D);const N=D.task;return Promise.all([A.displayReadyCapability.promise,h]).then(([I,G])=>{if(this.destroyed){O();return}if(this._stats?.time("Rendering"),!(G.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");D.initializeGraphics({transparency:I,optionalContentConfig:G}),D.operatorListChanged()}).catch(O),N}getOperatorList({intent:t="display",annotationMode:e=Cr.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(t,e,n,i,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let h;return c.opListReadCapability||(h=Object.create(null),h.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(h),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>zc.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function a(){l.read().then(function({value:h,done:d}){if(d){n(c);return}c.lang??=h.lang,Object.assign(c.styles,h.styles),c.items.push(...h.items),a()},i)}const l=e.getReader(),c={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new QS),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){const{map:a,transfer:l}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:i},l).getReader(),d=this._intentStates.get(e);d.streamReader=h;const p=()=>{h.read().then(({value:f,done:g})=>{if(g){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,d),p())},f=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const g of d.renderTasks)g.operatorListChanged();this.#e()}if(d.displayReadyCapability)d.displayReadyCapability.reject(f);else if(d.opListReadCapability)d.opListReadCapability.reject(f);else throw f}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Xv){let i=vU;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new Pr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var Tr,Ws,$i,ma,Hd,ga,ya,Vn,sd,aR,oR,hc,$o,id;const Oe=class Oe{constructor({name:t=null,port:e=null,verbosity:n=J6()}={}){ni(this,Vn);ni(this,Tr,Promise.withResolvers());ni(this,Ws,null);ni(this,$i,null);ni(this,ma,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(De(Oe,ya).has(e))throw new Error("Cannot use more than one PDFWorker per port.");De(Oe,ya).set(e,this),si(this,Vn,aR).call(this,e)}else si(this,Vn,oR).call(this)}get promise(){return De(this,Tr).promise}get port(){return De(this,$i)}get messageHandler(){return De(this,Ws)}destroy(){this.destroyed=!0,De(this,ma)?.terminate(),es(this,ma,null),De(Oe,ya).delete(De(this,$i)),es(this,$i,null),De(this,Ws)?.destroy(),es(this,Ws,null)}static create(t){const e=De(this,ya).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Oe(t)}static get workerSrc(){if(Vo.workerSrc)return Vo.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Yt(this,"_setupFakeWorkerGlobal",(async()=>De(this,$o,id)?De(this,$o,id):(await import(this.workerSrc)).WorkerMessageHandler)())}};Tr=new WeakMap,Ws=new WeakMap,$i=new WeakMap,ma=new WeakMap,Hd=new WeakMap,ga=new WeakMap,ya=new WeakMap,Vn=new WeakSet,sd=function(){De(this,Tr).resolve(),De(this,Ws).send("configure",{verbosity:this.verbosity})},aR=function(t){es(this,$i,t),es(this,Ws,new uc("main","worker",t)),De(this,Ws).on("ready",()=>{}),si(this,Vn,sd).call(this)},oR=function(){if(De(Oe,ga)||De(Oe,$o,id)){si(this,Vn,hc).call(this);return}let{workerSrc:t}=Oe;try{Oe._isSameOrigin(window.location,t)||(t=Oe._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new uc("main","worker",e),i=()=>{a.abort(),n.destroy(),e.terminate(),this.destroyed?De(this,Tr).reject(new Error("Worker was destroyed")):si(this,Vn,hc).call(this)},a=new AbortController;e.addEventListener("error",()=>{De(this,ma)||i()},{signal:a.signal}),n.on("test",c=>{if(a.abort(),this.destroyed||!c){i();return}es(this,Ws,n),es(this,$i,e),es(this,ma,e),si(this,Vn,sd).call(this)}),n.on("ready",c=>{if(a.abort(),this.destroyed){i();return}try{l()}catch{si(this,Vn,hc).call(this)}});const l=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};l();return}catch{hf("The worker has been disabled.")}si(this,Vn,hc).call(this)},hc=function(){De(Oe,ga)||(Xt("Setting up fake worker."),es(Oe,ga,!0)),Oe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){De(this,Tr).reject(new Error("Worker was destroyed"));return}const e=new kj;es(this,$i,e);const n=`fake${Ax(Oe,Hd)._++}`,i=new uc(n+"_worker",n,e);t.setup(i,e),es(this,Ws,new uc(n,n+"_worker",e)),si(this,Vn,sd).call(this)}).catch(t=>{De(this,Tr).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},$o=new WeakSet,id=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},ni(Oe,$o),ni(Oe,Hd,0),ni(Oe,ga,!1),ni(Oe,ya,new WeakMap),zn&&(es(Oe,ga,!0),Vo.workerSrc||="./pdf.worker.mjs"),Oe._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const i=new URL(e,n);return n.origin===i.origin},Oe._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Oe.fromPort=t=>{if(hj("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Oe.create(t)};let jc=Oe;class _U{#t=new Map;#e=new Map;#s=new Map;#n=new Map;#a=null;constructor(t,e,n,i,a,l){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new sR,this.fontLoader=new xj({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#r(t,e=null){const n=this.#t.get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,i),i}get annotationStorage(){return Yt(this,"annotationStorage",new Zv)}getRenderingIntent(t,e=Cr.ENABLE,n=null,i=!1,a=!1){let l=ys.DISPLAY,c=Ay;switch(t){case"any":l=ys.ANY;break;case"display":break;case"print":l=ys.PRINT;break;default:Xt(`getRenderingIntent - invalid intent: ${t}`)}const h=l&ys.PRINT&&n instanceof G2?n:this.annotationStorage;switch(e){case Cr.DISABLE:l+=ys.ANNOTATIONS_DISABLE;break;case Cr.ENABLE:break;case Cr.ENABLE_FORMS:l+=ys.ANNOTATIONS_FORMS;break;case Cr.ENABLE_STORAGE:l+=ys.ANNOTATIONS_STORAGE,c=h.serializable;break;default:Xt(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(l+=ys.IS_EDITING),a&&(l+=ys.OPLIST);const{ids:d,hash:p}=h.modifiedIds,f=[l,c.hash,p];return{renderingIntent:l,cacheKey:f.join("_"),annotationStorageSerializable:c,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#e.values())t.push(n._destroy());this.#e.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),vs.cleanup(),this._networkStream?.cancelAllRequests(new Pr("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{oe(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:l}){if(l){i.close();return}oe(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:l}=this._fullReader;return(!i||!a)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{e.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:l}}),t.on("GetRangeReader",(n,i)=>{oe(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:l,done:c}){if(c){i.close();return}oe(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{i.error(l)})},i.onCancel=l=>{a.cancel(l),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new bU(n,this))}),t.on("DocException",n=>{e._capability.reject(ns(n))}),t.on("PasswordRequest",n=>{this.#a=Promise.withResolvers();try{if(!e.onPassword)throw ns(n);const i=a=>{a instanceof Error?this.#a.reject(a):this.#a.resolve({password:a})};e.onPassword(i,n.code)}catch(i){this.#a.reject(i)}return this.#a.promise}),t.on("DataLoaded",n=>{e.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#e.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,a])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in a){const f=a.error;Xt(`Error during font loading: ${f}`),this.commonObjs.resolve(n,f);break}const l=new _e(a),c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,g)=>globalThis.FontInspector.fontAdded(f,g):null,h=new Sj(l,c,a.extra,a.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(n,h)});break;case"CopyLocalImage":const{imageRef:d}=a;oe(d,"The imageRef must be defined.");for(const f of this.#e.values())for(const[,g]of f.objs)if(g?.ref===d)return g.dataLen?(this.commonObjs.resolve(n,structuredClone(g)),g.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new Aj(a));break;case"Image":this.commonObjs.resolve(n,a);break;case"Pattern":const p=new pn(a);this.commonObjs.resolve(n,p.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,a,l])=>{if(this.destroyed)return;const c=this.#e.get(i);if(!c.objs.has(n)){if(c._intentStates.size===0){l?.bitmap?.close();return}switch(a){case"Image":case"Pattern":c.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",n=>{this.destroyed||e.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Xt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#s.get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,t);const l=new wU(e,a,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#s.set(e,i),i}getPageIndex(t){return Ey(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#r("GetOptionalContentConfig").then(e=>new Jj(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>({info:i[0],metadata:i[1]?new Zj(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:i[2]}));return this.#t.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),vs.cleanup()}}cachedPageNumber(t){if(!Ey(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class xU{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class Lo{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:a,operatorList:l,pageIndex:c,canvasFactory:h,filterFactory:d,useRequestAnimationFrame:p=!1,pdfBug:f=!1,pageColors:g=null,enableHWA:y=!1,operationsFilter:w=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=h,this.filterFactory=d,this._pdfBug=f,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new xU(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=y,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Lo.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Lo.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:a,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Ho(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:i,viewport:n,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Lo.#e.delete(this._canvas),t||=new Xv(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Lo.#e.delete(this._canvas),this.callback())))}}const lR="5.4.530",SU="50cc4adac";class Bs{#t=null;#e=null;#s;#n=null;#a=!1;#r=!1;#i=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return Yt(this,"_keyboardManager",new Jc([[["Escape","mac+Escape"],Bs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Bs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Bs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Bs.prototype._moveToPrevious],[["Home","mac+Home"],Bs.prototype._moveToBeginning],[["End","mac+End"],Bs.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#r=!1,this.#i=t):this.#r=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#s=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Bs.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#i&&(t.ariaControls=`${this.#i.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#m.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const n=this.#e=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#s,t.append(n),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",js,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#i&&(t.id=`${this.#i.id}_colorpicker_dropdown`);for(const[n,i]of this.#l.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=n,a.setAttribute("data-l10n-id",Bs.#d[n]);const l=document.createElement("span");a.append(l),l.className="swatch",l.style.backgroundColor=i,a.ariaSelected=i===this.#s,a.addEventListener("click",this.#f.bind(this,i),{signal:e}),t.append(a)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:ae.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#m(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#p){this.#m(t);return}if(t.target===this.#t){this.#n.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#m(t);return}this.#n.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#m(t);return}this.#n.lastElementChild?.focus()}#g(t){Bs._keyboardManager.exec(this,t)}#m(t){if(this.#p){this.hideDropdown();return}if(this.#a=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#p){this.#i?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Uc{#t=null;#e=null;#s=null;static#n=null;constructor(t){this.#e=t,this.#s=t._uiManager,Uc.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,color:n}=this.#e,i=this.#t=document.createElement("input");return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",Uc.#n[t]),i.addEventListener("input",()=>{this.#s.updateParams(e,i.value)},{signal:this.#s._signal}),i}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function wA(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function nc(s){return Math.max(0,Math.min(255,255*s))}class _A{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=nc(t),[t,t,t]}static G_HTML([t]){const e=wA(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(nc)}static RGB_HTML(t){return`#${t.map(wA).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[nc(1-Math.min(1,t+i)),nc(1-Math.min(1,n+i)),nc(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,a=1-e,l=1-n,c=Math.min(i,a,l);return["CMYK",i,a,l,c]}}class AU{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Se("Abstract method `_createSVG` called.")}}class Od extends AU{_createSVG(t){return document.createElementNS(Ui,t)}}const EU=9,Aa=new WeakSet,CU=new Date().getTimezoneOffset()*60*1e3;class Rg{static create(t){switch(t.data.annotationType){case Ze.LINK:return new nb(t);case Ze.TEXT:return new RU(t);case Ze.WIDGET:switch(t.data.fieldType){case"Tx":return new kU(t);case"Btn":return t.data.radioButton?new cR(t):t.data.checkBox?new DU(t):new OU(t);case"Ch":return new NU(t);case"Sig":return new MU(t)}return new Ta(t);case Ze.POPUP:return new Ry(t);case Ze.FREETEXT:return new uR(t);case Ze.LINE:return new LU(t);case Ze.SQUARE:return new BU(t);case Ze.CIRCLE:return new IU(t);case Ze.POLYLINE:return new hR(t);case Ze.CARET:return new zU(t);case Ze.INK:return new sb(t);case Ze.POLYGON:return new FU(t);case Ze.HIGHLIGHT:return new dR(t);case Ze.UNDERLINE:return new jU(t);case Ze.SQUIGGLY:return new UU(t);case Ze.STRIKEOUT:return new HU(t);case Ze.STAMP:return new fR(t);case Ze.FILEATTACHMENT:return new VU(t);default:return new Be(t)}}}class Be{#t=null;#e=!1;#s=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Be._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:i}=this.data;let a=-1/0,l=-1/0;if(e?.length>=8){for(let c=0;c<e.length;c+=8)e[c+1]>l?(l=e[c+1],a=e[c+2]):e[c+1]===l&&(a=Math.max(a,e[c+2]));return[a,l]}if(n?.length>=1){for(const c of n)for(let h=0,d=c.length;h<d;h+=2)c[h+1]>l?(l=c[h+1],a=c[h]):c[h+1]===l&&(a=Math.max(a,c[h]));if(a!==1/0)return[a,l]}return i?[i[2],i[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-a)/n,t[1]=100*(t[1]-l)/i,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Ic}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${Ic}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#s?.popup||this.popup)?.remove(),this.#s=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:n}=t;e&&this.#n(e);let i=this.#s?.popup||this.popup;!i&&n?.text&&(this._createPopup(n),i=this.#s.popup),i&&(i.updateEdited(t),n?.deleted&&(i.remove(),this.#s=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#s?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:h}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-c)/a}%`,e.top=`${100*(l-t[3]+h)/l}%`,i===0?(e.width=`${100*(t[2]-t[0])/a}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(i)}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),!(this instanceof Ta)&&!(this instanceof nb)&&(a.tabIndex=0);const{style:l}=a;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof Ry){const{rotation:v}=e;return!e.hasOwnCanvas&&v!==0&&this.setRotation(v,a),a}const{width:c,height:h}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const v=e.borderStyle.horizontalCornerRadius,S=e.borderStyle.verticalCornerRadius;if(v>0||S>0){const A=`calc(${v}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;l.borderRadius=A}else if(this instanceof cR){const A=`calc(${c}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;l.borderRadius=A}switch(e.borderStyle.style){case So.SOLID:l.borderStyle="solid";break;case So.DASHED:l.borderStyle="dashed";break;case So.BEVELED:Xt("Unimplemented border style: beveled");break;case So.INSET:Xt("Unimplemented border style: inset");break;case So.UNDERLINE:l.borderBottomStyle="solid";break}const x=e.borderColor||null;x?(this.#e=!0,l.borderColor=Tt.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):l.borderWidth=0}const d=Tt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:f,pageX:g,pageY:y}=i.rawDims;l.left=`${100*(d[0]-g)/p}%`,l.top=`${100*(d[1]-y)/f}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(l.width=`${100*c/p}%`,l.height=`${100*h/f}%`):this.setRotation(w,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:l}=this;t%180!==0&&([a,l]=[l,a]),e.style.width=`${100*a/n}%`,e.style.height=`${100*l/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const a=i.detail[e],l=a[0],c=a.slice(1);i.target.style[n]=_A[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:_A[`${l}_rgb`](c)})};return Yt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail))(t[i]||n[i])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,a]of Object.entries(e)){const l=n[i];if(l){const c={detail:{[i]:a},target:t};l(c),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,a]=this.data.rect.map(v=>Math.fround(v));if(t.length===8){const[v,S,x,A]=t.subarray(2,6);if(i===v&&a===S&&e===x&&n===A)return}const{style:l}=this.container;let c;if(this.#e){const{borderColor:v,borderWidth:S}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const h=i-e,d=a-n,{svgFactory:p}=this,f=p.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const g=p.createElement("defs");f.append(g);const y=p.createElement("clipPath"),w=`clippath_${this.data.id}`;y.setAttribute("id",w),y.setAttribute("clipPathUnits","objectBoundingBox"),g.append(y);for(let v=2,S=t.length;v<S;v+=8){const x=t[v],A=t[v+1],E=t[v+2],R=t[v+3],T=p.createElement("rect"),O=(E-e)/h,D=(a-A)/d,N=(x-E)/h,I=(A-R)/d;T.setAttribute("x",O),T.setAttribute("y",D),T.setAttribute("width",N),T.setAttribute("height",I),y.append(T),c?.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${D}" width="${N}" height="${I}"/>`)}this.#e&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(f),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:e}=this;let n,i;t?(n={str:t.text},i=t.date):(n=e.contentsObj,i=e.modificationDate),this.#s=new Ry({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#s||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#s}render(){Se("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:a,id:l,exportValues:c}of i){if(a===-1||l===e)continue;const h=typeof c=="string"?c:null,d=document.querySelector(`[data-element-id="${l}"]`);if(d&&!Aa.has(d)){Xt(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:h,domElement:d})}return n}for(const i of document.getElementsByName(t)){const{exportValue:a}=i,l=i.getAttribute("data-element-id");l!==e&&Aa.has(i)&&n.push({id:l,exportValue:a,domElement:i})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class TU extends Be{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class nb extends Be{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),i=!0):t.attachment?(this.#e(n,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(this.#s(n,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),i=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=n,this.container.append(n)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,n=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),n&&(t.title=n)}_bindNamedAction(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),this.#t()}#e(t,e,n="",i=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#t()}#s(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(e.actions)){const a=n.get(i);a&&(t[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Xt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:i,refs:a,include:l}=e,c=[];if(i.length!==0||a.length!==0){const p=new Set(a);for(const f of i){const g=this._fieldObjects[f]||[];for(const{id:y}of g)p.add(y)}for(const f of Object.values(this._fieldObjects))for(const g of f)p.has(g.id)===l&&c.push(g)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const h=this.annotationStorage,d=[];for(const p of c){const{id:f}=p;switch(d.push(f),p.type){case"text":{const y=p.defaultValue||"";h.setValue(f,{value:y});break}case"checkbox":case"radiobutton":{const y=p.defaultValue===p.exportValues;h.setValue(f,{value:y});break}case"combobox":case"listbox":{const y=p.defaultValue||"";h.setValue(f,{value:y});break}default:continue}const g=document.querySelector(`[data-element-id="${f}"]`);if(g){if(!Aa.has(g)){Xt(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class RU extends Be{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class Ta extends Be{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ln.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,a){n.includes("mouse")?t.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(l)}})})}_setEventListeners(t,e,n,i){for(const[a,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,a,l,i),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Tt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||EU,a=t.style;let l;const c=2,h=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-c),p=Math.round(d/(wg*i))||1,f=d/p;l=Math.min(i,h(f/wg))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(i,h(d/wg))}a.fontSize=`calc(${l}px * var(--total-scale-factor))`,a.color=Tt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class kU extends Ta{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const a=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),a.setValue(l.id,{[i]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const i=t.getValue(e,{value:this.data.fieldValue});let a=i.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=i.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",c??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Aa.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:d,datetimeType:p,timeStep:f}=this.data,g=!!p&&this.enableScripting;d&&(n.title=d),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(n,"value",w.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",w=>{const v=this.data.defaultFieldValue??"";n.value=h.userValue=v,h.formattedValue=null});let y=w=>{const{formattedValue:v}=h;v!=null&&(w.target.value=v),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{if(h.focused)return;const{target:S}=v;if(g&&(S.type=p,f&&(S.step=f)),h.userValue){const x=h.userValue;if(g)if(p==="time"){const A=new Date(x),E=[A.getHours(),A.getMinutes(),A.getSeconds()];S.value=E.map(R=>R.toString().padStart(2,"0")).join(":")}else S.value=new Date(x-CU).toISOString().split(p==="date"?"T":".",1)[0];else S.value=x}h.lastCommittedValue=S.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const S={value(x){h.userValue=x.detail.value??"",g||t.setValue(e,{value:h.userValue.toString()}),x.target.value=h.userValue},formattedValue(x){const{formattedValue:A}=x.detail;h.formattedValue=A,A!=null&&x.target!==document.activeElement&&(x.target.value=A);const E={formattedValue:A};g&&(E.value=A),t.setValue(e,E)},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{const{charLimit:A}=x.detail,{target:E}=x;if(A===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",A);let R=h.userValue;!R||R.length<=A||(R=R.slice(0,A),E.value=h.userValue=R,t.setValue(e,{value:R}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(S,v)}),n.addEventListener("keydown",v=>{h.commitKey=1;let S=-1;if(v.key==="Escape"?S=0:v.key==="Enter"&&!this.data.multiLine?S=2:v.key==="Tab"&&(h.commitKey=3),S===-1)return;const{value:x}=v.target;h.lastCommittedValue!==x&&(h.lastCommittedValue=x,h.userValue=x,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:S,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const w=y;y=null,n.addEventListener("blur",v=>{if(!h.focused||!v.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:S}=v;let{value:x}=S;if(g){if(x&&p==="time"){const A=x.split(":").map(E=>parseInt(E,10));x=new Date(2e3,0,1,A[0],A[1],A[2]||0).valueOf(),S.step=""}else x.includes("T")||(x=`${x}T00:00`),x=new Date(x).valueOf();S.type="text"}h.userValue=x,h.lastCommittedValue!==x&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:h.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}),w(v)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",v=>{h.lastCommittedValue=null;const{data:S,target:x}=v,{value:A,selectionStart:E,selectionEnd:R}=x;let T=E,O=R;switch(v.inputType){case"deleteWordBackward":{const D=A.substring(0,E).match(/\w*[^\w]*$/);D&&(T-=D[0].length);break}case"deleteWordForward":{const D=A.substring(E).match(/^[^\w]*\w*/);D&&(O+=D[0].length);break}case"deleteContentBackward":E===R&&(T-=1);break;case"deleteContentForward":E===R&&(O+=1);break}v.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,change:S||"",willCommit:!1,selStart:T,selEnd:O}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class MU extends Ta{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class DU extends Ta{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return Aa.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=0,a.addEventListener("change",l=>{const{name:c,checked:h}=l.target;for(const d of this._getElementsByName(c,n)){const p=h&&d.exportValue===e.exportValue;d.domElement&&(d.domElement.checked=p),t.setValue(d.id,{value:p})}t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const c=e.defaultFieldValue||"Off";l.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",l=>{const c={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class cR extends Ta{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const a=document.createElement("input");if(Aa.add(a),a.setAttribute("data-element-id",n),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",l=>{const{name:c,checked:h}=l.target;for(const d of this._getElementsByName(c,n))t.setValue(d.id,{value:!1});t.setValue(n,{value:h})}),a.addEventListener("resetform",l=>{const c=e.defaultFieldValue;l.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;a.addEventListener("updatefromsandbox",c=>{const h={value:d=>{const p=l===d.detail.value;for(const f of this._getElementsByName(d.target.name)){const g=p&&f.id===n;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class OU extends nb{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class NU extends Ta{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");Aa.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",p=>{const f=this.data.defaultFieldValue;for(const g of i.options)g.selected=g.value===f});for(const p of this.data.options){const f=document.createElement("option");f.textContent=p.displayValue,f.value=p.exportValue,n.value.includes(p.exportValue)&&(f.setAttribute("selected",!0),a=!1),i.append(f)}let l=null;if(a){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),i.prepend(p),l=()=>{p.remove(),i.removeEventListener("input",l),l=null},i.addEventListener("input",l)}const c=p=>{const f=p?"value":"textContent",{options:g,multiple:y}=i;return y?Array.prototype.filter.call(g,w=>w.selected).map(w=>w[f]):g.selectedIndex===-1?null:g[g.selectedIndex][f]};let h=c(!1);const d=p=>{const f=p.target.options;return Array.prototype.map.call(f,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",p=>{const f={value(g){l?.();const y=g.detail.value,w=new Set(Array.isArray(y)?y:[y]);for(const v of i.options)v.selected=w.has(v.value);t.setValue(e,{value:c(!0)}),h=c(!1)},multipleSelection(g){i.multiple=!0},remove(g){const y=i.options,w=g.detail.remove;y[w].selected=!1,i.remove(w),y.length>0&&Array.prototype.findIndex.call(y,S=>S.selected)===-1&&(y[0].selected=!0),t.setValue(e,{value:c(!0),items:d(g)}),h=c(!1)},clear(g){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),h=c(!1)},insert(g){const{index:y,displayValue:w,exportValue:v}=g.detail.insert,S=i.children[y],x=document.createElement("option");x.textContent=w,x.value=v,S?S.before(x):i.append(x),t.setValue(e,{value:c(!0),items:d(g)}),h=c(!1)},items(g){const{items:y}=g.detail;for(;i.length!==0;)i.remove(0);for(const w of y){const{displayValue:v,exportValue:S}=w,x=document.createElement("option");x.textContent=v,x.value=S,i.append(x)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:c(!0),items:d(g)}),h=c(!1)},indices(g){const y=new Set(g.detail.indices);for(const w of g.target.options)w.selected=y.has(w.index);t.setValue(e,{value:c(!0)}),h=c(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(f,p)}),i.addEventListener("input",p=>{const f=c(!0),g=c(!1);t.setValue(e,{value:f}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:g,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):i.addEventListener("input",function(p){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Ry extends Be{constructor(t){const{data:e,elements:n,parent:i}=t,a=!!i._commentManager;if(super(t,{isRenderable:!a&&Be._hasPopupData(e)}),this.elements=n,a&&Be._hasPopupData(e)){const l=this.popup=this.#t();for(const c of n)c.popup=l}else this.popup=null}#t(){return new PU({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),n=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(i=>`${No}${i}`).join(",")),this.container}}class PU{#t=null;#e=this.#$.bind(this);#s=this.#z.bind(this);#n=this.#N.bind(this);#a=this.#x.bind(this);#r=null;#i=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#g=null;#m=null;#u=null;#p=null;#y=null;#b=null;#v=null;#E=null;#S=null;#_=null;#T=!1;#w=null;#A=null;constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:a,contentsObj:l,richText:c,parent:h,rect:d,parentRect:p,open:f,commentManager:g=null}){this.#i=t,this.#S=i,this.#o=l,this.#E=c,this.#d=h,this.#r=e,this.#v=d,this.#h=p,this.#l=n,this.#t=g,this.#w=n[0],this.#c=_y.toDateObject(a),this.trigger=n.flatMap(y=>y.getElementsToTriggerPopup()),g||(this.#M(),this.#i.hidden=!0,f&&this.#x())}#M(){if(this.#m)return;this.#m=new AbortController;const{signal:t}=this.#m;for(const e of this.trigger)e.addEventListener("click",this.#a,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#s,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#w.container.after(this.#p);return}if(this.#y||this.#R(),!this.#y)return;const{signal:t}=this.#m=new AbortController,e=this.#w.hasOwnCommentButton,n=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},i=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#w.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",i,{signal:t}),l.addEventListener("pointerleave",a,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#p=document.createElement("button");l.className="annotationCommentButton";const c=this.#w.container;l.style.zIndex=c.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#I(),this.#k(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",i,{signal:t}),l.addEventListener("pointerleave",a,{signal:t}),c.after(l)}}#k(){if(this.#w.extraPopupElement&&!this.#w.editor)return;this.#p||this.renderCommentButton();const[t,e]=this.#y,{style:n}=this.#p;n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`}#I(){this.#w.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#w.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:i,modificationDate:a}=this.#w.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:i,modificationDate:a}}get elementBeforePopup(){return this.#p}get comment(){return this.#A||=this.#w.commentText,this.#A}set comment(t){t!==this.comment&&(this.#w.commentText=this.#A=t)}focus(){this.#w.container?.focus()}get parentBoundingClientRect(){return this.#w.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:t,y:e,height:n}=this.#p.getBoundingClientRect(),{x:i,y:a,width:l,height:c}=this.#w.layer.getBoundingClientRect();return[(t-i)/l,(e+n-a)/c]}set commentPopupPosition(t){this.#b=t}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=this.#b||this.commentButtonPosition.map(d=>d/100),i=this.parentBoundingClientRect,{x:a,y:l,width:c,height:h}=i;this.#t.showDialog(null,this,a+e*c,l+n*h,{...t,parentDimensions:i})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#r){const n=t.style.outlineColor=Tt.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#S?.str){const n=document.createElement("span");n.className="title",e.append(n),{dir:n.dir,str:n.textContent}=this.#S}if(t.append(e),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),e.append(n)}U2({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#i.append(t)}get#O(){const t=this.#E,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#E.html||null}get#P(){return this.#O?.attributes?.style?.fontSize||0}get#F(){return this.#O?.attributes?.style?.color||null}#L(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:this.#F,fontSize:this.#P?`calc(${this.#P}px * var(--total-scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:i});return n}#$(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#x()}updateEdited({rect:t,popup:e,deleted:n}){if(this.#t){n?(this.remove(),this.#A=null):e&&(e.deleted?this.remove():(this.#I(),this.#A=e.text)),t&&(this.#y=null,this.#R(),this.#k());return}if(n||e?.deleted){this.remove();return}this.#M(),this.#_||={contentsObj:this.#o,richText:this.#E},t&&(this.#u=null),e&&e.text&&(this.#E=this.#L(e.text),this.#c=_y.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#_&&({contentsObj:this.#o,richText:this.#E}=this.#_,this.#_=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#T=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#C(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:a}}}=this.#d;let l=!!this.#h,c=l?this.#h:this.#v;for(const w of this.#l)if(!c||Tt.intersect(w.data.rect,c)!==null){c=w.data.rect,l=!0;break}const h=Tt.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),p=l?c[2]-c[0]+5:0,f=h[0]+p,g=h[1];this.#u=[100*(f-i)/e,100*(g-a)/n];const{style:y}=this.#i;y.left=`${this.#u[0]}%`,y.top=`${this.#u[1]}%`}#x(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#N(),this.#i.addEventListener("click",this.#a),this.#i.addEventListener("keydown",this.#e)):(this.#z(),this.#i.removeEventListener("click",this.#a),this.#i.removeEventListener("keydown",this.#e))}#N(){this.#g||this.render(),this.isVisible?this.#f&&this.#i.classList.add("focused"):(this.#C(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#z(){this.#i.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#i.hidden=!0)}maybeShow(){this.#t||(this.#M(),this.#T&&(this.#g||this.#N(),this.#T=!1,this.#i.hidden=!1))}get isVisible(){return this.#t?!1:this.#i.hidden===!1}}class uR extends Be{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Wt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class LU extends Be{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),a=this.#t=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class BU extends Be{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",e-a),l.setAttribute("height",n-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class IU extends Be{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,i=this.svgFactory.create(e,n,!0),a=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",n/2),l.setAttribute("rx",e/2-a/2),l.setAttribute("ry",n/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class hR extends Be{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:i},width:a,height:l}=this;if(!e)return this.container;const c=this.svgFactory.create(a,l,!0);let h=[];for(let p=0,f=e.length;p<f;p+=2){const g=e[p]-t[0],y=t[3]-e[p+1];h.push(`${g},${y}`)}h=h.join(" ");const d=this.#t=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",h),d.setAttribute("stroke-width",n.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class FU extends hR{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class zU extends Be{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class sb extends Be{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Wt.HIGHLIGHT:Wt.INK}#s(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:i,popupRef:a}}=this,{transform:l,width:c,height:h}=this.#s(e,t),d=this.svgFactory.create(c,h,!0),p=this.#t=this.svgFactory.createElement("svg:g");d.append(p),p.setAttribute("stroke-width",i.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let f=0,g=n.length;f<g;f++){const y=this.svgFactory.createElement(this.svgElementName);this.#e.push(y),y.setAttribute("points",n[f].join(",")),p.append(y)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:i}=t,a=this.#t;if(e>=0&&a.setAttribute("stroke-width",e||1),n)for(let l=0,c=this.#e.length;l<c;l++)this.#e[l].setAttribute("points",n[l].join(","));if(i){const{transform:l,width:c,height:h}=this.#s(this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class dR extends Be{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Wt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class jU extends Be{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class UU extends Be{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class HU extends Be{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class fR extends Be{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Wt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class VU extends Be{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:i}=ln.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class ib{#t=null;#e=null;#s=null;#n=new Map;#a=null;#r=null;#i=[];#o=!1;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:a,viewport:l,structTreeLayer:c,commentManager:h,linkService:d,annotationStorage:p}){this.div=t,this.#t=e,this.#e=n,this.#a=c||null,this.#r=d||null,this.#s=p||new Zv,this.page=a,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=h||null}hasEditableAnnotations(){return this.#n.size>0}async render(t){const{annotations:e}=t,n=this.div;Sa(n,this.viewport);const i=new Map,a=[],l={data:null,layer:n,linkService:this.#r,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Od,annotationStorage:this.#s,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const h=c.annotationType===Ze.POPUP;if(h){const f=i.get(c.id);if(!f)continue;if(!this._commentManager){a.push(c);continue}l.elements=f}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;l.data=c;const d=Rg.create(l);if(!d.isRenderable)continue;if(!h&&(this.#i.push(d),c.popupRef)){const f=i.get(c.popupRef);f?f.push(d):i.set(c.popupRef,[d])}const p=d.render();c.hidden&&(p.style.visibility="hidden"),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}await this.#c();for(const c of a){const h=l.elements=i.get(c.id);l.data=c;const d=Rg.create(l);if(!d.isRenderable)continue;const p=d.render();d.contentElement.id=`${No}${c.id}`,c.hidden&&(p.style.visibility="hidden"),h.at(-1).container.after(p)}this.#l()}async#c(){if(this.#i.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:n,data:{id:i}}of this.#i){const a=n.id=`${No}${i}`;t.push(this.#a?.getAriaAttributes(a).then(l=>{if(l)for(const[c,h]of l)n.setAttribute(c,h)}))}}this.#i.sort(({data:{rect:[n,i,a,l]}},{data:{rect:[c,h,d,p]}})=>{if(n===a&&i===l)return 1;if(c===d&&h===p)return-1;const f=l,g=i,y=(i+l)/2,w=p,v=h,S=(h+p)/2;if(y>=w&&S<=g)return-1;if(S>=f&&y<=v)return 1;const x=(n+a)/2,A=(c+d)/2;return x-A});const e=document.createDocumentFragment();for(const n of this.#i)e.append(n.container),this._commentManager?(n.extraPopupElement?.popup||n.popup)?.renderCommentButton():n.extraPopupElement&&e.append(n.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),this.#t)for(const n of this.#i)this.#t.addPointerInTextLayer(n.contentElement,!1)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#r,svgFactory:new Od,parent:this};for(const n of t){n.borderStyle||=ib._defaultBorderStyle,e.data=n;const i=Rg.create(e);i.isRenderable&&(i.render(),i.contentElement.id=`${No}${n.id}`,this.#i.push(i))}await this.#c()}update({viewport:t}){const e=this.div;this.viewport=t,Sa(e,{rotation:t.rotation}),this.#l(),e.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[e,n]of this.#e){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):i.append(n);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,i.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:i}=t,a=new TU({data:{id:n,rect:t.getPDFRect(),rotation:i},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#s});return a.render(),a.contentElement.id=`${No}${n}`,a.createOrUpdatePopup(),this.#i.push(a),a}removeAnnotation(t){const e=this.#i.findIndex(i=>i.data.id===t);if(e<0)return;const[n]=this.#i.splice(e,1);this.#t?.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Yt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:So.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const jh=/\r\n?|\n/g;class mn extends jt{#t="";#e=`${this.id}-editor`;#s=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=mn.prototype,e=a=>a.isEmpty(),n=Lr.TRANSLATE_SMALL,i=Lr.TRANSLATE_BIG;return Yt(this,"_keyboardManager",new Jc([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}]]))}static _type="freetext";static _editorType=Wt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||mn._defaultColor||jt._defaultLineColor,this.#n=t.fontSize||mn._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,e){jt.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case ae.FREETEXT_SIZE:mn._defaultFontSize=e;break;case ae.FREETEXT_COLOR:mn._defaultColor=e;break}}updateParams(t,e){switch(t){case ae.FREETEXT_SIZE:this.#a(e);break;case ae.FREETEXT_COLOR:this.#r(e);break}}static get defaultPropertiesToUpdate(){return[[ae.FREETEXT_SIZE,mn._defaultFontSize],[ae.FREETEXT_COLOR,mn._defaultColor||jt._defaultLineColor]]}get propertiesToUpdate(){return[[ae.FREETEXT_SIZE,this.#n],[ae.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Uc(this),[["colorPicker",this._colorPicker]]}get colorType(){return ae.FREETEXT_COLOR}#a(t){const e=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#n)*this.parentScale),this.#n=i,this.#o()},n=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ae.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(t){const e=i=>{this.color=i,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ae.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-mn._internalPadding*t,-(mn._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const t=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#i(){const t=[];this.editorDiv.normalize();let e=null;for(const n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(mn.#c(n)),e=n);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,l=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#i().trimEnd();if(t===e)return;const n=i=>{if(this.#t=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){mn._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[d,p]=this.pageDimensions,[f,g]=this.pageTranslation;let y,w;switch(this.rotation){case 0:y=t+(l[0]-f)/d,w=e+this.height-(l[1]-g)/p;break;case 90:y=t+(l[0]-f)/d,w=e-(l[1]-g)/p,[c,h]=[h,-c];break;case 180:y=t-this.width+(l[0]-f)/d,w=e-(l[1]-g)/p,[c,h]=[-c,-h];break;case 270:y=t+(l[0]-f-this.height*p)/d,w=e+(l[1]-g-this.width*d)/p,[c,h]=[-h,c];break}this.setAt(y*i,w*a,c,h)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(jh,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const i=mn.#h(e.getData("text")||"").replaceAll(jh,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:h}=l,d=[],p=[];if(c.nodeType===Node.TEXT_NODE){const y=c.parentElement;if(p.push(c.nodeValue.slice(h).replaceAll(jh,"")),y!==this.editorDiv){let w=d;for(const v of this.editorDiv.childNodes){if(v===y){w=p;continue}w.push(mn.#c(v))}}d.push(c.nodeValue.slice(0,h).replaceAll(jh,""))}else if(c===this.editorDiv){let y=d,w=0;for(const v of this.editorDiv.childNodes)w++===h&&(y=p),y.push(mn.#c(v))}this.#t=`${d.join(`
`)}${i}${p.join(`
`)}`,this.#l();const f=new Range;let g=Math.sumPrecise(d.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const w=y.nodeValue.length;if(g<=w){f.setStart(y,g),f.setEnd(y,g);break}g-=w}a.removeAllRanges(),a.addRange(f)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=mn._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,n){let i=null;if(t instanceof uR){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:h,rotation:d,id:p,popupRef:f,richText:g,contentsObj:y,creationDate:w,modificationDate:v},textContent:S,textPosition:x,parent:{page:{pageNumber:A}}}=t;if(!S||S.length===0)return null;i=t={annotationType:Wt.FREETEXT,color:Array.from(c),fontSize:l,value:S.join(`
`),position:x,pageIndex:A-1,rect:h.slice(0),rotation:d,annotationElementId:p,id:p,deleted:!1,popupRef:f,comment:y?.str||null,richText:g,creationDate:w,modificationDate:v}}const a=await super.deserialize(t,e,n);return a.#n=t.fontSize,a.color=Tt.makeHexColor(...t.color),a.#t=mn.#h(t.value),a._initialData=i,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=jt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(n),t?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(t){const{value:e,fontSize:n,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((l,c)=>l!==i[c])||t.pageIndex!==a}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:n}=e;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,e.replaceChildren();for(const i of this.#t.split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),e.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class kt{static PRECISION=1e-4;toSVGPath(){Se("Abstract method `toSVGPath` must be implemented.")}get box(){Se("Abstract getter `box` must be implemented.")}serialize(t,e){Se("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,a,l){l||=new Float32Array(t.length);for(let c=0,h=t.length;c<h;c+=2)l[c]=e+t[c]*i,l[c+1]=n+t[c+1]*a;return l}static _rescaleAndSwap(t,e,n,i,a,l){l||=new Float32Array(t.length);for(let c=0,h=t.length;c<h;c+=2)l[c]=e+t[c+1]*i,l[c+1]=n+t[c]*a;return l}static _translate(t,e,n,i){i||=new Float32Array(t.length);for(let a=0,l=t.length;a<l;a+=2)i[a]=e+t[a],i[a+1]=n+t[a+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,i,a){switch(a){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,a,l){return[(t+5*n)/6,(e+5*i)/6,(5*n+a)/6,(5*i+l)/6,(n+a)/2,(i+l)/2]}}class da{#t;#e=[];#s;#n;#a=[];#r=new Float32Array(18);#i;#o;#c;#l;#d;#h;#f=[];static#g=8;static#m=2;static#u=da.#g+da.#m;constructor({x:t,y:e},n,i,a,l,c=0){this.#t=n,this.#h=a*i,this.#n=l,this.#r.set([NaN,NaN,NaN,NaN,t,e],6),this.#s=c,this.#l=da.#g*i,this.#c=da.#u*i,this.#d=i,this.#f.push(t,e)}isEmpty(){return isNaN(this.#r[8])}#p(){const t=this.#r.subarray(4,6),e=this.#r.subarray(16,18),[n,i,a,l]=this.#t;return[(this.#i+(t[0]-e[0])/2-n)/a,(this.#o+(t[1]-e[1])/2-i)/l,(this.#i+(e[0]-t[0])/2-n)/a,(this.#o+(e[1]-t[1])/2-i)/l]}add({x:t,y:e}){this.#i=t,this.#o=e;const[n,i,a,l]=this.#t;let[c,h,d,p]=this.#r.subarray(8,12);const f=t-d,g=e-p,y=Math.hypot(f,g);if(y<this.#c)return!1;const w=y-this.#l,v=w/y,S=v*f,x=v*g;let A=c,E=h;c=d,h=p,d+=S,p+=x,this.#f?.push(t,e);const R=-x/w,T=S/w,O=R*this.#h,D=T*this.#h;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([d+O,p+D],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([d-O,p-D],16),isNaN(this.#r[6])?(this.#a.length===0&&(this.#r.set([c+O,h+D],2),this.#a.push(NaN,NaN,NaN,NaN,(c+O-n)/a,(h+D-i)/l),this.#r.set([c-O,h-D],14),this.#e.push(NaN,NaN,NaN,NaN,(c-O-n)/a,(h-D-i)/l)),this.#r.set([A,E,c,h,d,p],6),!this.isEmpty()):(this.#r.set([A,E,c,h,d,p],6),Math.abs(Math.atan2(E-h,A-c)-Math.atan2(x,S))<Math.PI/2?([c,h,d,p]=this.#r.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((c+d)/2-n)/a,((h+p)/2-i)/l),[c,h,A,E]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((A+c)/2-n)/a,((E+h)/2-i)/l),!0):([A,E,c,h,d,p]=this.#r.subarray(0,6),this.#a.push(((A+5*c)/6-n)/a,((E+5*h)/6-i)/l,((5*c+d)/6-n)/a,((5*h+p)/6-i)/l,((c+d)/2-n)/a,((h+p)/2-i)/l),[d,p,c,h,A,E]=this.#r.subarray(12,18),this.#e.push(((A+5*c)/6-n)/a,((E+5*h)/6-i)/l,((5*c+d)/6-n)/a,((5*h+p)/6-i)/l,((c+d)/2-n)/a,((h+p)/2-i)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,e=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);this.#v(n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return this.#b(n),n.join(" ")}#y(){const[t,e,n,i]=this.#t,[a,l,c,h]=this.#p();return`M${(this.#r[2]-t)/n} ${(this.#r[3]-e)/i} L${(this.#r[4]-t)/n} ${(this.#r[5]-e)/i} L${a} ${l} L${c} ${h} L${(this.#r[16]-t)/n} ${(this.#r[17]-e)/i} L${(this.#r[14]-t)/n} ${(this.#r[15]-e)/i} Z`}#b(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#v(t){const[e,n,i,a]=this.#t,l=this.#r.subarray(4,6),c=this.#r.subarray(16,18),[h,d,p,f]=this.#p();t.push(`L${(l[0]-e)/i} ${(l[1]-n)/a} L${h} ${d} L${p} ${f} L${(c[0]-e)/i} ${(c[1]-n)/a}`)}newFreeDrawOutline(t,e,n,i,a,l){return new pR(t,e,n,i,a,l)}getOutlines(){const t=this.#a,e=this.#e,n=this.#r,[i,a,l,c]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let f=0,g=h.length-2;f<g;f+=2)h[f]=(this.#f[f]-i)/l,h[f+1]=(this.#f[f+1]-a)/c;if(h[h.length-2]=(this.#i-i)/l,h[h.length-1]=(this.#o-a)/c,isNaN(n[6])&&!this.isEmpty())return this.#E(h);const d=new Float32Array(this.#a.length+24+this.#e.length);let p=t.length;for(let f=0;f<p;f+=2){if(isNaN(t[f])){d[f]=d[f+1]=NaN;continue}d[f]=t[f],d[f+1]=t[f+1]}p=this.#_(d,p);for(let f=e.length-6;f>=6;f-=6)for(let g=0;g<6;g+=2){if(isNaN(e[f+g])){d[p]=d[p+1]=NaN,p+=2;continue}d[p]=e[f+g],d[p+1]=e[f+g+1],p+=2}return this.#S(d,p),this.newFreeDrawOutline(d,h,this.#t,this.#d,this.#s,this.#n)}#E(t){const e=this.#r,[n,i,a,l]=this.#t,[c,h,d,p]=this.#p(),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(e[2]-n)/a,(e[3]-i)/l,NaN,NaN,NaN,NaN,(e[4]-n)/a,(e[5]-i)/l,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(e[16]-n)/a,(e[17]-i)/l,NaN,NaN,NaN,NaN,(e[14]-n)/a,(e[15]-i)/l],0),this.newFreeDrawOutline(f,t,this.#t,this.#d,this.#s,this.#n)}#S(t,e){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#_(t,e){const n=this.#r.subarray(4,6),i=this.#r.subarray(16,18),[a,l,c,h]=this.#t,[d,p,f,g]=this.#p();return t.set([NaN,NaN,NaN,NaN,(n[0]-a)/c,(n[1]-l)/h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(i[0]-a)/c,(i[1]-l)/h],e),e+=24}}class pR extends kt{#t;#e=new Float32Array(4);#s;#n;#a;#r;#i;constructor(t,e,n,i,a,l){super(),this.#i=t,this.#a=e,this.#t=n,this.#r=i,this.#s=a,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[c,h,d,p]=this.#e;for(let f=0,g=t.length;f<g;f+=2)t[f]=(t[f]-c)/d,t[f+1]=(t[f+1]-h)/p;for(let f=0,g=e.length;f<g;f+=2)e[f]=(e[f]-c)/d,e[f+1]=(e[f+1]-h)/p}toSVGPath(){const t=[`M${this.#i[4]} ${this.#i[5]}`];for(let e=6,n=this.#i.length;e<n;e+=6){if(isNaN(this.#i[e])){t.push(`L${this.#i[e+4]} ${this.#i[e+5]}`);continue}t.push(`C${this.#i[e]} ${this.#i[e+1]} ${this.#i[e+2]} ${this.#i[e+3]} ${this.#i[e+4]} ${this.#i[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,i],a){const l=n-t,c=i-e;let h,d;switch(a){case 0:h=kt._rescale(this.#i,t,i,l,-c),d=kt._rescale(this.#a,t,i,l,-c);break;case 90:h=kt._rescaleAndSwap(this.#i,t,e,l,c),d=kt._rescaleAndSwap(this.#a,t,e,l,c);break;case 180:h=kt._rescale(this.#i,n,e,-l,c),d=kt._rescale(this.#a,n,e,-l,c);break;case 270:h=kt._rescaleAndSwap(this.#i,n,i,-l,-c),d=kt._rescaleAndSwap(this.#a,n,i,-l,-c);break}return{outline:Array.from(h),points:[Array.from(d)]}}#o(t){const e=this.#i;let n=e[4],i=e[5];const a=[n,i,n,i];let l=n,c=i,h=n,d=i;const p=t?Math.max:Math.min,f=new Float32Array(4);for(let y=6,w=e.length;y<w;y+=6){const v=e[y+4],S=e[y+5];isNaN(e[y])?(Tt.pointBoundingBox(v,S,a),c>S?(l=v,c=S):c===S&&(l=p(l,v)),d<S?(h=v,d=S):d===S&&(h=p(h,v))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,Tt.bezierBoundingBox(n,i,...e.slice(y,y+6),f),Tt.rectBoundingBox(f[0],f[1],f[2],f[3],a),c>f[1]?(l=f[0],c=f[1]):c===f[1]&&(l=p(l,f[0])),d<f[3]?(h=f[2],d=f[3]):d===f[3]&&(h=p(h,f[2]))),n=v,i=S}const g=this.#e;g[0]=a[0]-this.#s,g[1]=a[1]-this.#s,g[2]=a[2]-a[0]+2*this.#s,g[3]=a[3]-a[1]+2*this.#s,this.firstPoint=[l,c],this.lastPoint=[h,d]}get box(){return this.#e}newOutliner(t,e,n,i,a,l=0){return new da(t,e,n,i,a,l)}getNewOutline(t,e){const[n,i,a,l]=this.#e,[c,h,d,p]=this.#t,f=a*d,g=l*p,y=n*d+c,w=i*p+h,v=this.newOutliner({x:this.#a[0]*f+y,y:this.#a[1]*g+w},this.#t,this.#r,t,this.#n,e??this.#s);for(let S=2;S<this.#a.length;S+=2)v.add({x:this.#a[S]*f+y,y:this.#a[S+1]*g+w});return v.getOutlines()}}class ky{#t;#e;#s;#n=[];#a=[];constructor(t,e=0,n=0,i=!0){const a=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:v,y:S,width:x,height:A}of t){const E=Math.floor((v-e)/l)*l,R=Math.ceil((v+x+e)/l)*l,T=Math.floor((S-e)/l)*l,O=Math.ceil((S+A+e)/l)*l,D=[E,T,O,!0],N=[R,T,O,!1];this.#n.push(D,N),Tt.rectBoundingBox(E,T,R,O,a)}const c=a[2]-a[0]+2*n,h=a[3]-a[1]+2*n,d=a[0]-n,p=a[1]-n;let f=i?-1/0:1/0,g=1/0;const y=this.#n.at(i?-1:-2),w=[y[0],y[2]];for(const v of this.#n){const[S,x,A,E]=v;!E&&i?x<g?(g=x,f=S):x===g&&(f=Math.max(f,S)):E&&!i&&(x<g?(g=x,f=S):x===g&&(f=Math.min(f,S))),v[0]=(S-d)/c,v[1]=(x-p)/h,v[2]=(A-p)/h}this.#t=new Float32Array([d,p,c,h]),this.#e=[f,g],this.#s=w}getOutlines(){this.#n.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#r(t)}#r(t){const e=[],n=new Set;for(const l of t){const[c,h,d]=l;e.push([c,h,l],[c,d,l])}e.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=e.length;l<c;l+=2){const h=e[l][2],d=e[l+1][2];h.push(d),d.push(h),n.add(h),n.add(d)}const i=[];let a;for(;n.size>0;){const l=n.values().next().value;let[c,h,d,p,f]=l;n.delete(l);let g=c,y=h;for(a=[c,d],i.push(a);;){let w;if(n.has(p))w=p;else if(n.has(f))w=f;else break;n.delete(w),[c,h,d,p,f]=w,g!==c&&(a.push(g,y,c,y===h?h:d),g=c),y=y===h?d:h}a.push(g,y)}return new $U(i,this.#t,this.#e,this.#s)}#i(t){const e=this.#a;let n=0,i=e.length-1;for(;n<=i;){const a=n+i>>1,l=e[a][0];if(l===t)return a;l<t?n=a+1:i=a-1}return i+1}#o([,t,e]){const n=this.#i(t);this.#a.splice(n,0,[t,e])}#c([,t,e]){const n=this.#i(t);for(let i=n;i<this.#a.length;i++){const[a,l]=this.#a[i];if(a!==t)break;if(a===t&&l===e){this.#a.splice(i,1);return}}for(let i=n-1;i>=0;i--){const[a,l]=this.#a[i];if(a!==t)break;if(a===t&&l===e){this.#a.splice(i,1);return}}}#l(t){const[e,n,i]=t,a=[[e,n,i]],l=this.#i(i);for(let c=0;c<l;c++){const[h,d]=this.#a[c];for(let p=0,f=a.length;p<f;p++){const[,g,y]=a[p];if(!(d<=g||y<=h)){if(g>=h){if(y>d)a[p][1]=d;else{if(f===1)return[];a.splice(p,1),p--,f--}continue}a[p][2]=h,y>d&&a.push([e,d,y])}}}return a}}class $U extends kt{#t;#e;constructor(t,e,n,i){super(),this.#e=t,this.#t=e,this.firstPoint=n,this.lastPoint=i}toSVGPath(){const t=[];for(const e of this.#e){let[n,i]=e;t.push(`M${n} ${i}`);for(let a=2;a<e.length;a+=2){const l=e[a],c=e[a+1];l===n?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${l}`),n=l)}t.push("Z")}return t.join(" ")}serialize([t,e,n,i],a){const l=[],c=n-t,h=i-e;for(const d of this.#e){const p=new Array(d.length);for(let f=0;f<d.length;f+=2)p[f]=t+d[f]*c,p[f+1]=i-d[f+1]*h;l.push(p)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class My extends da{newFreeDrawOutline(t,e,n,i,a,l){return new GU(t,e,n,i,a,l)}}class GU extends pR{newOutliner(t,e,n,i,a,l=0){return new My(t,e,n,i,a,l)}}class $e extends jt{#t=null;#e=0;#s;#n=null;#a=null;#r=null;#i=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#g=null;#m=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Wt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=$e.prototype;return Yt(this,"_keyboardManager",new Jc([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||$e._defaultColor,this.#p=t.thickness||$e._defaultThickness,this.opacity=t.opacity||$e._defaultOpacity,this.#s=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#v(t),this.#w()):this.#s&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#i=t.focusNode,this.#o=t.focusOffset,this.#b(),this.#w(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new ky(this.#s,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new ky(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#r=e.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:i}=this.#r;this.#g=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#l=t;const i=1.5;if(this.#r=t.getNewOutline(this.#p/2+i,.0025),e>=0)this.#d=e,this.#n=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:$e.#A(this.#l.box,(f-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:$e.#A(this.#r.box,f),path:{d:this.#r.toSVGPath()}})}const[a,l,c,h]=t.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=c,this.height=h;break;case 90:{const[f,g]=this.parentDimensions;this.x=l,this.y=1-a,this.width=c*g/f,this.height=h*f/g;break}case 180:this.x=1-a,this.y=1-l,this.width=c,this.height=h;break;case 270:{const[f,g]=this.parentDimensions;this.x=1-l,this.y=a,this.width=c*g/f,this.height=h*f/g;break}}const{firstPoint:d}=t;this.#f=[(d[0]-a)/c,(d[1]-l)/h];const{lastPoint:p}=this.#r;this.#g=[(p[0]-a)/c,(p[1]-l)/h]}static initialize(t,e){jt.initialize(t,e),$e._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case ae.HIGHLIGHT_COLOR:$e._defaultColor=e;break;case ae.HIGHLIGHT_THICKNESS:$e._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case ae.HIGHLIGHT_COLOR:this.#E(e);break;case ae.HIGHLIGHT_THICKNESS:this.#S(e);break}}static get defaultPropertiesToUpdate(){return[[ae.HIGHLIGHT_COLOR,$e._defaultColor],[ae.HIGHLIGHT_THICKNESS,$e._defaultThickness]]}get propertiesToUpdate(){return[[ae.HIGHLIGHT_COLOR,this.color||$e._defaultColor],[ae.HIGHLIGHT_THICKNESS,this.#p||$e._defaultThickness],[ae.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#E(t){const e=(a,l)=>{this.color=a,this.opacity=l,this.onUpdatedColor()},n=this.color,i=this.opacity;this.addCommands({cmd:e.bind(this,t,$e._defaultOpacity),undo:e.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ae.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#S(t){const e=this.#p,n=i=>{this.#p=i,this.#_(i)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ae.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new Bs({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#k())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#k())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#w(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#T():t&&(this.#w(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#_(t){this.#h&&(this.#v({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#w(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#A([t,e,n,i],a){switch(a){case 90:return[1-e-i,t,i,n];case 180:return[1-t-n,1-e-i,n,i];case 270:return[e,1-t-n,i,n]}return[t,e,n,i]}rotate(t){const{drawLayer:e}=this.parent;let n;this.#h?(t=(t-this.rotation+360)%360,n=$e.#A(this.#l.box,t)):n=$e.#A([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#m,{bbox:$e.#A(this.#r.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(),V2(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#M(t){$e._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#i,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#h||this.#R(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!t}}))}#k(){return this.#h?this.rotation:0}#I(){if(this.#h)return null;const[t,e]=this.pageDimensions,[n,i]=this.pageTranslation,a=this.#s,l=new Float32Array(a.length*8);let c=0;for(const{x:h,y:d,width:p,height:f}of a){const g=h*t+n,y=(1-d)*e+i;l[c]=l[c+4]=g,l[c+1]=l[c+3]=y,l[c+2]=l[c+6]=g+p*t,l[c+5]=l[c+7]=y-f*e,c+=8}return l}#O(t){return this.#l.serialize(t,this.#k())}static startHighlighting(t,e,{target:n,x:i,y:a}){const{x:l,y:c,width:h,height:d}=n.getBoundingClientRect(),p=new AbortController,f=t.combinedSignal(p),g=y=>{p.abort(),this.#F(t,y)};window.addEventListener("blur",g,{signal:f}),window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("pointerdown",je,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",js,{signal:f}),n.addEventListener("pointermove",this.#P.bind(this,t),{signal:f}),this._freeHighlight=new My({x:i,y:a},[l,c,h,d],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#P(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let i=null;if(t instanceof dR){const{data:{quadPoints:w,rect:v,rotation:S,id:x,color:A,opacity:E,popupRef:R,richText:T,contentsObj:O,creationDate:D,modificationDate:N},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:Wt.HIGHLIGHT,color:Array.from(A),opacity:E,quadPoints:w,boxes:null,pageIndex:I-1,rect:v.slice(0),rotation:S,annotationElementId:x,id:x,deleted:!1,popupRef:R,richText:T,comment:O?.str||null,creationDate:D,modificationDate:N}}else if(t instanceof sb){const{data:{inkLists:w,rect:v,rotation:S,id:x,color:A,borderStyle:{rawWidth:E},popupRef:R,richText:T,contentsObj:O,creationDate:D,modificationDate:N},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:Wt.HIGHLIGHT,color:Array.from(A),thickness:E,inkLists:w,boxes:null,pageIndex:I-1,rect:v.slice(0),rotation:S,annotationElementId:x,id:x,deleted:!1,popupRef:R,richText:T,comment:O?.str||null,creationDate:D,modificationDate:N}}const{color:a,quadPoints:l,inkLists:c,opacity:h}=t,d=await super.deserialize(t,e,n);d.color=Tt.makeHexColor(...a),d.opacity=h||1,c&&(d.#p=t.thickness),d._initialData=i,t.comment&&d.setCommentData(t);const[p,f]=d.pageDimensions,[g,y]=d.pageTranslation;if(l){const w=d.#s=[];for(let v=0;v<l.length;v+=8)w.push({x:(l[v]-g)/p,y:1-(l[v+1]-y)/f,width:(l[v+2]-l[v])/p,height:(l[v+1]-l[v+5])/f});d.#b(),d.#w(),d.rotate(d.rotation)}else if(c){d.#h=!0;const w=c[0],v={x:w[0]-g,y:f-(w[1]-y)},S=new My(v,[0,0,p,f],1,d.#p/2,!0,.001);for(let E=0,R=w.length;E<R;E+=2)v.x=w[E]-g,v.y=f-(w[E+1]-y),S.add(v);const{id:x,clipPathId:A}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);d.#v({highlightOutlines:S.getOutlines(),highlightId:x,clipPathId:A}),d.#w(),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=jt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(t);return Object.assign(n,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#I(),outlines:this.#O(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#L(n)?null:(n.id=this.annotationElementId,n)}#L(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((n,i)=>n!==e[i])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class mR{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Se("Not implemented")}}class fe extends jt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#a=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#r(t),this.#c())}#r({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#i(t,this.parent),this.#h(t.box)}#i(t,e){const{id:n}=e.drawLayer.draw(fe._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[i,a]of Object.entries(e))n.has(i)?Object.assign(t[i],a):t[i]=a;return t}static getDefaultDrawingOptions(t){Se("Not implemented")}static get typesMap(){Se("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(fe.#s.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)t.push([n,e[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,i]of this.constructor.typesMap)t.push([n,e[i]]);return t}_updateProperty(t,e,n){const i=this._drawingOptions,a=i[e],l=c=>{i.updateProperty(e,c);const h=this.#t.updateProperty(e,c);h&&this.#h(h),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,fe._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,fe._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,fe._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#i(this.#t,t)}}#l([t,e,n,i]){const{parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[e,1-t,n*(l/a),i*(a/l)];case 180:return[1-t,1-e,n,i];case 270:return[1-e,t,n*(l/a),i*(a/l)];default:return[t,e,n,i]}}#d(){const{x:t,y:e,width:n,height:i,parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[1-e,t,n*(a/l),i*(l/a)];case 180:return[1-t,1-e,n,i];case 270:return[e,1-t,n*(a/l),i*(l/a)];default:return[t,e,n,i]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:e,width:n,height:i,rotation:a,parentRotation:l,parentDimensions:[c,h]}=this;switch((a*4+l)/90){case 1:return[1-e-i,t,i,n];case 2:return[1-t-n,1-e-i,n,i];case 3:return[e,1-t-n,i,n];case 4:return[t,e-n*(c/h),i*(h/c),n*(c/h)];case 5:return[1-e,t,n*(c/h),i*(h/c)];case 6:return[1-t-i*(h/c),1-e,i*(h/c),n*(c/h)];case 7:return[e-n*(c/h),1-t-i*(h/c),n*(c/h),i*(h/c)];case 8:return[t-n,e-i,n,i];case 9:return[1-e,t-n,i,n];case 10:return[1-t,1-e,n,i];case 11:return[e-i,1-t,i,n];case 12:return[t-i*(h/c),e,i*(h/c),n*(c/h)];case 13:return[1-e-n*(c/h),t-i*(h/c),n*(c/h),i*(h/c)];case 14:return[1-t,1-e-n*(c/h),i*(h/c),n*(c/h)];case 15:return[e,1-t,n*(c/h),i*(h/c)];default:return[t,e,n,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,fe._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");return n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,i,a){Se("Not implemented")}static startDrawing(t,e,n,i){const{target:a,offsetX:l,offsetY:c,pointerId:h,pointerType:d}=i;if(pe.isInitializedAndDifferentPointerType(d))return;const{viewport:{rotation:p}}=t,{width:f,height:g}=a.getBoundingClientRect(),y=fe.#n=new AbortController,w=t.combinedSignal(y);if(pe.setPointer(d,h),window.addEventListener("pointerup",v=>{pe.isSamePointerIdOrRemove(v.pointerId)&&this._endDraw(v)},{signal:w}),window.addEventListener("pointercancel",v=>{pe.isSamePointerIdOrRemove(v.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",v=>{pe.isSamePointerType(v.pointerType)&&(pe.initializeAndAddPointerId(v.pointerId),fe.#s.isCancellable()&&(fe.#s.removeLastElement(),fe.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",js,{signal:w}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),a.addEventListener("touchmove",v=>{pe.isSameTimeStamp(v.timeStamp)&&je(v)},{signal:w}),t.toggleDrawing(),e._editorUndoBar?.hide(),fe.#s){t.drawLayer.updateProperties(this._currentDrawId,fe.#s.startNew(l,c,f,g,p));return}e.updateUIForDefaultProperties(this),fe.#s=this.createDrawerInstance(l,c,f,g,p),fe.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(fe.#a.toSVGProperties(),fe.#s.defaultSVGProperties),!0,!1)}static _drawMove(t){if(pe.isSameTimeStamp(t.timeStamp),!fe.#s)return;const{offsetX:e,offsetY:n,pointerId:i}=t;if(pe.isSamePointerId(i)){if(pe.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,fe.#s.add(e,n)),pe.setTimeStamp(t.timeStamp),je(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,fe.#s=null,fe.#a=null,pe.clearTimeStamp()),fe.#n&&(fe.#n.abort(),fe.#n=null,pe.clearPointerIds())}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,fe.#s.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=fe.#s,i=this._currentDrawId,a=n.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(i,n.setLastElement(a))},undo:()=>{e.drawLayer.updateProperties(i,n.removeLastElement())},mustExec:!1,type:ae.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(ae.DRAW_STEP),!fe.#s.isEmpty()){const{pageDimensions:[n,i],scale:a}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:fe.#s.getOutlines(n*a,i*a,a,this._INNER_MARGIN),drawingOptions:fe.#a,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,i,a,l){Se("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}=e.viewport,h=this.deserializeDraw(l,c,i,a,this._INNER_MARGIN,t),d=await super.deserialize(t,e,n);return d.createDrawingOptions(t),d.#r({drawOutlines:h}),d.#c(),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[e,n]=this.pageTranslation,[i,a]=this.pageDimensions;return this.#t.serialize([e,n,i,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class qU{#t=new Float64Array(6);#e;#s;#n;#a;#r;#i="";#o=0;#c=new eu;#l;#d;constructor(t,e,n,i,a,l){this.#l=n,this.#d=i,this.#n=a,this.#a=l,[t,e]=this.#h(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e],this.#s=[{line:c,points:this.#r}],this.#t.set(c,0)}updateProperty(t,e){t==="stroke-width"&&(this.#a=e)}#h(t,e){return kt._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#r.length<=10}add(t,e){[t,e]=this.#h(t,e);const[n,i,a,l]=this.#t.subarray(2,6),c=t-a,h=e-l;return Math.hypot(this.#l*c,this.#d*h)<=2?null:(this.#r.push(t,e),isNaN(n)?(this.#t.set([a,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,i,a,l,t,e],0),this.#e.push(...kt.createBezierPoints(n,i,a,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,a){this.#l=n,this.#d=i,this.#n=a,[t,e]=this.#h(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e];const c=this.#s.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#s.push({line:l,points:this.#r}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(t){return this.#s?(this.#s.push(t),this.#e=t.line,this.#r=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#s)return this.#c.removeLastElement();this.#s.pop(),this.#i="";for(let t=0,e=this.#s.length;t<e;t++){const{line:n,points:i}=this.#s[t];this.#e=n,this.#r=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#i}}}toSVGPath(){const t=kt.svgRound(this.#e[4]),e=kt.svgRound(this.#e[5]);if(this.#r.length===2)return this.#i=`${this.#i} M ${t} ${e} Z`,this.#i;if(this.#r.length<=6){const i=this.#i.lastIndexOf("M");this.#i=`${this.#i.slice(0,i)} M ${t} ${e}`,this.#o=6}if(this.#r.length===4){const i=kt.svgRound(this.#e[10]),a=kt.svgRound(this.#e[11]);return this.#i=`${this.#i} L ${i} ${a}`,this.#o=12,this.#i}const n=[];this.#o===0&&(n.push(`M ${t} ${e}`),this.#o=6);for(let i=this.#o,a=this.#e.length;i<a;i+=6){const[l,c,h,d,p,f]=this.#e.slice(i,i+6).map(kt.svgRound);n.push(`C${l} ${c} ${h} ${d} ${p} ${f}`)}return this.#i+=n.join(" "),this.#o=this.#e.length,this.#i}getOutlines(t,e,n,i){const a=this.#s.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#c.build(this.#s,t,e,n,this.#n,this.#a,i),this.#t=null,this.#e=null,this.#s=null,this.#i=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class eu extends kt{#t;#e=0;#s;#n;#a;#r;#i;#o;#c;build(t,e,n,i,a,l,c){this.#a=e,this.#r=n,this.#i=i,this.#o=a,this.#c=l,this.#s=c??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${kt.svgRound(e[4])} ${kt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${kt.svgRound(e[10])} ${kt.svgRound(e[11])}`);continue}for(let n=6,i=e.length;n<i;n+=6){const[a,l,c,h,d,p]=e.subarray(n,n+6).map(kt.svgRound);t.push(`C${a} ${l} ${c} ${h} ${d} ${p}`)}}return t.join("")}serialize([t,e,n,i],a){const l=[],c=[],[h,d,p,f]=this.#d();let g,y,w,v,S,x,A,E,R;switch(this.#o){case 0:R=kt._rescale,g=t,y=e+i,w=n,v=-i,S=t+h*n,x=e+(1-d-f)*i,A=t+(h+p)*n,E=e+(1-d)*i;break;case 90:R=kt._rescaleAndSwap,g=t,y=e,w=n,v=i,S=t+d*n,x=e+h*i,A=t+(d+f)*n,E=e+(h+p)*i;break;case 180:R=kt._rescale,g=t+n,y=e,w=-n,v=i,S=t+(1-h-p)*n,x=e+d*i,A=t+(1-h)*n,E=e+(d+f)*i;break;case 270:R=kt._rescaleAndSwap,g=t+n,y=e+i,w=-n,v=-i,S=t+(1-d-f)*n,x=e+(1-h-p)*i,A=t+(1-d)*n,E=e+(1-h)*i;break}for(const{line:T,points:O}of this.#n)l.push(R(T,g,y,w,v,a?new Array(T.length):null)),c.push(R(O,g,y,w,v,a?new Array(O.length):null));return{lines:l,points:c,rect:[S,x,A,E]}}static deserialize(t,e,n,i,a,{paths:{lines:l,points:c},rotation:h,thickness:d}){const p=[];let f,g,y,w,v;switch(h){case 0:v=kt._rescale,f=-t/n,g=e/i+1,y=1/n,w=-1/i;break;case 90:v=kt._rescaleAndSwap,f=-e/i,g=-t/n,y=1/i,w=1/n;break;case 180:v=kt._rescale,f=t/n+1,g=-e/i,y=-1/n,w=1/i;break;case 270:v=kt._rescaleAndSwap,f=e/i+1,g=t/n+1,y=-1/i,w=-1/n;break}if(!l){l=[];for(const x of c){const A=x.length;if(A===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(A===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const E=new Float32Array(3*(A-2));l.push(E);let[R,T,O,D]=x.subarray(0,4);E.set([NaN,NaN,NaN,NaN,R,T],0);for(let N=4;N<A;N+=2){const I=x[N],G=x[N+1];E.set(kt.createBezierPoints(R,T,O,D,I,G),(N-2)*3),[R,T,O,D]=[O,D,I,G]}}}for(let x=0,A=l.length;x<A;x++)p.push({line:v(l[x].map(E=>E??NaN),f,g,y,w),points:v(c[x].map(E=>E??NaN),f,g,y,w)});const S=new this.prototype.constructor;return S.build(p,n,i,1,h,d,a),S}#l(t=this.#c){const e=this.#s+t/2*this.#i;return this.#o%180===0?[e/this.#a,e/this.#r]:[e/this.#r,e/this.#a]}#d(){const[t,e,n,i]=this.#t,[a,l]=this.#l(0);return[t+a,e+l,n-2*a,i-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let c=4,h=i.length;c<h;c+=6)Tt.pointBoundingBox(i[c],i[c+1],t);continue}let a=i[4],l=i[5];for(let c=6,h=i.length;c<h;c+=6){const[d,p,f,g,y,w]=i.subarray(c,c+6);Tt.bezierBoundingBox(a,l,d,p,f,g,y,w,t),a=y,l=w}}const[e,n]=this.#l();t[0]=jn(t[0]-e,0,1),t[1]=jn(t[1]-n,0,1),t[2]=jn(t[2]+e,0,1),t[3]=jn(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,n]=this.#l();this.#c=t;const[i,a]=this.#l(),[l,c]=[i-e,a-n],h=this.#t;return h[0]-=l,h[1]-=c,h[2]+=2*l,h[3]+=2*c,h}updateParentDimensions([t,e],n){const[i,a]=this.#l();this.#a=t,this.#r=e,this.#i=n;const[l,c]=this.#l(),h=l-i,d=c-a,p=this.#t;return p[0]-=h,p[1]-=d,p[2]+=2*h,p[3]+=2*d,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(kt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${kt.svgRound(t)} ${kt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let n=0,i=0,a=0,l=0,c=0,h=0;switch(this.#e){case 90:i=e/t,a=-t/e,c=t;break;case 180:n=-1,l=-1,c=t,h=e;break;case 270:i=-e/t,a=t/e,h=e;break;default:return""}return`matrix(${n} ${i} ${a} ${l} ${kt.svgRound(c)} ${kt.svgRound(h)})`}getPathResizingSVGProperties([t,e,n,i]){const[a,l]=this.#l(),[c,h,d,p]=this.#t;if(Math.abs(d-a)<=kt.PRECISION||Math.abs(p-l)<=kt.PRECISION){const v=t+n/2-(c+d/2),S=e+i/2-(h+p/2);return{path:{"transform-origin":`${kt.svgRound(t)} ${kt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${v} ${S})`}}}const f=(n-2*a)/(d-2*a),g=(i-2*l)/(p-2*l),y=d/n,w=p/i;return{path:{"transform-origin":`${kt.svgRound(c)} ${kt.svgRound(h)}`,transform:`${this.rotationTransform} scale(${y} ${w}) translate(${kt.svgRound(a)} ${kt.svgRound(l)}) scale(${f} ${g}) translate(${kt.svgRound(-a)} ${kt.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,n,i]){const[a,l]=this.#l(),c=this.#t,[h,d,p,f]=c;if(c[0]=t,c[1]=e,c[2]=n,c[3]=i,Math.abs(p-a)<=kt.PRECISION||Math.abs(f-l)<=kt.PRECISION){const S=t+n/2-(h+p/2),x=e+i/2-(d+f/2);for(const{line:A,points:E}of this.#n)kt._translate(A,S,x,A),kt._translate(E,S,x,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${kt.svgRound(t)} ${kt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(n-2*a)/(p-2*a),y=(i-2*l)/(f-2*l),w=-g*(h+a)+t+a,v=-y*(d+l)+e+l;if(g!==1||y!==1||w!==0||v!==0)for(const{line:S,points:x}of this.#n)kt._rescale(S,w,v,g,y,S),kt._rescale(x,w,v,g,y,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${kt.svgRound(t)} ${kt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[i,a]=n,l=this.#t,c=t-l[0],h=e-l[1];if(this.#a===i&&this.#r===a)for(const{line:d,points:p}of this.#n)kt._translate(d,c,h,d),kt._translate(p,c,h,p);else{const d=this.#a/i,p=this.#r/a;this.#a=i,this.#r=a;for(const{line:f,points:g}of this.#n)kt._rescale(f,c,h,d,p,f),kt._rescale(g,c,h,d,p,g);l[2]*=d,l[3]*=p}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${kt.svgRound(t)} ${kt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${kt.svgRound(t[0])} ${kt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class mf extends mR{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:jt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new mf(this._viewParameters);return t.updateAll(this),t}}class rb extends fe{static _type="ink";static _editorType=Wt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){jt.initialize(t,e),this._defaultDrawingOptions=new mf(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Yt(this,"typesMap",new Map([[ae.INK_THICKNESS,"stroke-width"],[ae.INK_COLOR,"stroke"],[ae.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,i,a){return new qU(t,e,n,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,i,a,l){return eu.deserialize(t,e,n,i,a,l)}static async deserialize(t,e,n){let i=null;if(t instanceof sb){const{data:{inkLists:l,rect:c,rotation:h,id:d,color:p,opacity:f,borderStyle:{rawWidth:g},popupRef:y,richText:w,contentsObj:v,creationDate:S,modificationDate:x},parent:{page:{pageNumber:A}}}=t;i=t={annotationType:Wt.INK,color:Array.from(p),thickness:g,opacity:f,paths:{points:l},boxes:null,pageIndex:A-1,rect:c.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:y,richText:w,comment:v?.str||null,creationDate:S,modificationDate:x}}const a=await super.deserialize(t,e,n);return a._initialData=i,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||=new Uc(this),[["colorPicker",this._colorPicker]]}get colorType(){return ae.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=rb.getDefaultDrawingOptions({stroke:Tt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":l}}=this,c=Object.assign(super.serialize(t),{color:jt._colorManager.convert(i),opacity:a,thickness:l,paths:{lines:e,points:n}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!this.#t(c)?null:(c.id=this.annotationElementId,c)}#t(t){const{color:e,thickness:n,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==e[c])||t.thickness!==n||t.opacity!==i||t.pageIndex!==a}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class Dy extends eu{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Uh=8,sc=3;class Eo{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,n,i){return n-=t,i-=e,n===0?i>0?0:4:n===1?i+6:2-i}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,n,i,a,l,c){const h=this.#e(n,i,a,l);for(let d=0;d<8;d++){const p=(-d+h-c+16)%8,f=this.#s[2*p],g=this.#s[2*p+1];if(t[(n+f)*e+(i+g)]!==0)return p}return-1}static#a(t,e,n,i,a,l,c){const h=this.#e(n,i,a,l);for(let d=0;d<8;d++){const p=(d+h+c+16)%8,f=this.#s[2*p],g=this.#s[2*p+1];if(t[(n+f)*e+(i+g)]!==0)return p}return-1}static#r(t,e,n,i){const a=t.length,l=new Int32Array(a);for(let p=0;p<a;p++)l[p]=t[p]<=i?1:0;for(let p=1;p<n-1;p++)l[p*e]=l[p*e+e-1]=0;for(let p=0;p<e;p++)l[p]=l[e*n-1-p]=0;let c=1,h;const d=[];for(let p=1;p<n-1;p++){h=1;for(let f=1;f<e-1;f++){const g=p*e+f,y=l[g];if(y===0)continue;let w=p,v=f;if(y===1&&l[g-1]===0)c+=1,v-=1;else if(y>=1&&l[g+1]===0)c+=1,v+=1,y>1&&(h=y);else{y!==1&&(h=Math.abs(y));continue}const S=[f,p],x=v===f+1,A={isHole:x,points:S,id:c,parent:0};d.push(A);let E;for(const W of d)if(W.id===h){E=W;break}E?E.isHole?A.parent=x?E.parent:h:A.parent=x?h:E.parent:A.parent=x?h:0;const R=this.#n(l,e,p,f,w,v,0);if(R===-1){l[g]=-c,l[g]!==1&&(h=Math.abs(l[g]));continue}let T=this.#s[2*R],O=this.#s[2*R+1];const D=p+T,N=f+O;w=D,v=N;let I=p,G=f;for(;;){const W=this.#a(l,e,I,G,w,v,1);T=this.#s[2*W],O=this.#s[2*W+1];const F=I+T,Y=G+O;S.push(Y,F);const k=I*e+G;if(l[k+1]===0?l[k]=-c:l[k]===1&&(l[k]=c),F===p&&Y===f&&I===D&&G===N){l[g]!==1&&(h=Math.abs(l[g]));break}else w=I,v=G,I=F,G=Y}}}return d}static#i(t,e,n,i){if(n-e<=4){for(let D=e;D<n-2;D+=2)i.push(t[D],t[D+1]);return}const a=t[e],l=t[e+1],c=t[n-4]-a,h=t[n-3]-l,d=Math.hypot(c,h),p=c/d,f=h/d,g=p*l-f*a,y=h/c,w=1/d,v=Math.atan(y),S=Math.cos(v),x=Math.sin(v),A=w*(Math.abs(S)+Math.abs(x)),E=w*(1-A+A**2),R=Math.max(Math.atan(Math.abs(x+S)*E),Math.atan(Math.abs(x-S)*E));let T=0,O=e;for(let D=e+2;D<n-2;D+=2){const N=Math.abs(g-p*t[D+1]+f*t[D]);N>T&&(O=D,T=N)}T>(d*R)**2?(this.#i(t,e,O+2,i),this.#i(t,O,n,i)):i.push(a,l)}static#o(t){const e=[],n=t.length;return this.#i(t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}static#c(t,e,n,i,a,l){const c=new Float32Array(l**2),h=-2*i**2,d=l>>1;for(let v=0;v<l;v++){const S=(v-d)**2;for(let x=0;x<l;x++)c[v*l+x]=Math.exp((S+(x-d)**2)/h)}const p=new Float32Array(256),f=-2*a**2;for(let v=0;v<256;v++)p[v]=Math.exp(v**2/f);const g=t.length,y=new Uint8Array(g),w=new Uint32Array(256);for(let v=0;v<n;v++)for(let S=0;S<e;S++){const x=v*e+S,A=t[x];let E=0,R=0;for(let O=0;O<l;O++){const D=v+O-d;if(!(D<0||D>=n))for(let N=0;N<l;N++){const I=S+N-d;if(I<0||I>=e)continue;const G=t[D*e+I],W=c[O*l+N]*p[Math.abs(G-A)];E+=G*W,R+=W}}const T=y[x]=Math.round(E/R);w[T]++}return[y,w]}static#l(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}static#d(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let i=-1/0,a=1/0;for(let c=0,h=n.length;c<h;c++){const d=n[c]=t[c<<2];i=Math.max(i,d),a=Math.min(a,d)}const l=255/(i-a);for(let c=0,h=n.length;c<h;c++)n[c]=(n[c]-a)*l;return n}static#h(t){let e,n=-1/0,i=-1/0;const a=t.findIndex(h=>h!==0);let l=a,c=a;for(e=a;e<256;e++){const h=t[e];h>n&&(e-l>i&&(i=e-l,c=e-1),n=h,l=e)}for(e=c-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:n,height:i}=t,{maxDim:a}=this.#t;let l=n,c=i;if(n>a||i>a){let g=n,y=i,w=Math.log2(Math.max(n,i)/a);const v=Math.floor(w);w=w===v?v-1:v;for(let x=0;x<w;x++){l=Math.ceil(g/2),c=Math.ceil(y/2);const A=new OffscreenCanvas(l,c);A.getContext("2d").drawImage(t,0,0,g,y,0,0,l,c),g=l,y=c,t!==e&&t.close(),t=A.transferToImageBitmap()}const S=Math.min(a/l,a/c);l=Math.round(l*S),c=Math.round(c*S)}const d=new OffscreenCanvas(l,c).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,l,c),d.filter="grayscale(1)",d.drawImage(t,0,0,t.width,t.height,0,0,l,c);const p=d.getImageData(0,0,l,c).data;return[this.#d(p),l,c]}static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:i},a,l,c,h){let d=new OffscreenCanvas(1,1),p=d.getContext("2d",{alpha:!1});const f=200,g=p.font=`${n} ${i} ${f}px ${e}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:w,actualBoundingBoxAscent:v,actualBoundingBoxDescent:S,fontBoundingBoxAscent:x,fontBoundingBoxDescent:A,width:E}=p.measureText(t),R=1.5,T=Math.ceil(Math.max(Math.abs(y)+Math.abs(w)||0,E)*R),O=Math.ceil(Math.max(Math.abs(v)+Math.abs(S)||f,Math.abs(x)+Math.abs(A)||f)*R);d=new OffscreenCanvas(T,O),p=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=g,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,T,O),p.fillStyle="black",p.fillText(t,T*(R-1)/2,O*(3-R)/2);const D=this.#d(p.getImageData(0,0,T,O).data),N=this.#l(D),I=this.#h(N),G=this.#r(D,T,O,I);return this.processDrawnLines({lines:{curves:G,width:T,height:O},pageWidth:a,pageHeight:l,rotation:c,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,n,i,a){const[l,c,h]=this.#f(t),[d,p]=this.#c(l,c,h,Math.hypot(c,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),f=this.#h(p),g=this.#r(d,c,h,f);return this.processDrawnLines({lines:{curves:g,width:c,height:h},pageWidth:e,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:l,areContours:c}){i%180!==0&&([e,n]=[n,e]);const{curves:h,width:d,height:p}=t,f=t.thickness??0,g=[],y=Math.min(e/d,n/p),w=y/e,v=y/n,S=[];for(const{points:A}of h){const E=l?this.#o(A):A;if(!E)continue;S.push(E);const R=E.length,T=new Float32Array(R),O=new Float32Array(3*(R===2?2:R-2));if(g.push({line:O,points:T}),R===2){T[0]=E[0]*w,T[1]=E[1]*v,O.set([NaN,NaN,NaN,NaN,T[0],T[1]],0);continue}let[D,N,I,G]=E;D*=w,N*=v,I*=w,G*=v,T.set([D,N,I,G],0),O.set([NaN,NaN,NaN,NaN,D,N],0);for(let W=4;W<R;W+=2){const F=T[W]=E[W]*w,Y=T[W+1]=E[W+1]*v;O.set(kt.createBezierPoints(D,N,I,G,F,Y),(W-2)*3),[D,N,I,G]=[I,G,F,Y]}}if(g.length===0)return null;const x=c?new Dy:new eu;return x.build(g,e,n,1,i,c?0:f,a),{outline:x,newCurves:S,areContours:c,thickness:f,width:d,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:i,height:a}){let l=1/0,c=-1/0,h=0;for(const E of t){h+=E.length;for(let R=2,T=E.length;R<T;R++){const O=E[R]-E[R-2];l=Math.min(l,O),c=Math.max(c,O)}}let d;l>=-128&&c<=127?d=Int8Array:l>=-32768&&c<=32767?d=Int16Array:d=Int32Array;const p=t.length,f=Uh+sc*p,g=new Uint32Array(f);let y=0;g[y++]=f*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*d.BYTES_PER_ELEMENT,g[y++]=0,g[y++]=i,g[y++]=a,g[y++]=e?0:1,g[y++]=Math.max(0,Math.floor(n??0)),g[y++]=p,g[y++]=d.BYTES_PER_ELEMENT;for(const E of t)g[y++]=E.length-2,g[y++]=E[0],g[y++]=E[1];const w=new CompressionStream("deflate-raw"),v=w.writable.getWriter();await v.ready,v.write(g);const S=d.prototype.constructor;for(const E of t){const R=new S(E.length-2);for(let T=2,O=E.length;T<O;T++)R[T-2]=E[T]-E[T-2];v.write(R)}v.close();const x=await new Response(w.readable).arrayBuffer(),A=new Uint8Array(x);return z2(A)}static async decompressSignature(t){try{const e=lj(t),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(e).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let l=null,c=0;for await(const E of n)l||=new Uint8Array(new Uint32Array(E.buffer,0,4)[0]),l.set(E,c),c+=E.length;const h=new Uint32Array(l.buffer,0,l.length>>2),d=h[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const p=h[2],f=h[3],g=h[4]===0,y=h[5],w=h[6],v=h[7],S=[],x=(Uh+sc*w)*Uint32Array.BYTES_PER_ELEMENT;let A;switch(v){case Int8Array.BYTES_PER_ELEMENT:A=new Int8Array(l.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:A=new Int16Array(l.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:A=new Int32Array(l.buffer,x);break}c=0;for(let E=0;E<w;E++){const R=h[sc*E+Uh],T=new Float32Array(R+2);S.push(T);for(let O=0;O<sc-1;O++)T[O]=h[sc*E+Uh+O+1];for(let O=0;O<R;O++)T[O+2]=T[O]+A[c++]}return{areContours:g,thickness:y,outlines:S,width:p,height:f}}catch(e){return Xt(`decompressSignature: ${e}`),null}}}class ab extends mR{constructor(){super(),super.updateProperties({fill:jt._defaultLineColor,"stroke-width":0})}clone(){const t=new ab;return t.updateAll(this),t}}class ob extends mf{constructor(t){super(t),super.updateProperties({stroke:jt._defaultLineColor,"stroke-width":1})}clone(){const t=new ob(this._viewParameters);return t.updateAll(this),t}}class li extends fe{#t=!1;#e=null;#s=null;#n=null;static _type="signature";static _editorType=Wt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){jt.initialize(t,e),this._defaultDrawingOptions=new ab,this._defaultDrawnSignatureOptions=new ob(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Yt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:i,mustSmooth:a,areContours:l,description:c,uuid:h,heightInPage:d}=this.#s,{rawDims:{pageWidth:p,pageHeight:f},rotation:g}=this.parent.viewport,y=Eo.processDrawnLines({lines:i,pageWidth:p,pageHeight:f,rotation:g,innerMargin:li._INNER_MARGIN,mustSmooth:a,areContours:l});this.addSignature(y,d,c,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:i,height:a}=this.#s,l=Math.max(i,a),c=Eo.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:n,width:i,height:a},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,i){const{x:a,y:l}=this,{outline:c}=this.#s=t;this.#t=c instanceof Dy,this.description=n;let h;this.#t?h=li.getDefaultDrawingOptions():(h=li._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:h});const[,d]=this.pageDimensions;let p=e/d;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=a,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:i}=this.parent.viewport;return Eo.process(t,e,n,i,li._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return Eo.extractContoursFromText(t,e,n,i,a,li._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:i}=this.parent.viewport;return Eo.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:li._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=li.getDefaultDrawingOptions():(this._drawingOptions=li._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:i});return this.addComment(a),t?(a.paths={lines:e,points:n},a.uuid=this.#n,a.isCopy=!0):a.lines=e,this.#e&&(a.accessibilityData={type:"Figure",alt:this.#e}),a}static deserializeDraw(t,e,n,i,a,l){return l.areContours?Dy.deserialize(t,e,n,i,a,l):eu.deserialize(t,e,n,i,a,l)}static async deserialize(t,e,n){const i=await super.deserialize(t,e,n);return i.#t=t.areContours,i.description=t.accessibilityData?.alt||"",i.#n=t.uuid,i}}class XU extends jt{#t=null;#e=null;#s=null;#n=null;#a=null;#r="";#i=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=Wt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){jt.initialize(t,e)}static isHandlingMimeForPasting(t){return xy.includes(t)}static paste(t,e){e.pasteEditor({mode:Wt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#r=t.file.name),this.#m()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#i){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:i,width:a,height:l,channels:i.length/(a*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#h(n,!0)).finally(()=>this.#f());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(n).then(i=>this.#h(i)).finally(()=>this.#f());return}if(this.#a){const n=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(n).then(i=>this.#h(i)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=xy.join(",");const e=this._uiManager._signal;this.#s=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(i)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#i?.remove(),this.#i=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#i===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#s||this.#t||this.#n||this.#a||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#e=n,i&&(this.#t=i),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#m(){const{div:t}=this;let{width:e,height:n}=this.#t;const[i,a]=this.pageDimensions,l=.75;if(this.width)e=this.width*i,n=this.height*a;else if(e>l*i||n>l*a){const h=Math.min(l*i/e,l*a/n);e*=h,n*=h}this._uiManager.enableWaiting(!1);const c=this.#i=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=e/i,this.height=n/a,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,n=!1){t||(t=224);const{width:i,height:a}=this.#t,l=new vi;let c=this.#t,h=i,d=a,p=null;if(e){if(i>e||a>e){const O=Math.min(e/i,e/a);h=Math.floor(i*O),d=Math.floor(a*O)}p=document.createElement("canvas");const g=p.width=Math.ceil(h*l.sx),y=p.height=Math.ceil(d*l.sy);this.#l||(c=this.#u(g,y));const w=p.getContext("2d");w.filter=this._uiManager.hcmFilter;let v="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":pj.isDarkMode&&(v="#8f8f9d",S="#42414d");const x=15,A=x*l.sx,E=x*l.sy,R=new OffscreenCanvas(A*2,E*2),T=R.getContext("2d");T.fillStyle=v,T.fillRect(0,0,A*2,E*2),T.fillStyle=S,T.fillRect(0,0,A,E),T.fillRect(A,E,A,E),w.fillStyle=w.createPattern(R,"repeat"),w.fillRect(0,0,g,y),w.drawImage(c,0,0,c.width,c.height,0,0,g,y)}let f=null;if(n){let g,y;if(l.symmetric&&c.width<t&&c.height<t)g=c.width,y=c.height;else if(c=this.#t,i>t||a>t){const S=Math.min(t/i,t/a);g=Math.floor(i*S),y=Math.floor(a*S),this.#l||(c=this.#u(g,y))}const v=new OffscreenCanvas(g,y).getContext("2d",{willReadFrequently:!0});v.drawImage(c,0,0,c.width,c.height,0,0,g,y),f={width:g,height:y,data:v.getImageData(0,0,g,y).data}}return{canvas:p,width:h,height:d,imageData:f}}#u(t,e){const{width:n,height:i}=this.#t;let a=n,l=i,c=this.#t;for(;a>2*t||l>2*e;){const h=a,d=l;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(a,l);p.getContext("2d").drawImage(c,0,0,h,d,0,0,a,l),c=p.transferToImageBitmap()}return c}#p(){const[t,e]=this.parentDimensions,{width:n,height:i}=this,a=new vi,l=Math.ceil(n*t*a.sx),c=Math.ceil(i*e*a.sy),h=this.#i;if(!h||h.width===l&&h.height===c)return;h.width=l,h.height=c;const d=this.#l?this.#t:this.#u(l,c),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(d,0,0,d.width,d.height,0,0,l,c)}#y(t){if(t){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#e);if(i)return i}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,n]=this.pageDimensions,i=Math.round(this.width*e*Wo.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*Wo.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,a);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,i,a),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,n){let i=null,a=!1;if(t instanceof fR){const{data:{rect:v,rotation:S,id:x,structParent:A,popupRef:E,richText:R,contentsObj:T,creationDate:O,modificationDate:D},container:N,parent:{page:{pageNumber:I}},canvas:G}=t;let W,F;G?(delete t.canvas,{id:W,bitmap:F}=n.imageManager.getFromCanvas(N.id,G),G.remove()):(a=!0,t._hasNoCanvas=!0);const Y=(await e._structTree.getAriaAttributes(`${No}${x}`))?.get("aria-label")||"";i=t={annotationType:Wt.STAMP,bitmapId:W,bitmap:F,pageIndex:I-1,rect:v.slice(0),rotation:S,annotationElementId:x,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:Y},isSvg:!1,structParent:A,popupRef:E,richText:R,comment:T?.str||null,creationDate:O,modificationDate:D}}const l=await super.deserialize(t,e,n),{rect:c,bitmap:h,bitmapUrl:d,bitmapId:p,isSvg:f,accessibilityData:g}=t;a?(n.addMissingCanvas(t.id,l),l.#o=!0):p&&n.imageManager.isValidId(p)?(l.#e=p,h&&(l.#t=h)):l.#n=d,l.#l=f;const[y,w]=l.pageDimensions;return l.width=(c[2]-c[0])/y,l.height=(c[3]-c[1])/w,g&&(l.altTextData=g),l._initialData=i,t.comment&&l.setCommentData(t),l.#d=!!i,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(n),t)return n.bitmapUrl=this.#y(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=this.#b(n);return c.isSame?null:(c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(e===null)return n;e.stamps||=new Map;const l=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:n}),n.bitmap=this.#y(!1);else if(this.#l){const c=e.stamps.get(this.#e);l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=this.#y(!1))}return n}#b(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,i=t.pageIndex===e,a=(t.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Vi{#t;#e=!1;#s=null;#n=null;#a=null;#r=new Map;#i=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#g=null;#m=-1;#u;static _initialized=!1;static#p=new Map([mn,rb,XU,$e,li].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:i,accessibilityManager:a,annotationLayer:l,drawLayer:c,textLayer:h,viewport:d,l10n:p}){const f=[...Vi.#p.values()];if(!Vi._initialized){Vi._initialized=!0;for(const g of f)g.initialize(p,t)}t.registerEditorTypes(f),this.#u=t,this.pageIndex=e,this.div=n,this.#t=a,this.#s=l,this.viewport=d,this.#h=h,this.drawLayer=c,this._structTree=i,this.#u.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Wt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#_(),t){case Wt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Wt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Wt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Wt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of Vi.#p.values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#s?.togglePointerEvents(t)}get#y(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const n of this.#y)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));const e=this.#s;if(e)for(const n of e.getEditableAnnotations()){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;const i=this.#u.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",a=>{const{clientX:c,clientY:h,timeStamp:d}=a,p=this.#m;if(d-p>500){this.#m=d;return}this.#m=-1;const{classList:f}=this.div;f.toggle("getElements",!0);const g=document.elementsFromPoint(c,h);if(f.toggle("getElements",!1),!this.div.contains(g[0]))return;let y;const w=new RegExp(`^${Ic}[0-9]+$`);for(const S of g)if(w.test(S.id)){y=S.id;break}if(!y)return;const v=this.#r.get(y);v?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),v.dblclick(a))},{signal:i,capture:!0})}const t=this.#s,e=[];if(t){const i=new Map,a=new Map;for(const c of this.#y){if(c.disableEditing(),!c.annotationElementId){e.push(c);continue}if(c.serialize()!==null){i.set(c.annotationElementId,c);continue}else a.set(c.annotationElementId,c);this.getEditableAnnotation(c.annotationElementId)?.show(),c.remove()}const l=t.getEditableAnnotations();for(const c of l){const{id:h}=c.data;if(this.#u.isDeletedAnnotationElement(h)){c.updateEdited({deleted:!0});continue}let d=a.get(h);if(d){d.resetAnnotationElement(c),d.show(!1),c.show();continue}d=i.get(h),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(c)&&d.show(!1)),c.show()}}this.#_(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of Vi.#p.values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),this.#o=!1}getEditableAnnotation(t){return this.#s?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#b.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#b(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:n}=ln.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),$e.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#r.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),jt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of this.#r.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#v(){return Vi.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#E(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:n,offsetY:i}=this.#S(),a=this.getNextId(),l=this.#E({parent:this,id:a,x:n,y:i,uiManager:this.#u,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await Vi.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),a=this.#E({parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...n});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}#S(){const{x:t,y:e,width:n,height:i}=this.boundingClientRect,a=Math.max(0,t),l=Math.max(0,e),c=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+i),d=(a+c)/2-t,p=(l+h)/2-e,[f,g]=this.viewport.rotation%180===0?[d,p]:[p,d];return{offsetX:f,offsetY:g}}addNewEditor(t={}){this.createAndAddNewEditor(this.#S(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=ln.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#i||(this.#i=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const n=this.#u.getMode();if(n===Wt.STAMP||n===Wt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===Wt.HIGHLIGHT&&this.enableTextSelection(),this.#i){this.#i=!1;return}const{isMac:e}=ln.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#i=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const n=this.#u.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#v.endDrawing(t)):null}findNewParent(t,e,n){const i=this.#u.findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#_(){for(const t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Sa(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#_();const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Sa(this.div,{rotation:n}),e!==n)for(const i of this.#r.values())i.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class xn{#t=null;#e=new Map;#s=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Yt(this,"_svgFactory",new Od)}static#a(t,[e,n,i,a]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*i}%`,l.height=`${100*a}%`}#r(){const t=xn._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#i(t,e){const n=xn._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const a=xn._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),i}#o(t,e){for(const[n,i]of Object.entries(e))i===null?t.removeAttribute(n):t.setAttribute(n,i)}draw(t,e=!1,n=!1){const i=xn.#n++,a=this.#r(),l=xn._svgFactory.createElement("defs");a.append(l);const c=xn._svgFactory.createElement("path");l.append(c);const h=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",h),c.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#s.set(i,c);const d=n?this.#i(l,h):null,p=xn._svgFactory.createElement("use");return a.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(a,t),this.#e.set(i,a),{id:i,clipPathId:`url(#${d})`}}drawOutline(t,e){const n=xn.#n++,i=this.#r(),a=xn._svgFactory.createElement("defs");i.append(a);const l=xn._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const f=xn._svgFactory.createElement("mask");a.append(f),h=`mask_p${this.pageIndex}_${n}`,f.setAttribute("id",h),f.setAttribute("maskUnits","objectBoundingBox");const g=xn._svgFactory.createElement("rect");f.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const y=xn._svgFactory.createElement("use");f.append(y),y.setAttribute("href",`#${c}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const d=xn._svgFactory.createElement("use");i.append(d),d.setAttribute("href",`#${c}`),h&&d.setAttribute("mask",`url(#${h})`);const p=d.cloneNode();return i.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(i,t),this.#e.set(n,i),n}finalizeDraw(t,e){this.#s.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:i,rootClass:a,path:l}=e,c=typeof t=="number"?this.#e.get(t):t;if(c){if(n&&this.#o(c,n),i&&xn.#a(c,i),a){const{classList:h}=c;for(const[d,p]of Object.entries(a))h.toggle(d,p)}if(l){const d=c.firstElementChild.firstElementChild;this.#o(d,l)}}}updateParent(t,e){if(e===this)return;const n=this.#e.get(t);n&&(e.#t.append(n),this.#e.delete(t),e.#e.set(t,n))}remove(t){this.#s.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:ky};globalThis.pdfjsLib={AbortException:Pr,AnnotationEditorLayer:Vi,AnnotationEditorParamsType:ae,AnnotationEditorType:Wt,AnnotationEditorUIManager:Lr,AnnotationLayer:ib,AnnotationMode:Cr,AnnotationType:Ze,applyOpacity:gj,build:SU,ColorPicker:Bs,createValidAbsoluteUrl:L2,CSSConstants:mj,DOMSVGFactory:Od,DrawLayer:xn,FeatureTest:ln,fetchData:Kc,findContrastColor:yj,getDocument:iR,getFilenameFromUrl:cj,getPdfFilenameFromUrl:uj,getRGB:Qc,getUuid:F2,getXfaPageViewport:dj,GlobalWorkerOptions:Vo,ImageKind:nd,InvalidPDFException:wy,isDataScheme:df,isPdfFile:Yv,isValidExplicitDest:Rj,MathClamp:jn,noContextMenu:js,normalizeUnicode:aj,OPS:Fc,OutputScale:vi,PasswordResponses:Z6,PDFDataRangeTransport:rR,PDFDateString:_y,PDFWorker:jc,PermissionFlag:K6,PixelsPerInch:Wo,RenderingCancelledException:Xv,renderRichText:U2,ResponseException:Md,setLayerDimensions:Sa,shadow:Yt,SignatureExtractor:Eo,stopEvent:je,SupportedImageMimeTypes:xy,TextLayer:vs,TouchManager:ff,updateUrlHash:B2,Util:Tt,VerbosityLevel:cf,version:lR,XfaLayer:j2};Vo.workerSrc=`https://unpkg.com/pdfjs-dist@${lR}/build/pdf.worker.min.js`;async function YU(s){const t=await s.arrayBuffer(),e=WU(s.name);if(e==="docx")return KU(t);if(e==="pdf")return ZU(t);{const n=await s.text();return{type:e,content:n,originalData:n}}}function WU(s){const t=s.split(".").pop()?.toLowerCase();return t==="docx"?"docx":t==="pdf"?"pdf":t==="md"||t==="markdown"?"md":"txt"}async function KU(s){const t=new W6;if(await t.loadAsync(s),!await t.file("word/document.xml")?.async("string"))throw new Error("Invalid DOCX file");return{type:"docx",content:"DOCX content loaded",originalData:s,structure:t}}async function ZU(s){const e=await iR({data:s}).promise;let n="";const i=Math.min(e.numPages,5);for(let a=1;a<=i;a++){const h=(await(await e.getPage(a)).getTextContent()).items.map(d=>d.str).join(" ");n+=h+`

`}return e.numPages>5&&(n+=`
... (And ${e.numPages-5} more pages)`),{type:"pdf",content:n,originalData:s}}function $t(s,t,e,n,i){if(typeof t=="function"?s!==t||!0:!t.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(s,e),e}function ot(s,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?s!==t||!n:!t.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(s):n?n.value:t.get(s)}let gR=function(){const{crypto:s}=globalThis;if(s?.randomUUID)return gR=s.randomUUID.bind(s),s.randomUUID();const t=new Uint8Array(1),e=s?()=>s.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^e()&15>>+n/4).toString(16))};function Oy(s){return typeof s=="object"&&s!==null&&("name"in s&&s.name==="AbortError"||"message"in s&&String(s.message).includes("FetchRequestCanceledException"))}const Ny=s=>{if(s instanceof Error)return s;if(typeof s=="object"&&s!==null){try{if(Object.prototype.toString.call(s)==="[object Error]"){const t=new Error(s.message,s.cause?{cause:s.cause}:{});return s.stack&&(t.stack=s.stack),s.cause&&!t.cause&&(t.cause=s.cause),s.name&&(t.name=s.name),t}}catch{}try{return new Error(JSON.stringify(s))}catch{}}return new Error(s)};class Ut extends Error{}class Tn extends Ut{constructor(t,e,n,i){super(`${Tn.makeMessage(t,e,n)}`),this.status=t,this.headers=i,this.requestID=i?.get("x-request-id"),this.error=e;const a=e;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(t,e,n){const i=e?.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):n;return t&&i?`${t} ${i}`:t?`${t} status code (no body)`:i||"(no status code or body)"}static generate(t,e,n,i){if(!t||!i)return new gf({message:n,cause:Ny(e)});const a=e?.error;return t===400?new yR(t,a,n,i):t===401?new vR(t,a,n,i):t===403?new bR(t,a,n,i):t===404?new wR(t,a,n,i):t===409?new _R(t,a,n,i):t===422?new xR(t,a,n,i):t===429?new SR(t,a,n,i):t>=500?new AR(t,a,n,i):new Tn(t,a,n,i)}}class Fs extends Tn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class gf extends Tn{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),e&&(this.cause=e)}}class lb extends gf{constructor({message:t}={}){super({message:t??"Request timed out."})}}class yR extends Tn{}class vR extends Tn{}class bR extends Tn{}class wR extends Tn{}class _R extends Tn{}class xR extends Tn{}class SR extends Tn{}class AR extends Tn{}class ER extends Ut{constructor(){super("Could not parse response content as the length limit was reached")}}class CR extends Ut{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class dc extends Error{constructor(t){super(t)}}const QU=/^[a-z][a-z0-9+.-]*:/i,JU=s=>QU.test(s);let rs=s=>(rs=Array.isArray,rs(s)),xA=rs;function TR(s){return typeof s!="object"?{}:s??{}}function t8(s){if(!s)return!0;for(const t in s)return!1;return!0}function e8(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function kg(s){return s!=null&&typeof s=="object"&&!Array.isArray(s)}const n8=(s,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Ut(`${s} must be an integer`);if(t<0)throw new Ut(`${s} must be a positive integer`);return t},s8=s=>{try{return JSON.parse(s)}catch{return}},nu=s=>new Promise(t=>setTimeout(t,s)),Co="6.16.0",i8=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function r8(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const a8=()=>{const s=r8();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Co,"X-Stainless-OS":AA(Deno.build.os),"X-Stainless-Arch":SA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Co,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Co,"X-Stainless-OS":AA(globalThis.process.platform??"unknown"),"X-Stainless-Arch":SA(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const t=o8();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Co,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Co,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function o8(){if(typeof navigator>"u"||!navigator)return null;const s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:e}of s){const n=e.exec(navigator.userAgent);if(n){const i=n[1]||0,a=n[2]||0,l=n[3]||0;return{browser:t,version:`${i}.${a}.${l}`}}}return null}const SA=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?`other:${s}`:"unknown",AA=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?`Other:${s}`:"Unknown");let EA;const l8=()=>EA??(EA=a8());function c8(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function RR(...s){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...s)}function kR(s){let t=Symbol.asyncIterator in s?s[Symbol.asyncIterator]():s[Symbol.iterator]();return RR({start(){},async pull(e){const{done:n,value:i}=await t.next();n?e.close():e.enqueue(i)},async cancel(){await t.return?.()}})}function MR(s){if(s[Symbol.asyncIterator])return s;const t=s.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function u8(s){if(s===null||typeof s!="object")return;if(s[Symbol.asyncIterator]){await s[Symbol.asyncIterator]().return?.();return}const t=s.getReader(),e=t.cancel();t.releaseLock(),await e}const h8=({headers:s,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)}),DR="RFC3986",OR=s=>String(s),CA={RFC1738:s=>String(s).replace(/%20/g,"+"),RFC3986:OR},d8="RFC1738";let Py=(s,t)=>(Py=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Py(s,t));const oi=(()=>{const s=[];for(let t=0;t<256;++t)s.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return s})(),Mg=1024,f8=(s,t,e,n,i)=>{if(s.length===0)return s;let a=s;if(typeof s=="symbol"?a=Symbol.prototype.toString.call(s):typeof s!="string"&&(a=String(s)),e==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let l="";for(let c=0;c<a.length;c+=Mg){const h=a.length>=Mg?a.slice(c,c+Mg):a,d=[];for(let p=0;p<h.length;++p){let f=h.charCodeAt(p);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||i===d8&&(f===40||f===41)){d[d.length]=h.charAt(p);continue}if(f<128){d[d.length]=oi[f];continue}if(f<2048){d[d.length]=oi[192|f>>6]+oi[128|f&63];continue}if(f<55296||f>=57344){d[d.length]=oi[224|f>>12]+oi[128|f>>6&63]+oi[128|f&63];continue}p+=1,f=65536+((f&1023)<<10|h.charCodeAt(p)&1023),d[d.length]=oi[240|f>>18]+oi[128|f>>12&63]+oi[128|f>>6&63]+oi[128|f&63]}l+=d.join("")}return l};function p8(s){return!s||typeof s!="object"?!1:!!(s.constructor&&s.constructor.isBuffer&&s.constructor.isBuffer(s))}function TA(s,t){if(rs(s)){const e=[];for(let n=0;n<s.length;n+=1)e.push(t(s[n]));return e}return t(s)}const NR={brackets(s){return String(s)+"[]"},comma:"comma",indices(s,t){return String(s)+"["+t+"]"},repeat(s){return String(s)}},PR=function(s,t){Array.prototype.push.apply(s,rs(t)?t:[t])};let RA;const an={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:f8,encodeValuesOnly:!1,format:DR,formatter:OR,indices:!1,serializeDate(s){return(RA??(RA=Function.prototype.call.bind(Date.prototype.toISOString)))(s)},skipNulls:!1,strictNullHandling:!1};function m8(s){return typeof s=="string"||typeof s=="number"||typeof s=="boolean"||typeof s=="symbol"||typeof s=="bigint"}const Dg={};function LR(s,t,e,n,i,a,l,c,h,d,p,f,g,y,w,v,S,x){let A=s,E=x,R=0,T=!1;for(;(E=E.get(Dg))!==void 0&&!T;){const G=E.get(s);if(R+=1,typeof G<"u"){if(G===R)throw new RangeError("Cyclic object value");T=!0}typeof E.get(Dg)>"u"&&(R=0)}if(typeof d=="function"?A=d(t,A):A instanceof Date?A=g?.(A):e==="comma"&&rs(A)&&(A=TA(A,function(G){return G instanceof Date?g?.(G):G})),A===null){if(a)return h&&!v?h(t,an.encoder,S,"key",y):t;A=""}if(m8(A)||p8(A)){if(h){const G=v?t:h(t,an.encoder,S,"key",y);return[w?.(G)+"="+w?.(h(A,an.encoder,S,"value",y))]}return[w?.(t)+"="+w?.(String(A))]}const O=[];if(typeof A>"u")return O;let D;if(e==="comma"&&rs(A))v&&h&&(A=TA(A,h)),D=[{value:A.length>0?A.join(",")||null:void 0}];else if(rs(d))D=d;else{const G=Object.keys(A);D=p?G.sort(p):G}const N=c?String(t).replace(/\./g,"%2E"):String(t),I=n&&rs(A)&&A.length===1?N+"[]":N;if(i&&rs(A)&&A.length===0)return I+"[]";for(let G=0;G<D.length;++G){const W=D[G],F=typeof W=="object"&&typeof W.value<"u"?W.value:A[W];if(l&&F===null)continue;const Y=f&&c?W.replace(/\./g,"%2E"):W,k=rs(A)?typeof e=="function"?e(I,Y):I:I+(f?"."+Y:"["+Y+"]");x.set(s,R);const J=new WeakMap;J.set(Dg,x),PR(O,LR(F,k,e,n,i,a,l,c,e==="comma"&&v&&rs(A)?null:h,d,p,f,g,y,w,v,S,J))}return O}function g8(s=an){if(typeof s.allowEmptyArrays<"u"&&typeof s.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof s.encodeDotInKeys<"u"&&typeof s.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(s.encoder!==null&&typeof s.encoder<"u"&&typeof s.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=s.charset||an.charset;if(typeof s.charset<"u"&&s.charset!=="utf-8"&&s.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let e=DR;if(typeof s.format<"u"){if(!Py(CA,s.format))throw new TypeError("Unknown format option provided.");e=s.format}const n=CA[e];let i=an.filter;(typeof s.filter=="function"||rs(s.filter))&&(i=s.filter);let a;if(s.arrayFormat&&s.arrayFormat in NR?a=s.arrayFormat:"indices"in s?a=s.indices?"indices":"repeat":a=an.arrayFormat,"commaRoundTrip"in s&&typeof s.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const l=typeof s.allowDots>"u"?s.encodeDotInKeys?!0:an.allowDots:!!s.allowDots;return{addQueryPrefix:typeof s.addQueryPrefix=="boolean"?s.addQueryPrefix:an.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof s.allowEmptyArrays=="boolean"?!!s.allowEmptyArrays:an.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:typeof s.charsetSentinel=="boolean"?s.charsetSentinel:an.charsetSentinel,commaRoundTrip:!!s.commaRoundTrip,delimiter:typeof s.delimiter>"u"?an.delimiter:s.delimiter,encode:typeof s.encode=="boolean"?s.encode:an.encode,encodeDotInKeys:typeof s.encodeDotInKeys=="boolean"?s.encodeDotInKeys:an.encodeDotInKeys,encoder:typeof s.encoder=="function"?s.encoder:an.encoder,encodeValuesOnly:typeof s.encodeValuesOnly=="boolean"?s.encodeValuesOnly:an.encodeValuesOnly,filter:i,format:e,formatter:n,serializeDate:typeof s.serializeDate=="function"?s.serializeDate:an.serializeDate,skipNulls:typeof s.skipNulls=="boolean"?s.skipNulls:an.skipNulls,sort:typeof s.sort=="function"?s.sort:null,strictNullHandling:typeof s.strictNullHandling=="boolean"?s.strictNullHandling:an.strictNullHandling}}function y8(s,t={}){let e=s;const n=g8(t);let i,a;typeof n.filter=="function"?(a=n.filter,e=a("",e)):rs(n.filter)&&(a=n.filter,i=a);const l=[];if(typeof e!="object"||e===null)return"";const c=NR[n.arrayFormat],h=c==="comma"&&n.commaRoundTrip;i||(i=Object.keys(e)),n.sort&&i.sort(n.sort);const d=new WeakMap;for(let g=0;g<i.length;++g){const y=i[g];n.skipNulls&&e[y]===null||PR(l,LR(e[y],y,c,h,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,d))}const p=l.join(n.delimiter);let f=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),p.length>0?f+p:""}function v8(s){let t=0;for(const i of s)t+=i.length;const e=new Uint8Array(t);let n=0;for(const i of s)e.set(i,n),n+=i.length;return e}let kA;function cb(s){let t;return(kA??(t=new globalThis.TextEncoder,kA=t.encode.bind(t)))(s)}let MA;function DA(s){let t;return(MA??(t=new globalThis.TextDecoder,MA=t.decode.bind(t)))(s)}var ps,ms;class yf{constructor(){ps.set(this,void 0),ms.set(this,void 0),$t(this,ps,new Uint8Array),$t(this,ms,null)}decode(t){if(t==null)return[];const e=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?cb(t):t;$t(this,ps,v8([ot(this,ps,"f"),e]));const n=[];let i;for(;(i=b8(ot(this,ps,"f"),ot(this,ms,"f")))!=null;){if(i.carriage&&ot(this,ms,"f")==null){$t(this,ms,i.index);continue}if(ot(this,ms,"f")!=null&&(i.index!==ot(this,ms,"f")+1||i.carriage)){n.push(DA(ot(this,ps,"f").subarray(0,ot(this,ms,"f")-1))),$t(this,ps,ot(this,ps,"f").subarray(ot(this,ms,"f"))),$t(this,ms,null);continue}const a=ot(this,ms,"f")!==null?i.preceding-1:i.preceding,l=DA(ot(this,ps,"f").subarray(0,a));n.push(l),$t(this,ps,ot(this,ps,"f").subarray(i.index)),$t(this,ms,null)}return n}flush(){return ot(this,ps,"f").length?this.decode(`
`):[]}}ps=new WeakMap,ms=new WeakMap;yf.NEWLINE_CHARS=new Set([`
`,"\r"]);yf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function b8(s,t){for(let i=t??0;i<s.length;i++){if(s[i]===10)return{preceding:i,index:i+1,carriage:!1};if(s[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function w8(s){for(let n=0;n<s.length-1;n++){if(s[n]===10&&s[n+1]===10||s[n]===13&&s[n+1]===13)return n+2;if(s[n]===13&&s[n+1]===10&&n+3<s.length&&s[n+2]===13&&s[n+3]===10)return n+4}return-1}const Nd={off:0,error:200,warn:300,info:400,debug:500},OA=(s,t,e)=>{if(s){if(e8(Nd,s))return s;An(e).warn(`${t} was set to ${JSON.stringify(s)}, expected one of ${JSON.stringify(Object.keys(Nd))}`)}};function fc(){}function Hh(s,t,e){return!t||Nd[s]>Nd[e]?fc:t[s].bind(t)}const _8={error:fc,warn:fc,info:fc,debug:fc};let NA=new WeakMap;function An(s){const t=s.logger,e=s.logLevel??"off";if(!t)return _8;const n=NA.get(t);if(n&&n[0]===e)return n[1];const i={error:Hh("error",t,e),warn:Hh("warn",t,e),info:Hh("info",t,e),debug:Hh("debug",t,e)};return NA.set(t,[e,i]),i}const oa=s=>(s.options&&(s.options={...s.options},delete s.options.headers),s.headers&&(s.headers=Object.fromEntries((s.headers instanceof Headers?[...s.headers]:Object.entries(s.headers)).map(([t,e])=>[t,t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":e]))),"retryOfRequestLogID"in s&&(s.retryOfRequestLogID&&(s.retryOf=s.retryOfRequestLogID),delete s.retryOfRequestLogID),s);var ic;class fi{constructor(t,e,n){this.iterator=t,ic.set(this,void 0),this.controller=e,$t(this,ic,n)}static fromSSEResponse(t,e,n){let i=!1;const a=n?An(n):console;async function*l(){if(i)throw new Ut("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let c=!1;try{for await(const h of x8(t,e))if(!c){if(h.data.startsWith("[DONE]")){c=!0;continue}if(h.event===null||!h.event.startsWith("thread.")){let d;try{d=JSON.parse(h.data)}catch(p){throw a.error("Could not parse message into JSON:",h.data),a.error("From chunk:",h.raw),p}if(d&&d.error)throw new Tn(void 0,d.error,void 0,t.headers);yield d}else{let d;try{d=JSON.parse(h.data)}catch(p){throw console.error("Could not parse message into JSON:",h.data),console.error("From chunk:",h.raw),p}if(h.event=="error")throw new Tn(void 0,d.error,d.message,void 0);yield{event:h.event,data:d}}}c=!0}catch(h){if(Oy(h))return;throw h}finally{c||e.abort()}}return new fi(l,e,n)}static fromReadableStream(t,e,n){let i=!1;async function*a(){const c=new yf,h=MR(t);for await(const d of h)for(const p of c.decode(d))yield p;for(const d of c.flush())yield d}async function*l(){if(i)throw new Ut("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let c=!1;try{for await(const h of a())c||h&&(yield JSON.parse(h));c=!0}catch(h){if(Oy(h))return;throw h}finally{c||e.abort()}}return new fi(l,e,n)}[(ic=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const t=[],e=[],n=this.iterator(),i=a=>({next:()=>{if(a.length===0){const l=n.next();t.push(l),e.push(l)}return a.shift()}});return[new fi(()=>i(t),this.controller,ot(this,ic,"f")),new fi(()=>i(e),this.controller,ot(this,ic,"f"))]}toReadableStream(){const t=this;let e;return RR({async start(){e=t[Symbol.asyncIterator]()},async pull(n){try{const{value:i,done:a}=await e.next();if(a)return n.close();const l=cb(JSON.stringify(i)+`
`);n.enqueue(l)}catch(i){n.error(i)}},async cancel(){await e.return?.()}})}}async function*x8(s,t){if(!s.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ut("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ut("Attempted to iterate over a response with no body");const e=new A8,n=new yf,i=MR(s.body);for await(const a of S8(i))for(const l of n.decode(a)){const c=e.decode(l);c&&(yield c)}for(const a of n.flush()){const l=e.decode(a);l&&(yield l)}}async function*S8(s){let t=new Uint8Array;for await(const e of s){if(e==null)continue;const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?cb(e):e;let i=new Uint8Array(t.length+n.length);i.set(t),i.set(n,t.length),t=i;let a;for(;(a=w8(t))!==-1;)yield t.slice(0,a),t=t.slice(a)}t.length>0&&(yield t)}class A8{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,n,i]=E8(t,":");return i.startsWith(" ")&&(i=i.substring(1)),e==="event"?this.event=i:e==="data"&&this.data.push(i),null}}function E8(s,t){const e=s.indexOf(t);return e!==-1?[s.substring(0,e),t,s.substring(e+t.length)]:[s,"",""]}async function BR(s,t){const{response:e,requestLogID:n,retryOfRequestLogID:i,startTime:a}=t,l=await(async()=>{if(t.options.stream)return An(s).debug("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller,s):fi.fromSSEResponse(e,t.controller,s);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const h=e.headers.get("content-type")?.split(";")[0]?.trim();if(h?.includes("application/json")||h?.endsWith("+json")){const f=await e.json();return IR(f,e)}return await e.text()})();return An(s).debug(`[${n}] response parsed`,oa({retryOfRequestLogID:i,url:e.url,status:e.status,body:l,durationMs:Date.now()-a})),l}function IR(s,t){return!s||typeof s!="object"||Array.isArray(s)?s:Object.defineProperty(s,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}var pc;class vf extends Promise{constructor(t,e,n=BR){super(i=>{i(null)}),this.responsePromise=e,this.parseResponse=n,pc.set(this,void 0),$t(this,pc,t)}_thenUnwrap(t){return new vf(ot(this,pc,"f"),this.responsePromise,async(e,n)=>IR(t(await this.parseResponse(e,n),n),n.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e,request_id:e.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(ot(this,pc,"f"),t))),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}pc=new WeakMap;var Vh;class ub{constructor(t,e,n,i){Vh.set(this,void 0),$t(this,Vh,t),this.options=i,this.response=e,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const t=this.nextPageRequestOptions();if(!t)throw new Ut("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await ot(this,Vh,"f").requestAPIList(this.constructor,t)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(Vh=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const e of t.getPaginatedItems())yield e}}class C8 extends vf{constructor(t,e,n){super(t,e,async(i,a)=>new n(i,a.response,await BR(i,a),a.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const e of t)yield e}}class bf extends ub{constructor(t,e,n,i){super(t,e,n,i),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class tn extends ub{constructor(t,e,n,i){super(t,e,n,i),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const t=this.getPaginatedItems(),e=t[t.length-1]?.id;return e?{...this.options,query:{...TR(this.options.query),after:e}}:null}}class Pd extends ub{constructor(t,e,n,i){super(t,e,n,i),this.data=n.data||[],this.has_more=n.has_more||!1,this.last_id=n.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const t=this.last_id;return t?{...this.options,query:{...TR(this.options.query),after:t}}:null}}const FR=()=>{if(typeof File>"u"){const{process:s}=globalThis,t=typeof s?.versions?.node=="string"&&parseInt(s.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Cc(s,t,e){return FR(),new File(s,t??"unknown_file",e)}function rd(s){return(typeof s=="object"&&s!==null&&("name"in s&&s.name&&String(s.name)||"url"in s&&s.url&&String(s.url)||"filename"in s&&s.filename&&String(s.filename)||"path"in s&&s.path&&String(s.path))||"").split(/[\\/]/).pop()||void 0}const hb=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function",PA=async(s,t)=>Ly(s.body)?{...s,body:await zR(s.body,t)}:s,Ea=async(s,t)=>({...s,body:await zR(s.body,t)}),LA=new WeakMap;function T8(s){const t=typeof s=="function"?s:s.fetch,e=LA.get(t);if(e)return e;const n=(async()=>{try{const i="Response"in t?t.Response:(await t("data:,")).constructor,a=new FormData;return a.toString()!==await new i(a).text()}catch{return!0}})();return LA.set(t,n),n}const zR=async(s,t)=>{if(!await T8(t))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const e=new FormData;return await Promise.all(Object.entries(s||{}).map(([n,i])=>By(e,n,i))),e},jR=s=>s instanceof Blob&&"name"in s,R8=s=>typeof s=="object"&&s!==null&&(s instanceof Response||hb(s)||jR(s)),Ly=s=>{if(R8(s))return!0;if(Array.isArray(s))return s.some(Ly);if(s&&typeof s=="object"){for(const t in s)if(Ly(s[t]))return!0}return!1},By=async(s,t,e)=>{if(e!==void 0){if(e==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")s.append(t,String(e));else if(e instanceof Response)s.append(t,Cc([await e.blob()],rd(e)));else if(hb(e))s.append(t,Cc([await new Response(kR(e)).blob()],rd(e)));else if(jR(e))s.append(t,e,rd(e));else if(Array.isArray(e))await Promise.all(e.map(n=>By(s,t+"[]",n)));else if(typeof e=="object")await Promise.all(Object.entries(e).map(([n,i])=>By(s,`${t}[${n}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${e} instead`)}},UR=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function",k8=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&UR(s),M8=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function";async function D8(s,t,e){if(FR(),s=await s,k8(s))return s instanceof File?s:Cc([await s.arrayBuffer()],s.name);if(M8(s)){const i=await s.blob();return t||(t=new URL(s.url).pathname.split(/[\\/]/).pop()),Cc(await Iy(i),t,e)}const n=await Iy(s);if(t||(t=rd(s)),!e?.type){const i=n.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof i=="string"&&(e={...e,type:i})}return Cc(n,t,e)}async function Iy(s){let t=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)t.push(s);else if(UR(s))t.push(s instanceof Blob?s:await s.arrayBuffer());else if(hb(s))for await(const e of s)t.push(...await Iy(e));else{const e=s?.constructor?.name;throw new Error(`Unexpected data type: ${typeof s}${e?`; constructor: ${e}`:""}${O8(s)}`)}return t}function O8(s){return typeof s!="object"||s===null?"":`; props: [${Object.getOwnPropertyNames(s).map(e=>`"${e}"`).join(", ")}]`}class Ft{constructor(t){this._client=t}}function HR(s){return s.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const BA=Object.freeze(Object.create(null)),N8=(s=HR)=>function(e,...n){if(e.length===1)return e[0];let i=!1;const a=[],l=e.reduce((p,f,g)=>{/[?#]/.test(f)&&(i=!0);const y=n[g];let w=(i?encodeURIComponent:s)(""+y);return g!==n.length&&(y==null||typeof y=="object"&&y.toString===Object.getPrototypeOf(Object.getPrototypeOf(y.hasOwnProperty??BA)??BA)?.toString)&&(w=y+"",a.push({start:p.length+f.length,length:w.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),p+f+(g===n.length?"":w)},""),c=l.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=h.exec(c))!==null;)a.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(a.sort((p,f)=>p.start-f.start),a.length>0){let p=0;const f=a.reduce((g,y)=>{const w=" ".repeat(y.start-p),v="^".repeat(y.length);return p=y.start+y.length,g+w+v},"");throw new Ut(`Path parameters result in path with invalid segments:
${a.map(g=>g.error).join(`
`)}
${l}
${f}`)}return l},wt=N8(HR);let VR=class extends Ft{list(t,e={},n){return this._client.getAPIList(wt`/chat/completions/${t}/messages`,tn,{query:e,...n})}};function Ld(s){return s!==void 0&&"function"in s&&s.function!==void 0}function db(s){return s?.$brand==="auto-parseable-response-format"}function su(s){return s?.$brand==="auto-parseable-tool"}function P8(s,t){return!t||!$R(t)?{...s,choices:s.choices.map(e=>(GR(e.message.tool_calls),{...e,message:{...e.message,parsed:null,...e.message.tool_calls?{tool_calls:e.message.tool_calls}:void 0}}))}:fb(s,t)}function fb(s,t){const e=s.choices.map(n=>{if(n.finish_reason==="length")throw new ER;if(n.finish_reason==="content_filter")throw new CR;return GR(n.message.tool_calls),{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:n.message.tool_calls?.map(i=>B8(t,i))??void 0}:void 0,parsed:n.message.content&&!n.message.refusal?L8(t,n.message.content):null}}});return{...s,choices:e}}function L8(s,t){return s.response_format?.type!=="json_schema"?null:s.response_format?.type==="json_schema"?"$parseRaw"in s.response_format?s.response_format.$parseRaw(t):JSON.parse(t):null}function B8(s,t){const e=s.tools?.find(n=>Ld(n)&&n.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:su(e)?e.$parseRaw(t.function.arguments):e?.function.strict?JSON.parse(t.function.arguments):null}}}function I8(s,t){if(!s||!("tools"in s)||!s.tools)return!1;const e=s.tools?.find(n=>Ld(n)&&n.function?.name===t.function.name);return Ld(e)&&(su(e)||e?.function.strict||!1)}function $R(s){return db(s.response_format)?!0:s.tools?.some(t=>su(t)||t.type==="function"&&t.function.strict===!0)??!1}function GR(s){for(const t of s||[])if(t.type!=="function")throw new Ut(`Currently only \`function\` tool calls are supported; Received \`${t.type}\``)}function F8(s){for(const t of s??[]){if(t.type!=="function")throw new Ut(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new Ut(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Bd=s=>s?.role==="assistant",qR=s=>s?.role==="tool";var Fy,ad,od,mc,gc,ld,yc,Hi,vc,Id,Fd,To,XR;class pb{constructor(){Fy.add(this),this.controller=new AbortController,ad.set(this,void 0),od.set(this,()=>{}),mc.set(this,()=>{}),gc.set(this,void 0),ld.set(this,()=>{}),yc.set(this,()=>{}),Hi.set(this,{}),vc.set(this,!1),Id.set(this,!1),Fd.set(this,!1),To.set(this,!1),$t(this,ad,new Promise((t,e)=>{$t(this,od,t,"f"),$t(this,mc,e,"f")})),$t(this,gc,new Promise((t,e)=>{$t(this,ld,t,"f"),$t(this,yc,e,"f")})),ot(this,ad,"f").catch(()=>{}),ot(this,gc,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},ot(this,Fy,"m",XR).bind(this))},0)}_connected(){this.ended||(ot(this,od,"f").call(this),this._emit("connect"))}get ended(){return ot(this,vc,"f")}get errored(){return ot(this,Id,"f")}get aborted(){return ot(this,Fd,"f")}abort(){this.controller.abort()}on(t,e){return(ot(this,Hi,"f")[t]||(ot(this,Hi,"f")[t]=[])).push({listener:e}),this}off(t,e){const n=ot(this,Hi,"f")[t];if(!n)return this;const i=n.findIndex(a=>a.listener===e);return i>=0&&n.splice(i,1),this}once(t,e){return(ot(this,Hi,"f")[t]||(ot(this,Hi,"f")[t]=[])).push({listener:e,once:!0}),this}emitted(t){return new Promise((e,n)=>{$t(this,To,!0),t!=="error"&&this.once("error",n),this.once(t,e)})}async done(){$t(this,To,!0),await ot(this,gc,"f")}_emit(t,...e){if(ot(this,vc,"f"))return;t==="end"&&($t(this,vc,!0),ot(this,ld,"f").call(this));const n=ot(this,Hi,"f")[t];if(n&&(ot(this,Hi,"f")[t]=n.filter(i=>!i.once),n.forEach(({listener:i})=>i(...e))),t==="abort"){const i=e[0];!ot(this,To,"f")&&!n?.length&&Promise.reject(i),ot(this,mc,"f").call(this,i),ot(this,yc,"f").call(this,i),this._emit("end");return}if(t==="error"){const i=e[0];!ot(this,To,"f")&&!n?.length&&Promise.reject(i),ot(this,mc,"f").call(this,i),ot(this,yc,"f").call(this,i),this._emit("end")}}_emitFinal(){}}ad=new WeakMap,od=new WeakMap,mc=new WeakMap,gc=new WeakMap,ld=new WeakMap,yc=new WeakMap,Hi=new WeakMap,vc=new WeakMap,Id=new WeakMap,Fd=new WeakMap,To=new WeakMap,Fy=new WeakSet,XR=function(t){if($t(this,Id,!0),t instanceof Error&&t.name==="AbortError"&&(t=new Fs),t instanceof Fs)return $t(this,Fd,!0),this._emit("abort",t);if(t instanceof Ut)return this._emit("error",t);if(t instanceof Error){const e=new Ut(t.message);return e.cause=t,this._emit("error",e)}return this._emit("error",new Ut(String(t)))};function z8(s){return typeof s.parse=="function"}var Fn,zy,zd,jy,Uy,Hy,YR,WR;const j8=10;class KR extends pb{constructor(){super(...arguments),Fn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){this._chatCompletions.push(t),this._emit("chatCompletion",t);const e=t.choices[0]?.message;return e&&this._addMessage(e),t}_addMessage(t,e=!0){if("content"in t||(t.content=null),this.messages.push(t),e){if(this._emit("message",t),qR(t)&&t.content)this._emit("functionToolCallResult",t.content);else if(Bd(t)&&t.tool_calls)for(const n of t.tool_calls)n.type==="function"&&this._emit("functionToolCall",n.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new Ut("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),ot(this,Fn,"m",zy).call(this)}async finalMessage(){return await this.done(),ot(this,Fn,"m",zd).call(this)}async finalFunctionToolCall(){return await this.done(),ot(this,Fn,"m",jy).call(this)}async finalFunctionToolCallResult(){return await this.done(),ot(this,Fn,"m",Uy).call(this)}async totalUsage(){return await this.done(),ot(this,Fn,"m",Hy).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const e=ot(this,Fn,"m",zd).call(this);e&&this._emit("finalMessage",e);const n=ot(this,Fn,"m",zy).call(this);n&&this._emit("finalContent",n);const i=ot(this,Fn,"m",jy).call(this);i&&this._emit("finalFunctionToolCall",i);const a=ot(this,Fn,"m",Uy).call(this);a!=null&&this._emit("finalFunctionToolCallResult",a),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",ot(this,Fn,"m",Hy).call(this))}async _createChatCompletion(t,e,n){const i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),ot(this,Fn,"m",YR).call(this,e);const a=await t.chat.completions.create({...e,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(fb(a,e))}async _runChatCompletion(t,e,n){for(const i of e.messages)this._addMessage(i,!1);return await this._createChatCompletion(t,e,n)}async _runTools(t,e,n){const i="tool",{tool_choice:a="auto",stream:l,...c}=e,h=typeof a!="string"&&a.type==="function"&&a?.function?.name,{maxChatCompletions:d=j8}=n||{},p=e.tools.map(y=>{if(su(y)){if(!y.$callback)throw new Ut("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),f={};for(const y of p)y.type==="function"&&(f[y.function.name||y.function.function.name]=y.function);const g="tools"in e?p.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of e.messages)this._addMessage(y,!1);for(let y=0;y<d;++y){const v=(await this._createChatCompletion(t,{...c,tool_choice:a,tools:g,messages:[...this.messages]},n)).choices[0]?.message;if(!v)throw new Ut("missing message in ChatCompletion response");if(!v.tool_calls?.length)return;for(const S of v.tool_calls){if(S.type!=="function")continue;const x=S.id,{name:A,arguments:E}=S.function,R=f[A];if(R){if(h&&h!==A){const N=`Invalid tool_call: ${JSON.stringify(A)}. ${JSON.stringify(h)} requested. Please try again`;this._addMessage({role:i,tool_call_id:x,content:N});continue}}else{const N=`Invalid tool_call: ${JSON.stringify(A)}. Available options are: ${Object.keys(f).map(I=>JSON.stringify(I)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:x,content:N});continue}let T;try{T=z8(R)?await R.parse(E):E}catch(N){const I=N instanceof Error?N.message:String(N);this._addMessage({role:i,tool_call_id:x,content:I});continue}const O=await R.function(T,this),D=ot(this,Fn,"m",WR).call(this,O);if(this._addMessage({role:i,tool_call_id:x,content:D}),h)return}}}}Fn=new WeakSet,zy=function(){return ot(this,Fn,"m",zd).call(this).content??null},zd=function(){let t=this.messages.length;for(;t-- >0;){const e=this.messages[t];if(Bd(e))return{...e,content:e.content??null,refusal:e.refusal??null}}throw new Ut("stream ended without producing a ChatCompletionMessage with role=assistant")},jy=function(){for(let t=this.messages.length-1;t>=0;t--){const e=this.messages[t];if(Bd(e)&&e?.tool_calls?.length)return e.tool_calls.filter(n=>n.type==="function").at(-1)?.function}},Uy=function(){for(let t=this.messages.length-1;t>=0;t--){const e=this.messages[t];if(qR(e)&&e.content!=null&&typeof e.content=="string"&&this.messages.some(n=>n.role==="assistant"&&n.tool_calls?.some(i=>i.type==="function"&&i.id===e.tool_call_id)))return e.content}},Hy=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:e}of this._chatCompletions)e&&(t.completion_tokens+=e.completion_tokens,t.prompt_tokens+=e.prompt_tokens,t.total_tokens+=e.total_tokens);return t},YR=function(t){if(t.n!=null&&t.n>1)throw new Ut("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},WR=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class mb extends KR{static runTools(t,e,n){const i=new mb,a={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(t,e,a)),i}_addMessage(t,e=!0){super._addMessage(t,e),Bd(t)&&t.content&&this._emit("content",t.content)}}const ZR=1,QR=2,JR=4,tk=8,ek=16,nk=32,sk=64,ik=128,rk=256,ak=ik|rk,ok=ek|nk|ak|sk,lk=ZR|QR|ok,ck=JR|tk,U8=lk|ck,gn={STR:ZR,NUM:QR,ARR:JR,OBJ:tk,NULL:ek,BOOL:nk,NAN:sk,INFINITY:ik,MINUS_INFINITY:rk,INF:ak,SPECIAL:ok,ATOM:lk,COLLECTION:ck,ALL:U8};class H8 extends Error{}class V8 extends Error{}function $8(s,t=gn.ALL){if(typeof s!="string")throw new TypeError(`expecting str, got ${typeof s}`);if(!s.trim())throw new Error(`${s} is empty`);return G8(s.trim(),t)}const G8=(s,t)=>{const e=s.length;let n=0;const i=g=>{throw new H8(`${g} at position ${n}`)},a=g=>{throw new V8(`${g} at position ${n}`)},l=()=>(f(),n>=e&&i("Unexpected end of input"),s[n]==='"'?c():s[n]==="{"?h():s[n]==="["?d():s.substring(n,n+4)==="null"||gn.NULL&t&&e-n<4&&"null".startsWith(s.substring(n))?(n+=4,null):s.substring(n,n+4)==="true"||gn.BOOL&t&&e-n<4&&"true".startsWith(s.substring(n))?(n+=4,!0):s.substring(n,n+5)==="false"||gn.BOOL&t&&e-n<5&&"false".startsWith(s.substring(n))?(n+=5,!1):s.substring(n,n+8)==="Infinity"||gn.INFINITY&t&&e-n<8&&"Infinity".startsWith(s.substring(n))?(n+=8,1/0):s.substring(n,n+9)==="-Infinity"||gn.MINUS_INFINITY&t&&1<e-n&&e-n<9&&"-Infinity".startsWith(s.substring(n))?(n+=9,-1/0):s.substring(n,n+3)==="NaN"||gn.NAN&t&&e-n<3&&"NaN".startsWith(s.substring(n))?(n+=3,NaN):p()),c=()=>{const g=n;let y=!1;for(n++;n<e&&(s[n]!=='"'||y&&s[n-1]==="\\");)y=s[n]==="\\"?!y:!1,n++;if(s.charAt(n)=='"')try{return JSON.parse(s.substring(g,++n-Number(y)))}catch(w){a(String(w))}else if(gn.STR&t)try{return JSON.parse(s.substring(g,n-Number(y))+'"')}catch{return JSON.parse(s.substring(g,s.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},h=()=>{n++,f();const g={};try{for(;s[n]!=="}";){if(f(),n>=e&&gn.OBJ&t)return g;const y=c();f(),n++;try{const w=l();Object.defineProperty(g,y,{value:w,writable:!0,enumerable:!0,configurable:!0})}catch(w){if(gn.OBJ&t)return g;throw w}f(),s[n]===","&&n++}}catch{if(gn.OBJ&t)return g;i("Expected '}' at end of object")}return n++,g},d=()=>{n++;const g=[];try{for(;s[n]!=="]";)g.push(l()),f(),s[n]===","&&n++}catch{if(gn.ARR&t)return g;i("Expected ']' at end of array")}return n++,g},p=()=>{if(n===0){s==="-"&&gn.NUM&t&&i("Not sure what '-' is");try{return JSON.parse(s)}catch(y){if(gn.NUM&t)try{return s[s.length-1]==="."?JSON.parse(s.substring(0,s.lastIndexOf("."))):JSON.parse(s.substring(0,s.lastIndexOf("e")))}catch{}a(String(y))}}const g=n;for(s[n]==="-"&&n++;s[n]&&!",]}".includes(s[n]);)n++;n==e&&!(gn.NUM&t)&&i("Unterminated number literal");try{return JSON.parse(s.substring(g,n))}catch{s.substring(g,n)==="-"&&gn.NUM&t&&i("Not sure what '-' is");try{return JSON.parse(s.substring(g,s.lastIndexOf("e")))}catch(w){a(String(w))}}},f=()=>{for(;n<e&&` 
\r	`.includes(s[n]);)n++};return l()},IA=s=>$8(s,gn.ALL^gn.NUM);var sn,ji,wo,xr,Og,$h,Ng,Pg,Lg,Gh,Bg,FA;class Hc extends KR{constructor(t){super(),sn.add(this),ji.set(this,void 0),wo.set(this,void 0),xr.set(this,void 0),$t(this,ji,t),$t(this,wo,[])}get currentChatCompletionSnapshot(){return ot(this,xr,"f")}static fromReadableStream(t){const e=new Hc(null);return e._run(()=>e._fromReadableStream(t)),e}static createChatCompletion(t,e,n){const i=new Hc(e);return i._run(()=>i._runChatCompletion(t,{...e,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(t,e,n){super._createChatCompletion;const i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),ot(this,sn,"m",Og).call(this);const a=await t.chat.completions.create({...e,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const l of a)ot(this,sn,"m",Ng).call(this,l);if(a.controller.signal?.aborted)throw new Fs;return this._addChatCompletion(ot(this,sn,"m",Gh).call(this))}async _fromReadableStream(t,e){const n=e?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),ot(this,sn,"m",Og).call(this),this._connected();const i=fi.fromReadableStream(t,this.controller);let a;for await(const l of i)a&&a!==l.id&&this._addChatCompletion(ot(this,sn,"m",Gh).call(this)),ot(this,sn,"m",Ng).call(this,l),a=l.id;if(i.controller.signal?.aborted)throw new Fs;return this._addChatCompletion(ot(this,sn,"m",Gh).call(this))}[(ji=new WeakMap,wo=new WeakMap,xr=new WeakMap,sn=new WeakSet,Og=function(){this.ended||$t(this,xr,void 0)},$h=function(e){let n=ot(this,wo,"f")[e.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ot(this,wo,"f")[e.index]=n,n)},Ng=function(e){if(this.ended)return;const n=ot(this,sn,"m",FA).call(this,e);this._emit("chunk",e,n);for(const i of e.choices){const a=n.choices[i.index];i.delta.content!=null&&a.message?.role==="assistant"&&a.message?.content&&(this._emit("content",i.delta.content,a.message.content),this._emit("content.delta",{delta:i.delta.content,snapshot:a.message.content,parsed:a.message.parsed})),i.delta.refusal!=null&&a.message?.role==="assistant"&&a.message?.refusal&&this._emit("refusal.delta",{delta:i.delta.refusal,snapshot:a.message.refusal}),i.logprobs?.content!=null&&a.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:i.logprobs?.content,snapshot:a.logprobs?.content??[]}),i.logprobs?.refusal!=null&&a.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:i.logprobs?.refusal,snapshot:a.logprobs?.refusal??[]});const l=ot(this,sn,"m",$h).call(this,a);a.finish_reason&&(ot(this,sn,"m",Lg).call(this,a),l.current_tool_call_index!=null&&ot(this,sn,"m",Pg).call(this,a,l.current_tool_call_index));for(const c of i.delta.tool_calls??[])l.current_tool_call_index!==c.index&&(ot(this,sn,"m",Lg).call(this,a),l.current_tool_call_index!=null&&ot(this,sn,"m",Pg).call(this,a,l.current_tool_call_index)),l.current_tool_call_index=c.index;for(const c of i.delta.tool_calls??[]){const h=a.message.tool_calls?.[c.index];h?.type&&(h?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:h.function?.name,index:c.index,arguments:h.function.arguments,parsed_arguments:h.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(h?.type,void 0))}}},Pg=function(e,n){if(ot(this,sn,"m",$h).call(this,e).done_tool_calls.has(n))return;const a=e.message.tool_calls?.[n];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=ot(this,ji,"f")?.tools?.find(c=>Ld(c)&&c.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:n,arguments:a.function.arguments,parsed_arguments:su(l)?l.$parseRaw(a.function.arguments):l?.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Lg=function(e){const n=ot(this,sn,"m",$h).call(this,e);if(e.message.content&&!n.content_done){n.content_done=!0;const i=ot(this,sn,"m",Bg).call(this);this._emit("content.done",{content:e.message.content,parsed:i?i.$parseRaw(e.message.content):null})}e.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},Gh=function(){if(this.ended)throw new Ut("stream has ended, this shouldn't happen");const e=ot(this,xr,"f");if(!e)throw new Ut("request ended without sending any chunks");return $t(this,xr,void 0),$t(this,wo,[]),q8(e,ot(this,ji,"f"))},Bg=function(){const e=ot(this,ji,"f")?.response_format;return db(e)?e:null},FA=function(e){var n,i,a,l;let c=ot(this,xr,"f");const{choices:h,...d}=e;c?Object.assign(c,d):c=$t(this,xr,{...d,choices:[]});for(const{delta:p,finish_reason:f,index:g,logprobs:y=null,...w}of e.choices){let v=c.choices[g];if(v||(v=c.choices[g]={finish_reason:f,index:g,message:{},logprobs:y,...w}),y)if(!v.logprobs)v.logprobs=Object.assign({},y);else{const{content:O,refusal:D,...N}=y;Object.assign(v.logprobs,N),O&&((n=v.logprobs).content??(n.content=[]),v.logprobs.content.push(...O)),D&&((i=v.logprobs).refusal??(i.refusal=[]),v.logprobs.refusal.push(...D))}if(f&&(v.finish_reason=f,ot(this,ji,"f")&&$R(ot(this,ji,"f")))){if(f==="length")throw new ER;if(f==="content_filter")throw new CR}if(Object.assign(v,w),!p)continue;const{content:S,refusal:x,function_call:A,role:E,tool_calls:R,...T}=p;if(Object.assign(v.message,T),x&&(v.message.refusal=(v.message.refusal||"")+x),E&&(v.message.role=E),A&&(v.message.function_call?(A.name&&(v.message.function_call.name=A.name),A.arguments&&((a=v.message.function_call).arguments??(a.arguments=""),v.message.function_call.arguments+=A.arguments)):v.message.function_call=A),S&&(v.message.content=(v.message.content||"")+S,!v.message.refusal&&ot(this,sn,"m",Bg).call(this)&&(v.message.parsed=IA(v.message.content))),R){v.message.tool_calls||(v.message.tool_calls=[]);for(const{index:O,id:D,type:N,function:I,...G}of R){const W=(l=v.message.tool_calls)[O]??(l[O]={});Object.assign(W,G),D&&(W.id=D),N&&(W.type=N),I&&(W.function??(W.function={name:I.name??"",arguments:""})),I?.name&&(W.function.name=I.name),I?.arguments&&(W.function.arguments+=I.arguments,I8(ot(this,ji,"f"),W)&&(W.function.parsed_arguments=IA(W.function.arguments)))}}}return c},Symbol.asyncIterator)](){const t=[],e=[];let n=!1;return this.on("chunk",i=>{const a=e.shift();a?a.resolve(i):t.push(i)}),this.on("end",()=>{n=!0;for(const i of e)i.resolve(void 0);e.length=0}),this.on("abort",i=>{n=!0;for(const a of e)a.reject(i);e.length=0}),this.on("error",i=>{n=!0;for(const a of e)a.reject(i);e.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,l)=>e.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new fi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function q8(s,t){const{id:e,choices:n,created:i,model:a,system_fingerprint:l,...c}=s,h={...c,id:e,choices:n.map(({message:d,finish_reason:p,index:f,logprobs:g,...y})=>{if(!p)throw new Ut(`missing finish_reason for choice ${f}`);const{content:w=null,function_call:v,tool_calls:S,...x}=d,A=d.role;if(!A)throw new Ut(`missing role for choice ${f}`);if(v){const{arguments:E,name:R}=v;if(E==null)throw new Ut(`missing function_call.arguments for choice ${f}`);if(!R)throw new Ut(`missing function_call.name for choice ${f}`);return{...y,message:{content:w,function_call:{arguments:E,name:R},role:A,refusal:d.refusal??null},finish_reason:p,index:f,logprobs:g}}return S?{...y,index:f,finish_reason:p,logprobs:g,message:{...x,role:A,content:w,refusal:d.refusal??null,tool_calls:S.map((E,R)=>{const{function:T,type:O,id:D,...N}=E,{arguments:I,name:G,...W}=T||{};if(D==null)throw new Ut(`missing choices[${f}].tool_calls[${R}].id
${qh(s)}`);if(O==null)throw new Ut(`missing choices[${f}].tool_calls[${R}].type
${qh(s)}`);if(G==null)throw new Ut(`missing choices[${f}].tool_calls[${R}].function.name
${qh(s)}`);if(I==null)throw new Ut(`missing choices[${f}].tool_calls[${R}].function.arguments
${qh(s)}`);return{...N,id:D,type:O,function:{...W,name:G,arguments:I}}})}}:{...y,message:{...x,content:w,role:A,refusal:d.refusal??null},finish_reason:p,index:f,logprobs:g}}),created:i,model:a,object:"chat.completion",...l?{system_fingerprint:l}:{}};return P8(h,t)}function qh(s){return JSON.stringify(s)}class jd extends Hc{static fromReadableStream(t){const e=new jd(null);return e._run(()=>e._fromReadableStream(t)),e}static runTools(t,e,n){const i=new jd(e),a={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(t,e,a)),i}}let gb=class extends Ft{constructor(){super(...arguments),this.messages=new VR(this._client)}create(t,e){return this._client.post("/chat/completions",{body:t,...e,stream:t.stream??!1})}retrieve(t,e){return this._client.get(wt`/chat/completions/${t}`,e)}update(t,e,n){return this._client.post(wt`/chat/completions/${t}`,{body:e,...n})}list(t={},e){return this._client.getAPIList("/chat/completions",tn,{query:t,...e})}delete(t,e){return this._client.delete(wt`/chat/completions/${t}`,e)}parse(t,e){return F8(t.tools),this._client.chat.completions.create(t,{...e,headers:{...e?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(n=>fb(n,t))}runTools(t,e){return t.stream?jd.runTools(this._client,t,e):mb.runTools(this._client,t,e)}stream(t,e){return Hc.createChatCompletion(this._client,t,e)}};gb.Messages=VR;class yb extends Ft{constructor(){super(...arguments),this.completions=new gb(this._client)}}yb.Completions=gb;const uk=Symbol("brand.privateNullableHeaders");function*X8(s){if(!s)return;if(uk in s){const{values:n,nulls:i}=s;yield*n.entries();for(const a of i)yield[a,null];return}let t=!1,e;s instanceof Headers?e=s.entries():xA(s)?e=s:(t=!0,e=Object.entries(s??{}));for(let n of e){const i=n[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const a=xA(n[1])?n[1]:[n[1]];let l=!1;for(const c of a)c!==void 0&&(t&&!l&&(l=!0,yield[i,null]),yield[i,c])}}const Dt=s=>{const t=new Headers,e=new Set;for(const n of s){const i=new Set;for(const[a,l]of X8(n)){const c=a.toLowerCase();i.has(c)||(t.delete(a),i.add(c)),l===null?(t.delete(a),e.add(c)):(t.append(a,l),e.delete(c))}}return{[uk]:!0,values:t,nulls:e}};class hk extends Ft{create(t,e){return this._client.post("/audio/speech",{body:t,...e,headers:Dt([{Accept:"application/octet-stream"},e?.headers]),__binaryResponse:!0})}}class dk extends Ft{create(t,e){return this._client.post("/audio/transcriptions",Ea({body:t,...e,stream:t.stream??!1,__metadata:{model:t.model}},this._client))}}class fk extends Ft{create(t,e){return this._client.post("/audio/translations",Ea({body:t,...e,__metadata:{model:t.model}},this._client))}}class iu extends Ft{constructor(){super(...arguments),this.transcriptions=new dk(this._client),this.translations=new fk(this._client),this.speech=new hk(this._client)}}iu.Transcriptions=dk;iu.Translations=fk;iu.Speech=hk;class pk extends Ft{create(t,e){return this._client.post("/batches",{body:t,...e})}retrieve(t,e){return this._client.get(wt`/batches/${t}`,e)}list(t={},e){return this._client.getAPIList("/batches",tn,{query:t,...e})}cancel(t,e){return this._client.post(wt`/batches/${t}/cancel`,e)}}class mk extends Ft{create(t,e){return this._client.post("/assistants",{body:t,...e,headers:Dt([{"OpenAI-Beta":"assistants=v2"},e?.headers])})}retrieve(t,e){return this._client.get(wt`/assistants/${t}`,{...e,headers:Dt([{"OpenAI-Beta":"assistants=v2"},e?.headers])})}update(t,e,n){return this._client.post(wt`/assistants/${t}`,{body:e,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(t={},e){return this._client.getAPIList("/assistants",tn,{query:t,...e,headers:Dt([{"OpenAI-Beta":"assistants=v2"},e?.headers])})}delete(t,e){return this._client.delete(wt`/assistants/${t}`,{...e,headers:Dt([{"OpenAI-Beta":"assistants=v2"},e?.headers])})}}let gk=class extends Ft{create(t,e){return this._client.post("/realtime/sessions",{body:t,...e,headers:Dt([{"OpenAI-Beta":"assistants=v2"},e?.headers])})}};class yk extends Ft{create(t,e){return this._client.post("/realtime/transcription_sessions",{body:t,...e,headers:Dt([{"OpenAI-Beta":"assistants=v2"},e?.headers])})}}let wf=class extends Ft{constructor(){super(...arguments),this.sessions=new gk(this._client),this.transcriptionSessions=new yk(this._client)}};wf.Sessions=gk;wf.TranscriptionSessions=yk;class vk extends Ft{create(t,e){return this._client.post("/chatkit/sessions",{body:t,...e,headers:Dt([{"OpenAI-Beta":"chatkit_beta=v1"},e?.headers])})}cancel(t,e){return this._client.post(wt`/chatkit/sessions/${t}/cancel`,{...e,headers:Dt([{"OpenAI-Beta":"chatkit_beta=v1"},e?.headers])})}}let bk=class extends Ft{retrieve(t,e){return this._client.get(wt`/chatkit/threads/${t}`,{...e,headers:Dt([{"OpenAI-Beta":"chatkit_beta=v1"},e?.headers])})}list(t={},e){return this._client.getAPIList("/chatkit/threads",Pd,{query:t,...e,headers:Dt([{"OpenAI-Beta":"chatkit_beta=v1"},e?.headers])})}delete(t,e){return this._client.delete(wt`/chatkit/threads/${t}`,{...e,headers:Dt([{"OpenAI-Beta":"chatkit_beta=v1"},e?.headers])})}listItems(t,e={},n){return this._client.getAPIList(wt`/chatkit/threads/${t}/items`,Pd,{query:e,...n,headers:Dt([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}};class _f extends Ft{constructor(){super(...arguments),this.sessions=new vk(this._client),this.threads=new bk(this._client)}}_f.Sessions=vk;_f.Threads=bk;class wk extends Ft{create(t,e,n){return this._client.post(wt`/threads/${t}/messages`,{body:e,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,e,n){const{thread_id:i}=e;return this._client.get(wt`/threads/${i}/messages/${t}`,{...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,e,n){const{thread_id:i,...a}=e;return this._client.post(wt`/threads/${i}/messages/${t}`,{body:a,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(t,e={},n){return this._client.getAPIList(wt`/threads/${t}/messages`,tn,{query:e,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(t,e,n){const{thread_id:i}=e;return this._client.delete(wt`/threads/${i}/messages/${t}`,{...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}class _k extends Ft{retrieve(t,e,n){const{thread_id:i,run_id:a,...l}=e;return this._client.get(wt`/threads/${i}/runs/${a}/steps/${t}`,{query:l,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(t,e,n){const{thread_id:i,...a}=e;return this._client.getAPIList(wt`/threads/${i}/runs/${t}/steps`,tn,{query:a,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}const Y8=s=>{if(typeof Buffer<"u"){const t=Buffer.from(s,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}else{const t=atob(s),e=t.length,n=new Uint8Array(e);for(let i=0;i<e;i++)n[i]=t.charCodeAt(i);return Array.from(new Float32Array(n.buffer))}};var W8={};const _o=s=>{if(typeof globalThis.process<"u")return W8?.[s]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(s)?.trim()};var En,fa,Vy,ui,cd,Ys,pa,Bo,la,Ud,gs,ud,hd,Tc,bc,wc,zA,jA,UA,HA,VA,$A,GA;class Rc extends pb{constructor(){super(...arguments),En.add(this),Vy.set(this,[]),ui.set(this,{}),cd.set(this,{}),Ys.set(this,void 0),pa.set(this,void 0),Bo.set(this,void 0),la.set(this,void 0),Ud.set(this,void 0),gs.set(this,void 0),ud.set(this,void 0),hd.set(this,void 0),Tc.set(this,void 0)}[(Vy=new WeakMap,ui=new WeakMap,cd=new WeakMap,Ys=new WeakMap,pa=new WeakMap,Bo=new WeakMap,la=new WeakMap,Ud=new WeakMap,gs=new WeakMap,ud=new WeakMap,hd=new WeakMap,Tc=new WeakMap,En=new WeakSet,Symbol.asyncIterator)](){const t=[],e=[];let n=!1;return this.on("event",i=>{const a=e.shift();a?a.resolve(i):t.push(i)}),this.on("end",()=>{n=!0;for(const i of e)i.resolve(void 0);e.length=0}),this.on("abort",i=>{n=!0;for(const a of e)a.reject(i);e.length=0}),this.on("error",i=>{n=!0;for(const a of e)a.reject(i);e.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,l)=>e.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const e=new fa;return e._run(()=>e._fromReadableStream(t)),e}async _fromReadableStream(t,e){const n=e?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=fi.fromReadableStream(t,this.controller);for await(const a of i)ot(this,En,"m",bc).call(this,a);if(i.controller.signal?.aborted)throw new Fs;return this._addRun(ot(this,En,"m",wc).call(this))}toReadableStream(){return new fi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,e,n,i){const a=new fa;return a._run(()=>a._runToolAssistantStream(t,e,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(t,e,n,i){const a=i?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...n,stream:!0},c=await t.submitToolOutputs(e,l,{...i,signal:this.controller.signal});this._connected();for await(const h of c)ot(this,En,"m",bc).call(this,h);if(c.controller.signal?.aborted)throw new Fs;return this._addRun(ot(this,En,"m",wc).call(this))}static createThreadAssistantStream(t,e,n){const i=new fa;return i._run(()=>i._threadAssistantStream(t,e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(t,e,n,i){const a=new fa;return a._run(()=>a._runAssistantStream(t,e,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return ot(this,ud,"f")}currentRun(){return ot(this,hd,"f")}currentMessageSnapshot(){return ot(this,Ys,"f")}currentRunStepSnapshot(){return ot(this,Tc,"f")}async finalRunSteps(){return await this.done(),Object.values(ot(this,ui,"f"))}async finalMessages(){return await this.done(),Object.values(ot(this,cd,"f"))}async finalRun(){if(await this.done(),!ot(this,pa,"f"))throw Error("Final run was not received.");return ot(this,pa,"f")}async _createThreadAssistantStream(t,e,n){const i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...e,stream:!0},l=await t.createAndRun(a,{...n,signal:this.controller.signal});this._connected();for await(const c of l)ot(this,En,"m",bc).call(this,c);if(l.controller.signal?.aborted)throw new Fs;return this._addRun(ot(this,En,"m",wc).call(this))}async _createAssistantStream(t,e,n,i){const a=i?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...n,stream:!0},c=await t.create(e,l,{...i,signal:this.controller.signal});this._connected();for await(const h of c)ot(this,En,"m",bc).call(this,h);if(c.controller.signal?.aborted)throw new Fs;return this._addRun(ot(this,En,"m",wc).call(this))}static accumulateDelta(t,e){for(const[n,i]of Object.entries(e)){if(!t.hasOwnProperty(n)){t[n]=i;continue}let a=t[n];if(a==null){t[n]=i;continue}if(n==="index"||n==="type"){t[n]=i;continue}if(typeof a=="string"&&typeof i=="string")a+=i;else if(typeof a=="number"&&typeof i=="number")a+=i;else if(kg(a)&&kg(i))a=this.accumulateDelta(a,i);else if(Array.isArray(a)&&Array.isArray(i)){if(a.every(l=>typeof l=="string"||typeof l=="number")){a.push(...i);continue}for(const l of i){if(!kg(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);const c=l.index;if(c==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);const h=a[c];h==null?a.push(l):a[c]=this.accumulateDelta(h,l)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${i}, accValue: ${a}`);t[n]=a}return t}_addRun(t){return t}async _threadAssistantStream(t,e,n){return await this._createThreadAssistantStream(e,t,n)}async _runAssistantStream(t,e,n,i){return await this._createAssistantStream(e,t,n,i)}async _runToolAssistantStream(t,e,n,i){return await this._createToolAssistantStream(e,t,n,i)}}fa=Rc,bc=function(t){if(!this.ended)switch($t(this,ud,t),ot(this,En,"m",UA).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ot(this,En,"m",GA).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ot(this,En,"m",jA).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ot(this,En,"m",zA).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},wc=function(){if(this.ended)throw new Ut("stream has ended, this shouldn't happen");if(!ot(this,pa,"f"))throw Error("Final run has not been received");return ot(this,pa,"f")},zA=function(t){const[e,n]=ot(this,En,"m",VA).call(this,t,ot(this,Ys,"f"));$t(this,Ys,e),ot(this,cd,"f")[e.id]=e;for(const i of n){const a=e.content[i.index];a?.type=="text"&&this._emit("textCreated",a.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,e),t.data.delta.content)for(const i of t.data.delta.content){if(i.type=="text"&&i.text){let a=i.text,l=e.content[i.index];if(l&&l.type=="text")this._emit("textDelta",a,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=ot(this,Bo,"f")){if(ot(this,la,"f"))switch(ot(this,la,"f").type){case"text":this._emit("textDone",ot(this,la,"f").text,ot(this,Ys,"f"));break;case"image_file":this._emit("imageFileDone",ot(this,la,"f").image_file,ot(this,Ys,"f"));break}$t(this,Bo,i.index)}$t(this,la,e.content[i.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(ot(this,Bo,"f")!==void 0){const i=t.data.content[ot(this,Bo,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,ot(this,Ys,"f"));break;case"text":this._emit("textDone",i.text,ot(this,Ys,"f"));break}}ot(this,Ys,"f")&&this._emit("messageDone",t.data),$t(this,Ys,void 0)}},jA=function(t){const e=ot(this,En,"m",HA).call(this,t);switch($t(this,Tc,e),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const n=t.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&e.step_details.type=="tool_calls")for(const a of n.step_details.tool_calls)a.index==ot(this,Ud,"f")?this._emit("toolCallDelta",a,e.step_details.tool_calls[a.index]):(ot(this,gs,"f")&&this._emit("toolCallDone",ot(this,gs,"f")),$t(this,Ud,a.index),$t(this,gs,e.step_details.tool_calls[a.index]),ot(this,gs,"f")&&this._emit("toolCallCreated",ot(this,gs,"f")));this._emit("runStepDelta",t.data.delta,e);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":$t(this,Tc,void 0),t.data.step_details.type=="tool_calls"&&ot(this,gs,"f")&&(this._emit("toolCallDone",ot(this,gs,"f")),$t(this,gs,void 0)),this._emit("runStepDone",t.data,e);break}},UA=function(t){ot(this,Vy,"f").push(t),this._emit("event",t)},HA=function(t){switch(t.event){case"thread.run.step.created":return ot(this,ui,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let e=ot(this,ui,"f")[t.data.id];if(!e)throw Error("Received a RunStepDelta before creation of a snapshot");let n=t.data;if(n.delta){const i=fa.accumulateDelta(e,n.delta);ot(this,ui,"f")[t.data.id]=i}return ot(this,ui,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ot(this,ui,"f")[t.data.id]=t.data;break}if(ot(this,ui,"f")[t.data.id])return ot(this,ui,"f")[t.data.id];throw new Error("No snapshot available")},VA=function(t,e){let n=[];switch(t.event){case"thread.message.created":return[t.data,n];case"thread.message.delta":if(!e)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=t.data;if(i.delta.content)for(const a of i.delta.content)if(a.index in e.content){let l=e.content[a.index];e.content[a.index]=ot(this,En,"m",$A).call(this,a,l)}else e.content[a.index]=a,n.push(a);return[e,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(e)return[e,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},$A=function(t,e){return fa.accumulateDelta(e,t)},GA=function(t){switch($t(this,hd,t.data),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":$t(this,pa,t.data),ot(this,gs,"f")&&(this._emit("toolCallDone",ot(this,gs,"f")),$t(this,gs,void 0));break}};let vb=class extends Ft{constructor(){super(...arguments),this.steps=new _k(this._client)}create(t,e,n){const{include:i,...a}=e;return this._client.post(wt`/threads/${t}/runs`,{query:{include:i},body:a,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}retrieve(t,e,n){const{thread_id:i}=e;return this._client.get(wt`/threads/${i}/runs/${t}`,{...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,e,n){const{thread_id:i,...a}=e;return this._client.post(wt`/threads/${i}/runs/${t}`,{body:a,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(t,e={},n){return this._client.getAPIList(wt`/threads/${t}/runs`,tn,{query:e,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(t,e,n){const{thread_id:i}=e;return this._client.post(wt`/threads/${i}/runs/${t}/cancel`,{...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(t,e,n){const i=await this.create(t,e,n);return await this.poll(i.id,{thread_id:t},n)}createAndStream(t,e,n){return Rc.createAssistantStream(t,this._client.beta.threads.runs,e,n)}async poll(t,e,n){const i=Dt([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(t,e,{...n,headers:{...n?.headers,...i}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(n?.pollIntervalMs)c=n.pollIntervalMs;else{const h=l.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await nu(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(t,e,n){return Rc.createAssistantStream(t,this._client.beta.threads.runs,e,n)}submitToolOutputs(t,e,n){const{thread_id:i,...a}=e;return this._client.post(wt`/threads/${i}/runs/${t}/submit_tool_outputs`,{body:a,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async submitToolOutputsAndPoll(t,e,n){const i=await this.submitToolOutputs(t,e,n);return await this.poll(i.id,e,n)}submitToolOutputsStream(t,e,n){return Rc.createToolAssistantStream(t,this._client.beta.threads.runs,e,n)}};vb.Steps=_k;class xf extends Ft{constructor(){super(...arguments),this.runs=new vb(this._client),this.messages=new wk(this._client)}create(t={},e){return this._client.post("/threads",{body:t,...e,headers:Dt([{"OpenAI-Beta":"assistants=v2"},e?.headers])})}retrieve(t,e){return this._client.get(wt`/threads/${t}`,{...e,headers:Dt([{"OpenAI-Beta":"assistants=v2"},e?.headers])})}update(t,e,n){return this._client.post(wt`/threads/${t}`,{body:e,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(t,e){return this._client.delete(wt`/threads/${t}`,{...e,headers:Dt([{"OpenAI-Beta":"assistants=v2"},e?.headers])})}createAndRun(t,e){return this._client.post("/threads/runs",{body:t,...e,headers:Dt([{"OpenAI-Beta":"assistants=v2"},e?.headers]),stream:t.stream??!1})}async createAndRunPoll(t,e){const n=await this.createAndRun(t,e);return await this.runs.poll(n.id,{thread_id:n.thread_id},e)}createAndRunStream(t,e){return Rc.createThreadAssistantStream(t,this._client.beta.threads,e)}}xf.Runs=vb;xf.Messages=wk;class il extends Ft{constructor(){super(...arguments),this.realtime=new wf(this._client),this.chatkit=new _f(this._client),this.assistants=new mk(this._client),this.threads=new xf(this._client)}}il.Realtime=wf;il.ChatKit=_f;il.Assistants=mk;il.Threads=xf;class xk extends Ft{create(t,e){return this._client.post("/completions",{body:t,...e,stream:t.stream??!1})}}class Sk extends Ft{retrieve(t,e,n){const{container_id:i}=e;return this._client.get(wt`/containers/${i}/files/${t}/content`,{...n,headers:Dt([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}}let bb=class extends Ft{constructor(){super(...arguments),this.content=new Sk(this._client)}create(t,e,n){return this._client.post(wt`/containers/${t}/files`,Ea({body:e,...n},this._client))}retrieve(t,e,n){const{container_id:i}=e;return this._client.get(wt`/containers/${i}/files/${t}`,n)}list(t,e={},n){return this._client.getAPIList(wt`/containers/${t}/files`,tn,{query:e,...n})}delete(t,e,n){const{container_id:i}=e;return this._client.delete(wt`/containers/${i}/files/${t}`,{...n,headers:Dt([{Accept:"*/*"},n?.headers])})}};bb.Content=Sk;class wb extends Ft{constructor(){super(...arguments),this.files=new bb(this._client)}create(t,e){return this._client.post("/containers",{body:t,...e})}retrieve(t,e){return this._client.get(wt`/containers/${t}`,e)}list(t={},e){return this._client.getAPIList("/containers",tn,{query:t,...e})}delete(t,e){return this._client.delete(wt`/containers/${t}`,{...e,headers:Dt([{Accept:"*/*"},e?.headers])})}}wb.Files=bb;class Ak extends Ft{create(t,e,n){const{include:i,...a}=e;return this._client.post(wt`/conversations/${t}/items`,{query:{include:i},body:a,...n})}retrieve(t,e,n){const{conversation_id:i,...a}=e;return this._client.get(wt`/conversations/${i}/items/${t}`,{query:a,...n})}list(t,e={},n){return this._client.getAPIList(wt`/conversations/${t}/items`,Pd,{query:e,...n})}delete(t,e,n){const{conversation_id:i}=e;return this._client.delete(wt`/conversations/${i}/items/${t}`,n)}}class _b extends Ft{constructor(){super(...arguments),this.items=new Ak(this._client)}create(t={},e){return this._client.post("/conversations",{body:t,...e})}retrieve(t,e){return this._client.get(wt`/conversations/${t}`,e)}update(t,e,n){return this._client.post(wt`/conversations/${t}`,{body:e,...n})}delete(t,e){return this._client.delete(wt`/conversations/${t}`,e)}}_b.Items=Ak;class Ek extends Ft{create(t,e){const n=!!t.encoding_format;let i=n?t.encoding_format:"base64";n&&An(this._client).debug("embeddings/user defined encoding_format:",t.encoding_format);const a=this._client.post("/embeddings",{body:{...t,encoding_format:i},...e});return n?a:(An(this._client).debug("embeddings/decoding base64 embeddings from base64"),a._thenUnwrap(l=>(l&&l.data&&l.data.forEach(c=>{const h=c.embedding;c.embedding=Y8(h)}),l)))}}class Ck extends Ft{retrieve(t,e,n){const{eval_id:i,run_id:a}=e;return this._client.get(wt`/evals/${i}/runs/${a}/output_items/${t}`,n)}list(t,e,n){const{eval_id:i,...a}=e;return this._client.getAPIList(wt`/evals/${i}/runs/${t}/output_items`,tn,{query:a,...n})}}class xb extends Ft{constructor(){super(...arguments),this.outputItems=new Ck(this._client)}create(t,e,n){return this._client.post(wt`/evals/${t}/runs`,{body:e,...n})}retrieve(t,e,n){const{eval_id:i}=e;return this._client.get(wt`/evals/${i}/runs/${t}`,n)}list(t,e={},n){return this._client.getAPIList(wt`/evals/${t}/runs`,tn,{query:e,...n})}delete(t,e,n){const{eval_id:i}=e;return this._client.delete(wt`/evals/${i}/runs/${t}`,n)}cancel(t,e,n){const{eval_id:i}=e;return this._client.post(wt`/evals/${i}/runs/${t}`,n)}}xb.OutputItems=Ck;class Sb extends Ft{constructor(){super(...arguments),this.runs=new xb(this._client)}create(t,e){return this._client.post("/evals",{body:t,...e})}retrieve(t,e){return this._client.get(wt`/evals/${t}`,e)}update(t,e,n){return this._client.post(wt`/evals/${t}`,{body:e,...n})}list(t={},e){return this._client.getAPIList("/evals",tn,{query:t,...e})}delete(t,e){return this._client.delete(wt`/evals/${t}`,e)}}Sb.Runs=xb;let Tk=class extends Ft{create(t,e){return this._client.post("/files",Ea({body:t,...e},this._client))}retrieve(t,e){return this._client.get(wt`/files/${t}`,e)}list(t={},e){return this._client.getAPIList("/files",tn,{query:t,...e})}delete(t,e){return this._client.delete(wt`/files/${t}`,e)}content(t,e){return this._client.get(wt`/files/${t}/content`,{...e,headers:Dt([{Accept:"application/binary"},e?.headers]),__binaryResponse:!0})}async waitForProcessing(t,{pollInterval:e=5e3,maxWait:n=1800*1e3}={}){const i=new Set(["processed","error","deleted"]),a=Date.now();let l=await this.retrieve(t);for(;!l.status||!i.has(l.status);)if(await nu(e),l=await this.retrieve(t),Date.now()-a>n)throw new lb({message:`Giving up on waiting for file ${t} to finish processing after ${n} milliseconds.`});return l}};class Rk extends Ft{}let kk=class extends Ft{run(t,e){return this._client.post("/fine_tuning/alpha/graders/run",{body:t,...e})}validate(t,e){return this._client.post("/fine_tuning/alpha/graders/validate",{body:t,...e})}};class Ab extends Ft{constructor(){super(...arguments),this.graders=new kk(this._client)}}Ab.Graders=kk;class Mk extends Ft{create(t,e,n){return this._client.getAPIList(wt`/fine_tuning/checkpoints/${t}/permissions`,bf,{body:e,method:"post",...n})}retrieve(t,e={},n){return this._client.get(wt`/fine_tuning/checkpoints/${t}/permissions`,{query:e,...n})}delete(t,e,n){const{fine_tuned_model_checkpoint:i}=e;return this._client.delete(wt`/fine_tuning/checkpoints/${i}/permissions/${t}`,n)}}let Eb=class extends Ft{constructor(){super(...arguments),this.permissions=new Mk(this._client)}};Eb.Permissions=Mk;class Dk extends Ft{list(t,e={},n){return this._client.getAPIList(wt`/fine_tuning/jobs/${t}/checkpoints`,tn,{query:e,...n})}}class Cb extends Ft{constructor(){super(...arguments),this.checkpoints=new Dk(this._client)}create(t,e){return this._client.post("/fine_tuning/jobs",{body:t,...e})}retrieve(t,e){return this._client.get(wt`/fine_tuning/jobs/${t}`,e)}list(t={},e){return this._client.getAPIList("/fine_tuning/jobs",tn,{query:t,...e})}cancel(t,e){return this._client.post(wt`/fine_tuning/jobs/${t}/cancel`,e)}listEvents(t,e={},n){return this._client.getAPIList(wt`/fine_tuning/jobs/${t}/events`,tn,{query:e,...n})}pause(t,e){return this._client.post(wt`/fine_tuning/jobs/${t}/pause`,e)}resume(t,e){return this._client.post(wt`/fine_tuning/jobs/${t}/resume`,e)}}Cb.Checkpoints=Dk;class rl extends Ft{constructor(){super(...arguments),this.methods=new Rk(this._client),this.jobs=new Cb(this._client),this.checkpoints=new Eb(this._client),this.alpha=new Ab(this._client)}}rl.Methods=Rk;rl.Jobs=Cb;rl.Checkpoints=Eb;rl.Alpha=Ab;class Ok extends Ft{}class Tb extends Ft{constructor(){super(...arguments),this.graderModels=new Ok(this._client)}}Tb.GraderModels=Ok;class Nk extends Ft{createVariation(t,e){return this._client.post("/images/variations",Ea({body:t,...e},this._client))}edit(t,e){return this._client.post("/images/edits",Ea({body:t,...e,stream:t.stream??!1},this._client))}generate(t,e){return this._client.post("/images/generations",{body:t,...e,stream:t.stream??!1})}}class Pk extends Ft{retrieve(t,e){return this._client.get(wt`/models/${t}`,e)}list(t){return this._client.getAPIList("/models",bf,t)}delete(t,e){return this._client.delete(wt`/models/${t}`,e)}}class Lk extends Ft{create(t,e){return this._client.post("/moderations",{body:t,...e})}}class Bk extends Ft{accept(t,e,n){return this._client.post(wt`/realtime/calls/${t}/accept`,{body:e,...n,headers:Dt([{Accept:"*/*"},n?.headers])})}hangup(t,e){return this._client.post(wt`/realtime/calls/${t}/hangup`,{...e,headers:Dt([{Accept:"*/*"},e?.headers])})}refer(t,e,n){return this._client.post(wt`/realtime/calls/${t}/refer`,{body:e,...n,headers:Dt([{Accept:"*/*"},n?.headers])})}reject(t,e={},n){return this._client.post(wt`/realtime/calls/${t}/reject`,{body:e,...n,headers:Dt([{Accept:"*/*"},n?.headers])})}}class Ik extends Ft{create(t,e){return this._client.post("/realtime/client_secrets",{body:t,...e})}}class Sf extends Ft{constructor(){super(...arguments),this.clientSecrets=new Ik(this._client),this.calls=new Bk(this._client)}}Sf.ClientSecrets=Ik;Sf.Calls=Bk;function K8(s,t){return!t||!Q8(t)?{...s,output_parsed:null,output:s.output.map(e=>e.type==="function_call"?{...e,parsed_arguments:null}:e.type==="message"?{...e,content:e.content.map(n=>({...n,parsed:null}))}:e)}:Fk(s,t)}function Fk(s,t){const e=s.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:eH(t,i)};if(i.type==="message"){const a=i.content.map(l=>l.type==="output_text"?{...l,parsed:Z8(t,l.text)}:l);return{...i,content:a}}return i}),n=Object.assign({},s,{output:e});return Object.getOwnPropertyDescriptor(s,"output_text")||$y(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(const i of n.output)if(i.type==="message"){for(const a of i.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),n}function Z8(s,t){return s.text?.format?.type!=="json_schema"?null:"$parseRaw"in s.text?.format?(s.text?.format).$parseRaw(t):JSON.parse(t)}function Q8(s){return!!db(s.text?.format)}function J8(s){return s?.$brand==="auto-parseable-tool"}function tH(s,t){return s.find(e=>e.type==="function"&&e.name===t)}function eH(s,t){const e=tH(s.tools??[],t.name);return{...t,...t,parsed_arguments:J8(e)?e.$parseRaw(t.arguments):e?.strict?JSON.parse(t.arguments):null}}function $y(s){const t=[];for(const e of s.output)if(e.type==="message")for(const n of e.content)n.type==="output_text"&&t.push(n.text);s.output_text=t.join("")}var xo,Xh,Sr,Yh,qA,XA,YA,WA;class Rb extends pb{constructor(t){super(),xo.add(this),Xh.set(this,void 0),Sr.set(this,void 0),Yh.set(this,void 0),$t(this,Xh,t)}static createResponse(t,e,n){const i=new Rb(e);return i._run(()=>i._createOrRetrieveResponse(t,e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(t,e,n){const i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),ot(this,xo,"m",qA).call(this);let a,l=null;"response_id"in e?(a=await t.responses.retrieve(e.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),l=e.starting_after??null):a=await t.responses.create({...e,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(const c of a)ot(this,xo,"m",XA).call(this,c,l);if(a.controller.signal?.aborted)throw new Fs;return ot(this,xo,"m",YA).call(this)}[(Xh=new WeakMap,Sr=new WeakMap,Yh=new WeakMap,xo=new WeakSet,qA=function(){this.ended||$t(this,Sr,void 0)},XA=function(e,n){if(this.ended)return;const i=(l,c)=>{(n==null||c.sequence_number>n)&&this._emit(l,c)},a=ot(this,xo,"m",WA).call(this,e);switch(i("event",e),e.type){case"response.output_text.delta":{const l=a.output[e.output_index];if(!l)throw new Ut(`missing output at index ${e.output_index}`);if(l.type==="message"){const c=l.content[e.content_index];if(!c)throw new Ut(`missing content at index ${e.content_index}`);if(c.type!=="output_text")throw new Ut(`expected content to be 'output_text', got ${c.type}`);i("response.output_text.delta",{...e,snapshot:c.text})}break}case"response.function_call_arguments.delta":{const l=a.output[e.output_index];if(!l)throw new Ut(`missing output at index ${e.output_index}`);l.type==="function_call"&&i("response.function_call_arguments.delta",{...e,snapshot:l.arguments});break}default:i(e.type,e);break}},YA=function(){if(this.ended)throw new Ut("stream has ended, this shouldn't happen");const e=ot(this,Sr,"f");if(!e)throw new Ut("request ended without sending any events");$t(this,Sr,void 0);const n=nH(e,ot(this,Xh,"f"));return $t(this,Yh,n),n},WA=function(e){let n=ot(this,Sr,"f");if(!n){if(e.type!=="response.created")throw new Ut(`When snapshot hasn't been set yet, expected 'response.created' event, got ${e.type}`);return n=$t(this,Sr,e.response),n}switch(e.type){case"response.output_item.added":{n.output.push(e.item);break}case"response.content_part.added":{const i=n.output[e.output_index];if(!i)throw new Ut(`missing output at index ${e.output_index}`);const a=i.type,l=e.part;a==="message"&&l.type!=="reasoning_text"?i.content.push(l):a==="reasoning"&&l.type==="reasoning_text"&&(i.content||(i.content=[]),i.content.push(l));break}case"response.output_text.delta":{const i=n.output[e.output_index];if(!i)throw new Ut(`missing output at index ${e.output_index}`);if(i.type==="message"){const a=i.content[e.content_index];if(!a)throw new Ut(`missing content at index ${e.content_index}`);if(a.type!=="output_text")throw new Ut(`expected content to be 'output_text', got ${a.type}`);a.text+=e.delta}break}case"response.function_call_arguments.delta":{const i=n.output[e.output_index];if(!i)throw new Ut(`missing output at index ${e.output_index}`);i.type==="function_call"&&(i.arguments+=e.delta);break}case"response.reasoning_text.delta":{const i=n.output[e.output_index];if(!i)throw new Ut(`missing output at index ${e.output_index}`);if(i.type==="reasoning"){const a=i.content?.[e.content_index];if(!a)throw new Ut(`missing content at index ${e.content_index}`);if(a.type!=="reasoning_text")throw new Ut(`expected content to be 'reasoning_text', got ${a.type}`);a.text+=e.delta}break}case"response.completed":{$t(this,Sr,e.response);break}}return n},Symbol.asyncIterator)](){const t=[],e=[];let n=!1;return this.on("event",i=>{const a=e.shift();a?a.resolve(i):t.push(i)}),this.on("end",()=>{n=!0;for(const i of e)i.resolve(void 0);e.length=0}),this.on("abort",i=>{n=!0;for(const a of e)a.reject(i);e.length=0}),this.on("error",i=>{n=!0;for(const a of e)a.reject(i);e.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,l)=>e.push({resolve:a,reject:l})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const t=ot(this,Yh,"f");if(!t)throw new Ut("stream ended without producing a ChatCompletion");return t}}function nH(s,t){return K8(s,t)}class zk extends Ft{list(t,e={},n){return this._client.getAPIList(wt`/responses/${t}/input_items`,tn,{query:e,...n})}}class jk extends Ft{count(t={},e){return this._client.post("/responses/input_tokens",{body:t,...e})}}class Af extends Ft{constructor(){super(...arguments),this.inputItems=new zk(this._client),this.inputTokens=new jk(this._client)}create(t,e){return this._client.post("/responses",{body:t,...e,stream:t.stream??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&$y(n),n))}retrieve(t,e={},n){return this._client.get(wt`/responses/${t}`,{query:e,...n,stream:e?.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&$y(i),i))}delete(t,e){return this._client.delete(wt`/responses/${t}`,{...e,headers:Dt([{Accept:"*/*"},e?.headers])})}parse(t,e){return this._client.responses.create(t,e)._thenUnwrap(n=>Fk(n,t))}stream(t,e){return Rb.createResponse(this._client,t,e)}cancel(t,e){return this._client.post(wt`/responses/${t}/cancel`,e)}compact(t,e){return this._client.post("/responses/compact",{body:t,...e})}}Af.InputItems=zk;Af.InputTokens=jk;class Uk extends Ft{create(t,e,n){return this._client.post(wt`/uploads/${t}/parts`,Ea({body:e,...n},this._client))}}class kb extends Ft{constructor(){super(...arguments),this.parts=new Uk(this._client)}create(t,e){return this._client.post("/uploads",{body:t,...e})}cancel(t,e){return this._client.post(wt`/uploads/${t}/cancel`,e)}complete(t,e,n){return this._client.post(wt`/uploads/${t}/complete`,{body:e,...n})}}kb.Parts=Uk;const sH=async s=>{const t=await Promise.allSettled(s),e=t.filter(i=>i.status==="rejected");if(e.length){for(const i of e)console.error(i.reason);throw new Error(`${e.length} promise(s) failed - see the above errors`)}const n=[];for(const i of t)i.status==="fulfilled"&&n.push(i.value);return n};class Hk extends Ft{create(t,e,n){return this._client.post(wt`/vector_stores/${t}/file_batches`,{body:e,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,e,n){const{vector_store_id:i}=e;return this._client.get(wt`/vector_stores/${i}/file_batches/${t}`,{...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(t,e,n){const{vector_store_id:i}=e;return this._client.post(wt`/vector_stores/${i}/file_batches/${t}/cancel`,{...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(t,e,n){const i=await this.create(t,e);return await this.poll(t,i.id,n)}listFiles(t,e,n){const{vector_store_id:i,...a}=e;return this._client.getAPIList(wt`/vector_stores/${i}/file_batches/${t}/files`,tn,{query:a,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async poll(t,e,n){const i=Dt([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:l}=await this.retrieve(e,{vector_store_id:t},{...n,headers:i}).withResponse();switch(a.status){case"in_progress":let c=5e3;if(n?.pollIntervalMs)c=n.pollIntervalMs;else{const h=l.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await nu(c);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(t,{files:e,fileIds:n=[]},i){if(e==null||e.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=i?.maxConcurrency??5,l=Math.min(a,e.length),c=this._client,h=e.values(),d=[...n];async function p(g){for(let y of g){const w=await c.files.create({file:y,purpose:"assistants"},i);d.push(w.id)}}const f=Array(l).fill(h).map(p);return await sH(f),await this.createAndPoll(t,{file_ids:d})}}class Vk extends Ft{create(t,e,n){return this._client.post(wt`/vector_stores/${t}/files`,{body:e,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,e,n){const{vector_store_id:i}=e;return this._client.get(wt`/vector_stores/${i}/files/${t}`,{...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,e,n){const{vector_store_id:i,...a}=e;return this._client.post(wt`/vector_stores/${i}/files/${t}`,{body:a,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(t,e={},n){return this._client.getAPIList(wt`/vector_stores/${t}/files`,tn,{query:e,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(t,e,n){const{vector_store_id:i}=e;return this._client.delete(wt`/vector_stores/${i}/files/${t}`,{...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(t,e,n){const i=await this.create(t,e,n);return await this.poll(t,i.id,n)}async poll(t,e,n){const i=Dt([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(e,{vector_store_id:t},{...n,headers:i}).withResponse(),l=a.data;switch(l.status){case"in_progress":let c=5e3;if(n?.pollIntervalMs)c=n.pollIntervalMs;else{const h=a.response.headers.get("openai-poll-after-ms");if(h){const d=parseInt(h);isNaN(d)||(c=d)}}await nu(c);break;case"failed":case"completed":return l}}}async upload(t,e,n){const i=await this._client.files.create({file:e,purpose:"assistants"},n);return this.create(t,{file_id:i.id},n)}async uploadAndPoll(t,e,n){const i=await this.upload(t,e,n);return await this.poll(t,i.id,n)}content(t,e,n){const{vector_store_id:i}=e;return this._client.getAPIList(wt`/vector_stores/${i}/files/${t}/content`,bf,{...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}class Ef extends Ft{constructor(){super(...arguments),this.files=new Vk(this._client),this.fileBatches=new Hk(this._client)}create(t,e){return this._client.post("/vector_stores",{body:t,...e,headers:Dt([{"OpenAI-Beta":"assistants=v2"},e?.headers])})}retrieve(t,e){return this._client.get(wt`/vector_stores/${t}`,{...e,headers:Dt([{"OpenAI-Beta":"assistants=v2"},e?.headers])})}update(t,e,n){return this._client.post(wt`/vector_stores/${t}`,{body:e,...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(t={},e){return this._client.getAPIList("/vector_stores",tn,{query:t,...e,headers:Dt([{"OpenAI-Beta":"assistants=v2"},e?.headers])})}delete(t,e){return this._client.delete(wt`/vector_stores/${t}`,{...e,headers:Dt([{"OpenAI-Beta":"assistants=v2"},e?.headers])})}search(t,e,n){return this._client.getAPIList(wt`/vector_stores/${t}/search`,bf,{body:e,method:"post",...n,headers:Dt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}Ef.Files=Vk;Ef.FileBatches=Hk;class $k extends Ft{create(t,e){return this._client.post("/videos",PA({body:t,...e},this._client))}retrieve(t,e){return this._client.get(wt`/videos/${t}`,e)}list(t={},e){return this._client.getAPIList("/videos",Pd,{query:t,...e})}delete(t,e){return this._client.delete(wt`/videos/${t}`,e)}downloadContent(t,e={},n){return this._client.get(wt`/videos/${t}/content`,{query:e,...n,headers:Dt([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}remix(t,e,n){return this._client.post(wt`/videos/${t}/remix`,PA({body:e,...n},this._client))}}var Ro,Gk,dd;class qk extends Ft{constructor(){super(...arguments),Ro.add(this)}async unwrap(t,e,n=this._client.webhookSecret,i=300){return await this.verifySignature(t,e,n,i),JSON.parse(t)}async verifySignature(t,e,n=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");ot(this,Ro,"m",Gk).call(this,n);const a=Dt([e]).values,l=ot(this,Ro,"m",dd).call(this,a,"webhook-signature"),c=ot(this,Ro,"m",dd).call(this,a,"webhook-timestamp"),h=ot(this,Ro,"m",dd).call(this,a,"webhook-id"),d=parseInt(c,10);if(isNaN(d))throw new dc("Invalid webhook timestamp format");const p=Math.floor(Date.now()/1e3);if(p-d>i)throw new dc("Webhook timestamp is too old");if(d>p+i)throw new dc("Webhook timestamp is too new");const f=l.split(" ").map(v=>v.startsWith("v1,")?v.substring(3):v),g=n.startsWith("whsec_")?Buffer.from(n.replace("whsec_",""),"base64"):Buffer.from(n,"utf-8"),y=h?`${h}.${c}.${t}`:`${c}.${t}`,w=await crypto.subtle.importKey("raw",g,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const v of f)try{const S=Buffer.from(v,"base64");if(await crypto.subtle.verify("HMAC",w,S,new TextEncoder().encode(y)))return}catch{continue}throw new dc("The given webhook signature does not match the expected signature")}}Ro=new WeakSet,Gk=function(t){if(typeof t!="string"||t.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},dd=function(t,e){if(!t)throw new Error("Headers are required");const n=t.get(e);if(n==null)throw new Error(`Missing required header: ${e}`);return n};var Gy,Mb,fd,Xk;class Jt{constructor({baseURL:t=_o("OPENAI_BASE_URL"),apiKey:e=_o("OPENAI_API_KEY"),organization:n=_o("OPENAI_ORG_ID")??null,project:i=_o("OPENAI_PROJECT_ID")??null,webhookSecret:a=_o("OPENAI_WEBHOOK_SECRET")??null,...l}={}){if(Gy.add(this),fd.set(this,void 0),this.completions=new xk(this),this.chat=new yb(this),this.embeddings=new Ek(this),this.files=new Tk(this),this.images=new Nk(this),this.audio=new iu(this),this.moderations=new Lk(this),this.models=new Pk(this),this.fineTuning=new rl(this),this.graders=new Tb(this),this.vectorStores=new Ef(this),this.webhooks=new qk(this),this.beta=new il(this),this.batches=new pk(this),this.uploads=new kb(this),this.responses=new Af(this),this.realtime=new Sf(this),this.conversations=new _b(this),this.evals=new Sb(this),this.containers=new wb(this),this.videos=new $k(this),e===void 0)throw new Ut("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const c={apiKey:e,organization:n,project:i,webhookSecret:a,...l,baseURL:t||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&i8())throw new Ut(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??Mb.DEFAULT_TIMEOUT,this.logger=c.logger??console;const h="warn";this.logLevel=h,this.logLevel=OA(c.logLevel,"ClientOptions.logLevel",this)??OA(_o("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??h,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??c8(),$t(this,fd,h8),this._options=c,this.apiKey=typeof e=="string"?e:"Missing Key",this.organization=n,this.project=i,this.webhookSecret=a}withOptions(t){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...t})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:e}){}async authHeaders(t){return Dt([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(t){return y8(t,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Co}`}defaultIdempotencyKey(){return`stainless-node-retry-${gR()}`}makeStatusError(t,e,n,i){return Tn.generate(t,e,n,i)}async _callApiKey(){const t=this._options.apiKey;if(typeof t!="function")return!1;let e;try{e=await t()}catch(n){throw n instanceof Ut?n:new Ut(`Failed to get token from 'apiKey' function: ${n.message}`,{cause:n})}if(typeof e!="string"||!e)throw new Ut(`Expected 'apiKey' function argument to return a string but it returned ${e}`);return this.apiKey=e,!0}buildURL(t,e,n){const i=!ot(this,Gy,"m",Xk).call(this)&&n||this.baseURL,a=JU(t)?new URL(t):new URL(i+(i.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),l=this.defaultQuery();return t8(l)||(e={...l,...e}),typeof e=="object"&&e&&!Array.isArray(e)&&(a.search=this.stringifyQuery(e)),a.toString()}async prepareOptions(t){await this._callApiKey()}async prepareRequest(t,{url:e,options:n}){}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,n){return this.request(Promise.resolve(n).then(i=>({method:t,path:e,...i})))}request(t,e=null){return new vf(this,this.makeRequest(t,e,void 0))}async makeRequest(t,e,n){const i=await t,a=i.maxRetries??this.maxRetries;e==null&&(e=a),await this.prepareOptions(i);const{req:l,url:c,timeout:h}=await this.buildRequest(i,{retryCount:a-e});await this.prepareRequest(l,{url:c,options:i});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),p=n===void 0?"":`, retryOf: ${n}`,f=Date.now();if(An(this).debug(`[${d}] sending request`,oa({retryOfRequestLogID:n,method:i.method,url:c,options:i,headers:l.headers})),i.signal?.aborted)throw new Fs;const g=new AbortController,y=await this.fetchWithTimeout(c,l,h,g).catch(Ny),w=Date.now();if(y instanceof globalThis.Error){const x=`retrying, ${e} attempts remaining`;if(i.signal?.aborted)throw new Fs;const A=Oy(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(e)return An(this).info(`[${d}] connection ${A?"timed out":"failed"} - ${x}`),An(this).debug(`[${d}] connection ${A?"timed out":"failed"} (${x})`,oa({retryOfRequestLogID:n,url:c,durationMs:w-f,message:y.message})),this.retryRequest(i,e,n??d);throw An(this).info(`[${d}] connection ${A?"timed out":"failed"} - error; no more retries left`),An(this).debug(`[${d}] connection ${A?"timed out":"failed"} (error; no more retries left)`,oa({retryOfRequestLogID:n,url:c,durationMs:w-f,message:y.message})),A?new lb:new gf({cause:y})}const v=[...y.headers.entries()].filter(([x])=>x==="x-request-id").map(([x,A])=>", "+x+": "+JSON.stringify(A)).join(""),S=`[${d}${p}${v}] ${l.method} ${c} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${w-f}ms`;if(!y.ok){const x=await this.shouldRetry(y);if(e&&x){const D=`retrying, ${e} attempts remaining`;return await u8(y.body),An(this).info(`${S} - ${D}`),An(this).debug(`[${d}] response error (${D})`,oa({retryOfRequestLogID:n,url:y.url,status:y.status,headers:y.headers,durationMs:w-f})),this.retryRequest(i,e,n??d,y.headers)}const A=x?"error; no more retries left":"error; not retryable";An(this).info(`${S} - ${A}`);const E=await y.text().catch(D=>Ny(D).message),R=s8(E),T=R?void 0:E;throw An(this).debug(`[${d}] response error (${A})`,oa({retryOfRequestLogID:n,url:y.url,status:y.status,headers:y.headers,message:T,durationMs:Date.now()-f})),this.makeStatusError(y.status,R,T,y.headers)}return An(this).info(S),An(this).debug(`[${d}] response start`,oa({retryOfRequestLogID:n,url:y.url,status:y.status,headers:y.headers,durationMs:w-f})),{response:y,options:i,controller:g,requestLogID:d,retryOfRequestLogID:n,startTime:f}}getAPIList(t,e,n){return this.requestAPIList(e,{method:"get",path:t,...n})}requestAPIList(t,e){const n=this.makeRequest(e,null,void 0);return new C8(this,n,t)}async fetchWithTimeout(t,e,n,i){const{signal:a,method:l,...c}=e||{};a&&a.addEventListener("abort",()=>i.abort());const h=setTimeout(()=>i.abort(),n),d=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,p={signal:i.signal,...d?{duplex:"half"}:{},method:"GET",...c};l&&(p.method=l.toUpperCase());try{return await this.fetch.call(void 0,t,p)}finally{clearTimeout(h)}}async shouldRetry(t){const e=t.headers.get("x-should-retry");return e==="true"?!0:e==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,e,n,i){let a;const l=i?.get("retry-after-ms");if(l){const h=parseFloat(l);Number.isNaN(h)||(a=h)}const c=i?.get("retry-after");if(c&&!a){const h=parseFloat(c);Number.isNaN(h)?a=Date.parse(c)-Date.now():a=h*1e3}if(!(a&&0<=a&&a<60*1e3)){const h=t.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(e,h)}return await nu(a),this.makeRequest(t,e-1,n)}calculateDefaultRetryTimeoutMillis(t,e){const a=e-t,l=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(t,{retryCount:e=0}={}){const n={...t},{method:i,path:a,query:l,defaultBaseURL:c}=n,h=this.buildURL(a,l,c);"timeout"in n&&n8("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const{bodyHeaders:d,body:p}=this.buildBody({options:n}),f=await this.buildHeaders({options:t,method:i,bodyHeaders:d,retryCount:e});return{req:{method:i,headers:f,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&p instanceof globalThis.ReadableStream&&{duplex:"half"},...p&&{body:p},...this.fetchOptions??{},...n.fetchOptions??{}},url:h,timeout:n.timeout}}async buildHeaders({options:t,method:e,bodyHeaders:n,retryCount:i}){let a={};this.idempotencyHeader&&e!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=t.idempotencyKey);const l=Dt([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i),...t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{},...l8(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(t),this._options.defaultHeaders,n,t.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:t,headers:e}}){if(!t)return{bodyHeaders:void 0,body:void 0};const n=Dt([e]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&n.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:kR(t)}:ot(this,fd,"f").call(this,{body:t,headers:n})}}Mb=Jt,fd=new WeakMap,Gy=new WeakSet,Xk=function(){return this.baseURL!=="https://api.openai.com/v1"};Jt.OpenAI=Mb;Jt.DEFAULT_TIMEOUT=6e5;Jt.OpenAIError=Ut;Jt.APIError=Tn;Jt.APIConnectionError=gf;Jt.APIConnectionTimeoutError=lb;Jt.APIUserAbortError=Fs;Jt.NotFoundError=wR;Jt.ConflictError=_R;Jt.RateLimitError=SR;Jt.BadRequestError=yR;Jt.AuthenticationError=vR;Jt.InternalServerError=AR;Jt.PermissionDeniedError=bR;Jt.UnprocessableEntityError=xR;Jt.InvalidWebhookSignatureError=dc;Jt.toFile=D8;Jt.Completions=xk;Jt.Chat=yb;Jt.Embeddings=Ek;Jt.Files=Tk;Jt.Images=Nk;Jt.Audio=iu;Jt.Moderations=Lk;Jt.Models=Pk;Jt.FineTuning=rl;Jt.Graders=Tb;Jt.VectorStores=Ef;Jt.Webhooks=qk;Jt.Beta=il;Jt.Batches=pk;Jt.Uploads=kb;Jt.Responses=Af;Jt.Realtime=Sf;Jt.Conversations=_b;Jt.Evals=Sb;Jt.Containers=wb;Jt.Videos=$k;const iH=`You are a professional translator. 
Translate the following text content directly, keeping the original meaning and tone.
Do not output any explanation or extra text.
If the text contains markdown formatting, preserve it.
If the text contains XML tags (like in DOCX), preserve the tags and only translate the text content within valid text nodes.`;async function rH(s,t,e){if(!s||!s.trim())return s;const n=new Jt({apiKey:t.apiKey,baseURL:t.baseUrl||"https://api.openai.com/v1",dangerouslyAllowBrowser:!0}),i=t.targetLang==="auto"?"Detect the source language. If it is Chinese, translate to English. If it is English, translate to Chinese.":`Translate to ${t.targetLang==="zh"?"Chinese (Simplified)":"English"}.`;try{const a=await n.chat.completions.create({model:t.model||"gpt-4o-mini",messages:[{role:"system",content:`${iH}
${i}`},{role:"user",content:s}],stream:!0});let l="";for await(const c of a){const h=c.choices[0]?.delta?.content||"";h&&(l+=h,e?.(l))}return l}catch(a){throw console.error("Translation error:",a),new Error(a.message||"Translation failed")}}async function Db(s,t,e){const n=[];for(let i=0;i<s.length;i++)try{const a=await rH(s[i],t);n.push(a),e?.(i+1,s.length)}catch(a){console.error(`Failed to translate chunk ${i}`,a),n.push(s[i])}return n}async function aH(s,t,e){const n=await s.file("word/document.xml")?.async("string");if(!n)throw new Error("word/document.xml not found");const a=new DOMParser().parseFromString(n,"application/xml"),l=Array.from(a.getElementsByTagName("w:p")),c=[];l.forEach((w,v)=>{const S=w.getElementsByTagName("w:t");for(let x=0;x<S.length;x++){const A=S[x],E=A.textContent||"";E.trim().length>0&&(c.push({index:-1,text:E}),A._pendingTranslation=!0)}});const h=c.map(w=>w.text);if(h.length===0)return await s.generateAsync({type:"blob"});const p=await Db(h,t,(w,v)=>{e(Math.round(w/v*100))});let f=0;l.forEach(w=>{const v=w.getElementsByTagName("w:t");for(let S=0;S<v.length;S++){const x=v[S];x._pendingTranslation&&(p[f]&&(x.textContent=p[f]),f++)}});const y=new XMLSerializer().serializeToString(a);return s.file("word/document.xml",y),await s.generateAsync({type:"blob"})}async function oH(s,t,e){const n=s.split(/\n\n+/),a=(await Db(n,t,(l,c)=>{e(Math.round(l/c*100))})).join(`

`);return new Blob([a],{type:"text/markdown"})}async function lH(s,t,e){const n=await Db([s],t,(i,a)=>e(100));return new Blob([n[0]],{type:"text/plain"})}var pd={exports:{}},cH=pd.exports,KA;function uH(){return KA||(KA=1,(function(s,t){(function(e,n){n()})(cH,function(){function e(d,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function n(d,p,f){var g=new XMLHttpRequest;g.open("GET",d),g.responseType="blob",g.onload=function(){h(g.response,p,f)},g.onerror=function(){console.error("could not download file")},g.send()}function i(d){var p=new XMLHttpRequest;p.open("HEAD",d,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function a(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(p)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Rr=="object"&&Rr.global===Rr?Rr:void 0,c=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(d,p,f){var g=l.URL||l.webkitURL,y=document.createElement("a");p=p||d.name||"download",y.download=p,y.rel="noopener",typeof d=="string"?(y.href=d,y.origin===location.origin?a(y):i(y.href)?n(d,p,f):a(y,y.target="_blank")):(y.href=g.createObjectURL(d),setTimeout(function(){g.revokeObjectURL(y.href)},4e4),setTimeout(function(){a(y)},0))}:"msSaveOrOpenBlob"in navigator?function(d,p,f){if(p=p||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(e(d,f),p);else if(i(d))n(d,p,f);else{var g=document.createElement("a");g.href=d,g.target="_blank",setTimeout(function(){a(g)})}}:function(d,p,f,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof d=="string")return n(d,p,f);var y=d.type==="application/octet-stream",w=/constructor/i.test(l.HTMLElement)||l.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||y&&w||c)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var E=S.result;E=v?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=E:location=E,g=null},S.readAsDataURL(d)}else{var x=l.URL||l.webkitURL,A=x.createObjectURL(d);g?g.location=A:location.href=A,g=null,setTimeout(function(){x.revokeObjectURL(A)},4e4)}});l.saveAs=h.saveAs=h,s.exports=h})})(pd)),pd.exports}var hH=uH();const ZA=[{id:"gpt-4o",name:"GPT-4o (OpenAI)",baseUrl:"https://api.openai.com/v1"},{id:"gpt-4o-mini",name:"GPT-4o Mini (OpenAI)",baseUrl:"https://api.openai.com/v1"},{id:"deepseek-chat",name:"DeepSeek V3 (DeepSeek)",baseUrl:"https://api.deepseek.com"},{id:"deepseek-reasoner",name:"DeepSeek R1 (DeepSeek)",baseUrl:"https://api.deepseek.com"},{id:"custom",name:"Custom Model (Compatible)",baseUrl:""}];function dH(){const[s,t]=L.useState([]),[e,n]=L.useState(""),[i,a]=L.useState("auto"),[l,c]=L.useState("gpt-4o-mini"),[h,d]=L.useState("https://api.openai.com/v1"),[p,f]=L.useState(!1),[g,y]=L.useState(!0),w=O=>{c(O);const D=ZA.find(N=>N.id===O);D&&D.id!=="custom"&&d(D.baseUrl)},v=O=>{const D=O.map(N=>({...N,id:q6(),status:"idle",progress:0,file:N}));t(N=>[...N,...D])},S=O=>{t(D=>D.filter(N=>N.id!==O))},x=async()=>{if(!e){ca.error(" API Key");const O=document.getElementById("settings-panel");O&&(O.scrollIntoView({behavior:"smooth"}),O.classList.add("ring-2","ring-primary"),setTimeout(()=>O.classList.remove("ring-2","ring-primary"),2e3));return}f(!0),y(!1);for(let O=0;O<s.length;O++){const D=s[O];if(D.status!=="completed")try{A(D.id,"processing",0);const N=await YU(D);A(D.id,"translating",10);const I={apiKey:e,targetLang:i,model:l==="custom"?void 0:l,baseUrl:h||void 0};let G=l,W;const F={...I,model:l==="custom"?R:l};N.type==="docx"?W=await aH(N.structure,F,Y=>{A(D.id,"translating",10+Y*.8)}):N.type==="md"?W=await oH(N.content,F,Y=>{A(D.id,"translating",10+Y*.8)}):(N.type==="pdf"&&ca.info("PDF"),W=await lH(N.content,F,Y=>{A(D.id,"translating",10+Y*.8)})),A(D.id,"completed",100),t(Y=>Y.map(k=>(k.id===D.id&&(k.resultBlob=W),k))),ca.success(`${D.name} `)}catch(N){console.error(N),A(D.id,"error",0,N.message),ca.error(`${D.name} : ${N.message}`)}}f(!1)},A=(O,D,N,I)=>{t(G=>G.map(W=>W.id===O?{...W,status:D,progress:N,error:I}:W))},E=O=>{if(O.resultBlob){let D=O.name.split(".").pop();O.type==="application/pdf"&&(D="txt"),hH.saveAs(O.resultBlob,`translated_${O.name.replace(`.${D}`,"")}.${D}`)}},[R,T]=L.useState("gpt-3.5-turbo");return $.jsxs("div",{className:"min-h-screen bg-background text-foreground font-sans selection:bg-primary/20","data-source":"src/pages/Home.tsx:190:5",children:[$.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60","data-source":"src/pages/Home.tsx:191:7",children:$.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between","data-source":"src/pages/Home.tsx:192:9",children:[$.jsxs("div",{className:"flex items-center gap-2","data-source":"src/pages/Home.tsx:193:11",children:[$.jsx("div",{className:"bg-primary/10 p-2 rounded-lg","data-source":"src/pages/Home.tsx:194:13",children:$.jsx(WO,{className:"w-5 h-5 text-primary"})}),$.jsx("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-primary/70","data-source":"src/pages/Home.tsx:197:13",children:"DocTranslator"})]}),$.jsxs("div",{className:"flex items-center gap-4","data-source":"src/pages/Home.tsx:202:11",children:[$.jsxs(Bc,{variant:"ghost",size:"sm",onClick:()=>y(!g),children:[$.jsx(XO,{className:Dn("w-4 h-4 mr-2 transition-transform",g&&"rotate-180")}),""]}),$.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noreferrer",className:"text-xs text-muted-foreground hover:text-primary","data-source":"src/pages/Home.tsx:207:13",children:" API Key"})]})]})}),$.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-4xl","data-source":"src/pages/Home.tsx:214:7",children:[$.jsx("div",{className:Dn("grid transition-all duration-300 ease-in-out overflow-hidden",g?"grid-rows-[1fr] opacity-100 mb-8":"grid-rows-[0fr] opacity-0 mb-0"),"data-source":"src/pages/Home.tsx:217:9",children:$.jsx("div",{className:"min-h-0","data-source":"src/pages/Home.tsx:221:13",children:$.jsx(NS,{id:"settings-panel",className:"p-6 border-primary/20 shadow-lg bg-card/50 backdrop-blur-sm",children:$.jsxs("div",{className:"grid gap-6","data-source":"src/pages/Home.tsx:223:21",children:[$.jsxs("div",{className:"grid md:grid-cols-2 gap-6","data-source":"src/pages/Home.tsx:225:25",children:[$.jsxs("div",{className:"space-y-2","data-source":"src/pages/Home.tsx:226:29",children:[$.jsxs(Ch,{htmlFor:"api-key",className:"flex items-center gap-2",children:[$.jsx(IO,{className:"w-4 h-4"})," API Key"]}),$.jsx(hg,{id:"api-key",type:"password",placeholder:"sk-...",value:e,onChange:O=>n(O.target.value),className:"font-mono bg-background/50"})]}),$.jsxs("div",{className:"space-y-2","data-source":"src/pages/Home.tsx:240:29",children:[$.jsxs(Ch,{className:"flex items-center gap-2",children:[$.jsx(zO,{className:"w-4 h-4"})," "]}),$.jsxs(GS,{value:i,onValueChange:O=>a(O),children:[$.jsx(XS,{className:"bg-background/50",children:$.jsx(qS,{})}),$.jsxs(YS,{children:[$.jsx(Dh,{value:"auto",children:" (Auto)"}),$.jsx(Dh,{value:"zh",children:" (Chinese)"}),$.jsx(Dh,{value:"en",children:"English"})]})]})]})]}),$.jsxs("div",{className:"grid md:grid-cols-2 gap-6","data-source":"src/pages/Home.tsx:258:25",children:[$.jsxs("div",{className:"space-y-2","data-source":"src/pages/Home.tsx:259:29",children:[$.jsxs(Ch,{className:"flex items-center gap-2",children:[$.jsx(_O,{className:"w-4 h-4"})," "]}),$.jsxs(GS,{value:l,onValueChange:w,children:[$.jsx(XS,{className:"bg-background/50",children:$.jsx(qS,{})}),$.jsx(YS,{children:ZA.map(O=>$.jsx(Dh,{value:O.id,children:O.name},O.id))})]}),l==="custom"&&$.jsx(hg,{placeholder:" ( claude-3-opus)",value:R,onChange:O=>T(O.target.value),className:"mt-2 font-mono text-sm"})]}),$.jsxs("div",{className:"space-y-2","data-source":"src/pages/Home.tsx:284:29",children:[$.jsxs(Ch,{className:"flex items-center gap-2",children:[$.jsx(GO,{className:"w-4 h-4"})," API Endpoint (Base URL)"]}),$.jsx(hg,{value:h,onChange:O=>d(O.target.value),placeholder:"https://api.openai.com/v1",className:"font-mono bg-background/50"}),$.jsx("p",{className:"text-xs text-muted-foreground","data-source":"src/pages/Home.tsx:294:33",children:" DeepSeek https://api.deepseek.com"})]})]})]})})})}),$.jsxs("div",{className:"space-y-8","data-source":"src/pages/Home.tsx:303:9",children:[$.jsxs("div",{className:"text-center space-y-2 mb-10","data-source":"src/pages/Home.tsx:304:13",children:[$.jsx("h2",{className:"text-3xl font-bold tracking-tight","data-source":"src/pages/Home.tsx:305:17",children:""}),$.jsx("p",{className:"text-muted-foreground max-w-lg mx-auto","data-source":"src/pages/Home.tsx:306:17",children:" .docx, .md, .pdf  AI "})]}),$.jsx(rz,{onFilesAdded:v,isProcessing:p}),$.jsx(az,{files:s,onRemove:S,onProcess:()=>{x()}}),s.some(O=>O.status==="completed")&&$.jsxs("div",{className:"mt-8 space-y-4","data-source":"src/pages/Home.tsx:327:17",children:[$.jsxs("h3",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2","data-source":"src/pages/Home.tsx:328:22",children:[$.jsx(Xy,{className:"w-4 h-4 text-green-500"})," "]}),$.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3","data-source":"src/pages/Home.tsx:331:22",children:s.filter(O=>O.status==="completed").map(O=>$.jsxs(NS,{className:"p-4 flex flex-col gap-3 hover:shadow-md transition-shadow",children:[$.jsxs("div",{className:"flex items-start justify-between","data-source":"src/pages/Home.tsx:334:33",children:[$.jsx("div",{className:"truncate font-medium pr-2","data-source":"src/pages/Home.tsx:335:37",children:O.name}),$.jsx("div",{className:"bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded-full","data-source":"src/pages/Home.tsx:336:37",children:"Success"})]}),$.jsxs(Bc,{size:"sm",variant:"secondary",className:"w-full mt-auto gap-2 group",onClick:()=>E(O),children:[$.jsx(DO,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),""]})]},O.id))})]})]})]}),$.jsx("footer",{className:"mt-20 py-6 border-t text-center text-sm text-muted-foreground","data-source":"src/pages/Home.tsx:356:7",children:$.jsx("p",{"data-source":"src/pages/Home.tsx:357:9",children:" 2026 DocTranslator. Pure Frontend Demo."})})]})}function fH(){return $.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-8","data-source":"src/pages/NotFound.tsx:6:5",children:[$.jsx("h1",{className:"text-6xl font-bold mb-4","data-source":"src/pages/NotFound.tsx:7:7",children:"404"}),$.jsx("p",{className:"text-muted-foreground mb-8","data-source":"src/pages/NotFound.tsx:8:7",children:"Page not found"}),$.jsx(WB,{href:"/",children:$.jsx(Bc,{children:"Go Home"})})]})}function pH(){return $.jsx(lC,{hook:uC,children:$.jsxs(KB,{children:[$.jsx(f1,{path:"/",component:dH}),$.jsx(f1,{component:fH})]})})}function mH(){return $.jsx(t3,{children:$.jsx(n3,{defaultTheme:"light",children:$.jsxs(kB,{children:[$.jsx(kN,{}),$.jsx(pH,{})]})})})}pO.createRoot(document.getElementById("root")).render($.jsx(L.StrictMode,{children:$.jsx(mH,{})}));
